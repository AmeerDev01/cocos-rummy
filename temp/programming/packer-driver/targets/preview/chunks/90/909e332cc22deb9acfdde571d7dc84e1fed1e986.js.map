{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth/Slot/Repositories/SocketRepository.ts"],"names":["SocketRepository","sys","BaseRepository","initConfig","wsEnv","isTest","online","socketIp","localStorage","getItem","local1","local2","configUrl","constructor","userSwitch","userServerData","memberAssetGoldPieces","memberId","tableId","gameType","lv","rollerLaunchResult","socketConfig","env","Promise","reslove","reject","then","response","item","gameConfig","find","id","gameId","Object","assign","ws","token"],"mappings":"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","sourcesContent":["import { sys } from \"cc\"\r\nimport { BaseRepository } from \"./BaseRepository\"\r\nimport { getUrlParams } from \"../GodWealth_utils\"\r\nimport {initConfig} from \"db://assets/script/hall/config\";\r\n\r\nconst wsEnv = {\r\n\tisTest: false,\r\n\tonline: {\r\n\t\tsocketIp: \"ws://54.251.66.82:15003/ws\",\r\n\t\t\"token\": sys.localStorage.getItem(\"token\"),\r\n\t\t\"gameId\": 6,\r\n\t\t\"roomId\": \"1672958541691883522\"\r\n\t},\r\n\tlocal1: {\r\n\t\tsocketIp: \"ws://192.168.110.180:15003/ws\",\r\n\t\t\"token\": \"eyJhbGciOiJIUzI1NiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAE3OSwoCMRBF0b3UOIH8q9I7cOwKKqbECNEgGTSIezftyOnlcXhvaDxhs4mQQnKYFcg-foFCtOYI99lgA19cJI5Fh2txOlhjdUnitKVLYZYaKyMo6NKLvE71INA5JL9goow5RFQwbs-HLM0Yu8azdTlP7uP_QfL58wW0590YlwAAAA.9BQAUrc0Nx-O8_g6jMcCtlCiWmzId9zaxOJoEy6slTs\",\r\n\t\t\"gameId\": 6,\r\n\t\t\"roomId\": \"1673666642699055106\"\r\n\t},\r\n\tlocal2: {\r\n\t\tsocketIp: \"ws://192.168.110.218:15003/ws\",\r\n\t\t\"token\": \"eyJhbGciOiJIUzI1NiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAE2NQQoDIQwA_5KzQjQxmv1Bz32BuypYEJbioVD69630UuY2h5k39Dxhc5KUyKXoDdTX-RNKIks8ZocNOJSm6VDbqqhlZG_zEclKcw33oFyQwcCoY6_PW1mJqAlDpC-MK04GZh_1PvM4_58ew-cCIHa_h4kAAAA.T8633CWVFeRPedw7EOOzL5tA3fMs-jFcJE_gBwzwG5Q\",\r\n\t\t\"gameId\": 6,\r\n\t\t\"roomId\": \"1674774075278364674\"\r\n\t}\r\n}\r\n\r\nconst configUrl = \"http://54.251.66.82:10001/hall/api/game/wsList\"\r\nexport class SocketRepository extends BaseRepository {\r\n\tconstructor() {\r\n\t\tsuper()\r\n\t}\r\n\tpublic socketConfig(): Promise<{ socketIp: string, token: string, gameId: number, roomId: string }> {\r\n\t\tconst env = wsEnv.online\r\n\t\tif (wsEnv.isTest) {\r\n\t\t\treturn new Promise((reslove, reject) => {\r\n\t\t\t\treslove(wsEnv.local2)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\treturn new Promise((reslove, reject) => {\r\n                initConfig().then((response) => {\r\n                    const item = response.gameConfig.find(item => item.id === env.gameId)\r\n                    if (item) {\r\n                        reslove(Object.assign(env, {\r\n                            socketIp: item.ws,\r\n                            token: sys.localStorage.getItem(\"token\")\r\n                        }))\r\n                    } else {\r\n                        reject(\"gameID未找到\")\r\n                    }\r\n                })\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t/**用户下注的档位序号 */\r\n\tpublic userSwitch: number = 1\r\n\r\n\tpublic userServerData = {\r\n\t\tmemberAssetGoldPieces: 0,//10300000,\r\n\t\tmemberId: \"\",//\"1668156680288485378\",\r\n\t\ttableId: \"\",//\"1660486324357214210\"\r\n\t\tgameType: 0, //初始的游戏\r\n\t\tlv: 0\r\n\t}\r\n\t/**下注之后获取的最后一次结果数据 */\r\n\tpublic rollerLaunchResult = {\r\n\t\t\"dl\": {\r\n\t\t\t\"si\": [{\r\n\t\t\t\t/**本轮结算之后的余额 */\r\n\t\t\t\t\"bl\": 0,\r\n\t\t\t\t/**扣除下注金额之后的余额 */\r\n\t\t\t\t\"blab\": 13210000,\r\n\t\t\t\t/**转之前的余额 */\r\n\t\t\t\t\"blb\": 13300000,\r\n\t\t\t\t/**气泡奖励 */\r\n\t\t\t\t\"bubble\": 0,\r\n\t\t\t\t// /**投注金额 */\r\n\t\t\t\t// \"cs\": 0,\r\n\t\t\t\t\"iconStay\": 0,\r\n\t\t\t\t/**要定住的图标 */\r\n\t\t\t\t\"fixedChessboardIcon\": [],\r\n\t\t\t\t/**这一此转动获得的奖励 */\r\n\t\t\t\t\"ctw\": 0,\r\n\t\t\t\t/**免费游戏的图标和位置 */\r\n\t\t\t\t\"freegame\": { \"1\": 150000 },\r\n\t\t\t\t/**剩余小游戏次数 */\r\n\t\t\t\t\"freeCount\": 20,\r\n\t\t\t\t/**免费游戏（小游戏）的得分奖励 */\r\n\t\t\t\t\"freeGameAmount\": 0,\r\n\t\t\t\t\"gameType\": 0,\r\n\t\t\t\t/**本轮中奖的道具及该道具对应的奖励金额 */\r\n\t\t\t\t\"lw\": { \"6\": 0 },\r\n\t\t\t\t/**获得的奖励倍数 */\r\n\t\t\t\t\"magnification\": 10,\r\n\t\t\t\t/**盈亏情况 */\r\n\t\t\t\t\"np\": 0,\r\n\t\t\t\t/**\t5条滚轴对应的道具ID【上升或下降前】 */\r\n\t\t\t\t\"rl\": [[9, 10, 11], [6, 7, 8], [6, 7, 8], [2, 3, 4], [7, 8, 9]],\r\n\t\t\t\t/**滚轴Id */\r\n\t\t\t\t\"rollerId\": [9, 39, 39, 24, 29],\r\n\t\t\t\t/**页面出现\"上升/下降\"图标的个数 */\r\n\t\t\t\t\"sc\": 0,\r\n\t\t\t\t/**进入的小游戏ID，0不进入，1对应小游戏1,2对应小游戏2。 */\r\n\t\t\t\t\"sgb\": 0,\r\n\t\t\t\t/**每条线的投注额 */\r\n\t\t\t\t\"tb\": 10000,\r\n\t\t\t\t/**本轮投注总额 */\r\n\t\t\t\t\"tbb\": 90000,\r\n\t\t\t\t/**总奖励 */\r\n\t\t\t\t\"tw\": 0,\r\n\t\t\t\t/**中奖的道具ID以及位置，格式为：“中奖图标ID”[[滚轴id,滚轴上的图标ID]] */\r\n\t\t\t\t\"wp\": { \"2\": [[0, 0], [1, 0], [2, 0]] }\r\n\t\t\t}]\r\n\t\t}\r\n\t}\r\n}\r\n"]}