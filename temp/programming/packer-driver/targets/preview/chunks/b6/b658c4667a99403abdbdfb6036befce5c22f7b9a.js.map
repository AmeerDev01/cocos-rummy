{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandar/viewModel/BandarTitleViewModel.ts"],"names":["confirmDoneAfterFn","_decorator","Animation","Tween","Vec3","find","ViewModel","StoreInject","getStore","global","sourceManageSelector","PrefabPathDefine","EffectType","SetViewModel","RuleViewModel","changeAllWinUsersAction","changeCancelBetDataAction","changeGoldDataAction","setNewBetDataAction","betAreaViewModel","setCountDownAction","setGameStatusAction","setInitGameStatusAction","setTipsAction","setAllCardTypeAction","setBankerPokerAction","setBlackPokerAction","setBlockNumAction","setDiamondPokerAction","setFarmhouseNumAction","setHeartNumAction","setPlumPokerAction","setRedPokerAction","setSakuraNumAction","setSpadeNumAction","setWinAreaAction","changeResult1Action","changeResult2Action","changeResult3Action","changeResult4Action","ccclass","property","TitleViewModel","constructor","isShowMenu","begin","setEvent","returnHall","clearCacheData","comp","clearAllBetAreaGold","betAreaInfo","clear","closeSubGame","openMenuPanel","openMenu","openHelpPanel","openRule","openSetPanel","openSet","titleNode","viewNode","getChildByName","titleAnimation","getComponent","play","tw","to","scale","start","nodeWrap","setViewModel","mountView","getFile","MAIN_SET","source","appendTo","effectType","EFFECT1","isModal","onClosePanel","unMount","EFFECT2","connect","ruleViewModel","MAIN_RULE","dispatch","storeState","store","getState","inject","state","betData","bet","memberBet"],"mappings":"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","sourcesContent":["import { _decorator, assetManager,AssetManager, Component, instantiate, Node, Animation, Tween, Vec3, find } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { Bandar_title, IProps, IEvent } from \"../components/Bandar_title\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from '../store';\r\nimport { global } from '../../../hall';\r\nimport { sourceManageSelector } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { EffectType } from '../../../utils/NodeIOEffect';\r\nimport SetViewModel from './BandarSetViewModel';\r\nimport RuleViewModel from './BandarRuleViewModel';\r\nimport { changeAllWinUsersAction, changeCancelBetDataAction, changeGoldDataAction, setNewBetDataAction } from '../store/actions/bet';\r\nimport { betAreaViewModel } from './BandarGameBoardViewModel';\r\nimport { setCountDownAction, setGameStatusAction, setInitGameStatusAction, setTipsAction } from '../store/actions/game';\r\nimport { GameStatus } from '../type';\r\nimport { setAllCardTypeAction, setBankerPokerAction, setBlackPokerAction, setBlockNumAction, setDiamondPokerAction, setFarmhouseNumAction, setHeartNumAction, setPlumPokerAction, setRedPokerAction, setSakuraNumAction, setSpadeNumAction, setWinAreaAction } from '../store/actions/pokerDetail';\r\nimport { changeResult1Action, changeResult2Action, changeResult3Action, changeResult4Action } from '../store/actions/history';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport function confirmDoneAfterFn(){\r\n\r\n}\r\n\r\nexport let setViewModel:SetViewModel\r\nexport let ruleViewModel:RuleViewModel\r\n@StoreInject(getStore())\r\nclass TitleViewModel extends ViewModel<Bandar_title, IProps, IEvent> {\r\n  private isShowMenu:boolean=false\r\n\r\n    constructor() {\r\n        super('Bandar_title')     \r\n      }\r\n    \r\n      protected begin() { \r\n        this.setEvent({\r\n          returnHall:()=>{\r\n            this.clearCacheData()\r\n            betAreaViewModel.comp.clearAllBetAreaGold();\r\n            betAreaViewModel.comp.betAreaInfo.clear();\r\n            global.closeSubGame();\r\n          },\r\n          openMenuPanel:()=>{\r\n            this.openMenu()\r\n          },\r\n          openHelpPanel:()=>{\r\n            this.openRule()\r\n          },\r\n    \r\n          openSetPanel:()=>{\r\n            this.openSet();\r\n          },\r\n        })\r\n    }\r\n    \r\n    public  openMenu(){\r\n      const titleNode:Node= this.viewNode.getChildByName(\"props_mask_titrle\")\r\n      const titleAnimation=this.viewNode.getChildByName(\"props_mask_titrle\").getComponent(Animation)\r\n      if(!this.isShowMenu){\r\n        titleAnimation.play()    \r\n      }else{\r\n        const tw=new Tween(titleNode).to(0.2,{scale:new Vec3(1,0,0)}).start()\r\n      }\r\n      this.isShowMenu=!this.isShowMenu\r\n      \r\n    }\r\n    public openSet(nodeWrap?: Node) {\r\n      setViewModel = new SetViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_SET).source)\r\n        .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n          onClosePanel: () => {\r\n            setViewModel.unMount(EffectType.EFFECT2)\r\n          }\r\n        }).connect()\r\n    }\r\n    public openRule(nodeWrap?: Node) {\r\n      ruleViewModel = new RuleViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_RULE).source)\r\n        .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n          onClosePanel: () => {\r\n            ruleViewModel.unMount(EffectType.EFFECT2)  \r\n          }\r\n        }).connect()\r\n    }\r\n  \r\n  public clearCacheData() {\r\n      this.dispatch(changeGoldDataAction({}));\r\n      this.dispatch(setNewBetDataAction(null)); \r\n      this.dispatch(setGameStatusAction(null));\r\n      this.dispatch(setInitGameStatusAction(null))\r\n      this.dispatch(changeAllWinUsersAction(null));\r\n      this.dispatch(setWinAreaAction([]));\r\n      this.dispatch(setBankerPokerAction(null));\r\n      this.dispatch(setBlackPokerAction(null));\r\n      this.dispatch(setRedPokerAction(null));\r\n      this.dispatch(setPlumPokerAction(null));\r\n      this.dispatch(setDiamondPokerAction(null));\r\n      this.dispatch(setSpadeNumAction(null));\r\n      this.dispatch(setHeartNumAction(null));\r\n      this.dispatch(setSakuraNumAction(null));\r\n      this.dispatch(setBlockNumAction(null));\r\n      this.dispatch(setFarmhouseNumAction(null));\r\n      this.dispatch(setTipsAction(null))\r\n      this.dispatch(setCountDownAction(0));\r\n      this.dispatch(setAllCardTypeAction(null));\r\n      this.dispatch(setSpadeNumAction(null));\r\n      this.dispatch(setHeartNumAction(null));\r\n      this.dispatch(setSakuraNumAction(null));\r\n      this.dispatch(setBlockNumAction(null));\r\n      this.dispatch(setFarmhouseNumAction(null));\r\n      this.dispatch(changeCancelBetDataAction(null));\r\n      this.dispatch(changeResult1Action([]));\r\n      this.dispatch(changeResult2Action([]));\r\n      this.dispatch(changeResult3Action([]));\r\n      this.dispatch(changeResult4Action([]));\r\n\r\n      \r\n    }\r\n      \r\n      public connect() {\r\n        const storeState = this.store.getState() as StateType;\r\n\r\n        this.inject({}, (state: StateType) => {\r\n          return {\r\n            betData: state.bet.betData,\r\n            memberBet: state.bet.memberBet,\r\n            \r\n          }\r\n        })\r\n        return this\r\n      }\r\n\r\n}\r\n\r\nexport default TitleViewModel\r\n"]}