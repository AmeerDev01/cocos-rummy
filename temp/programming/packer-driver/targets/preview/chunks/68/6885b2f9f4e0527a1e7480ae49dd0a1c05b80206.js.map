{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth/Slot/Component/GodWealth_DialogWin.ts"],"names":["_decorator","Component","Label","Node","tween","UIOpacity","Vec3","ccclass","property","DialogType","GodWealth_DialogWin","timer","showNode","start","bindEvent","bindUI","showDialog","dialogType","amount","keepTime","cb","insider","setScale","uiOpacity","getComponent","opacity","active","SpriteSplash","getChildByName","string","to","scale","easing","call","window","setTimeout","hideDialog","node","destroy","clearTimeout","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, tween, UIOpacity, Vec2, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport enum DialogType {\r\n    BIG_WIN = \"bigWin\",\r\n    JACKPOT = \"jackpot\",\r\n    MEGA_WIN = \"megaWin\",\r\n    SUPER_WIN = \"superWin\",\r\n    SETTLE = \"settle\",\r\n    YOUWON=\"youWon\",\r\n    FREQUENCY=\"frequency\",\r\n    TREASUREBOWL=\"treasurebowl\",\r\n}\r\n\r\n@ccclass('GodWealth_DialogWin')\r\nexport class GodWealth_DialogWin extends Component {\r\n    @property(Node)\r\n    insider: Node = null\r\n\r\n    @property(Node)\r\n    bigWin: Node = null\r\n\r\n    @property(Node)\r\n    jackpot: Node = null\r\n\r\n    @property(Node)\r\n    megaWin: Node = null\r\n\r\n    @property(Node)\r\n    superWin: Node = null\r\n\r\n    @property(Node)\r\n    settle: Node = null\r\n\r\n    @property(Node)\r\n    SpriteSplash: Node = null\r\n    @property(Node)\r\n    youWon: Node = null\r\n\r\n    @property(Node)\r\n    frequency: Node = null\r\n\r\n    @property(Node)\r\n    treasurebowl: Node = null\r\n    start() {\r\n\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n    }\r\n\r\n    protected bindUI(): void {\r\n    }\r\n\r\n    private timer: number\r\n    private showNode: Node\r\n    /**\r\n     * 大奖弹窗\r\n     * @param dialogType 展示类型\r\n     * @param amount 展示金额\r\n     * @param keepTime 持续时间（若传0，则不自动关闭）\r\n     * @param cb 回调函数\r\n     */\r\n    public showDialog(dialogType: DialogType, amount: number, keepTime: number, cb?: () => void) {\r\n        this.insider.setScale(new Vec3(0, 0, 0))\r\n        const uiOpacity = this.insider.getComponent(UIOpacity)\r\n        uiOpacity.opacity = 0;\r\n        this.showNode = this[dialogType] as Node\r\n        this.showNode.active = true;\r\n        this.SpriteSplash.active = false;\r\n        this.showNode.getChildByName(\"score\").getComponent(Label).string = amount + ''//.formatAmountWithCommas()\r\n        tween(this.insider).to(0.5, { scale: new Vec3(1, 1, 0) }, { easing: \"backOut\" }).start()\r\n        tween(uiOpacity).to(0.2, { opacity: 255 }).call(() => {\r\n            this.SpriteSplash.active = true;\r\n        }).start()\r\n        keepTime && (this.timer = window.setTimeout(() => {\r\n            this.hideDialog()\r\n            this.node.destroy()\r\n            cb && cb()\r\n        }, keepTime))\r\n    }\r\n\r\n    public hideDialog() {\r\n        const uiOpacity = this.insider.getComponent(UIOpacity)\r\n        this.SpriteSplash.active = false;\r\n        tween(this.insider).to(0.3, { scale: new Vec3(0, 0, 0) }).start()\r\n        tween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n            this.showNode.active = false\r\n        }).start()\r\n        this.timer && window.clearTimeout(this.timer)\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}