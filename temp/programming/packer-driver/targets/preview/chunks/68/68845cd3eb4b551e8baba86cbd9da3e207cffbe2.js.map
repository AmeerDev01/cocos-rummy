{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/yxx/components/Yxx_Footer.ts"],"names":["_decorator","Animation","Button","instantiate","Label","Node","Sprite","Toggle","tween","Vec3","BaseComponent","formatNumber","loadRemoteImage","omitStr","config","sourceManageSeletor","playBtnClick","AnimationStatus","GameStatus","FontPathDefine","global","setTipType","ccclass","property","Yxx_Footer","propertyNode","props_bet_chip_group","props_bet_chip","props_user_name_label","props_user_glod_label","props_user_head","props_online_label","props_online_bg","props_gold_up","props_btn_ulang","props_btn_addGold","props_layout_lock","props_btn_shop","props_tips_gold","props_tips_vip","props_remind_noBet","props_remind_repeat","props","myHead","lastBet","newBetData","onlineNumber","animationStatus","gameStatus","selectChip","chipTypes","value","powers","events","repeatLastBet","openShop","chipNodeNamePrefix","start","initState","bindEvent","node","on","EventType","TOUCH_END","isBet","dispatch","time","Date","now","Math","random","type","useProps","key","cur","pre","loadHeadSprite","icon","string","name","gameOption","nicknameOmitLength","updateGoldLabel","chipShowHandle","HEAD_ADD_GOLD","playAddGlodAnimation","winloss","RECHANGE_ADD_GOLD","BET","isMyBet","index","seatNumber","isFly","playOnlineAnimation","updatePowerShow","getRemindRepeatNode","gold","loadHead","headUrl","then","spriteFrame","bindUI","initChip","active","removeAllChildren","startX","offset","forEach","chip","createChip","addChild","position","setPosition","bindChipEvent","chips","getChildByName","checkMark","sf","getFile","fileUrl","source","getComponent","chipLabel","valueStr","font","fontUrl","checkMarkChipLabel","getLockBet","isLockBet","unlockBetMinGold","length","chipNodes","children","filter","v","startsWith","myGold","updateTipsValue","updateChipStatus","getChipConfig","i","isChecked","disable","grayscale","BLACK_BET","enabled","e","find","play","startPosition","x","y","by","call","scheduleOnce","power","toLowerCase","num","Number","formatAmountWithCommas","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Animation, Button, Game, instantiate, Label, log, math, Node, Sprite, SpriteFrame, Toggle, tween, UIRenderer, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { formatNumber, getGoldShorten, loadRemoteImage, omitStr } from '../../../utils/tool';\r\nimport config from '../config';\r\nimport { sourceManageSeletor } from '../index';\r\nimport { playBtnClick } from '../index';\r\nimport { AnimationStatus, BetData, GameStatus, HeadType, PowerVo } from '../type';\r\nimport { FontPathDefine } from '../sourceDefine/fontDefine';\r\nimport { global } from '../../../hall';\r\nimport { setTipType } from '../store/actions/gameFlow';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\tmyHead: HeadType,\r\n\tlastBet: BetData[],\r\n\t/**最新的下注信息 */\r\n\tnewBetData: BetData,\r\n\tonlineNumber: number,\r\n\t/**动画状态 */\r\n\tanimationStatus: AnimationStatus,\r\n\t/**游戏状态 */\r\n\tgameStatus: GameStatus;\r\n\t/**选择的筹码 */\r\n\tselectChip: number,\r\n\t/**权限验证 */\r\n\tpowers: PowerVo[]\r\n}\r\nexport interface IEvent {\r\n\tselectChip: (value: number) => void,\r\n\t/**重复上一局下注 */\r\n\trepeatLastBet: (lastBet: BetData[]) => void\r\n\topenShop: () => void,\r\n}\r\n\r\n@ccclass('Yxx_Footer')\r\nexport class Yxx_Footer extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_bet_chip_group: new Node(),\r\n\t\tprops_bet_chip: new Node(),\r\n\t\tprops_user_name_label: new Label(),\r\n\t\tprops_user_glod_label: new Label(),\r\n\t\tprops_user_head: new Sprite(),\r\n\t\tprops_online_label: new Label(),\r\n\t\tprops_online_bg: new Node(),\r\n\t\tprops_gold_up: new Node(),\r\n\t\tprops_btn_ulang: new Button(),\r\n\t\tprops_btn_addGold: new Button(),\r\n\t\tprops_layout_lock: new Node(),\r\n\t\tprops_btn_shop: new Button(),\r\n\t\tprops_tips_gold: new Node(),\r\n\t\tprops_tips_vip: new Node(),\r\n\t\tprops_remind_noBet: new Node(),\r\n\t\tprops_remind_repeat: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tmyHead: null,\r\n\t\tlastBet: [],\r\n\t\tnewBetData: null,\r\n\t\tonlineNumber: 0,\r\n\t\tanimationStatus: null,\r\n\t\tgameStatus: null,\r\n\t\tselectChip: config.chipTypes[0].value,\r\n\t\tpowers: []\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tselectChip: (value: number) => { },\r\n\t\trepeatLastBet: (lastBet: BetData[]) => { },\r\n\t\topenShop: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_ulang.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.isBet()) {\r\n\t\t\t\tthis.events.repeatLastBet(this.props.lastBet);\r\n\t\t\t\tplayBtnClick();\r\n\t\t\t} else {\r\n\t\t\t\t// if (!this.propertyNode && !this.propertyNode.props_remind_noBet) { return };\r\n\t\t\t\t// this.propertyNode.props_remind_noBet.active = true;\r\n\t\t\t\t// tween(this.propertyNode.props_remind_noBet)\r\n\t\t\t\t// .delay(2)\r\n\t\t\t\t// .call(() => { \r\n\t\t\t\t// \tthis.propertyNode.props_remind_noBet.active  = false;\r\n\t\t\t\t// })\r\n\t\t\t\t// \t.start()\r\n\t\t\t\t// return\r\n\r\n\t\t\t\tthis.dispatch(setTipType({\r\n\t\t\t\t\ttime: Date.now() + Math.random(),\r\n\t\t\t\t\ttype: 0,\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_btn_addGold.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.openShop();\r\n\t\t\tplayBtnClick();\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_btn_shop.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.openShop();\r\n\t\t\tplayBtnClick();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\t// console.log(\"footer useProps == \", key, value);\r\n\t\tif (key === 'myHead' && value.cur) { // 第一次初始化调用\r\n\t\t\t// this.loadHead(value.cur.headUrl);\r\n\t\t\t// this.props.myHead && console.log(\"footer == \", key, this.props.myHead.gold);\r\n\t\t\tif (!value.pre) {\r\n\t\t\t\tglobal.loadHeadSprite(value.cur.icon, this.propertyNode.props_user_head);\r\n\t\t\t\tthis.propertyNode.props_user_name_label.string = omitStr(value.cur.name, config.gameOption.nicknameOmitLength);\r\n\t\t\t}\r\n\t\t\tthis.updateGoldLabel();\r\n\t\t\tthis.chipShowHandle();\r\n\t\t} else if (key === 'onlineNumber') {\r\n\t\t\tthis.propertyNode.props_online_label.string = this.props.onlineNumber + \"\";\r\n\t\t} else if (key === 'animationStatus' && this.props.myHead) {\r\n\t\t\tif (value.cur === AnimationStatus.HEAD_ADD_GOLD) {\r\n\t\t\t\t// log(\"HEAD_ADD_GOLD: \", this.props.myHead.winloss, this.props.myHead.gold);\r\n\t\t\t\tthis.playAddGlodAnimation(this.props.myHead.winloss);\r\n\t\t\t\tthis.updateGoldLabel();\r\n\t\t\t\t// this.chipShowHandle();\r\n\t\t\t} else if (value.cur === AnimationStatus.RECHANGE_ADD_GOLD) {\r\n\t\t\t\t// this.playAddGlodAnimation(this.props.myHead.rechange);\r\n\t\t\t\tthis.updateGoldLabel();\r\n\t\t\t\tif (this.props.gameStatus === GameStatus.BET) {\r\n\t\t\t\t\tthis.chipShowHandle();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (key === 'newBetData' && value.cur) {\r\n\t\t\tif (!value.cur.isMyBet && value.cur.index >= config.gameOption.seatNumber && value.cur.isFly) {\r\n\t\t\t\tthis.playOnlineAnimation();\r\n\t\t\t}\r\n\t\t\tif (value.cur.isMyBet) {\r\n\t\t\t\tthis.updateGoldLabel();\r\n\t\t\t\t// this.chipShowHandle();\r\n\t\t\t}\r\n\t\t} else if (key === 'gameStatus') {\r\n\t\t\tif (value.cur === GameStatus.BET) {\r\n\t\t\t\tthis.updateGoldLabel();\r\n\t\t\t\tthis.chipShowHandle();\r\n\t\t\t}\r\n\t\t} else if (key === 'powers') {\r\n\t\t\tthis.updatePowerShow();\r\n\t\t\tthis.chipShowHandle();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isBet() {\r\n\t\treturn this.props.gameStatus === GameStatus.BET;\r\n\t}\r\n\r\n\tpublic getRemindRepeatNode() {\r\n\t\treturn this.propertyNode.props_remind_repeat\r\n\t}\r\n\r\n\tprivate updateGoldLabel() {\r\n\t\tthis.propertyNode.props_user_glod_label.string = formatNumber(this.props.myHead.gold);\r\n\t\t// this.propertyNode.props_user_glod_label.string = getGoldShorten(this.props.myHead.gold);\r\n\t}\r\n\r\n\t/**\r\n\t * 加载玩家头像\r\n\t * @param headUrl \r\n\t */\r\n\tprivate loadHead(headUrl: string): void {\r\n\t\theadUrl && loadRemoteImage(headUrl).then(spriteFrame => {\r\n\t\t\tthis.propertyNode.props_user_head.spriteFrame = spriteFrame as SpriteFrame;\r\n\t\t});\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.initChip();\r\n\t\tthis.propertyNode.props_layout_lock.active = false;\r\n\t}\r\n\r\n\tprivate initChip(): void {\r\n\t\tthis.propertyNode.props_bet_chip_group.removeAllChildren();\r\n\t\tconst startX = -306;\r\n\t\tconst offset = 110;\r\n\t\tconfig.chipTypes.forEach((chip, index) => {\r\n\t\t\tconst node = this.createChip(chip, new Vec3(startX + index * offset, 20));\r\n\t\t\tthis.propertyNode.props_bet_chip_group.addChild(node);\r\n\t\t\t// index === 0 && (node.getChildByName(\"spr_chips\").active = false);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate chipNodeNamePrefix = \"props_chip_toggle_\"\r\n\tprivate createChip(chip: any, position: Vec3): Node {\r\n\t\tconst node = instantiate(this.propertyNode.props_bet_chip);\r\n\t\tnode.setPosition(position);\r\n\t\tnode.name = this.chipNodeNamePrefix + chip.value;\r\n\r\n\t\tthis.bindChipEvent(node);\r\n\r\n\t\tconst chips = node.getChildByName(\"spr_chips\");\r\n\t\tconst checkMark = node.getChildByName(\"Checkmark\");\r\n\t\tconst sf = sourceManageSeletor().getFile(chip.fileUrl).source;\r\n\r\n\t\tcheckMark.getComponent(Sprite).spriteFrame = sf;\r\n\t\tchips.getComponent(Sprite).spriteFrame = sf;\r\n\r\n\t\tconst chipLabel = chips.getChildByName(\"Label_chips\").getComponent(Label);\r\n\t\tchipLabel.string = chip.valueStr;\r\n\t\tchipLabel.font = sourceManageSeletor().getFile(chip.fontUrl).source;\r\n\r\n\r\n\t\tconst checkMarkChipLabel = checkMark.getChildByName(\"Label_chips\").getComponent(Label);\r\n\t\tcheckMarkChipLabel.string = chip.valueStr;\r\n\t\tcheckMarkChipLabel.font = sourceManageSeletor().getFile(chip.fontUrl).source;\r\n\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**获得是否锁定下注 */\r\n\tpublic getLockBet(gold: number) {\r\n\t\tlet isLockBet = gold < config.gameOption.unlockBetMinGold;\r\n\t\tif (!isLockBet && this.props.powers && this.props.powers.length > 0) {\r\n\t\t\tisLockBet = true;\r\n\t\t}\r\n\t\treturn isLockBet;\r\n\t}\r\n\r\n\t/**筹码显示处理 */\r\n\tprivate chipShowHandle() {\r\n\t\tif (!this.props.myHead) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst chipNodes = this.propertyNode.props_bet_chip_group.children.filter(v => v.name.startsWith(this.chipNodeNamePrefix));\r\n\t\tconst myGold = this.props.myHead.gold;\r\n\t\t// 是否锁定下注\r\n\t\tlet isLockBet = myGold < config.gameOption.unlockBetMinGold;\r\n\t\tif (this.props.powers && this.props.powers.length > 0) {\r\n\t\t\tisLockBet = true;\r\n\t\t} else if (isLockBet) {\r\n\t\t\tthis.updatePowerShow();\r\n\t\t\tthis.updateTipsValue(this.propertyNode.props_tips_gold, config.gameOption.unlockBetMinGold + '');\r\n\t\t}\r\n\t\tchipNodes.forEach(v => {\r\n\t\t\tthis.updateChipStatus(v, myGold < this.getChipConfig(v.name).value || isLockBet);\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_layout_lock.active = isLockBet;\r\n\r\n\t\t// 重新选择最大可下注的筹码\r\n\t\tfor (let i = chipNodes.length - 1; i >= 0; i--) {\r\n\t\t\tconst node = chipNodes[i];\r\n\t\t\tconst value = this.getChipConfig(node.name).value\r\n\t\t\tlet isChecked = false;\r\n\t\t\t// 如果当前金币大于等于选择的筹码，就去找到选择的筹码，让其选中\r\n\t\t\tif (myGold >= this.props.selectChip) {\r\n\t\t\t\tif (value === this.props.selectChip) {\r\n\t\t\t\t\tisChecked = true;\r\n\t\t\t\t}\r\n\t\t\t\t// 如果当前金币小于之前选择的筹码，就去找最大的可选择的筹码\r\n\t\t\t} else if (myGold >= value) {\r\n\t\t\t\tisChecked = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isLockBet && isChecked) {\r\n\t\t\t\tnode.getComponent(Toggle).isChecked = true;\r\n\t\t\t\tnode.getChildByName(\"spr_chips\").active = false;\r\n\t\t\t\tthis.events.selectChip(value);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 自己的金币小于最小筹码了，一个都不能选择\r\n\t\tif (isLockBet) {\r\n\t\t\tchipNodes[0].getChildByName(\"spr_chips\").active = true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**更新筹码状态 */\r\n\tprivate updateChipStatus(node: Node, disable: boolean) {\r\n\t\t// 首先把所有子节点置灰\r\n\t\tnode.children.forEach(v => v.getComponent(Sprite).grayscale = disable);\r\n\t\tconst chips = node.getChildByName(\"spr_chips\");\r\n\t\tchips.active = true;\r\n\t\tconst chipLabel = chips.getChildByName(\"Label_chips\").getComponent(Label);\r\n\t\tconst fileUrl = disable ? FontPathDefine.BLACK_BET : this.getChipConfig(node.name).fontUrl;\r\n\t\tchipLabel.font = sourceManageSeletor().getFile(fileUrl).source;\r\n\t\tnode.getComponent(Toggle).enabled = !disable;\r\n\t\tnode.getComponent(Toggle).isChecked = false;\r\n\t}\r\n\r\n\tprivate bindChipEvent(node: Node): void {\r\n\t\tnode.on(Node.EventType.TOUCH_END, (e: Event) => {\r\n\t\t\tif (!node.getComponent(Toggle).enabled) return;\r\n\t\t\tthis.propertyNode.props_bet_chip_group.children.forEach(v => {\r\n\t\t\t\tv.getChildByName(\"spr_chips\").active = true;\r\n\t\t\t})\r\n\t\t\tplayBtnClick()\r\n\t\t\tnode.getChildByName(\"spr_chips\").active = false;\r\n\t\t\tthis.events.selectChip(this.getChipConfig(node.name).value);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getChipConfig(name: string) {\r\n\t\treturn config.chipTypes.find(v => this.chipNodeNamePrefix + v.value === name);\r\n\t}\r\n\r\n\t/**播放在线人数动画 */\r\n\tprivate playOnlineAnimation() {\r\n\t\tthis.propertyNode.props_online_bg.getComponent(Animation).play();\r\n\t}\r\n\r\n\t/**\r\n\t * 播放添加金币的动画\r\n\t * @param winloss \r\n\t * @returns \r\n\t */\r\n\tprivate playAddGlodAnimation(winloss: number) {\r\n\t\tif (winloss <= 0) return;\r\n\t\tconst startPosition = new Vec3(this.propertyNode.props_gold_up.position.x, this.propertyNode.props_gold_up.position.y);\r\n\t\tthis.propertyNode.props_gold_up.getComponent(Label).string = \"+\" + formatNumber(winloss);\r\n\t\tthis.propertyNode.props_gold_up.active = true;\r\n\t\ttween(this.propertyNode.props_gold_up).by(1, { position: new Vec3(0, 30) }).call(() => {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.propertyNode.props_gold_up.active = false;\r\n\t\t\t\tthis.propertyNode.props_gold_up.setPosition(startPosition);\r\n\t\t\t}, 0.5);\r\n\t\t}).start();\r\n\t}\r\n\r\n\tprivate updatePowerShow() {\r\n\t\tthis.propertyNode.props_tips_vip.active = false\r\n\t\tthis.propertyNode.props_tips_gold.active = false\r\n\r\n\t\tif (this.props.powers && this.props.powers.length > 0) {\r\n\t\t\tconst power = this.props.powers[0]\r\n\t\t\tlet node;\r\n\t\t\tif ('vip' === power.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_vip;\r\n\t\t\t} else if ('gold' === power.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_gold;\r\n\t\t\t}\r\n\t\t\tnode && this.updateTipsValue(node, power.num);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateTipsValue(node: Node, num: string) {\r\n\t\tnode.active = true;\r\n\t\tnode.getChildByName('Label_lock_num').getComponent(Label).string = Number(num).formatAmountWithCommas();\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}