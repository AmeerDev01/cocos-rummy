{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandar/components/Bandar_footer.ts"],"names":["_decorator","Label","Node","Sprite","Toggle","tween","Vec3","BaseComponent","getNodeByNameDeep","getUUID","initToggle","gameCacheData","GameStatus","changeSelectChipAction","playBtnClick","playChooseChip","sourceManageSelector","config","initBetData","global","SKT_MAG_TYPE","sktInstance","betAreaViewModel","ccclass","property","Bandar_footer","repeatArr","amountArr","newLastArr","isRepeat","propertyNode","props_layout_lock","props_btn_auto","props_ToggleGroup","props_user_avatar","props_animation_auto","props_label_user_goldNum","props_spr_bet_remind","props_label_gold_up","props_btn_add","props_btn_shop","props_tips_gold","props_tips_vip","props_remind_noBet","props_remind_repeat","props","gold","lastBet","gameStatus","allWinUsers","myInfo","tips","events","start","initState","bindEvent","on","EventType","TOUCH_END","repeatBet","openShop","node","EventHandler","useProps","key","value","judgeCoin","cur","updateLockBetState","undefined","getComponent","string","parseInt","formatAmountWithCommas","comp","lastArr","length","resumeRepeatButtonHighlighting","updateTipsShow","active","loadHeadSprite","icon","STOP_BET","channelToggleCallback","event","customEventData","toggleArr","target","children","i","isChecked","num","chipTypes","dispatch","forEach","item","Label_chips","amountNum","charAt","String","Number","substring","getChildByName","grayscale","font","getFile","fontUrl","source","interactable","getFontSpriteFrame","isBetStatus","BET","clearRepeatBet","delay","call","total","type1Total","type2Total","type3Total","type4Total","betType","betData1","typeTotal","type","betId","betData2","betData3","betData4","lastBetArr","chips","splitChip","chip","sendBet","roomId","memberId","memberName","isMe","sendSktMessage","BET_ALL","betData","index","isMyBet","flyChip","window","setTimeout","totalBetAmount","element","push","palyAddUp","betInfo","formatAmountWithLetter","startPosition","position","x","y","by","scheduleOnce","setPosition","isLockBet","updateTipsValue","name","toLowerCase","getSpriteFrame","result","fileName","fileUrl","toggleCallback","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator,instantiate,Label,Node, Sprite, SpriteFrame, Toggle, tween, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { getNodeByNameDeep, getNodePositionInCanvas, getUUID, initToggle } from '../../../utils/tool';\r\nimport { BetData, BetType, gameCacheData, GameStatus, HeadType, SendBet, TipsVo } from '../type';\r\nimport { changeSelectChipAction, setBetDataAction, setLastBetAction, WinUser } from '../store/actions/bet';\r\nimport { mainGameViewModel, playBtnClick, playChooseChip, sourceManageSelector } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { SpriteFramePathDefine } from '../sourceDefine/spriteDefine';\r\nimport config, { initBetData } from '../config';\r\nimport FooterViewModel from '../viewModel/BandarFooterViewModel';\r\nimport ChipViewModel from '../viewModel/BandarChipViewModel';\r\nimport { global, lang } from '../../../hall';\r\nimport { addToastAction } from '../../../hall/store/actions/baseBoard';\r\nimport { SKT_MAG_TYPE, sktInstance } from '../socketConnect';\r\nimport { betAreaViewModel } from '../viewModel/BandarGameBoardViewModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\t/**用户金币 */\r\n\tgold:number,\r\n\t/**上一局下注 */\r\n\tlastBet: SendBet[],\r\n\tgameStatus:GameStatus,\r\n\tallWinUsers: WinUser[],\r\n\tmyInfo: HeadType,\r\n\ttips:TipsVo[]\r\n}\r\nexport interface IEvent {\r\n\t\r\n}\r\n\r\n\r\n@ccclass('Bandar_footer')\r\nexport class Bandar_footer extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate repeatArr:SendBet[]=[];\r\n\tprivate amountArr:SendBet[]=[];\r\n\tpublic newLastArr:SendBet[]=[];\r\n\tpublic isRepeat: boolean = true;\r\n\t\r\n\tstart() {\r\n\r\n\t }\r\n\r\n\tprotected propertyNode = {\r\n\t\t/**金币不足弹框提示 */\r\n\t\tprops_layout_lock: new Node(),\r\n\t\t/** 重复下注按钮 */\r\n\t\tprops_btn_auto:new Node(),\r\n\t\t/**金币组 */\r\n\t\tprops_ToggleGroup:new Node(),\r\n\t\t/**用户头像 */\r\n\t\tprops_user_avatar:new Node(),\r\n\t\t/**重复按钮动画 */\r\n\t\tprops_animation_auto:new Node(),\r\n\r\n\t\tprops_label_user_goldNum:new Node(),\r\n\r\n\t\tprops_spr_bet_remind:new Node(),\r\n\r\n\t\tprops_label_gold_up: new Node(),\r\n\r\n\t\tprops_btn_add: new Node(),\r\n\t\t\r\n\t\tprops_btn_shop: new Node(),\r\n\t\t/**金币不满足的提示 */\r\n\t\tprops_tips_gold: new Node(),\r\n\t\t/**vip不满足的提示 */\r\n\t\tprops_tips_vip: new Node(),\r\n\t\t/**不是下注时间的提示 */\r\n\t\tprops_remind_noBet: new Node(),\r\n\t\t/**上一把没有下注的提示 */\r\n\t\tprops_remind_repeat:new Node(),\r\n\t\t\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tgold:null,\r\n\t\tlastBet:null,\r\n\t\tgameStatus:null,\r\n\t\tallWinUsers: null,\r\n\t\tmyInfo: null,\r\n\t\ttips:null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\t\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_auto.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tplayBtnClick()\r\n             this.repeatBet()\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_add.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_shop.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openShop()\r\n\t\t  })\r\n\t\r\n\t\tinitToggle( this.propertyNode.props_ToggleGroup,this.node,new Bandar_footer.EventHandler(),\"Bandar_footer\",\"channelToggleCallback\" );\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n        if(key === \"gold\"){\r\n\t\t\tthis.judgeCoin(value.cur);\r\n\t\t\tthis.updateLockBetState();\r\n\t\t\t// this.propertyNode.props_layout_lock.active = value.cur <= 5000 || value.cur === undefined;\r\n\t\t\tif( value.cur <= 0 || value.cur == undefined){\r\n\t\t\t  this.propertyNode.props_label_user_goldNum.getComponent(Label).string=\"0\"\r\n\t\t\t}else{\r\n\t\t\t  this.propertyNode.props_label_user_goldNum.getComponent(Label).string=parseInt(value.cur).formatAmountWithCommas()\r\n\t\t\t}\r\n\t\t\tthis.repeatArr=betAreaViewModel.comp.lastArr\r\n\t\t\tif(this.repeatArr.length!=0){\r\n\t\t\t\tthis.resumeRepeatButtonHighlighting(value.cur,this.repeatArr)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif (key === 'tips') {\r\n\t\t\t// console.log(value.cur);\r\n\t\t\t\r\n\t\t\tif (value.cur && value.cur.length > 0) {\r\n\t\t\t\t// this.updateLockBetState();\r\n\t\t\t\tthis.updateTipsShow();\r\n\t\t\t\t\r\n\t\t\t}else {\r\n\t\t\t\tthis.propertyNode.props_layout_lock.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"myInfo\") {\r\n\t\t\tglobal.loadHeadSprite(value.cur.icon,this.propertyNode.props_user_avatar.getComponent(Sprite));//加载头像\r\n\t\t\t// window.setTimeout(() => {\r\n\t\t\t// \tif (mainGameViewModel.isUnMount) { return }\r\n\t\t\t// \tthis.propertyNode.props_label_user_goldNum.getComponent(Label).string=value.cur.gold.formatAmountWithCommas()\r\n\t\t\t// },3000)\r\n\t\t}\r\n\r\n\r\n\t\tif(key === \"gameStatus\"){\r\n\t\t\tif(value.cur===GameStatus.STOP_BET){\r\n\r\n\t\t\t}else{\r\n                this.isRepeat=false;\r\n\t\t\t\tthis.newLastArr=[]\r\n\t\t\t\tthis.judgeCoin(this.props.gold);\r\n\t\t\t\tthis.updateLockBetState();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**Toggle选中金币的回调 效果切换*/ \r\n\tprotected channelToggleCallback(event: Event, customEventData: string) {\r\n\t\tplayChooseChip()\r\n\t\tconst toggleArr: Node[] = event.target[\"parent\"].children;\r\n\t\tfor (let i = 0; i < toggleArr.length; i++) {       \r\n\t\t\tif (toggleArr[i].getComponent(Toggle).isChecked) {\r\n\t\t\t\tlet num=config.chipTypes[i].value;\r\n\t\t\t\tthis.dispatch(changeSelectChipAction(num));//更新选中的金币值\r\n\t\t\t\ttoggleArr[i].children[0].active = false;\r\n\t\t\t\ttoggleArr[i].children[1].active = true;\r\n\t\t\t} else {\r\n\t\t\t\ttoggleArr[i].children[0].active = true;\r\n\t\t\t\ttoggleArr[i].children[1].active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**金币不足*/\r\n\tprotected judgeCoin(gold){\r\n\t// 当用户的金币值小于下注的金币值时，下注金币呈现灰度，不可点击\r\n\tthis.propertyNode.props_ToggleGroup.children.forEach(item=>{\r\n\t\tlet Label_chips=getNodeByNameDeep(\"Label_chips\",item).getComponent(Label)\r\n\t\tlet amountNum:string=Label_chips.string\r\n\t//   item.getChildByName(\"spr_chips\").getChildByName(\"Label_chips\").getComponent(Label).string\r\n\t\tif(amountNum.charAt(amountNum.length-1)==\"K\"){   \r\n\t\t\tamountNum=String(Number(amountNum.substring(0,amountNum.length-1))*1000)\r\n\t\t}else if(amountNum.charAt(amountNum.length-1)==\"M\"){\r\n\t\t\tamountNum=String(Number(amountNum.substring(0,amountNum.length-1))*1000000)\r\n\t\t}\r\n\t\tif(gold<Number(amountNum) ){\r\n\t\t\titem.getChildByName(\"spr_chips\").getComponent(Sprite).grayscale=true;\r\n\t\t\tLabel_chips.font=sourceManageSelector().getFile(config.chipTypes[6].fontUrl).source\r\n\t\t\titem.getComponent(Toggle).interactable=false;\r\n\t\t\t// item.getComponent(Toggle).isChecked=false;\r\n\t\t\titem.children[0].active=true;\r\n\t\t\titem.children[1].active=false;\r\n\t\t}else{\r\n\t\t\titem.getChildByName(\"spr_chips\").getComponent(Sprite).grayscale=false;\r\n\t\t\titem.getComponent(Toggle).interactable=true;\r\n\r\n\t\t\tlet font=this.getFontSpriteFrame(Number(amountNum))\r\n\t\t\t\r\n\t\t\tLabel_chips.font=font          \r\n\t\t\titem.getComponent(Toggle).isChecked=false;\r\n\r\n\t\t\t// 默认选中上一局最后下注的金币\r\n\t\t\tif(item.getComponent(Toggle).isChecked){\r\n\t\t\t\titem.children[0].active=false;\r\n\t\t\t\titem.children[1].active=true;\r\n\t\t\t}\r\n\t\t}  \r\n\t})\r\n\r\n\r\n\t}\r\n\t\r\n\tprivate isBetStatus(): boolean {\r\n\t\t// console.log(\"footer  this.props.gameStatus\",this.props.gameStatus);\r\n\t\t\r\n\t\treturn this.props.gameStatus === GameStatus.BET;\r\n\t}\r\n\r\n\t/**重复下注按钮*/ \r\n\tprotected repeatBet() { \r\n\t\tthis.clearRepeatBet();\r\n         \r\n\t\tif (!this.isBetStatus()) {\r\n\t\t\tif (!this.propertyNode && !this.propertyNode.props_remind_noBet) { return };\r\n\t\t\tthis.propertyNode.props_remind_noBet.active = true;\r\n\t\t\ttween(this.propertyNode.props_remind_noBet)\r\n\t\t\t.delay(2)\r\n\t\t\t.call(() => { \r\n\t\t\t\tthis.propertyNode.props_remind_noBet.active  = false;\r\n\t\t\t})\r\n\t\t\t.start()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// console.log(\"betAreaViewModel.comp.lastArr\",betAreaViewModel.comp.lastArr);\r\n\t\tthis.repeatArr = betAreaViewModel.comp.lastArr;\r\n\t\t// console.log(\"this.repeatArr\", this.repeatArr)\r\n\t\tif (this.repeatArr.length === 0) {\r\n\t\t\tif (!this.propertyNode && !this.propertyNode.props_remind_repeat) { return };\r\n\t\t\tthis.propertyNode.props_remind_repeat.active = true;\r\n\t\t\ttween(this.propertyNode.props_remind_repeat)\r\n\t\t\t.delay(2)\r\n\t\t\t.call(() => { \r\n\t\t\t\tthis.propertyNode.props_remind_repeat.active  = false;\r\n\t\t\t})\r\n\t\t\t.start()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.isRepeat=true;\r\n\t\t// this.newLastArr=[...this.props.lastBet];//重复下注成功，保留数据,如果未点击，清空\r\n\t\t// 恢复上一次下注的情况\r\n\t\t// this.resumeRepeatButtonHighlighting(this.props.gold,this.repeatArr)\r\n\t\tlet total: number = 0;\r\n\t\tlet type1Total: number = 0;\r\n\t\tlet type2Total: number = 0;\r\n\t\tlet type3Total: number = 0;\r\n\t\tlet type4Total: number = 0;\r\n\t\r\n\t\tfor (var i = 0; i < this.repeatArr.length; i++) { \r\n\t\t\ttotal += this.repeatArr[i].gold;\r\n\t\t\t\r\n\t\t\tif (this.repeatArr[i].betType === 1) {\r\n\t\t\t\ttype1Total += this.repeatArr[i].gold;\r\n\t\t\t}else if (this.repeatArr[i].betType === 2) {\r\n\t\t\t\ttype2Total += this.repeatArr[i].gold;\r\n\t\t\t}else if (this.repeatArr[i].betType === 3) {\r\n\t\t\t\ttype3Total += this.repeatArr[i].gold;\r\n\t\t\t}else if (this.repeatArr[i].betType === 4) {\r\n\t\t\t\ttype4Total += this.repeatArr[i].gold;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet betData1 = { typeTotal: type1Total, type: 1, betId:\"\" };\r\n\t\tlet betData2 = { typeTotal: type2Total, type: 2, betId:\"\" };\r\n\t\tlet betData3 = { typeTotal: type3Total, type: 3, betId:\"\" };\r\n\t\tlet betData4 = { typeTotal: type4Total, type: 4, betId:\"\" };\r\n\t\tlet lastBetArr = [betData1,betData2,betData3,betData4];\r\n        \r\n\t\tif(this.props.gold>=total*6){//只有用户总金额大于所有重复下注的金币额之和 才可以下注\r\n\t\t\t// for (var i = 0; i < this.repeatArr.length; i++) {  \r\n\t\t\t// \t//下注发信息到服务器\t\t\t\r\n\t\t\t// \tsktInstance.sendSktMessage(SKT_MAG_TYPE.BET_ALL, this.repeatArr[i])\r\n\t\t\t// }\r\n\t\t\tfor (let i = 0; i < lastBetArr.length; i++){\t\r\n\t\t\t\tlastBetArr[i].betId = getUUID();\r\n\r\n\t\t\t\tconst chips: number[] = [];\r\n\t\t\t\tthis.splitChip(lastBetArr[i].typeTotal, chips);\r\n\r\n\t\t\t\tchips.forEach(chip => {\r\n\t\t\t\t\tconst sendBet: SendBet = {\r\n\t\t\t\t\t\troomId: gameCacheData.roomId,\r\n\t\t\t\t\t\tmemberId: this.props.myInfo.memberId,\r\n\t\t\t\t\t\tmemberName: this.props.myInfo.memberName,\r\n\t\t\t\t\t\tgold: chip,\r\n\t\t\t\t\t\tbetType: lastBetArr[i].type,\r\n\t\t\t\t\t\tisMe: true,\r\n\t\t\t\t\t\tbetId: lastBetArr[i].betId,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsktInstance.sendSktMessage(SKT_MAG_TYPE.BET_ALL, sendBet)\r\n\t\t\t\t\tconst betData = initBetData(this.props.myInfo.index, this.props.myInfo.memberId, lastBetArr[i].type, chip);\r\n\t\t\t\t\tbetData.isMyBet = true;\r\n\t\t\t\t\tbetAreaViewModel.comp.flyChip(betData);\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t// betAreaViewModel.comp.amountArr.push(...betAreaViewModel.comp.lastArr)\r\n\t\t\t  \r\n\t\t}else{//禁止下注\r\n\t\t\t// 提示用户余额不足\r\n\t\t\tthis.propertyNode.props_spr_bet_remind.active=true;\r\n\t\t\twindow.setTimeout(()=>{\r\n\t\t\t\tthis.propertyNode.props_spr_bet_remind.active=false\r\n\t\t\t},2000)\r\n\t\t\t// global.hallDispatch(addToastAction({ content: lang.write(k => k.InitGameModule.GameBoardInit, {}, { placeStr: \"余额不足，您只能下注账户余额的1/6!\" }) }))\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n   * 根据下注拆分筹码\r\n   * @param totalBetAmount \r\n   */\r\n\tprivate splitChip(totalBetAmount: number, chips: number[]) {\r\n\t\tif (totalBetAmount < config.chipTypes[0].value) {\r\n\t\t  return;\r\n\t\t}\r\n\t\tfor (let i = config.chipTypes.length - 2; i >= 0; i--) {\r\n\t\t\tconst element = config.chipTypes[i];\r\n\r\n\t\t\tif (totalBetAmount >= element.value) {\r\n\r\n\t\t\tchips.push(element.value);\r\n\t\t\ttotalBetAmount -= element.value;\r\n\t\t\tbreak;\r\n\t\t  }\r\n\t\t}\r\n\t\tthis.splitChip(totalBetAmount, chips);\r\n\t}\r\n\r\n\t \r\n    private resumeRepeatButtonHighlighting(gold,repeatArr){\r\n\t    // console.log(\"repeatArr\",repeatArr);\r\n\t\r\n\t\tlet total:number=0\r\n\t\tfor (var i = 0; i < repeatArr.length; i++) { \r\n\t\t\ttotal+=this.repeatArr[i].gold\r\n\t\t}\r\n\r\n\t\tif(gold>=total*6){//只有用户总金额大于所有重复下注的金币额之和 才可以下注\r\n\t\t\t// this.propertyNode.props_btn_auto.getComponent(Sprite).grayscale=false;\r\n\t\t\t// this.propertyNode.props_animation_auto.active=true;\r\n\t\t\tthis.propertyNode.props_spr_bet_remind.active=false;\r\n\t\t\t\t\r\n\t\t}else{//禁止下注\r\n\t\t\t// 提示用户余额不足\r\n\r\n\t\t//   global.hallDispatch(addToastAction({ content: lang.write(k => k.moduleName2.DragonTigerGlod,{},{ placeStr:\"对不起，您的金币不足，请充值!\" }) }));\r\n\t\t\treturn;\r\n\t\t}\r\n    }\r\n\t\r\n\t/**清除重复下注按钮的数据*/ \r\n\tprotected clearRepeatBet() {\r\n\t\tthis.repeatArr=[]\r\n\t}\r\n\r\n\tpublic palyAddUp(betInfo){\r\n\t\tlet node=this.propertyNode.props_label_gold_up\r\n\t\tnode.getComponent(Label).string=\"+\"+betInfo.gold.formatAmountWithLetter()\r\n\t\tconst startPosition = new Vec3(node.position.x, node.position.y);\r\n\t\tnode.active=true;\r\n\t\ttween(node).by(1, { position: new Vec3(0, 30) }).call(() => {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tnode.active = false;\r\n\t\t\t\tnode.setPosition(startPosition);\r\n\t\t\t}, 0.5);\r\n\t\t}).start();\r\n\t}\r\n\r\n\t/**更新锁定下注区域状态 */\r\n\tprivate updateLockBetState() { \r\n\t// 是否锁定下注  金币不足5千时出现充值弹框\r\n\t\tlet isLockBet = this.props.gold < 5000 || this.props.gold == undefined || this.props.gold == 0;\r\n\t\tif (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\tisLockBet = true;\r\n\t\t} else {\r\n\t\t\tisLockBet = false;\r\n\t\t}\r\n\t\tif (isLockBet) {\r\n\t\t\tthis.updateTipsValue(this.propertyNode.props_tips_gold, String(5000));\r\n\t\t\tthis.updateTipsShow();\r\n\r\n\t\t} \r\n\t\tthis.propertyNode.props_layout_lock.active = isLockBet;\r\n\t\t\r\n\t}\r\n\r\n\tprivate updateTipsShow() {\r\n\t\tthis.propertyNode.props_tips_vip.active = false;\r\n\t\tthis.propertyNode.props_tips_gold.active = false;\r\n\r\n\t\tif (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\tconst tips = this.props.tips[0]\r\n\t\t\tlet node;\r\n\t\t\tif ('vip' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_vip;\r\n\t\t\t} else if ('gold' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_gold;\r\n\t\t\t}else if ('level' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_vip;\r\n\t\t\t} \r\n\t\t\tnode && this.updateTipsValue(node, tips.num);\r\n\t\t}\r\n\r\n    } \r\n  \r\n\tprivate updateTipsValue(node: Node, num: string) {\r\n        node.active = true;\r\n\t\tnode.getChildByName('Label_lock_num').getComponent(Label).string = Number(num).formatAmountWithCommas();\r\n\t\tthis.propertyNode.props_layout_lock.active = true;\r\n\t}\r\n\t\r\n\r\n\tprivate getSpriteFrame(result:number): SpriteFrame {\r\n\t\t\tlet fileName = '';\r\n\t\t\tif (result === 0) {\r\n\t\t\t\tfileName = config.chipTypes[0].fileUrl;\r\n\t\t\t}else if (result === 1) {\r\n\t\t\t\tfileName = config.chipTypes[1].fileUrl;\r\n\t\t\t} else if (result === 2) {\r\n\t\t\t\tfileName = config.chipTypes[2].fileUrl;\r\n\t\t\t}else if (result === 3) {\r\n\t\t\t\tfileName = config.chipTypes[3].fileUrl;\r\n\t\t\t} else if (result === 4) {\r\n\t\t\t\tfileName = config.chipTypes[4].fileUrl;\r\n\t\t\t} else if (result === 5) {\r\n\t\t\t\tfileName = config.chipTypes[5].fileUrl;\r\n\t\t\t} else if (result === 6) {\r\n\t\t\t\tfileName = config.chipTypes[6].fileUrl;\r\n\t\t\t} \r\n\t\t\treturn sourceManageSelector().getFile(fileName).source;\r\n\t}\r\n\tprivate getFontSpriteFrame(result:number): SpriteFrame {\r\n\t\tlet fileName = '';\r\n\t\tif (result === 1000) {\r\n\t\t\tfileName = config.chipTypes[0].fontUrl;\r\n\t\t}else if (result === 5000) {\r\n\t\t\tfileName = config.chipTypes[1].fontUrl;\r\n\t\t} else if (result === 10000) {\r\n\t\t\tfileName = config.chipTypes[2].fontUrl;\r\n\t\t}else if (result === 100000) {\r\n\t\t\tfileName = config.chipTypes[3].fontUrl;\r\n\t\t} else if (result === 500000) {\r\n\t\t\tfileName = config.chipTypes[4].fontUrl;\r\n\t\t} else if (result === 1000000) {\r\n\t\t\tfileName = config.chipTypes[5].fontUrl;\r\n\t\t} else if (result === 0) {\r\n\t\t\tfileName = config.chipTypes[6].fontUrl;\r\n\t\t} \r\n\t\treturn sourceManageSelector().getFile(fileName).source;\r\n    }\r\n\r\n\r\n\ttoggleCallback(event: Event, customEventData: string) {\r\n\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\t\r\n\t\tthis.propertyNode.props_layout_lock.active = false;\r\n\t\t\t\t\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}