{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egypt/Slot/Component/Egypt_Loader.ts"],"names":["_decorator","Component","Label","ProgressBar","Node","global","lang","ccclass","property","Egypt_Loader","loaderState","onLoad","getCloseBtn","active","node","getChildByName","start","on","EventType","TOUCH_END","closeSubGame","getLoaderState","setLoadingProgress","fileName","total","remain","isValid","progressBar","getComponent","str","progress","loaderTxt","string","toFixed","write","k","WebSocketModule","GameInit","placeStr","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAC3CC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,I,iBAAAA,I;;;;;;;;;OACX;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;8BAGjBS,Y,WADZF,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAACN,KAAD,C,2BAFb,MACaO,YADb,SACkCR,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA,eAGjCS,WAHiC,GAGnB,IAHmB;AAAA;;AAI9BC,QAAAA,MAAM,GAAS;AACrB,eAAKC,WAAL,GAAmBC,MAAnB,GAA4B,KAA5B;AACH;;AACOD,QAAAA,WAAW,GAAG;AAClB,iBAAO,KAAKE,IAAL,CAAUC,cAAV,CAAyB,kBAAzB,CAAP;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKJ,WAAL,GAAmBK,EAAnB,CAAsBb,IAAI,CAACc,SAAL,CAAeC,SAArC,EAAgD,MAAM;AAClD,iBAAKT,WAAL,GAAmB,KAAnB;AACA;AAAA;AAAA,kCAAOU,YAAP;AACH,WAHD;AAIH;;AACDC,QAAAA,cAAc,GAAG;AACb,iBAAO,KAAKX,WAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIY,QAAAA,kBAAkB,CAACC,QAAD,EAAmBC,KAAnB,EAAkCC,MAAlC,EAAkD;AAChE,cAAI,CAAC,KAAKX,IAAN,IAAc,CAAC,KAAKA,IAAL,CAAUY,OAA7B,EAAsC;AACtC,cAAIC,WAAW,GAAG,KAAKb,IAAL,CAAUC,cAAV,CAAyB,mBAAzB,EAA8Ca,YAA9C,CAA2DzB,WAA3D,CAAlB;AACA,cAAI0B,GAAG,GAAGJ,MAAM,GAAGD,KAAnB;AACAG,UAAAA,WAAW,CAACG,QAAZ,GAAuBD,GAAvB;AACA,eAAKE,SAAL,CAAeC,MAAf,GAA2B,CAAC,CAAC,IAAKP,MAAM,GAAGD,KAAf,IAAyB,GAA1B,EAA+BS,OAA/B,CAAuC,CAAvC,CAA3B;;AACA,cAAIJ,GAAG,IAAI,CAAX,EAAc;AACV,iBAAKE,SAAL,CAAeC,MAAf,GAAwB;AAAA;AAAA,8BAAKE,KAAL,CAAWC,CAAC,IAAIA,CAAC,CAACC,eAAF,CAAkBC,QAAlC,EAA4C,EAA5C,EAAgD;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAAhD,CAAxB;AACH,WAR+D,CAShE;;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvCuC,O;;;;;iBAErB,I","sourcesContent":["import { _decorator, Component, Label, ProgressBar, Node } from 'cc';\r\nimport { global, lang } from \"../../../../hall\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Egypt_Loader')\r\nexport class Egypt_Loader extends Component {\r\n    @property(Label)\r\n    loaderTxt: Label = null\r\n    public loaderState = true;\r\n    protected onLoad(): void {\r\n        this.getCloseBtn().active = false;\r\n    }\r\n    private getCloseBtn() {\r\n        return this.node.getChildByName('props_btn_return');\r\n    }\r\n    start() {\r\n        this.getCloseBtn().on(Node.EventType.TOUCH_END, () => {\r\n            this.loaderState = false\r\n            global.closeSubGame()\r\n        })\r\n    }\r\n    getLoaderState() {\r\n        return this.loaderState\r\n    }\r\n    /**\r\n     *\r\n     * @param fileName 资源名称\r\n     * @param total 全部文件数量\r\n     * @param remain 剩余的数量\r\n     */\r\n    setLoadingProgress(fileName: string, total: number, remain: number) {\r\n        if (!this.node || !this.node.isValid) return;\r\n        let progressBar = this.node.getChildByName('props_progressBar').getComponent(ProgressBar)\r\n        let str = remain / total\r\n        progressBar.progress = str;\r\n        this.loaderTxt.string = `${((1 - (remain / total)) * 100).toFixed(0)}%`\r\n        if (str <= 0) {\r\n            this.loaderTxt.string = lang.write(k => k.WebSocketModule.GameInit, {}, { placeStr: \"Game init...\" })\r\n        }\r\n        //this.node.getChildByName('props_btn_return').active = remain !== 0;\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n"]}