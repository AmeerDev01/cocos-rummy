{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/thorV2/IconPool.ts"],"names":["IconPool","ThorV2Icon","constructor","iconConfigs","icons","init","forEach","v","i","icon","resetIcon","restore","push","getIcon","iconConfig","parentNode","iconIndex","find","isUse","getId","id","unInit","destory"],"mappings":";;;2FAGaA,Q;;;;;;;;;;;;;;;;AAFJC,MAAAA,U,iBAAAA,U;;;;;;;;;0BAEID,Q,GAAN,MAAMA,QAAN,CAAe;AAGpBE,QAAAA,WAAW,CAACC,WAAD,EAAqB;AAAA,eAFxBC,KAEwB,GAFF,EAEE;AAC9B,eAAKC,IAAL,CAAUF,WAAV;AACD;;AAEOE,QAAAA,IAAI,CAACF,WAAD,EAAqB;AAC/BA,UAAAA,WAAW,CAACG,OAAZ,CAAoBC,CAAC,IAAI;AACvB,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,kBAAMC,IAAI,GAAG;AAAA;AAAA,4CAAeF,CAAf,CAAb;AACAE,cAAAA,IAAI,CAACC,SAAL,CAAeH,CAAf;AACAE,cAAAA,IAAI,CAACE,OAAL;AACA,mBAAKP,KAAL,CAAWQ,IAAX,CAAgBH,IAAhB;AACD;AACF,WAPD;AAQD;AAED;;;AACOI,QAAAA,OAAO,CAACC,UAAD,EAAaC,UAAb,EAA+BC,SAA/B,EAA8D;AAC1E,cAAIP,IAAI,GAAG,KAAKL,KAAL,CAAWa,IAAX,CAAgBV,CAAC,IAAI,CAACA,CAAC,CAACW,KAAF,EAAD,IAAcX,CAAC,CAACY,KAAF,OAAcL,UAAU,CAACM,EAA5D,CAAX;;AACA,cAAI,CAACX,IAAL,EAAW;AACTA,YAAAA,IAAI,GAAG;AAAA;AAAA,0CAAeK,UAAf,CAAP;AACA,iBAAKV,KAAL,CAAWQ,IAAX,CAAgBH,IAAhB;AACD;;AACDA,UAAAA,IAAI,CAACC,SAAL,CAAeI,UAAf,EAA2BC,UAA3B,EAAuCC,SAAvC,EAN0E,CAO1E;;AACA,iBAAOP,IAAP;AACD;;AAEMY,QAAAA,MAAM,GAAG;AACd,eAAKjB,KAAL,CAAWE,OAAX,CAAmBC,CAAC,IAAIA,CAAC,CAACe,OAAF,EAAxB;AACA,eAAKlB,KAAL,GAAa,EAAb;AACD;;AAjCmB,O","sourcesContent":["import { Node } from \"cc\";\r\nimport { ThorV2Icon } from \"./components/ThorV2_Icon\";\r\n\r\nexport class IconPool {\r\n  private icons: ThorV2Icon[] = [];\r\n\r\n  constructor(iconConfigs: any[]) {\r\n    this.init(iconConfigs);\r\n  }\r\n\r\n  private init(iconConfigs: any[]) {\r\n    iconConfigs.forEach(v => {\r\n      for (let i = 0; i < 4; i++) {\r\n        const icon = new ThorV2Icon(v)\r\n        icon.resetIcon(v)\r\n        icon.restore();\r\n        this.icons.push(icon);\r\n      }\r\n    })\r\n  }\r\n\r\n  /**获得可用的icon */\r\n  public getIcon(iconConfig, parentNode: Node, iconIndex: number): ThorV2Icon {\r\n    let icon = this.icons.find(v => !v.isUse() && v.getId() === iconConfig.id);\r\n    if (!icon) {\r\n      icon = new ThorV2Icon(iconConfig);\r\n      this.icons.push(icon);\r\n    }\r\n    icon.resetIcon(iconConfig, parentNode, iconIndex);\r\n    // console.log(\"this.icons.lenth \", this.icons.length, \" use length \" , this.icons.filter(v => v.isUse()).length);\r\n    return icon;\r\n  }\r\n\r\n  public unInit() {\r\n    this.icons.forEach(v => v.destory());\r\n    this.icons = [];\r\n  }\r\n}"]}