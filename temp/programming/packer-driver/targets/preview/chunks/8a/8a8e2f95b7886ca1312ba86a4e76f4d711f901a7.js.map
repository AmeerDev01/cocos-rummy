{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenixV2/components/PhoenixV2_Icon.ts"],"names":["PhoenixV2Icon","UITransform","Vec3","instantiate","sp","Sprite","Animation","sourceManageSeletor","PrefabPathDefine","getNodeByNameDeep","IconId","getWild","config","SkeletalPathDefine","SkeletonAnimationPlayer","constructor","iconConfig","isPoolObject","node","faceNode","faceAnimationNode","skeleton","sprite","use","iconIndex","borderNode","amountNode","Particle2D","yinBiNode","callback","getFile","ICON","source","getComponent","width","normalRollOption","singleRollerWidth","height","singleRollerHeight","Skeleton","active","removeFromParent","id","WILD","listenerSkeletonEvent","buildIcon","setCompleteListener","isValid","hideWin","resetIcon","parentNode","addChild","setScale","scale","getId","restore","destory","getNode","getHeight","getIconIndex","setPosition","value","offset","distance","setWorldPosition","worldPosition","clone","add","getPosition","changeIcon","fileName","skeletonName","spriteFrame","skeletonData","setAnimation","animationArr","playWin","isBorder","loop","parent","play","BEETLE","TUBIAO_YUANBAO_ZHONG_JIANG","SCATTER","TUBIAO_SCATTER_CHUXIAN","playAnimation","playScatterWin","done","TUBIAO_SCATTER","count","skeletonPlayer","stopAnimation","playYuanBaoWinIcon","isWin","TUBIAO_CHUXIAN","playBeetleAnimation","setSiblingIndex","children","length","pauseWin","clearTracks","isUse","setAmount","amount","showBg","getChildByName","hideBg","getAmountNode","getParticle2DNode","getYinBiNode","destroy"],"mappings":"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","sourcesContent":["import { Node, UITransform, Vec3, instantiate, sp, Sprite, Label, Animation, Mask, Graphics, UIOpacity, tween } from \"cc\";\r\nimport { sourceManageSeletor } from \"../index\";\r\nimport { PrefabPathDefine } from \"../sourceDefine/prefabDefine\";\r\nimport { getNodeByNameDeep } from \"../../../utils/tool\";\r\nimport { GameType, IconId, getWild } from \"../type\";\r\nimport config from \"../config\";\r\nimport { SkeletalPathDefine } from \"../sourceDefine/skeletalDefine\";\r\nimport SkeletonAnimationPlayer from \"../../../utils/SkeletonPlay\";\r\n\r\nexport class PhoenixV2Icon {\r\n  private node: Node;\r\n  private faceNode: Node;\r\n  private faceAnimationNode: Node;\r\n  private iconConfig;\r\n  private skeleton: sp.Skeleton;\r\n  private sprite: Sprite\r\n  private use = false;\r\n  private iconIndex = 0;\r\n\r\n  private borderNode: Node;\r\n  public amountNode: Node;\r\n  private Particle2D: Node;\r\n\r\n  public yinBiNode: Node;\r\n\r\n  private isPoolObject = true;\r\n  private callback;\r\n\r\n  constructor(iconConfig, isPoolObject: boolean = true) {\r\n    this.iconConfig = iconConfig;\r\n    this.isPoolObject = isPoolObject;\r\n    this.node = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.ICON).source);\r\n    this.node.getComponent(UITransform).width = config.normalRollOption.singleRollerWidth;\r\n    this.node.getComponent(UITransform).height = config.normalRollOption.singleRollerHeight;\r\n\r\n    this.faceNode = getNodeByNameDeep(\"face\", this.node);\r\n    this.faceAnimationNode = getNodeByNameDeep(\"face-animation\", this.node);\r\n\r\n    this.sprite = this.faceNode.getComponent(Sprite);\r\n    this.skeleton = this.faceAnimationNode.getComponent(sp.Skeleton);\r\n\r\n    this.borderNode = getNodeByNameDeep(\"focusBorder\", this.node);\r\n    this.borderNode.active = true;\r\n    this.borderNode.removeFromParent();\r\n\r\n    this.yinBiNode = getNodeByNameDeep(\"yinBi\", this.node);\r\n    this.yinBiNode.active = false;\r\n    if (this.iconConfig.id === IconId.WILD) {\r\n      this.amountNode = getNodeByNameDeep(\"amount\", this.node);\r\n      this.Particle2D = getNodeByNameDeep(\"props_Particle2D\", this.node);\r\n      // this.amountNode.active = true;\r\n      this.listenerSkeletonEvent();\r\n    }\r\n\r\n    this.buildIcon();\r\n  }\r\n\r\n  private listenerSkeletonEvent() {\r\n    this.skeleton.setCompleteListener(() => {\r\n      if (this.node.isValid && this.callback) {\r\n        this.callback && this.callback();\r\n        this.callback = null;\r\n        this.hideWin();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**获得图标 */\r\n  public resetIcon(iconConfig, parentNode?: Node, iconIndex?: number) {\r\n    this.use = true;\r\n    this.iconConfig = iconConfig;\r\n    this.iconIndex = iconIndex;\r\n    parentNode && parentNode.addChild(this.node);\r\n    this.node.setScale(iconConfig.scale[0], iconConfig.scale[1]);\r\n    this.faceAnimationNode.setScale(iconConfig.scale[0], iconConfig.scale[1]);\r\n  }\r\n\r\n  public getId() {\r\n    return this.iconConfig.id;\r\n  }\r\n\r\n  /**归还到缓存池 */\r\n  public restore() {\r\n    if (this.node && this.node.isValid) {\r\n      this.use = false;\r\n      this.iconIndex = -1;\r\n      this.node.active = true;\r\n      this.node.removeFromParent();\r\n      this.amountNode && (this.amountNode.active = false);\r\n      this.Particle2D && (this.Particle2D.active = true);\r\n      this.yinBiNode && (this.yinBiNode.active = false);\r\n      !this.isPoolObject && this.destory();\r\n    }\r\n  }\r\n\r\n  public getNode() {\r\n    return this.node;\r\n  }\r\n\r\n  public getHeight() {\r\n    return this.node.getComponent(UITransform).height;\r\n  }\r\n\r\n  public getIconIndex() {\r\n    return this.iconIndex;\r\n  }\r\n\r\n  public setPosition(value: Vec3) {\r\n    if (this.node) {\r\n      this.node.setPosition(value);\r\n      const offset = new Vec3(this.iconConfig.distance[0], this.iconConfig.distance[1]);\r\n      this.faceAnimationNode.setWorldPosition(this.node.worldPosition.clone().add(offset));\r\n    }\r\n  }\r\n\r\n  public getPosition() {\r\n    return this.node.getPosition();\r\n  }\r\n\r\n  public changeIcon(id) {\r\n    const { fileName, skeletonName } = getWild(id);\r\n    this.sprite.spriteFrame = sourceManageSeletor().getFile(fileName).source;\r\n    this.skeleton.skeletonData = sourceManageSeletor().getFile(skeletonName).source;\r\n  }\r\n\r\n  private buildIcon() {\r\n    this.faceAnimationNode.active = false;\r\n    this.faceAnimationNode.removeFromParent();\r\n\r\n    const skeletonData = sourceManageSeletor().getFile(this.iconConfig.skeletonName).source;\r\n    this.skeleton.skeletonData = skeletonData;\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n    // if (this.iconConfig.id === 12) {\r\n      \r\n    //   console.log(\"this.iconConfig.fileName\",this.iconConfig.fileName,this.iconConfig.skeletonName);\r\n    // }\r\n    \r\n    this.sprite.spriteFrame = sourceManageSeletor().getFile(this.iconConfig.fileName).source;\r\n\r\n  }\r\n\r\n  /**播放普通中奖 */\r\n  public playWin(parentNode: Node, isBorder: boolean = true, loop: boolean = true) {\r\n    const offset = new Vec3(this.iconConfig.distance[0], this.iconConfig.distance[1]);\r\n    this.yinBiNode && (this.yinBiNode.active = false);\r\n    this.yinBiNode && (this.yinBiNode.removeFromParent());\r\n    this.faceAnimationNode.active = true;\r\n    parentNode.addChild(this.faceAnimationNode)\r\n    this.faceAnimationNode.setWorldPosition(this.node.worldPosition.clone().add(offset));\r\n    // if (!this.faceAnimationNode.active) {\r\n      // this.faceAnimationNode.active = true;\r\n    //   if (!this.faceAnimationNode.parent) {\r\n    //     parentNode.addChild(this.faceAnimationNode)\r\n    //     this.faceAnimationNode.setWorldPosition(this.node.worldPosition.clone().add(offset));\r\n    //   }\r\n    // }\r\n\r\n    if (isBorder && !this.borderNode.active) {\r\n      this.borderNode.active = true;\r\n      if (!this.borderNode.parent) {\r\n        parentNode.addChild(this.borderNode);\r\n        this.borderNode.setWorldPosition(this.node.worldPosition);\r\n        this.borderNode.getComponent(Animation).play();\r\n      }\r\n    }\r\n\r\n    this.faceNode.active = false;\r\n    if (this.iconConfig.id === IconId.BEETLE) {//元宝\r\n      const skeletonData = sourceManageSeletor().getFile(SkeletalPathDefine.TUBIAO_YUANBAO_ZHONG_JIANG).source;\r\n      this.skeleton.skeletonData = skeletonData;\r\n    }\r\n\r\n    if (this.iconConfig.id === IconId.SCATTER) {//出现金钱图标时\r\n      const skeletonData = sourceManageSeletor().getFile(SkeletalPathDefine.TUBIAO_SCATTER_CHUXIAN).source;\r\n      this.skeleton.skeletonData = skeletonData;\r\n      new SkeletonAnimationPlayer(this.skeleton, this.iconConfig.animationArr[1], false, () => {\r\n        this.faceNode.active = true;\r\n        this.faceAnimationNode.active = false;\r\n      }).playAnimation()\r\n    } else {\r\n      \r\n      this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], loop);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /**播放scatter进入小游戏动画 */\r\n  public playScatterWin(parentNode: Node, done, loop: boolean = false) {\r\n    const offset = new Vec3(this.iconConfig.distance[0], this.iconConfig.distance[1]);\r\n    if (!this.faceAnimationNode.active) {\r\n      this.faceAnimationNode.active = true;\r\n      if (!this.faceAnimationNode.parent) {\r\n        parentNode.addChild(this.faceAnimationNode)\r\n        this.faceAnimationNode.setWorldPosition(this.node.worldPosition.clone().add(offset));\r\n      }\r\n    }\r\n\r\n    this.faceNode.active = false;\r\n    if (this.iconConfig.id === IconId.SCATTER) {//scatter\r\n      const skeletonData = sourceManageSeletor().getFile(SkeletalPathDefine.TUBIAO_SCATTER).source;\r\n      this.skeleton.skeletonData = skeletonData;\r\n    }\r\n    let count = 0;\r\n    const skeletonPlayer = new SkeletonAnimationPlayer(this.skeleton, this.iconConfig.animationArr[1], false, () => {\r\n      count++;\r\n      if (count >= 1) {\r\n        skeletonPlayer.stopAnimation()\r\n\r\n      }\r\n    })\r\n    skeletonPlayer.playAnimation()\r\n\r\n  }\r\n\r\n  /**播放特殊元宝动画 */\r\n  public playYuanBaoWinIcon(parentNode: Node,isWin:boolean,) {\r\n    this.faceAnimationNode.active = true;\r\n    this.node.addChild(this.faceAnimationNode);\r\n    this.faceAnimationNode.setWorldPosition(this.node.worldPosition);\r\n    this.faceNode.active = false;\r\n    let count = 0;\r\n    if (!isWin) {\r\n      const skeletonData = sourceManageSeletor().getFile(SkeletalPathDefine.TUBIAO_CHUXIAN).source;\r\n      this.skeleton.skeletonData = skeletonData;\r\n      this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], false);\r\n      this.yinBiNode.active = false;\r\n    } else {\r\n      const skeletonData = sourceManageSeletor().getFile(SkeletalPathDefine.TUBIAO_YUANBAO_ZHONG_JIANG).source;\r\n      this.skeleton.skeletonData = skeletonData;\r\n      this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], false);\r\n      const skeletonPlayer = new SkeletonAnimationPlayer(this.skeleton, this.iconConfig.animationArr[1], false, () => {\r\n        count++;\r\n        if (count >= 1) {\r\n          skeletonPlayer.stopAnimation()\r\n          this.faceNode.active = true;\r\n          this.faceAnimationNode.active = false;\r\n          this.yinBiNode.active = true;\r\n          this.node.addChild(this.faceAnimationNode);\r\n          this.yinBiNode.setWorldPosition(this.node.worldPosition);\r\n        }\r\n      })\r\n      skeletonPlayer.playAnimation()\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  /**播放甲壳虫动画 */\r\n  public playBeetleAnimation(done) {\r\n    this.callback = done;\r\n    this.faceAnimationNode.active = true;\r\n    this.node.addChild(this.faceAnimationNode);\r\n    this.faceAnimationNode.setWorldPosition(this.node.worldPosition);\r\n    this.faceNode.active = false;\r\n\r\n    this.amountNode.setSiblingIndex(this.node.children.length);\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], true);\r\n  }\r\n\r\n  /**隐藏普通中奖 */\r\n  public hideWin() {\r\n    this.faceAnimationNode.active = false;\r\n    this.faceAnimationNode.removeFromParent();\r\n    this.borderNode.active = false;\r\n    this.borderNode.removeFromParent();\r\n\r\n    this.faceNode.active = true;\r\n    this.yinBiNode.active = false;\r\n    this.yinBiNode.removeFromParent();\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n    this.Particle2D && (this.Particle2D.active = false);\r\n  }\r\n\r\n  public pauseWin() {\r\n    this.borderNode.active = false;\r\n    // this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n    this.skeleton.clearTracks();\r\n  }\r\n\r\n  /**是否使用 */\r\n  public isUse() {\r\n    return this.use;\r\n  }\r\n\r\n  public setAmount(amount) {\r\n    // this.amountNode.getComponent(Label).string = amount;\r\n  }\r\n\r\n  public showBg() {\r\n    this.node.getChildByName(\"bg\").active = true;\r\n  }\r\n\r\n  public hideBg() {\r\n    this.node.getChildByName(\"bg\").active = false;\r\n  }\r\n\r\n  public getAmountNode() {\r\n    return this.amountNode;\r\n  }\r\n\r\n  public getParticle2DNode() {\r\n    return this.Particle2D;\r\n  }\r\n\r\n  public getYinBiNode() {\r\n    return this.yinBiNode;\r\n  }\r\n\r\n  public destory() {\r\n    this.node.isValid && this.node.destroy();\r\n    this.faceAnimationNode.destroy();\r\n    this.borderNode.destroy();\r\n    this.node = null;\r\n    this.iconConfig = null;\r\n    this.skeleton = null;\r\n    this.yinBiNode.destroy();\r\n    this.Particle2D.destroy();\r\n    this.amountNode.destroy();\r\n  }\r\n}"]}