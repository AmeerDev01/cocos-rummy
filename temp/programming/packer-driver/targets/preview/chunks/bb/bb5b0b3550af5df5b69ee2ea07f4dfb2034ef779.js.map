{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/game/Crash_Persian_puritan.ts"],"names":["_decorator","ProgressBar","Label","Crash_ViewBase","Crash_NetMsgDispatcher","Countdown","ccclass","property","Crash_Persian_puritan","countdown","stateMachine","init","time","conversionTime","_nodes","getComponent","string","stopCountdown","startCountdown","duration","onUpdate","node","toFixed","progress","onEnd","active","getStateMachine","onDestroy","getInstance","removeAllProtocolByObj","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,K,OAAAA,K;;AAC1CC,MAAAA,c,iBAAAA,c;;AACDC,MAAAA,sB;;AACAC,MAAAA,S;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;uCAGjBQ,qB,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,qBADb;AAAA;AAAA,4CAC0D;AAAA;AAAA;AAAA,eAC9CC,SAD8C;AAAA,eAE9CC,YAF8C,GAEjC,IAFiC;AAAA;;AAGtDC,QAAAA,IAAI,CAACC,IAAD,EAAM;AACN;AACA;AACA;AACA,eAAKF,YAAL,GAAkB,KAAlB;AACA,cAAIG,cAAc,GAACD,IAAI,GAAG,EAA1B;AACA,eAAKE,MAAL,CAAY,YAAZ,EAA0BC,YAA1B,CAAuCb,KAAvC,EAA8Cc,MAA9C,0BAA0EJ,IAA1E;;AACA,cAAG,KAAKH,SAAR,EAAkB;AACd,iBAAKA,SAAL,CAAeQ,aAAf;AACH;;AACD,eAAKR,SAAL,GAAiB;AAAA;AAAA,uCAAjB;AACA,eAAKA,SAAL,CAAeS,cAAf,CAA8B;AAC1BC,YAAAA,QAAQ,EAAEN,cADgB;AAE1BO,YAAAA,QAAQ,EAAGR,IAAD,IAAU;AAChB,kBAAIS,IAAS,GAAC,KAAKP,MAAL,CAAY,cAAZ,CAAd;AACA,mBAAKA,MAAL,CAAY,YAAZ,EAA0BC,YAA1B,CAAuCb,KAAvC,EAA8Cc,MAA9C,0BAA2E,CAACJ,IAAI,GAAG,EAAR,EAAYU,OAAZ,CAAoB,CAApB,CAA3E;AACAD,cAAAA,IAAI,CAACN,YAAL,CAAkBd,WAAlB,EAA+BsB,QAA/B,GAAyCX,IAAI,GAAGC,cAAhD;AACH,aANyB;AAO1BW,YAAAA,KAAK,EAAE,MAAM;AACT,mBAAKH,IAAL,CAAUI,MAAV,GAAiB,KAAjB;AACA,mBAAKf,YAAL,GAAkB,IAAlB;AACA,mBAAKD,SAAL,CAAeQ,aAAf;AACH;AAXyB,WAA9B;AAaH;;AACMS,QAAAA,eAAe,GAAE;AACpB,iBAAO,KAAKhB,YAAZ;AACH;;AACSiB,QAAAA,SAAS,GAAG;AAClB,gBAAMA,SAAN;AACA,eAAKlB,SAAL,IAAkB,KAAKA,SAAL,CAAeQ,aAAf,EAAlB;AACA;AAAA;AAAA,gEAAuBW,WAAvB,GAAqCC,sBAArC,CAA4D,IAA5D;AACH;;AACDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAtCqD,O","sourcesContent":["import { _decorator, Component, Node ,ProgressBar,Label} from 'cc';\r\nimport {Crash_ViewBase} from \"../BaseView/Crash_ViewBase\";\r\nimport Crash_NetMsgDispatcher from '../net/Crash_NetMsgDispatcher';\r\nimport Countdown from '../utils/Countdown';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Persian_puritan')\r\nexport class Crash_Persian_puritan extends Crash_ViewBase {\r\n    private countdown:Countdown\r\n    private stateMachine=true\r\n    init(time){\r\n        // if(!this.stateMachine){\r\n        //     return\r\n        // }\r\n        this.stateMachine=false\r\n        let conversionTime=time * 10\r\n        this._nodes['Label_text'].getComponent(Label).string=`Jada game dimulai ${time}s`\r\n        if(this.countdown){\r\n            this.countdown.stopCountdown()\r\n        }\r\n        this.countdown = new Countdown();\r\n        this.countdown.startCountdown({\r\n            duration: conversionTime,\r\n            onUpdate: (time) => {\r\n                let node:Node=this._nodes['Progress_bar']\r\n                this._nodes['Label_text'].getComponent(Label).string=`Jada game dimulai ${ (time / 10).toFixed(2)}s`\r\n                node.getComponent(ProgressBar).progress= time / conversionTime\r\n            },\r\n            onEnd: () => {\r\n                this.node.active=false\r\n                this.stateMachine=true\r\n                this.countdown.stopCountdown()\r\n            },\r\n        });\r\n    }\r\n    public getStateMachine(){\r\n        return this.stateMachine\r\n    }\r\n    protected onDestroy() {\r\n        super.onDestroy();\r\n        this.countdown && this.countdown.stopCountdown()\r\n        Crash_NetMsgDispatcher.getInstance().removeAllProtocolByObj(this);\r\n    }\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}