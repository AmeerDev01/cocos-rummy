{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/fish/components/Fish_Room.ts"],"names":["Node","Toggle","Widget","_decorator","tween","sourceManageSelector","BaseComponent","EffectType","PrefabPathDefine","HelpViewModel","ccclass","property","Fish_Room","propertyNode","props_background_node","props_fish_pond_node","props_battery_node","props_auto","props_lock","props_side_board","props_side_jiantou","props_sidebtn_exit","props_sidebtn_help","props","events","update","deltaTime","setLockFisState","isChecked","setAutoFire","exitRoom","onDestroy","isTweenIn","start","getFishPondNode","getBatteryNode","getBackgroundNode","initState","bindEvent","on","EventType","TOGGLE","toggle","TOUCH_END","e","sideBoardHideShow","openHelp","useProps","key","value","bindUI","done","isValid","widget","getComponent","right","setScale","to","call","initSideBoard","scheduleOnce","hideSideBoard","setBtnLocaltion","scaleRatio","scale","mountView","getFile","HELP","source","appendTo","node","parent","effectType","EFFECT1","connect"],"mappings":"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","sourcesContent":["import { Node, Toggle, Vec3, Widget, _decorator, tween } from 'cc';\r\nimport { sourceManageSelector } from '../index';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { EffectType } from '../../../utils/NodeIOEffect';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport HelpViewModel from '../viewModel/HelpViewModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n}\r\nexport interface IEvent {\r\n\tupdate: (deltaTime: number) => void,\r\n\t/**设置锁定 */\r\n\tsetLockFisState: (isChecked: boolean) => void,\r\n\t/**设置自动开火 */\r\n\tsetAutoFire: (isChecked: boolean) => void,\r\n\texitRoom: () => void,\r\n\tonDestroy: () => void,\r\n}\r\n\r\n@ccclass('Fish_Room')\r\nexport class Fish_Room extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_background_node: new Node(),\r\n\t\tprops_fish_pond_node: new Node(),\r\n\t\tprops_battery_node: new Node(),\r\n\t\tprops_auto: new Node(),\r\n\t\tprops_lock: new Node(),\r\n\t\tprops_side_board: new Node(),\r\n\t\tprops_side_jiantou: new Node(),\r\n\t\tprops_sidebtn_exit: new Node(),\r\n\t\tprops_sidebtn_help: new Node(),\r\n\t}\r\n\tpublic props: IProps = {\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tupdate: (deltaTime: number) => { },\r\n\t\tsetLockFisState: (isChecked: boolean) => { },\r\n\t\tsetAutoFire: (isChecked: boolean) => { },\r\n\t\texitRoom: () => { },\r\n\t\tonDestroy: () => { },\r\n\t}\r\n\r\n\tpublic getFishPondNode() {\r\n\t\treturn this.propertyNode.props_fish_pond_node;\r\n\t}\r\n\r\n\tpublic getBatteryNode() {\r\n\t\treturn this.propertyNode.props_battery_node;\r\n\t}\r\n\r\n\tpublic getBackgroundNode() {\r\n\t\treturn this.propertyNode.props_background_node;\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_auto.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.events.setAutoFire(toggle.isChecked);\r\n\t\t})\r\n\t\tthis.propertyNode.props_lock.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.events.setLockFisState(toggle.isChecked);\r\n\t\t})\r\n\t\tthis.propertyNode.props_side_jiantou.on(Node.EventType.TOUCH_END, (e) => {\r\n\t\t\tthis.sideBoardHideShow();\r\n\t\t})\r\n\t\tthis.propertyNode.props_sidebtn_exit.on(Node.EventType.TOUCH_END, (e) => {\r\n\t\t\tthis.events.exitRoom();\r\n\t\t})\r\n\t\tthis.propertyNode.props_sidebtn_help.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.openHelp();\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tprivate isTweenIn = false;\r\n\tprivate sideBoardHideShow(done?) {\r\n\t\tif (this.isTweenIn || !this.isValid) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst widget = this.propertyNode.props_side_board.getComponent(Widget);\r\n\t\tconst right = widget.right !== -1 ? -1 : -74;\r\n\t\tif (right === -1) {\r\n\t\t\tthis.propertyNode.props_side_jiantou.setScale(1, 1);\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_side_jiantou.setScale(-1, 1);\r\n\t\t}\r\n\t\tthis.isTweenIn = true;\r\n\t\ttween(widget).to(0.5, { right }).call(() => {\r\n\t\t\tthis.isTweenIn = false;\r\n\t\t\tdone && done();\r\n\t\t}).start();\r\n\t}\r\n\r\n\tpublic initSideBoard() {\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tthis.sideBoardHideShow(() => {\r\n\t\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\t\tthis.sideBoardHideShow();\r\n\t\t\t\t}, 0.5)\r\n\t\t\t});\r\n\t\t}, 0.1)\r\n\t}\r\n\r\n\tpublic hideSideBoard() {\r\n\t\tthis.propertyNode.props_side_board.getComponent(Widget).right = -74;\r\n\t}\r\n\r\n\tpublic setBtnLocaltion(scaleRatio: number) {\r\n\t}\r\n\r\n\tpublic setScale(scale) {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\t\tthis.events.update(deltaTime);\r\n\t}\r\n\r\n\tprivate openHelp() {\r\n\t\tnew HelpViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.HELP).source).appendTo(this.node.parent, { effectType: EffectType.EFFECT1 }).connect();\r\n\t}\r\n\r\n\tprotected onDestroy(): void {\r\n\t\tthis.events.onDestroy();\r\n\t}\r\n}\r\n\r\n"]}