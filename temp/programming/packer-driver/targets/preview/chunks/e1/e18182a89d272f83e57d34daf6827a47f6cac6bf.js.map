{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/yxx/viewModel/HeadViewModel.ts"],"names":["ViewModel","StoreInject","getStore","SKT_MAG_TYPE","sktInstance","gameCacheData","HeadViewModel","constructor","begin","setEvent","giveGift","value","memberId","num","data","roomId","interactionId","toSitId","sendSktMessage","GIVE_GIFT","connect","inject","state","headType","game","seats","comp","props","index","betData","bet","newBetData","animationStatus","gameFlow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACOA,MAAAA,S;AAAaC,MAAAA,W,iBAAAA,W;;AAEXC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,W,iBAAAA,W;;AAEdC,MAAAA,a,iBAAAA,a;;;;;;;;;AAGHC,MAAAA,a,WADL;AAAA;AAAA,sCAAY;AAAA;AAAA,iCAAZ,C,gBAAD,MACMA,aADN;AAAA;AAAA,kCACgE;AAC9DC,QAAAA,WAAW,GAAG;AACZ,gBAAM,UAAN;AACD;;AAESC,QAAAA,KAAK,GAAG;AAChB,eAAKC,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAACC,KAAD,EAAgBC,QAAhB,EAAkCC,GAAlC,KAAkD;AAC1D,kBAAMC,IAAe,GAAG;AACtBC,gBAAAA,MAAM,EAAE;AAAA;AAAA,oDAAcA,MADA;;AAEtB;AACAC,gBAAAA,aAAa,EAAEL,KAHO;;AAItB;AACAM,gBAAAA,OAAO,EAAEL,QALa;;AAMtB;AACAC,gBAAAA,GAAG,EAAEA;AAPiB,eAAxB;AASA;AAAA;AAAA,8CAAYK,cAAZ,CAA2B;AAAA;AAAA,gDAAaC,SAAxC,EAAmDL,IAAnD;AACD;AAZW,WAAd;AAcD;;AAEMM,QAAAA,OAAO,GAAG;AACf,eAAKC,MAAL,CAAY,EAAZ,EAAiBC,KAAD,IAAsB;AACpC,mBAAO;AACLC,cAAAA,QAAQ,EAAED,KAAK,CAACE,IAAN,CAAWC,KAAX,CAAiB,KAAKC,IAAL,CAAUC,KAAV,CAAgBJ,QAAhB,CAAyBK,KAA1C,CADL;AAELC,cAAAA,OAAO,EAAEP,KAAK,CAACQ,GAAN,CAAUC,UAFd;AAGLC,cAAAA,eAAe,EAAEV,KAAK,CAACW,QAAN,CAAeD;AAH3B,aAAP;AAKD,WAND;AAOA,iBAAO,IAAP;AACD;;AA/B6D,O;;yBAkCjD1B,a","sourcesContent":["import { log } from \"cc\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { IEvent, IProps, Yxx_Head } from \"../components/Yxx_Head\"\r\nimport { getStore } from \"../store\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { SKT_MAG_TYPE, sktInstance } from \"../socketConnect\"\r\nimport { ReqGiftSo } from \"../type\"\r\nimport { gameCacheData } from \"../serverType\"\r\n\r\n@StoreInject(getStore())\r\nclass HeadViewModel extends ViewModel<Yxx_Head, IProps, IEvent> {\r\n  constructor() {\r\n    super('Yxx_Head')\r\n  }\r\n\r\n  protected begin() {\r\n    this.setEvent({\r\n      giveGift: (value: number, memberId: string, num: number) => {\r\n        const data: ReqGiftSo = {\r\n          roomId: gameCacheData.roomId,\r\n          /**道具Id */\r\n          interactionId: value,\r\n          /**获赠玩家 */\r\n          toSitId: memberId,\r\n          /** 总共需要花费的金币 */\r\n          num: num\r\n        }\r\n        sktInstance.sendSktMessage(SKT_MAG_TYPE.GIVE_GIFT, data)\r\n      }\r\n    })\r\n  }\r\n\r\n  public connect() {\r\n    this.inject({}, (state: StateType) => {\r\n      return {\r\n        headType: state.game.seats[this.comp.props.headType.index],\r\n        betData: state.bet.newBetData,\r\n        animationStatus: state.gameFlow.animationStatus\r\n      }\r\n    })\r\n    return this\r\n  }\r\n}\r\n\r\nexport default HeadViewModel"]}