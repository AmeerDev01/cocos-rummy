{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenixV2/components/PhoenixV2_DialogWin.ts"],"names":["_decorator","Label","Node","sp","BaseComponent","StepNumber","DialogType","GameType","isAuto","getNodeByNameDeep","config","StepNumberV2","phoenixV2_Audio","SoundPathDefine","ccclass","property","PhoenixV2_DialogWin","isClick","stepNumberV2","propertyNode","props_freeSettlement","props_bigWin","props_jackpot","props_megaWin","props_superWin","props_yuanBao_totalBet","props","dialogInfo","gameTypeInfo","lastGameType","MAIN","currGameType","viewGameType","leftCount","autoLauncherInfo","events","onWindowCloseHandler","dialogType","start","initState","bindEvent","node","on","EventType","TOUCH_END","isFreeGameEntry","isFreeGameSettlement","destroy","getChildByName","FREE_GAME_ENTRY","FREE_GAME_SETTLEMENT","useProps","key","value","isValid","hideAll","active","showFreeEntry","BIG_WIN","showBigWin","JACKPOT","showJackpot","MEGA_WIN","showMegaWin","SUPER_WIN","showSuperWin","showFreeSettlement","YUAN_BAO_WIN","showYuanBaoWin","playOneShot","GET_COIN","numberLabel","startStepNumber","getComponent","params","Skeleton","setCompleteListener","detryCloseWindow","numberMul","string","skeleton","label","end","done","num","Number","toFixed","formatAmountWithCommas","set","normalRollOption","numberRollerTime","scheduleOnce","dialogWinShowTime","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;;AACzBC,MAAAA,a,iBAAAA,a;;AAGFC,MAAAA,U;;AACgCC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,Q,iBAAAA,Q;AAAwBC,MAAAA,M,iBAAAA,M;;AAClEC,MAAAA,iB,iBAAAA,iB;;AAEFC,MAAAA,M;;AACAC,MAAAA,Y;;AAEEC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;;qCAiBjBgB,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb;AAAA;AAAA,0CAC+E;AAAA;AAAA;AAAA,eACtEC,OADsE,GAC5D,IAD4D;AAAA,eAMtEC,YANsE,GAMzC;AAAA;AAAA,4CAAiB,IAAjB,CANyC;AAAA,eAQpEC,YARoE,GAQrD;AACxB;AACAC,YAAAA,oBAAoB,EAAE,IAAIlB,IAAJ,EAFE;AAGxBmB,YAAAA,YAAY,EAAE,IAAInB,IAAJ,EAHU;AAIxBoB,YAAAA,aAAa,EAAE,IAAIpB,IAAJ,EAJS;AAKxBqB,YAAAA,aAAa,EAAE,IAAIrB,IAAJ,EALS;AAMxBsB,YAAAA,cAAc,EAAE,IAAItB,IAAJ,EANQ;AAOxBuB,YAAAA,sBAAsB,EAAE,IAAIvB,IAAJ,EAPA,CAQxB;AACM;AACA;AACA;AACA;;AAZkB,WARqD;AAAA,eAuBvEwB,KAvBuE,GAuBvD;AACtBC,YAAAA,UAAU,EAAE,IADU;AAEtBC,YAAAA,YAAY,EAAE;AACbC,cAAAA,YAAY,EAAE;AAAA;AAAA,wCAASC,IADV;AAEbC,cAAAA,YAAY,EAAE;AAAA;AAAA,wCAASD,IAFV;AAGbE,cAAAA,YAAY,EAAE;AAAA;AAAA,wCAASF,IAHV;AAIbG,cAAAA,SAAS,EAAE;AAJE,aAFQ;AAQtBC,YAAAA,gBAAgB,EAAE;AARI,WAvBuD;AAAA,eAkCvEC,MAlCuE,GAkCtD;AACvBC,YAAAA,oBAAoB,EAAGC,UAAD,IAA4B,CAAG;AAD9B,WAlCsD;AAAA;;AAE9EC,QAAAA,KAAK,GAAG,CAEP;;AAkCSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AACA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKC,IAAL,CAAUC,EAAV,CAAaxC,IAAI,CAACyC,SAAL,CAAeC,SAA5B,EAAuC,MAAM;AAC5C,gBAAI,KAAKC,eAAL,MAA0B,KAAKC,oBAAL,EAA9B,EAA2D;AAC1D,mBAAKL,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WALD;AAQD,eAAKI,IAAL,CAAUO,cAAV,CAAyB,cAAzB,EAAyCN,EAAzC,CAA4CxC,IAAI,CAACyC,SAAL,CAAeC,SAA3D,EAAsE,MAAM;AAC3E,gBAAI,KAAKC,eAAL,MAA0B,KAAKC,oBAAL,EAA9B,EAA4D;AAE3D,mBAAKL,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WAND;AAOC;;AAGOQ,QAAAA,eAAe,GAAG;AACzB,iBAAO,KAAKnB,KAAL,CAAWC,UAAX,IAAyB,KAAKD,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,wCAAWY,eAAhF;AACA;;AAEOH,QAAAA,oBAAoB,GAAG;AAC9B,iBAAO,KAAKpB,KAAL,CAAWC,UAAX,IAAyB,KAAKD,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,wCAAWa,oBAAhF;AACA;;AAGSC,QAAAA,QAAQ,CAACC,GAAD,EAAiCC,KAAjC,EAAgE;AACjF,cAAI,KAAKZ,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC,gBAAIF,GAAG,KAAK,UAAZ,EAAwB;AACvB,mBAAKG,OAAL;;AACA,kBAAI,KAAK7B,KAAL,CAAWC,UAAf,EAA2B;AAC1B,qBAAKc,IAAL,CAAUe,MAAV,GAAmB,IAAnB;;AACA,oBAAI,KAAK9B,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAWY,eAApD,EAAqE;AACpE,uBAAKQ,aAAL;AACA,iBAFD,MAEO,IAAI,KAAK/B,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAWqB,OAApD,EAA6D;AACnE,uBAAKC,UAAL;AACA,iBAFM,MAEA,IAAI,KAAKjC,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAWuB,OAApD,EAA6D;AACnE,uBAAKC,WAAL;AACA,iBAFM,MAEA,IAAI,KAAKnC,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAWyB,QAApD,EAA8D;AACpE,uBAAKC,WAAL;AACA,iBAFM,MAEA,IAAI,KAAKrC,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAW2B,SAApD,EAA+D;AACrE,uBAAKC,YAAL;AACA,iBAFM,MAEA,IAAI,KAAKvC,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAWa,oBAApD,EAA0E;AAChF,uBAAKgB,kBAAL;AACA,iBAFM,MAED,IAAI,KAAKxC,KAAL,CAAWC,UAAX,CAAsBU,UAAtB,KAAqC;AAAA;AAAA,8CAAW8B,YAApD,EAAkE;AACvE,uBAAKC,cAAL;AACA;AACD,eAjBD,MAiBO;AACN,qBAAK3B,IAAL,CAAUe,MAAV,GAAmB,KAAnB;AACA;AACD;AACD;AACD;;AAEOD,QAAAA,OAAO,GAAG;AACjB,eAAK,IAAMH,GAAX,IAAkB,KAAKjC,YAAvB,EAAqC;AACpC,iBAAKA,YAAL,CAAkBiC,GAAlB,EAAuBI,MAAvB,GAAgC,KAAhC;AACA;AACD;;AAEOC,QAAAA,aAAa,GAAG,CAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEOE,QAAAA,UAAU,GAAG;AACpB;AAAA;AAAA,kDAAgBU,WAAhB,CAA4B;AAAA;AAAA,kDAAgBC,QAA5C;AACA,eAAKnD,YAAL,CAAkBE,YAAlB,CAA+BmC,MAA/B,GAAwC,IAAxC;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,QAAlB,EAA4B,KAAKpD,YAAL,CAAkBE,YAA9C,CAApB;AACA,eAAKmD,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM,CAC/F;AACA,WAFD;AAGA,eAAKvD,YAAL,CAAkBE,YAAlB,CAA+B2B,cAA/B,CAA8C,OAA9C,EAAuDyB,YAAvD,CAAoEtE,EAAE,CAACwE,QAAvE,EAAiFC,mBAAjF,CAAqG,MAAM;AAC1G,gBAAI,KAAKnC,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC,mBAAKb,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WALD;AAMA;;AAEOwB,QAAAA,WAAW,GAAG;AACrB;AAAA;AAAA,kDAAgBQ,WAAhB,CAA4B;AAAA;AAAA,kDAAgBC,QAA5C;AACA,eAAKnD,YAAL,CAAkBG,aAAlB,CAAgCkC,MAAhC,GAAyC,IAAzC;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,QAAlB,EAA4B,KAAKpD,YAAL,CAAkBG,aAA9C,CAApB;AACA,eAAKkD,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM;AAC/F,iBAAKG,gBAAL;AACA,WAFD,EAJqB,CAOrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEOd,QAAAA,WAAW,GAAG;AACrB;AAAA;AAAA,kDAAgBM,WAAhB,CAA4B;AAAA;AAAA,kDAAgBC,QAA5C;AACA,eAAKnD,YAAL,CAAkBI,aAAlB,CAAgCiC,MAAhC,GAAyC,IAAzC;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,QAAlB,EAA4B,KAAKpD,YAAL,CAAkBI,aAA9C,CAApB;AACA,eAAKiD,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM,CAC/F;AACA,WAFD;AAGA,eAAKvD,YAAL,CAAkBI,aAAlB,CAAgCyB,cAAhC,CAA+C,OAA/C,EAAwDyB,YAAxD,CAAqEtE,EAAE,CAACwE,QAAxE,EAAkFC,mBAAlF,CAAsG,MAAM;AAC3G,gBAAI,KAAKnC,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC,mBAAKb,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WALD;AAMA;;AAEO4B,QAAAA,YAAY,GAAG;AACtB;AAAA;AAAA,kDAAgBI,WAAhB,CAA4B;AAAA;AAAA,kDAAgBC,QAA5C;AACA,eAAKnD,YAAL,CAAkBK,cAAlB,CAAiCgC,MAAjC,GAA0C,IAA1C;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,QAAlB,EAA4B,KAAKpD,YAAL,CAAkBK,cAA9C,CAApB;AACA,eAAKgD,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM,CAC/F;AACA,WAFD;AAIA,eAAKvD,YAAL,CAAkBK,cAAlB,CAAiCwB,cAAjC,CAAgD,OAAhD,EAAyDyB,YAAzD,CAAsEtE,EAAE,CAACwE,QAAzE,EAAmFC,mBAAnF,CAAuG,MAAM;AAC5G,gBAAI,KAAKnC,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC,mBAAKb,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WALD;AAMA;;AAEO6B,QAAAA,kBAAkB,GAAG;AAC5B,eAAK/C,YAAL,CAAkBC,oBAAlB,CAAuCoC,MAAvC,GAAgD,IAAhD;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,cAAlB,EAAkC,KAAKpD,YAAL,CAAkBC,oBAApD,CAApB,CAF4B,CAG5B;AACA;AACA;;AAEA,eAAKoD,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM;AAC/F;AACA,gBAAI,KAAKjC,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAAvB,IAAkC;AAAA;AAAA,kCAAO,KAAK5B,KAAL,CAAWQ,gBAAlB,EAAoC,KAAKR,KAAL,CAAWE,YAA/C,CAAtC,EAAoG;AACnG,mBAAKiD,gBAAL;AACA;AACD,WALD;AAOA;;AAEOT,QAAAA,cAAc,GAAG;AACxB,eAAKjD,YAAL,CAAkBM,sBAAlB,CAAyC+B,MAAzC,GAAkD,IAAlD;AACA,cAAMe,WAAW,GAAG;AAAA;AAAA,sDAAkB,oBAAlB,EAAwC,KAAKpD,YAAL,CAAkBM,sBAA1D,CAApB;AACA,cAAMqD,SAAS,GAAG;AAAA;AAAA,sDAAkB,qBAAlB,EAAyC,KAAK3D,YAAL,CAAkBM,sBAA3D,CAAlB;AACAqD,UAAAA,SAAS,CAACL,YAAV,CAAuBxE,KAAvB,EAA8B8E,MAA9B,GAAuC,MAAM,KAAKrD,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAA7C;AAEA,cAAMM,QAAQ,GAAG,KAAK7D,YAAL,CAAkBM,sBAAlB,CAAyCuB,cAAzC,CAAwD,gBAAxD,EAA0EyB,YAA1E,CAAuFtE,EAAE,CAACwE,QAA1F,CAAjB;AAEA,eAAKH,eAAL,CAAqBD,WAAW,CAACE,YAAZ,CAAyBxE,KAAzB,CAArB,EAAsD,CAAtD,EAAyD,KAAKyB,KAAL,CAAWC,UAAX,CAAsB+C,MAAtB,CAA6B,CAA7B,CAAzD,EAA0F,MAAM;AAC/F,iBAAKG,gBAAL;AACA,WAFD,EARwB,CAYxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEOL,QAAAA,eAAe,CAACS,KAAD,EAAe3C,KAAf,EAAsB4C,GAAtB,EAA2BC,IAA3B,EAAiC;AACvD;AAAA;AAAA,wCAAe7C,KAAf,EAAsB4C,GAAtB,EAA4BE,GAAD,IAAS;AACnC,gBAAI,KAAK3C,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC2B,cAAAA,KAAK,CAACF,MAAN,GAAeM,MAAM,CAACD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAD,CAAN,CAAuBC,sBAAvB,EAAf;AACA;AACD,WAJD,EAIG,MAAM,KAAK9C,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAAvB,IAAkC6B,IAAI,EAJ/C,EAImDK,GAJnD,CAIuD;AAAA;AAAA,gCAAOC,gBAAP,CAAwBC,gBAJ/E,EAIiGpD,KAJjG,GADuD,CAMvD;AACA;AACA;AACA;AACA;AACA;;AAEOuC,QAAAA,gBAAgB,GAAG;AAC1B,eAAKc,YAAL,CAAkB,MAAM;AACvB,gBAAI,KAAKlD,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AACnC,mBAAKb,IAAL,CAAUM,OAAV;AACA,mBAAKZ,MAAL,CAAYC,oBAAZ,CAAiC,KAAKV,KAAL,CAAWC,UAAX,CAAsBU,UAAvD;AACA;AACD,WALD,EAKG;AAAA;AAAA,gCAAOoD,gBAAP,CAAwBG,iBAL3B;AAMA;;AAESC,QAAAA,MAAM,GAAS,CACxB;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AArP6E,O","sourcesContent":["import { _decorator, Label, Node, sp, Sprite, tween, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { AutoLauncherInfo, DialogInfo, DialogType, GameType, GameTypeInfo, isAuto } from '../type';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { chooseSmallGame, updateSubGameAnimationPlayInfo } from '../store/actions/game';\r\nimport config from '../config';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport SkeletonAnimationPlayer from '../../../utils/SkeletonPlay';\r\nimport { phoenixV2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tdialogInfo?: DialogInfo,\r\n\tgameTypeInfo?: GameTypeInfo,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo?: AutoLauncherInfo\r\n}\r\nexport interface IEvent {\r\n\tonWindowCloseHandler: (dialogType: DialogType) => void\r\n}\r\n\r\n@ccclass('PhoenixV2_DialogWin')\r\nexport class PhoenixV2_DialogWin extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate isClick = true;\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprotected propertyNode = {\r\n\t\t// props_freeEntry: new Node(),\r\n\t\tprops_freeSettlement: new Node(),\r\n\t\tprops_bigWin: new Node(),\r\n\t\tprops_jackpot: new Node(),\r\n\t\tprops_megaWin: new Node(),\r\n\t\tprops_superWin: new Node(),\r\n\t\tprops_yuanBao_totalBet: new Node(),\r\n\t\t// props_btn_sgChoose_25: new Node(),\r\n        // props_btn_sgChoose_20: new Node(),\r\n        // props_btn_sgChoose_15: new Node(),\r\n        // props_btn_sgChoose_13: new Node(),\r\n        // props_btn_sgChoose_10: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdialogInfo: null,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.MAIN,\r\n\t\t\tcurrGameType: GameType.MAIN,\r\n\t\t\tviewGameType: GameType.MAIN,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonWindowCloseHandler: (dialogType: DialogType) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.isFreeGameEntry() || this.isFreeGameSettlement()) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t\r\n\tthis.node.getChildByName('SpriteSplash').on(Node.EventType.TOUCH_END, () => {\r\n\t\tif (this.isFreeGameEntry() || this.isFreeGameSettlement() ) {\r\n\t\t\t\r\n\t\t\tthis.node.destroy();\r\n\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t} \r\n\t})\r\n\t}\r\n\r\n\r\n\tprivate isFreeGameEntry() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY;\r\n\t}\r\n\r\n\tprivate isFreeGameSettlement() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT;\r\n\t}\r\n\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === '_setDone') {\r\n\t\t\t\tthis.hideAll();\r\n\t\t\t\tif (this.props.dialogInfo) {\r\n\t\t\t\t\tthis.node.active = true;\r\n\t\t\t\t\tif (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY) {\r\n\t\t\t\t\t\tthis.showFreeEntry();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.BIG_WIN) {\r\n\t\t\t\t\t\tthis.showBigWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.JACKPOT) {\r\n\t\t\t\t\t\tthis.showJackpot();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.MEGA_WIN) {\r\n\t\t\t\t\t\tthis.showMegaWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.SUPER_WIN) {\r\n\t\t\t\t\t\tthis.showSuperWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT) {\r\n\t\t\t\t\t\tthis.showFreeSettlement();\r\n\t\t\t\t\t}else if (this.props.dialogInfo.dialogType === DialogType.YUAN_BAO_WIN) {\r\n\t\t\t\t\t\tthis.showYuanBaoWin();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.node.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate hideAll() {\r\n\t\tfor (const key in this.propertyNode) {\r\n\t\t\tthis.propertyNode[key].active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showFreeEntry() {\r\n\t\t\r\n\t\t// const labelNode = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeEntry)\r\n\t\t// labelNode.getComponent(Label).string = this.props.dialogInfo.params[0];\r\n\t\t// this.sgChooseShow()\r\n\t\t// // 如果是自动模式，就等待关闭窗口\r\n\t\t// if (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t// \tthis.detryCloseWindow();\r\n\t\t// }\r\n\t}\r\n\r\n\tprivate showBigWin() {\r\n\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.GET_COIN);\r\n\t\tthis.propertyNode.props_bigWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_bigWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// this.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_bigWin.getChildByName(\"sk_bw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showJackpot() {\r\n\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.GET_COIN);\r\n\t\tthis.propertyNode.props_jackpot.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_jackpot)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t\t// this.propertyNode.props_jackpot.getChildByName(\"sk_jackpot\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t// \tif (this.node && this.node.isValid) {\r\n\t\t// \t\tthis.node.destroy();\r\n\t\t// \t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\tprivate showMegaWin() {\r\n\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.GET_COIN);\r\n\t\tthis.propertyNode.props_megaWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_megaWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// this.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_megaWin.getChildByName(\"sk_mw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showSuperWin() {\r\n\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.GET_COIN);\r\n\t\tthis.propertyNode.props_superWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_superWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// this.detryCloseWindow();\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_superWin.getChildByName(\"sk_sw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showFreeSettlement() {\r\n\t\tthis.propertyNode.props_freeSettlement.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeSettlement)\r\n\t\t// new StepNumber(0, this.props.dialogInfo.params[0], (num) => {\r\n\t\t// \tnumberLabel.getComponent(Label).string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// }).start();\r\n\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\t\tif (this.node && this.node.isValid && isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\t\tthis.detryCloseWindow();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tprivate showYuanBaoWin() {\r\n\t\tthis.propertyNode.props_yuanBao_totalBet.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"label_total_winNum\", this.propertyNode.props_yuanBao_totalBet)\r\n\t\tconst numberMul = getNodeByNameDeep(\"label_total_multipl\", this.propertyNode.props_yuanBao_totalBet)\r\n\t\tnumberMul.getComponent(Label).string = \"X\" + this.props.dialogInfo.params[1];\r\n\r\n\t\tconst skeleton = this.propertyNode.props_yuanBao_totalBet.getChildByName(\"props_skeleton\").getComponent(sp.Skeleton);\r\n\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\r\n\t\t// let count = 0;\r\n\t\t// const skeletonPlayer = new SkeletonAnimationPlayer(skeleton, \"animation\", true, () => { \r\n\t\t// \tcount++\r\n\t\t// \tif (count >= 2) {\r\n\t\t// \t\tif (this.node && this.node.isValid) {\r\n\t\t// \t\t\tthis.node.destroy();\r\n\t\t// \t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t// })\r\n\t\t// skeletonPlayer.playAnimation()\r\n\r\n\t}\r\n\r\n\tprivate startStepNumber(label: Label, start, end, done) {\r\n\t\tnew StepNumber(start, end, (num) => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t}\r\n\t\t}, () => this.node && this.node.isValid && done()).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t// this.stepNumberV2.start(start, end, (num) => {\r\n\t\t// \tif (this.node && this.node.isValid) {\r\n\t\t// \t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// \t}\r\n\t\t// }, () => this.node && this.node.isValid && done(), config.normalRollOption.numberRollerTime);\r\n\t}\r\n\r\n\tprivate detryCloseWindow() {\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t}, config.normalRollOption.dialogWinShowTime)\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}