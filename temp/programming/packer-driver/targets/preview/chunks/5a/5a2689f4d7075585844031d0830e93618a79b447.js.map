{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfc/Slot/Component/gxfc_DialogWin.ts"],"names":["_decorator","Label","Node","tween","UIOpacity","Vec3","BaseComponent","ccclass","property","DialogType","gxfc_DialogWin","timer","showNode","start","bindEvent","bindUI","showDialog","dialogType","amount","keepTime","cb","insider","setScale","uiOpacity","getComponent","opacity","active","SpriteSplash","score","YOUWON","formatAmountWithCommas","getChildByName","string","to","scale","easing","call","window","setTimeout","hideDialog","node","destroy","clearTimeout","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, tween, UIOpacity, Vec2, Vec3 } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport enum DialogType {\r\n\tBIG_WIN = \"bigWin\",\r\n\tJACKPOT = \"jackpot\",\r\n\tMEGA_WIN = \"megaWin\",\r\n\tSUPER_WIN = \"superWin\",\r\n\tSETTLE = \"settle\",\r\n    PRESS_START = \"pressStart\",\r\n    YOUWON = \"youWon\",\r\n}\r\n\r\n@ccclass('gxfc_DialogWin')\r\nexport class gxfc_DialogWin extends BaseComponent {\r\n\r\n\t@property(Node)\r\n\tinsider: Node = null\r\n\r\n\t@property(Node)\r\n\tbigWin: Node = null\r\n\r\n\t@property(Node)\r\n\tjackpot: Node = null\r\n\r\n\t@property(Node)\r\n\tmegaWin: Node = null\r\n\r\n\t@property(Node)\r\n\tsuperWin: Node = null\r\n\r\n\t@property(Node)\r\n\tsettle: Node = null\r\n\r\n\t@property(Node)\r\n\tSpriteSplash: Node = null\r\n\r\n\t@property(Node)\r\n\tpressStart: Node = null\r\n\t@property(Node)\r\n\tyouWon: Node = null\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tprivate timer: number\r\n\tprivate showNode: Node\r\n\t/**\r\n\t * 大奖弹窗\r\n\t * @param dialogType 展示类型\r\n\t * @param amount 展示金额\r\n\t * @param keepTime 持续时间（若传0，则不自动关闭）\r\n\t * @param cb 回调函数\r\n\t */\r\n\tpublic showDialog(dialogType: DialogType, amount: number, keepTime: number, cb?: () => void) {\r\n        this.insider.setScale(new Vec3(0, 0, 0))\r\n        const uiOpacity = this.insider.getComponent(UIOpacity)\r\n        uiOpacity.opacity = 0;\r\n        this.showNode = this[dialogType] as Node\r\n        this.showNode.active = true;\r\n        this.SpriteSplash.active = false;\r\n\t\tconst score = dialogType === DialogType.YOUWON ? amount.formatAmountWithCommas() : amount;\r\n        this.showNode.getChildByName(\"score\").getComponent(Label).string = score + '';\r\n        tween(this.insider).to(0.5, { scale: new Vec3(1, 1, 0) }, { easing: \"backOut\" }).start()\r\n        tween(uiOpacity).to(0.2, { opacity: 255 }).call(() => {\r\n            this.SpriteSplash.active = true;\r\n        }).start()\r\n        keepTime && (this.timer = window.setTimeout(() => {\r\n            this.hideDialog()\r\n            this.node.destroy()\r\n            cb && cb()\r\n        }, keepTime))\r\n\t}\r\n\r\n\tpublic hideDialog() {\r\n\t\tconst uiOpacity = this.insider.getComponent(UIOpacity)\r\n\t\tthis.SpriteSplash.active = false;\r\n\t\ttween(this.insider).to(0.3, { scale: new Vec3(0, 0, 0) }).start()\r\n\t\ttween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n\t\t\tthis.showNode.active = false\r\n\t\t}).start()\r\n\t\tthis.timer && window.clearTimeout(this.timer)\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n\r\n}\r\n\r\n"]}