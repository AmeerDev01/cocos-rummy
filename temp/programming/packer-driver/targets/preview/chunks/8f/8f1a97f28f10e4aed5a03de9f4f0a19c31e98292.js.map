{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth111/components/GodWealth_gameBoard.ts"],"names":["_decorator","Node","BaseComponent","GameType","setShowAuthLaunch","ccclass","property","GodWealth_gameBoard","propertyNode","props_gameBoard","props_wrap","props_spr_main_bg","props","gameType","NONE","events","changeGameHandler","lastGameType","currGameType","start","initState","bindEvent","node","on","EventType","TOUCH_END","dispatch","useProps","key","value","pre","cur","bindUI","getGameNode","getWrapNode","removeComma","str","newStr","replace","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA2CC,MAAAA,I,OAAAA,I;;AAC3CC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Q,iBAAAA,Q;;AACcC,MAAAA,iB,iBAAAA,iB;;;;;;;;;OAIjB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAejBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb;AAAA;AAAA,0CAC+E;AAAA;AAAA;AAAA,eAKpEC,YALoE,GAKrD;AACxBC,YAAAA,eAAe,EAAE,IAAIR,IAAJ,EADO;AAExBS,YAAAA,UAAU,EAAE,IAAIT,IAAJ,EAFY;;AAGxB;AACAU,YAAAA,iBAAiB,EAAE,IAAIV,IAAJ,EAJK,CAKxB;;AALwB,WALqD;AAAA,eAcvEW,KAduE,GAcvD;AACtBC,YAAAA,QAAQ,EAAE;AAAA;AAAA,sCAASC;AADG,WAduD;AAAA,eAkBvEC,MAlBuE,GAkBtD;AACvBC,YAAAA,iBAAiB,EAAE,CAACC,YAAD,EAAyBC,YAAzB,KAAoD,CAAG;AADnD,WAlBsD;AAAA;;AAC9EC,QAAAA,KAAK,GAAG,CAEP;;AAmBSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AAGA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKC,IAAL,CAAUC,EAAV,CAAatB,IAAI,CAACuB,SAAL,CAAeC,SAA5B,EAAuC,MAAM;AAC5C,iBAAKC,QAAL,CAAc;AAAA;AAAA,wDAAkB,KAAlB,CAAd;AACA,WAFD;AAGA;;AAESC,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAID,GAAG,KAAK,UAAZ,EAAwB;AACvB,iBAAKb,MAAL,CAAYC,iBAAZ,CAA8Ba,KAAK,CAACC,GAApC,EAAyCD,KAAK,CAACE,GAA/C,EADuB,CAEvB;AACA;AACA;AACD;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEMC,QAAAA,WAAW,GAAG;AACpB,iBAAO,KAAKzB,YAAL,CAAkBC,eAAzB;AACA;;AAEMyB,QAAAA,WAAW,GAAG;AACpB,iBAAO,KAAK1B,YAAL,CAAkBE,UAAzB;AACA,SApD6E,CAsD9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEQyB,QAAAA,WAAW,CAACC,GAAD,EAAK;AACvB,cAAMC,MAAM,GAACD,GAAG,CAACE,OAAJ,CAAY,IAAZ,EAAiB,EAAjB,CAAb;AACA,iBAAOD,MAAP;AACA;;AAGDE,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAxG6E,O","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, tween, UITransform } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { GameType } from '../type';\r\nimport { changeProfit, setShowAuthLaunch } from '../store/actions/game';\r\nimport { rollerPanelViewModel } from '../viewModel/GameBoardViewModel';\r\nimport { footerViewModel } from '../index';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tgameType: GameType\r\n}\r\nexport interface IEvent {\r\n\t/**子游戏值改变要执行的函数 */\r\n\tchangeGameHandler: (lastGameType: GameType, currGameType: GameType) => void\r\n}\r\n\r\n@ccclass('GodWealth_gameBoard')\r\nexport class GodWealth_gameBoard extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_gameBoard: new Node(),\r\n\t\tprops_wrap: new Node(),\r\n\t\t/**主界面背景 */\r\n\t\tprops_spr_main_bg: new Node(),\r\n\t\t// props_spr_main_greenBg:new Node(),\r\n\t\t\t\t\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tgameType: GameType.NONE\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tchangeGameHandler: (lastGameType: GameType, currGameType: GameType) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(setShowAuthLaunch(false))\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"gameType\") {\r\n\t\t\tthis.events.changeGameHandler(value.pre, value.cur)\r\n\t\t\t// this.propertyNode.props_spr_main_blueBg.active = value.cur === GameType.MAIN;\r\n\t\t\t// this.propertyNode.props_spr_main_greenBg.active = value.cur === GameType.SUBGAME1;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\t\r\n\t}\r\n\r\n\tpublic getGameNode() {\r\n\t\treturn this.propertyNode.props_gameBoard\r\n\t}\r\n\r\n\tpublic getWrapNode() {\r\n\t\treturn this.propertyNode.props_wrap\r\n\t}\r\n\r\n\t// public multiplierBaoHe(callback) {\r\n\t// \trollerPanelViewModel.comp.rollerViewModelMap.forEach((roller, index) => { \r\n\t// \t\troller.comp.baoHeItemArr.forEach((item, i) => {\r\n\t// \t\t\tconsole.log(\"item\",item);\r\n\t// \t\t\tconst baoHeAmount = item.viewNode.getChildByName(\"props_amount\");\r\n\t// \t\t\tbaoHeAmount.active = false;\r\n\t// \t\t\t// 获取起始和目标的世界坐标\r\n\t// \t\t\tlet startWorldPos = item.viewNode.getChildByName(\"props_Particle2D\").worldPosition;\r\n\t// \t\t\t// console.log(footerViewModel.comp.getPropertyNode().props_btn_down_putar as Node);\r\n\t\t\t\t\r\n\t// \t\t\tlet targetWorldPos = (footerViewModel.comp.getPropertyNode().props_word_down_winNum as Node).worldPosition;\r\n\t// \t\t\t// 创建节点的实例\r\n\t// \t\t\tconst node = instantiate(item.viewNode.getChildByName(\"props_Particle2D\"));\r\n\t// \t\t\tnode.active = true;\r\n\t// \t\t\t// 将节点添加到目标节点所在的父节点\r\n\t// \t\t\tfooterViewModel.comp.node.addChild(node);\r\n\t// \t\t\t// 获取父节点的 UITransform 组件\r\n\t// \t\t\tlet uiTransform = footerViewModel.comp.node.getComponent(UITransform);\r\n\t// \t\t\t// 将世界坐标转换为新父节点的局部坐标\r\n\t// \t\t\tlet startLocalPos = uiTransform.convertToNodeSpaceAR(startWorldPos);\r\n\t// \t\t\tlet targetLocalPos = uiTransform.convertToNodeSpaceAR(targetWorldPos);\r\n\t// \t\t\t// 设置节点的初始位置\r\n\t// \t\t\tnode.setPosition(startLocalPos);\r\n\t\t\t\r\n\t// \t\t\t// 执行缓动动画\r\n\t// \t\t\ttween(node)\r\n\t// \t\t\t\t.to(1, { position: targetLocalPos }, { easing: 'sineInOut' })\r\n\t// \t\t\t\t.call(() => {\r\n\t// \t\t\t\t\tconst amountTotal = (footerViewModel.comp.getPropertyNode().props_word_down_winNum as Label).string;\r\n\t// \t\t\t\t\tconst baoHeAmount = item.viewNode.getChildByName(\"props_amount\").getChildByName(\"props_baohe_label\").getComponent(Label).string\r\n\t// \t\t\t\t\tconsole.log(\"amountTotal\",amountTotal,baoHeAmount);\r\n\t\t\t\t\t\t\r\n\t// \t\t\t\t\t// let total = Number(this.removeComma(amountTotal)) + Number(this.removeComma(baoHeAmount));\r\n\t// \t\t\t\t\t// (footerViewModel.comp.getPropertyNode().props_word_down_winNum as Label).string = total.formatAmountWithCommas();\r\n\t// \t\t\t\t\t// this.dispatch( changeProfit(total) ); //更新盈亏\r\n\t// \t\t\t\t\tnode.destroy()\r\n\t// \t\t\t\t})\r\n\t// \t\t\t\t.start();\r\n\t// \t\t})\r\n\t// \t})\r\n\t// }\r\n\r\n\tprivate removeComma(str){\r\n\t\tconst newStr=str.replace(/,/g,\"\")\r\n\t\treturn newStr\r\n\t}\r\n\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}