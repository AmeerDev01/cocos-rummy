{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfcV2/components/GxfcV2_RulePanel.ts"],"names":["_decorator","Node","PageView","BaseComponent","GxfcV2_Audio","SoundPathDefine","ccclass","property","GxfcV2_RulePanel","propertyNode","props_btnClose","props_img_rule_1","props_img_rule_2","props_img_rule_3","props_img_rule_4","props_img_rule_5","props_PageView","props_indicator","props","events","onClose","start","initState","bindEvent","on","EventType","TOUCH_END","playOneShot","btn_click","TOUCH_MOVE","turn","scrollPageViewListener","useProps","key","value","node","SCROLL_ENDED","pageView","curPageIdx","scrollToPage","getPages","length","showIndex","page","num","arr","children","filter","v","name","startsWith","forEach","item","i","getChildByName","active","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Node, PageView } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { GxfcV2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n}\r\nexport interface IEvent {\r\n\tonClose: () => void\r\n}\r\n\r\n@ccclass('GxfcV2_RulePanel')\r\nexport class GxfcV2_RulePanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btnClose: new Node(),\r\n\t\tprops_img_rule_1: new Node(),\r\n\t\tprops_img_rule_2: new Node(),\r\n\t\tprops_img_rule_3: new Node(),\r\n\t\tprops_img_rule_4: new Node(),\r\n\t\tprops_img_rule_5: new Node(),\r\n\t\tprops_PageView: new PageView(),\r\n\t\tprops_indicator:new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClose: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btnClose.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tthis.events.onClose();\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_1.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.turn)\r\n\t\t\tthis.scrollPageViewListener()\r\n\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_2.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.turn)\r\n\t\t\tthis.scrollPageViewListener()\r\n\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_3.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.turn)\r\n\t\t\tthis.scrollPageViewListener()\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_4.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.turn)\r\n\t\t\tthis.scrollPageViewListener()\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_5.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.turn)\r\n\t\t\tthis.scrollPageViewListener()\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t}\r\n\r\n\tprivate scrollPageViewListener() {\r\n\t\tif (!this.propertyNode) return\r\n\t\tthis.propertyNode.props_PageView.node.on(PageView.EventType.SCROLL_ENDED, (pageView: PageView) => {\t\t\t\r\n\t\t\tif (pageView.curPageIdx === 0) {\r\n\t\t\t\tpageView.scrollToPage(pageView.getPages().length-5, 0);\r\n\t\t\t    this.showIndex(0)\r\n\t\t\t} else if (pageView.curPageIdx + 1 === 2) {\r\n\t\t\t\tpageView.scrollToPage(1, 0)\r\n\t\t\t    this.showIndex(1)\r\n\t\t\t} else if (pageView.curPageIdx + 1 === 3) {\r\n\t\t\t\tpageView.scrollToPage(2, 0)\r\n\t\t\t    this.showIndex(2)\r\n\t\t\t}else if (pageView.curPageIdx + 1 === 4) {\r\n\t\t\t\tpageView.scrollToPage(3, 0)\r\n\t\t\t    this.showIndex(3)\r\n\t\t\t}else if (pageView.curPageIdx + 1 === 5) {\r\n\t\t\t\tpageView.scrollToPage(4, 0)\r\n\t\t\t    this.showIndex(4)\r\n\t\t\t}\r\n\t\t\tconst page = pageView.getPages()[pageView.curPageIdx];\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showIndex(num) {\r\n\t\tif (!this.propertyNode) return\r\n\t    let arr = this.propertyNode.props_indicator.children.filter(v => v.name.startsWith(\"props_indicator_toggle\"));\r\n\t\tarr.forEach((item,i) => {\r\n\t\t\tif (i === num) {\r\n\t\t\t\titem.getChildByName(\"CheckMark\").active = true;\r\n\t\t\t} else {\r\n\t\t\t\titem.getChildByName(\"CheckMark\").active = false;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}