{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/qiuqiu/components/Qiuqiu_Operation.ts"],"names":["Label","Node","Toggle","UITransform","Widget","_decorator","tween","BaseComponent","DeskStatus","OperationType","PrefabPathDefine","roomChooseViewModel","sourceManageSeletor","config","SureViewModel","playerBet","ccclass","property","AutoType","Qiuqiu_Operation","lastBetAmount","autoType","autoBetTimeT","sureViewModel","propertyNode","props_quiqui_operate_going","props_ToggleGroup_operate_waiting","props_ToggleGroup_operate_follow","props_btn_operate_balik","props_btn_operate_Naik","props_btn_operate_lkut_or_cek","props_label_operate_Ikut","props_btn_operate_cekbalik","props_btn_operate_cek","props_btn_operate_lkutapapun","props_btn_operate_autobalik","props_btn_operate_autoikut","props_btn_operate_ikutapaqun","props_label_operate_autoIkut","props","deskStatus","playerMap","callAmount","betAmount","maxAmount","opType","lastActiveSeatIndex","currActiveSeatIndex","seatIndex","events","start","initState","bindEvent","on","EventType","TOGGLE","toggle","setAutoType","PASS_OR_GIVE_UP","PASS","CALL_ANY","GIVE_UP","CALL","TOUCH_END","comp","showHideAnima","clearBetTime","playerOp","getLastOperationType","WAIT","gameData","isChecked","useProps","key","value","changeOperationType","showAnima","isShow","PLAYING","isClearStatus","WAITING","COUNTDOWNING","showOpeationType","show","active","cancelSelect","setCellAmount","isMyOp","changePassAndCell","setSelect","getComponent","children","forEach","v","getChildByName","labelIkut","node","amount","formatAmountWithLetter","string","width","widget","isReconnect","bottom","to","call","isValid","autoHandle","map","bindUI","initFillPanel","window","setTimeout","mainBoardViewModel","clearTimeout","mountView","getFile","prefabs_quiqui_sure","source","appendTo","parent","connect","setEvent","sendBet","isTest","dispatch","testConfig","uid","viewNode","update","deltaTime"],"mappings":"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","sourcesContent":["import { Label, Node, Toggle, UITransform, Widget, _decorator, tween } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { CardType, DeskStatus, OperationType, Player } from '../type';\r\nimport { Qiuqiu_Sure, IEvent as SPIEvent, IProps as SPIProps, IState as SPIState } from './Qiuqiu_Sure';\r\nimport BaseViewModel from '../../../common/viewModel/BaseViewModel';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { roomChooseViewModel, sourceManageSeletor } from '../index';\r\nimport config from '../config';\r\nimport SureViewModel from '../viewModel/SureViewModel';\r\nimport bet from '../../yxx/store/reducer/bet';\r\nimport { playerBet } from '../store/action/game';\r\nconst { ccclass, property } = _decorator;\r\n\r\nenum AutoType {\r\n\t/**跟任意注 */\r\n\tCALL_ANY,\r\n\t/**跟注 */\r\n\tCALL,\r\n\t/**过 */\r\n\tPASS,\r\n\t/**弃牌 */\r\n\tGIVE_UP,\r\n\t/**过或者弃牌 */\r\n\tPASS_OR_GIVE_UP\r\n}\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\tdeskStatus: DeskStatus,\r\n\t/**玩家 */\r\n\tplayerMap: Player[],\r\n\t/**需要跟注的金额 */\r\n\tcallAmount: number,\r\n\t/**当前最新下注 */\r\n\tbetAmount: number,\r\n\t/**当前最高下注 */\r\n\tmaxAmount: number,\r\n\t/**当前玩家的操作 */\r\n\topType: OperationType,\r\n\t/**上一个做动作的玩家 */\r\n\tlastActiveSeatIndex: number,\r\n\t/**当前正激活等待的用户 */\r\n\tcurrActiveSeatIndex: number,\r\n\tseatIndex: number,\r\n}\r\nexport interface IEvent {\r\n}\r\n\r\n@ccclass('Qiuqiu_Operation')\r\nexport class Qiuqiu_Operation extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\r\n\tprivate lastBetAmount = -1;\r\n\tprivate autoType: AutoType;\r\n\t// private sureNode: Node;\r\n\tprivate autoBetTimeT = -1;\r\n\tprivate sureViewModel: SureViewModel;\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_quiqui_operate_going: new Node(),\r\n\t\tprops_ToggleGroup_operate_waiting: new Node(),\r\n\t\tprops_ToggleGroup_operate_follow: new Node(),\r\n\r\n\t\tprops_btn_operate_balik: new Node(),\r\n\t\tprops_btn_operate_Naik: new Node(),\r\n\t\tprops_btn_operate_lkut_or_cek: new Node(),\r\n\t\tprops_label_operate_Ikut: new Label(),\r\n\r\n\t\tprops_btn_operate_cekbalik: new Node(),\r\n\t\tprops_btn_operate_cek: new Node(),\r\n\t\tprops_btn_operate_lkutapapun: new Node(),\r\n\r\n\t\tprops_btn_operate_autobalik: new Node(),\r\n\t\tprops_btn_operate_autoikut: new Node(),\r\n\t\tprops_btn_operate_ikutapaqun: new Node(),\r\n\t\tprops_label_operate_autoIkut: new Label(),\r\n\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdeskStatus: null,\r\n\t\tplayerMap: [],\r\n\t\tcallAmount: 0,\r\n\t\tbetAmount: 0,\r\n\t\tmaxAmount: 0,\r\n\t\topType: null,\r\n\t\tlastActiveSeatIndex: -1,\r\n\t\tcurrActiveSeatIndex: -1,\r\n\t\tseatIndex: 0,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t}\r\n\t}\r\n\tprotected bindEvent(): void {\r\n\t\t//玩家非自己操作的按钮事件\r\n\t\tthis.propertyNode.props_btn_operate_cekbalik.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.PASS_OR_GIVE_UP)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_operate_cek.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.PASS)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_operate_lkutapapun.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.CALL_ANY)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_operate_autobalik.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.GIVE_UP)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_operate_autoikut.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.CALL)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_operate_ikutapaqun.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n\t\t\tthis.setAutoType(toggle, AutoType.CALL_ANY)\r\n\t\t})\r\n\r\n\t\t//玩家自己操作的按钮事件\r\n\t\tthis.propertyNode.props_btn_operate_Naik.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t// this.sureNode.active = !this.sureNode.active;\r\n\t\t\tthis.sureViewModel.comp.showHideAnima();\r\n\t\t\t// 玩家主动操作之后取消自动效果\r\n\t\t\tthis.clearBetTime();\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_operate_balik.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t// 玩家主动操作之后取消自动效果\r\n\t\t\tthis.clearBetTime();\r\n\t\t\tthis.lastBetAmount = -1;\r\n\t\t\tthis.playerOp(OperationType.GIVE_UP, this.props.betAmount);\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_operate_lkut_or_cek.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t// 玩家主动操作之后取消自动效果\r\n\t\t\tthis.clearBetTime();\r\n\t\t\tthis.lastBetAmount = -1;\r\n\t\t\tthis.playerOp(OperationType.CALL, this.props.callAmount);\r\n\t\t});\r\n\t}\r\n\r\n\t/**获得最后一个操作的类型 */\r\n\tprivate getLastOperationType() {\r\n\t\tif (this.props.lastActiveSeatIndex < 0) {\r\n\t\t\treturn OperationType.WAIT;\r\n\t\t}\r\n\r\n\t\treturn this.props.playerMap[this.props.lastActiveSeatIndex].gameData.opType;\r\n\t}\r\n\r\n\tprivate setAutoType(toggle: Toggle, autoType: AutoType) {\r\n\t\tthis.autoType = toggle.isChecked ? autoType : null;\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tswitch (key) {\r\n\t\t\tcase 'deskStatus':\r\n\t\t\tcase 'currActiveSeatIndex':\r\n\t\t\t\tthis.changeOperationType();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'opType':\r\n\t\t\t\tthis.props.opType === OperationType.GIVE_UP && this.showAnima(false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isShow() {\r\n\t\treturn this.props.deskStatus === DeskStatus.PLAYING;\r\n\t}\r\n\r\n\tprivate isClearStatus() {\r\n\t\treturn this.props.deskStatus === DeskStatus.WAITING || this.props.deskStatus === DeskStatus.COUNTDOWNING;\r\n\t}\r\n\r\n\tprivate showOpeationType(show: boolean) {\r\n\t\tthis.propertyNode.props_quiqui_operate_going.active = show;\r\n\t\tthis.propertyNode.props_ToggleGroup_operate_waiting.active = show;\r\n\t\tthis.propertyNode.props_ToggleGroup_operate_follow.active = show;\r\n\t}\r\n\r\n\tprivate changeOperationType() {\r\n\t\tconst show = this.isShow();\r\n\t\tif (!show || this.props.currActiveSeatIndex === -1) {\r\n\t\t\tthis.showAnima(false);\r\n\t\t\tthis.lastBetAmount = -1;\r\n\r\n\t\t\tif (this.isClearStatus()) {\r\n\t\t\t\tthis.autoType = null;\r\n\t\t\t\tthis.cancelSelect();\r\n\t\t\t}\r\n\t\t\t// this.sureNode.active = false;\r\n\t\t\tthis.sureViewModel.comp.showHideAnima(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 设置跟注金额\r\n\t\tthis.setCellAmount();\r\n\r\n\t\tif (this.isMyOp()) {\r\n\t\t\tthis.changePassAndCell();\r\n\t\t\tthis.propertyNode.props_quiqui_operate_going.active = true;\r\n\t\t\tthis.propertyNode.props_ToggleGroup_operate_waiting.active = false;\r\n\t\t\tthis.propertyNode.props_ToggleGroup_operate_follow.active = false;\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_quiqui_operate_going.active = false;\r\n\t\t\t// this.sureNode.active = false;\r\n\t\t\tthis.sureViewModel.comp.showHideAnima(false);\r\n\t\t\tif (this.lastBetAmount === this.props.betAmount) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.propertyNode.props_ToggleGroup_operate_waiting.active = this.props.callAmount === 0;\r\n\t\t\tthis.propertyNode.props_ToggleGroup_operate_follow.active = this.props.callAmount > 0;\r\n\t\t\tthis.setSelect();\r\n\t\t}\r\n\t\tthis.showAnima(true);\r\n\t\tthis.lastBetAmount = this.props.betAmount;\r\n\t}\r\n\r\n\t/**是否自己操作 */\r\n\tprivate isMyOp() {\r\n\t\treturn this.props.seatIndex === this.props.currActiveSeatIndex;\r\n\t}\r\n\r\n\t/**设置选中 */\r\n\tprivate setSelect() {\r\n\t\tif (this.autoType === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.cancelSelect();\r\n\r\n\t\tif (this.propertyNode.props_ToggleGroup_operate_waiting.active) {\r\n\t\t\tthis.propertyNode.props_btn_operate_cekbalik.getComponent(Toggle).isChecked = this.autoType === AutoType.PASS_OR_GIVE_UP || this.autoType === AutoType.GIVE_UP;\r\n\t\t\tthis.propertyNode.props_btn_operate_lkutapapun.getComponent(Toggle).isChecked = this.autoType === AutoType.CALL_ANY;\r\n\r\n\t\t\t// 如果从跟注切换到不需要加注时，那么自动效果失效\r\n\t\t\tthis.autoType === AutoType.CALL && (this.autoType = null)\r\n\t\t} else if (this.propertyNode.props_ToggleGroup_operate_follow.active) {\r\n\t\t\tthis.propertyNode.props_btn_operate_autobalik.getComponent(Toggle).isChecked = this.autoType === AutoType.PASS_OR_GIVE_UP || this.autoType === AutoType.GIVE_UP;\r\n\t\t\tthis.propertyNode.props_btn_operate_ikutapaqun.getComponent(Toggle).isChecked = this.autoType === AutoType.CALL_ANY;\r\n\r\n\t\t\t// 如果从过切换到需要加注时，那么自动就失效\r\n\t\t\tthis.autoType === AutoType.PASS && (this.autoType = null)\r\n\t\t}\r\n\t}\r\n\r\n\t/**当自己操作时，切换过还是跟 */\r\n\tprivate changePassAndCell() {\r\n\t\tthis.propertyNode.props_btn_operate_lkut_or_cek.children.forEach(v => v.active = false);\r\n\r\n\t\tthis.propertyNode.props_btn_operate_lkut_or_cek.getChildByName('props_spr_oprate_Ikut').active = this.props.betAmount > 0;\r\n\t\tconst labelIkut = this.propertyNode.props_label_operate_Ikut;\r\n\t\tlabelIkut.node.active = this.props.betAmount > 0;\r\n\r\n\t\tthis.propertyNode.props_btn_operate_lkut_or_cek.getChildByName('props_spr_oprate_cek').active = this.props.betAmount === 0;\r\n\t}\r\n\r\n\tprivate setCellAmount() {\r\n\t\tconst amount = this.props.callAmount.formatAmountWithLetter(true);\r\n\t\tthis.propertyNode.props_label_operate_Ikut.string = amount;\r\n\t\tthis.propertyNode.props_label_operate_autoIkut.string = amount;\r\n\t}\r\n\r\n\t/**控制操作面板 */\r\n\tprivate showAnima(show: boolean) {\r\n\t\tconst width = this.node.getComponent(UITransform).width;\r\n\t\tconst widget = this.node.getComponent(Widget);\r\n\t\t// 重连不要动画\r\n\t\tif (config.isReconnect) {\r\n\t\t\twidget.bottom === 0 && (widget.bottom -= width);\r\n\t\t\tshow && (widget.bottom = 0);\r\n\t\t} else {\r\n\t\t\twidget.bottom === 0 && (widget.bottom -= width);\r\n\r\n\t\t\tshow && tween(widget).to(0.5, { bottom: 0 }).call(() => {\r\n\t\t\t\t// 面板显示出来之后如果是自己操作就处理自动操作\r\n\t\t\t\tthis.node.isValid && this.isMyOp() && this.autoHandle();\r\n\t\t\t}).start();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate cancelSelect() {\r\n\t\tthis.propertyNode.props_ToggleGroup_operate_waiting.children.map(v => v.getComponent(Toggle)).forEach(v => v.isChecked = false)\r\n\t\tthis.propertyNode.props_ToggleGroup_operate_follow.children.map(v => v.getComponent(Toggle)).forEach(v => v.isChecked = false)\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.showOpeationType(false);\r\n\t\tthis.showAnima(false);\r\n\t\tthis.autoType = null;\r\n\t\tthis.cancelSelect();\r\n\t\tthis.initFillPanel();\r\n\t}\r\n\r\n\t/**自动处理 */\r\n\tprivate autoHandle() {\r\n\t\tif (this.autoType === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet opType = OperationType.GIVE_UP;\r\n\t\tswitch (this.autoType) {\r\n\t\t\tcase AutoType.CALL:\r\n\t\t\t\topType = OperationType.CALL;\r\n\t\t\t\tbreak;\r\n\t\t\tcase AutoType.CALL_ANY:\r\n\t\t\t\topType = OperationType.CALL;\r\n\t\t\t\tbreak;\r\n\t\t\tcase AutoType.GIVE_UP:\r\n\t\t\t\topType = OperationType.GIVE_UP;\r\n\t\t\t\tbreak;\r\n\t\t\tcase AutoType.PASS:\r\n\t\t\t\topType = OperationType.PASS;\r\n\t\t\t\tbreak;\r\n\t\t\tcase AutoType.PASS_OR_GIVE_UP:\r\n\t\t\t\topType = this.props.betAmount === 0 ? OperationType.PASS : OperationType.GIVE_UP;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// 延迟1秒之后自动发送下注信息\r\n\t\tthis.autoBetTimeT = window.setTimeout(() => {\r\n\t\t\tthis.playerOp(opType, this.props.callAmount);\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\t/**\r\n\t * 玩家操作\r\n\t * @param opType 操作类型\r\n\t * @param betAmount 下注金额\r\n\t */\r\n\tprivate playerOp(opType: OperationType, betAmount: number) {\r\n\t\troomChooseViewModel.mainBoardViewModel.playerOp(opType, betAmount);\r\n\t}\r\n\r\n\tprivate clearBetTime() {\r\n\t\tthis.autoType = null;\r\n\t\tthis.autoBetTimeT && window.clearTimeout(this.autoBetTimeT);\r\n\t\tthis.autoBetTimeT = -1;\r\n\t}\r\n\r\n\t/**初始化加注面板 */\r\n\tprivate initFillPanel() {\r\n\t\tthis.sureViewModel = new SureViewModel()\r\n\t\t\t.mountView(sourceManageSeletor().getFile(PrefabPathDefine.prefabs_quiqui_sure).source).appendTo(this.node.parent).connect();\r\n\t\tthis.sureViewModel.setEvent({\r\n\t\t\tsendBet: (betAmount: number, opType: OperationType) => {\r\n\t\t\t\tif (config.isTest) {\r\n\t\t\t\t\tthis.dispatch(playerBet(config.testConfig.uid, betAmount, OperationType.CALL, 0));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playerOp(opType, betAmount);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t// this.sureNode = this.sureViewModel.viewNode;\r\n\t\t// this.sureNode.active = false;\r\n\t\tthis.sureViewModel.viewNode.active = false;\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}