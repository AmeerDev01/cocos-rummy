{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/starlight/components/Starlight_SgBox.ts"],"names":["_decorator","Button","Label","Node","Sprite","BaseComponent","ccclass","property","Starlight_SgBox","miniGameAmount","btn_state","propertyNode","props_label_box_gold","props_btn_box_off","props_btn_box_on","props","balance","events","closeHandler","confirmThePayment","start","initState","bindEvent","node","on","EventType","TOUCH_END","getComponent","CLICK","removeComma","str","newStr","replace","useProps","key","value","string","Number","cur","console","log","grayscale","interactable","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, Label, Node, Sprite } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tminiGameAmount?:string\r\n\tbalance?:number\r\n\t\r\n}\r\nexport interface IEvent {\r\n\tcloseHandler:()=>void\r\n\tconfirmThePayment:()=>void\r\n}\r\n\r\n@ccclass('Starlight_SgBox')\r\nexport class Starlight_SgBox extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate miniGameAmount=0\r\n\tbtn_state=true\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_label_box_gold:new Label(),\r\n\t\tprops_btn_box_off:new Button(),\r\n\t\tprops_btn_box_on:new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tminiGameAmount:\"\",\r\n\t\tbalance:0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tcloseHandler:()=>{},\r\n\t\tconfirmThePayment:()=>{}\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_box_off.node.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tthis.events.closeHandler()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_box_on.getComponent(Button).node.on(Button.EventType.CLICK,()=>{\r\n\t\t\tif(this.btn_state){\r\n\t\t\t\tthis.btn_state=false\r\n\t\t\t\tthis.events.confirmThePayment()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tremoveComma(str){\r\n\t\tconst newStr = str.replace(/,/g,\"\")\r\n\t\treturn newStr\r\n\t}\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif(key===\"miniGameAmount\"){\r\n\t\t\tthis.propertyNode.props_label_box_gold.string=this.props.miniGameAmount\r\n\t\t\tthis.miniGameAmount=Number(this.removeComma(value.cur))\r\n\t\t}\r\n\t\tif(key===\"balance\"){\r\n\t\t\tif(value.cur && this.miniGameAmount>0){\r\n\t\t\t\tconsole.log(value.cur , this.miniGameAmount);\r\n\t\t\t\tthis.propertyNode.props_btn_box_on.getComponent(Sprite).grayscale=!(value.cur >= this.miniGameAmount)\r\n\t\t\t\tthis.propertyNode.props_btn_box_on.getComponent(Button).interactable=(value.cur >= this.miniGameAmount)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}