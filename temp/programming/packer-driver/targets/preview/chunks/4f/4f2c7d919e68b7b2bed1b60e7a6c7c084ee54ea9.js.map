{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealthV2/components/GodWealthV2_Main.ts"],"names":["_decorator","instantiate","Label","Node","sp","Animation","Sprite","Toggle","Vec3","BaseComponent","changeGame","setAutoLauncherInfo","setBetDropDownList","updateWinloss","AutoLauncherType","GameType","getAutoCount","isLimit","RollerStatus","updateRollerStatus","EffectType","getEffectByType","getNodeByNameDeep","omitStr","global","StepNumber","config","godWealthV2_Audio","mainViewModel","sourceManageSeletor","PrefabPathDefine","SkeletonAnimationPlayer","SoundPathDefine","ccclass","property","GodWealthV2_Main","baseNodeOffectNode","baseNodeOrigonScale","baseNodeScale","majorNum","miniNum","isChecked","propertyNode","props_main_bg","props_mini_game_bg","props_main_slot_bg","props_Up_Feature","props_buttomBar","props_roller","props_bet_dropdownlist","props_autoLauncher","props_jackpot_user_list","props_jackpot_item","props_jackpot_panel","props_grand_number","props_major_number","props_mini_number","props_God_tk_center","props_btn_jackpot","props_btn_off","props_btn_confirm","props","betDropDownlist","positionId","gold","gameTypeInfo","lastGameType","NONE","currGameType","viewGameType","leftCount","subGameAnimationPlayInfo","jackpotDatas","jackpotTotalAmount","autoLauncherInfo","selectedNode","events","onSendBet","start","getHeader","getFooter","getRoller","initState","bindEvent","on","EventType","TOUCH_END","dispatch","playOneShot","BTN_CLICK","active","listenerBetDropDownListEvent","children","forEach","toggle","getComponent","node","onToggleClick","openAoutoPanl","autoLauncherType","name","count","totalCount","BIU","getAutoState","clearAuto","event","clickedToggle","target","useProps","key","value","isValid","cur","createFlyBg","changeGameType","removeAllChildren","item","index","userItem","loadHeadSprite","avatarIndex","string","winningAmount","formatAmountWithCommas","nickName","addChild","startNumberGrand","parseInt","replace","startNumberMajor","startNumberMini","betValueId","betSwitcher","amount","num","Number","toFixed","set","normalRollOption","numberRollerTime","pre","gameType","isMainGame","MAIN","isSubGame2","SUBGAME2","showOrHideBetDropDownlist","status","pos","position","play","show","EFFECT1","enter","then","hide","out","bindUI","flyBgNode","getFile","FLY_BG","source","titleSkeleton","getChildByName","Skeleton","destroy","subGameAnimationEndHandle","SUBGAME1","playAnimation","changeGateAnimation","type","playBgMusic","scheduleOnce","END","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, instantiate, Label, Node, sp, Animation, Sprite, Toggle, UIOpacity, Vec3, AnimationState } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { changeGame, setAutoLauncherInfo, setBetDropDownList, updateWinloss } from '../store/actions/game';\r\nimport { AutoLauncherInfo, AutoLauncherType, calBetAmount, GameType, GameTypeInfo, getAutoCount, isLimit, JackpotData, RollerStatus, SubGameAnimationPlayInfo } from '../type';\r\nimport { updateRollerStatus } from '../store/actions/roller';\r\nimport { EffectType, getEffectByType } from '../../../utils/NodeIOEffect';\r\nimport { getNodeByNameDeep, omitStr } from '../../../utils/tool';\r\nimport { global, lang } from '../../../hall';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport config from '../config';\r\nimport { godWealthV2_Audio, mainViewModel, sourceManageSeletor } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport SkeletonAnimationPlayer from '../../../utils/SkeletonPlay';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { cacheData } from '../dataTransfer';\r\nimport { addToastAction } from '../../../hall/store/actions/baseBoard';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\t/** 是否显示下注下拉列表 */\r\n\tbetDropDownlist: boolean,\r\n\t/** 选择下注的线id */\r\n\tpositionId: number,\r\n\t/** 余额 */\r\n\tgold: number,\r\n\t/**游戏类型信息 */\r\n\tgameTypeInfo: GameTypeInfo,\r\n\t/** 子游戏过场动画播放信息 */\r\n\tsubGameAnimationPlayInfo: SubGameAnimationPlayInfo,\r\n\t/** jackpot数据 */\r\n\tjackpotDatas: JackpotData[],\r\n\t/** jackpot总金额 */\r\n\tjackpotTotalAmount: number,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo: AutoLauncherInfo,\r\n\t\r\n}\r\nexport interface IEvent {\r\n\tonSendBet: () => void\r\n}\r\n\r\n@ccclass('GodWealthV2_Main')\r\nexport class GodWealthV2_Main extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\tprivate baseNodeOffectNode: Vec3;\r\n\r\n\t/** 原始缩放大小 */\r\n\tprivate baseNodeOrigonScale: Vec3 = new Vec3(1, 1, 1);\r\n\t/** 缩放大小 */\r\n\tprivate baseNodeScale: Vec3 = new Vec3(3, 3, 3);\r\n\tpublic majorNum: number = 0;\r\n\tpublic miniNum: number = 0;\r\n\tprivate isChecked: boolean = false;\r\n\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_main_bg: new Node(),\r\n\t\tprops_mini_game_bg: new Node(),\r\n\t\tprops_main_slot_bg: new Node(),\r\n\r\n\t\tprops_Up_Feature: new Node(),\r\n\t\tprops_buttomBar: new Node(),\r\n\t\tprops_roller: new Node(),\r\n\t\tprops_bet_dropdownlist: new Node(),\r\n\t\tprops_autoLauncher: new Node(),\r\n\t\tprops_jackpot_user_list: new Node(),\r\n\t\tprops_jackpot_item: new Node(),\r\n\t\tprops_jackpot_panel: new Node(),\r\n\t\tprops_grand_number: new Label(),\r\n\t\tprops_major_number: new Label(),\r\n\t\tprops_mini_number: new Label(),\r\n\t\tprops_God_tk_center: new Node(),\r\n\t\tprops_btn_jackpot: new Node(),\r\n\t\tprops_btn_off: new Node(),\r\n\t\tprops_btn_confirm: new Node(),\r\n\t\t\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tbetDropDownlist: false,\r\n\t\tpositionId: 0,\r\n\t\tgold: 0,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.NONE,\r\n\t\t\tcurrGameType: GameType.NONE,\r\n\t\t\tviewGameType: GameType.NONE,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tsubGameAnimationPlayInfo: null,\r\n\t\tjackpotDatas: [],\r\n\t\tjackpotTotalAmount: 0,\r\n\t\tautoLauncherInfo: null,\r\n\t\t\r\n\t}\r\n\tprivate selectedNode: Node\r\n\tpublic events: IEvent = {\r\n\t\tonSendBet: () => { }\r\n\t}\r\n\r\n\tpublic getHeader() {\r\n\t\treturn this.propertyNode.props_Up_Feature;\r\n\t}\r\n\r\n\tpublic getFooter() {\r\n\t\treturn this.propertyNode.props_buttomBar;\r\n\t}\r\n\r\n\tpublic getRoller() {\r\n\t\treturn this.propertyNode.props_roller;\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\t// this.propertyNode.props_autoLauncher.getComponent(Animation).on(Animation.EventType.FINISHED, (e, state: AnimationState) => {\r\n\t\t// \tif (state.name === 'animation_autoLauncher_down') {\r\n\t\t// \t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\t\t// \t}\r\n\t\t// });\r\n\t\tthis.propertyNode.props_bet_dropdownlist.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_God_tk_center.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\r\n\t\t\tthis.propertyNode.props_jackpot_panel.active = !this.propertyNode.props_jackpot_panel.active;\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_btn_jackpot.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tthis.propertyNode.props_jackpot_panel.active = !this.propertyNode.props_jackpot_panel.active;\r\n\t\t\tgetNodeByNameDeep(\"isjackpot\", this.propertyNode.props_btn_jackpot).active = !this.isChecked;\r\n\t\t\tthis.isChecked = !this.isChecked;\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\tthis.listenerBetDropDownListEvent();\r\n\r\n\r\n\t}\r\n\r\n\tprivate listenerBetDropDownListEvent() {\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\ttoggle.getComponent(Toggle).node.on(Node.EventType.TOUCH_END, this.onToggleClick, this);\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.openAoutoPanl()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_confirm.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tconst autoLauncherType = (this.selectedNode ? this.selectedNode.name:'t10') as AutoLauncherType; // 默认T10\r\n\t\t\t\tconst count = getAutoCount(autoLauncherType);\r\n\t\t\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\t\t\tautoLauncherType: autoLauncherType,\r\n\t\t\t\t\ttotalCount: count,\r\n\t\t\t\t\tleftCount: isLimit(autoLauncherType) ? 1 : count - 1,\r\n\t\t\t\t}))\r\n\t\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BIU)\r\n\t\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t\t\tthis.events.onSendBet();\r\n\t\t\t\tthis.openAoutoPanl()\r\n\r\n\t\t})\r\n\t}\r\n\tpublic openAoutoPanl(){\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active=!this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic getAutoState(){\r\n\t\treturn this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic clearAuto(){\r\n\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\tautoLauncherType: AutoLauncherType.NONE,\r\n\t\t\ttotalCount: 0,\r\n\t\t\tleftCount: 0\r\n\t\t}))\r\n\t}\r\n\tprivate onToggleClick(event) {\r\n\t\t// 获取点击的 Toggle 按钮\r\n\t\tconst clickedToggle = event.target.getComponent(Toggle);\r\n\t\tif (!clickedToggle.isChecked) {\r\n\t\t\tclickedToggle.isChecked = true;\r\n\t\t\tthis.selectedNode = event.target\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 取消其他 Toggle 按钮的选中状态\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\tif (toggle !== clickedToggle) {\r\n\t\t\t\ttoggle.getComponent(Toggle).isChecked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\r\n\t\t\tif (key === 'betDropDownlist') {\r\n\t\t\t\t// this.showOrHideBetDropDownlist(value.cur)\r\n\t\t\t} else if (key === 'subGameAnimationPlayInfo') {\r\n\t\t\t\t// console.log(\"subGameAnimationPlayInfo\",value.cur);\r\n\t\t\t\t\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.createFlyBg();\r\n\t\t\t\t}\r\n\t\t\t} else if (key === 'gameTypeInfo') {\r\n\t\t\t\tthis.changeGameType(this.props.gameTypeInfo.viewGameType);\r\n\t\r\n\t\t\t}else if (key === \"jackpotDatas\") {\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.propertyNode.props_jackpot_user_list.removeAllChildren()\r\n\t\t\t\t\tvalue.cur.forEach((item, index) => {\r\n\t\t\t\t\t\tlet userItem = instantiate(this.propertyNode.props_jackpot_item);\r\n\t\t\t\t\t\tglobal.loadHeadSprite(item.avatarIndex, getNodeByNameDeep(\"head\", userItem).getComponent(Sprite));//加载头像\r\n\t\t\t\t\t\tgetNodeByNameDeep(\"gold_label\", userItem).getComponent(Label).string = item.winningAmount.formatAmountWithCommas();\r\n\t\t\t\t\t\tgetNodeByNameDeep(\"user_name\", userItem).getComponent(Label).string = omitStr(item.nickName + \"\", 20);\r\n\t\t\t\t\t\tthis.propertyNode.props_jackpot_user_list.addChild(userItem)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} else if (key === \"positionId\") {\r\n\t\t\t\tlet startNumberGrand = parseInt(this.propertyNode.props_grand_number.string.replace(/,/g, \"\"));\r\n\t\t\t\tlet startNumberMajor = parseInt(this.propertyNode.props_major_number.string.replace(/,/g, \"\"));\r\n\t\t\t\tlet startNumberMini = parseInt(this.propertyNode.props_mini_number.string.replace(/,/g, \"\"));\r\n\t\t\t\tlet betValueId = config.betSwitcher[0].amount[value.cur - 1].value;\r\n\t\t\t\tthis.majorNum = 1500 * betValueId;\r\n\t\t\t\tthis.miniNum = 750 * betValueId;\r\n\t\t\t\tif (value.cur <= 5) {\r\n\t\t\t\t\tnew StepNumber(startNumberGrand, 15000 * betValueId, (num) => {\r\n\t\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\t\tconst value = Number(num.toFixed(0));\r\n\t\t\t\t\t\t\tthis.propertyNode.props_grand_number.string = value.formatAmountWithCommas();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t\t\t}\r\n\t\t\t\tnew StepNumber(startNumberMajor, 1500 * betValueId, (num) => {\r\n\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\tconst value = Number(num.toFixed(0));\r\n\t\t\t\t\t\tthis.propertyNode.props_major_number.string = value.formatAmountWithCommas();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t\t\tnew StepNumber(startNumberMini, 750 * betValueId, (num) => {\r\n\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\tconst value = Number(num.toFixed(0));\r\n\t\t\t\t\t\tthis.propertyNode.props_mini_number.string = value.formatAmountWithCommas();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t\t} else if (key === \"jackpotTotalAmount\") {\r\n\t\t\t\tif (this.props.positionId > 5) {\r\n\t\t\t\t\tnew StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\t\tconst value = Number(num.toFixed(0));\r\n\t\t\t\t\t\t\tthis.propertyNode.props_grand_number.string = value.formatAmountWithCommas();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate changeGameType(gameType: GameType) {\r\n\t\tconst isMainGame = gameType === GameType.MAIN;\r\n\t\tconst isSubGame2 = gameType === GameType.SUBGAME2;\r\n\t\t// 主游戏要显示的界面\r\n\t\t// this.propertyNode.props_skeletonRight.active = isMainGame;\r\n\t\t// this.propertyNode.props_skeletonLeft.active = isMainGame;\r\n\t\tthis.propertyNode.props_main_bg.active = isMainGame \r\n\t\t// this.propertyNode.props_main_slot_bg.active = isMainGame\r\n\r\n\t\t// 子游戏要显示的界面\r\n\t\tthis.propertyNode.props_mini_game_bg.active = !isMainGame \r\n\t\t// godWealthV2_Audio.stop();\r\n\t\t// if (isMainGame) {\r\n\t\t// \tgodWealthV2_Audio.play(SoundPathDefine.MAIN_BG, true)\r\n\t\t// } else if (isSubGame2) {\r\n\t\t// \tgodWealthV2_Audio.play(SoundPathDefine.GAME2_BG, true)\r\n\t\t// } else {\r\n\t\t// \tgodWealthV2_Audio.play(SoundPathDefine.GAME1_BG, true)\r\n\t\t// }\r\n\t}\r\n\r\n\tprivate showOrHideBetDropDownlist(status: boolean) {\r\n\t\tconst pos = this.propertyNode.props_autoLauncher.position;\r\n\t\tif (status) {\r\n\t\t\tthis.propertyNode.props_bet_dropdownlist.active = true;\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_up\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 255 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -160) }).start();\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_down\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 0 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -500) }).call(() => {\r\n\t\t\t// \tthis.node.isValid && (this.propertyNode.props_bet_dropdownlist.active = false);\r\n\t\t\t// }).start();\r\n\t\t}\r\n\t}\r\n\tprivate show() {\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active = true;\r\n\t\tgetEffectByType(EffectType.EFFECT1)(this.propertyNode.props_bet_dropdownlist).enter().then(() => { })\r\n\t}\r\n\tprivate hide() {\r\n\t\tgetEffectByType(EffectType.EFFECT1)(this.propertyNode.props_bet_dropdownlist).out(false).then(() => {\r\n\t\t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\t\t})\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.baseNodeOffectNode = new Vec3(-100, -200);\r\n\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\r\n\t\t\r\n\t}\r\n\r\n\t  /**转场动画 */\r\n\tpublic createFlyBg() {\r\n\t\t//转场\r\n\t\tlet flyBgNode = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.FLY_BG).source)//动画转场背景\r\n\t\tthis.node.addChild(flyBgNode);\r\n\t\tconst titleSkeleton = flyBgNode.getChildByName(\"caishenguochang\").getComponent(sp.Skeleton)\r\n\t\tnew SkeletonAnimationPlayer(titleSkeleton, 'animation', false, () => {\r\n\t\t\tflyBgNode && flyBgNode.destroy();\r\n\t\t\tthis.node && this.node.isValid && this.subGameAnimationEndHandle(0);\r\n\t\t\t//   console.log(\"this.props.gameTypeInfo\",this.props.gameTypeInfo);\r\n\t\t\tif (this.props.gameTypeInfo.currGameType === GameType.SUBGAME1) {\r\n\t\t\t\tthis.dispatch(updateWinloss(0))  \r\n\t\t\t}\r\n\t\t\t//切换游戏 初始化盈利\r\n\t\t}).playAnimation()\r\n\t}\r\n\r\n\t/**切换大门动画 */\r\n\tprivate changeGateAnimation() {\r\n\t\t// this.propertyNode.props_aiji_kaiguanmen.active = true;\r\n\t\t// if (this.props.subGameAnimationPlayInfo.param === 0) {\r\n\t\t// \tthis.gateSk.setAnimation(0, 'shimen_kaimen', true)\r\n\t\t// } else {\r\n\r\n\t\t// }\r\n\t}\r\n\r\n\t/**动画结束处理 */\r\n\tprivate subGameAnimationEndHandle(type: number) {\r\n\r\n\t\tconst gameTypeInfo = { ...this.props.gameTypeInfo }\r\n\t\tgameTypeInfo.lastGameType = gameTypeInfo.viewGameType;\r\n\t\tgameTypeInfo.viewGameType = gameTypeInfo.currGameType;\r\n\t\t// gameTypeInfo.viewGameType = GameType.SUBGAME1;\r\n\t\t// gameTypeInfo.currGameType = GameType.SUBGAME1;\r\n\t\t// gameTypeInfo.leftCount = 10;\r\n\r\n\t\tmainViewModel.playBgMusic();\r\n\t\tthis.dispatch(changeGame(gameTypeInfo))\r\n\t\t// 开门动画结束，准备切换到小游戏后，结束游戏\r\n\t\tif (type === 0) {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t\t},1)\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}