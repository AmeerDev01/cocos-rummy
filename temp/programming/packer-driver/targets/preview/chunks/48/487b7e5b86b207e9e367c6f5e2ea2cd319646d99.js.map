{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragon/Slot/Component/dragon_DialogWin.ts"],"names":["_decorator","Label","Node","tween","UIOpacity","Vec3","BaseComponent","ccclass","property","DialogType","dragon_DialogWin","timer","showNode","start","bindEvent","bindUI","showDialog","dialogType","amount","keepTime","cb","length","tatalNum","insider","setScale","uiOpacity","getComponent","opacity","active","JACKPOTPOPUPS","getChildByName","SpriteSplash","string","to","scale","easing","call","window","setTimeout","hideDialog","node","destroy","clearTimeout","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, tween, UIOpacity, Vec2, Vec3 } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport enum DialogType {\r\n\tBIG_WIN = \"bigWin\",\r\n\tJACKPOT = \"jackpot\",\r\n\tMEGA_WIN = \"megaWin\",\r\n\tSUPER_WIN = \"superWin\",\r\n\tSETTLE = \"settle\",\r\n\tJACKPOTS = \"jackPots\",\r\n\tSPECIALGAME = \"specialGame\",\r\n\tYOUWON = \"youWon\",\r\n\tJACKPOTPOPUPS = \"jackpotpopUps\",\r\n}\r\n@ccclass('dragon_DialogWin')\r\nexport class dragon_DialogWin extends BaseComponent {\r\n\r\n\t@property(Node)\r\n\tinsider: Node = null\r\n\r\n\t@property(Node)\r\n\tbigWin: Node = null\r\n\r\n\t@property(Node)\r\n\tjackpot: Node = null\r\n\r\n\t@property(Node)\r\n\tmegaWin: Node = null\r\n\r\n\t@property(Node)\r\n\tsuperWin: Node = null\r\n\r\n\t@property(Node)\r\n\tspecialGame: Node = null\r\n\r\n\t@property(Node)\r\n\tjackPots: Node = null\r\n\r\n\t@property(Node)\r\n\tyouWon: Node = null\r\n\r\n\t@property(Node)\r\n\tjackpotpopUps: Node = null\r\n\r\n\t@property(Node)\r\n\tsettle: Node = null\r\n\r\n\t@property(Node)\r\n\tSpriteSplash: Node = null\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tprivate timer: number\r\n\tprivate showNode: Node\r\n\t/**\r\n\t * 大奖弹窗\r\n\t * @param dialogType 展示类型\r\n\t * @param amount 展示金额\r\n\t * @param keepTime 持续时间（若传0，则不自动关闭）\r\n\t * @param cb 回调函数\r\n\t */\r\n\tpublic showDialog(dialogType: DialogType, amount: number, keepTime: number, cb?: () => void,length?,tatalNum?) {\r\n\t\tthis.insider.setScale(new Vec3(0, 0, 0))\r\n\t\tconst uiOpacity = this.insider.getComponent(UIOpacity)\r\n\t\tuiOpacity.opacity = 0;\r\n\t\tthis.showNode = this[dialogType] as Node\r\n\t\tthis.showNode.active = true;\r\n\t\tif(dialogType==DialogType.JACKPOTPOPUPS){\r\n\t\t\tif(length>=15){\r\n\t\t\t\tthis.showNode.getChildByName('Title_Youwon2').active=true\r\n\t\t\t}else if(length>=10){\r\n\t\t\t\tthis.showNode.getChildByName('Title_Youwon1').active=true\r\n\t\t\t}else if(length>=5){\r\n\t\t\t\tthis.showNode.getChildByName('Title_Youwon').active=true\r\n\t\t\t}\r\n\t\t\tamount=tatalNum\r\n\t\t}\r\n\t\tthis.SpriteSplash.active = false;\r\n\t\tthis.showNode.getChildByName(\"score\").getComponent(Label).string = amount + ''//.formatAmountWithCommas()\r\n\t\ttween(this.insider).to(0.5, { scale: new Vec3(1, 1, 0) }, { easing: \"backOut\" }).start()\r\n\t\ttween(uiOpacity).to(0.2, { opacity: 255 }).call(() => {\r\n\t\t\tthis.SpriteSplash.active = true;\r\n\t\t}).start()\r\n\t\tkeepTime && (this.timer = window.setTimeout(() => {\r\n\t\t\tthis.hideDialog()\r\n\t\t\tthis.node.destroy()\r\n\t\t\tcb && cb()\r\n\t\t}, keepTime))\r\n\t}\r\n\r\n\tpublic hideDialog() {\r\n\t\tconst uiOpacity = this.insider.getComponent(UIOpacity)\r\n\t\tthis.SpriteSplash.active = false;\r\n\t\ttween(this.insider).to(0.3, { scale: new Vec3(0, 0, 0) }).start()\r\n\t\ttween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n\t\t\tthis.showNode.active = false\r\n\t\t}).start()\r\n\t\tthis.timer && window.clearTimeout(this.timer)\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n\r\n}\r\n\r\n"]}