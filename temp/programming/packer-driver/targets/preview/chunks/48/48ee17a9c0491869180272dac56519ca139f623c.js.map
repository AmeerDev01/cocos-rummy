{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/utils/fastCopy.ts"],"names":["getRegExpFlagsModern","regExp","flags","getRegExpFlagsLegacy","global","ignoreCase","multiline","unicode","sticky","getTagLegacy","value","type","toStringObject","call","substring","length","getTagModern","Symbol","toStringTag","createCacheLegacy","LegacyCache","createCacheModern","WeakMap","copyRegExp","state","clone","Constructor","source","getRegExpFlags","lastIndex","copySetLoose","set","cache","forEach","add","copier","copyObjectLooseLegacy","object","getCleanClone","prototype","key","Object","hasOwnProperty","copyObjectLooseModern","symbols","getOwnPropertySymbols","index","length_3","symbol","propertyIsEnumerable","create","constructor","toStringFunction","indexOf","_a","copyMapLoose","map","copyDate","date","getTime","copyArrayBuffer","arrayBuffer","_state","slice","copyBlob","blob","size","copyDataView","dataView","buffer","undefined","copyArrayLoose","array","length_2","createCopier","options","normalizedOptions","assign","DEFAULT_LOOSE_OPTIONS","tagSpecificCopiers","getTagSpecificCopiers","Array","has","get","getPrototypeOf","isArray","tagSpecificCopier","getTag","then","copy","createCache","Arguments","ArrayBuffer","Blob","Boolean","copyPrimitiveWrapper","DataView","Date","Error","error","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Map","Number","Promise","copySelf","RegExp","Set","String","WeakSet","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Uint64Array","primitiveObject","valueOf","Function","toString","SUPPORTS_SYMBOL","copyObjectLoose","_keys","_values","push"],"mappings":"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","sourcesContent":["\r\nvar toStringFunction = Function.prototype.toString;\r\nvar create = Object.create;\r\nvar SUPPORTS_SYMBOL = typeof Object.getOwnPropertySymbols === 'function';\r\nvar copyObjectLoose = SUPPORTS_SYMBOL\r\n  ? copyObjectLooseModern\r\n  : copyObjectLooseLegacy;\r\n\r\nfunction getRegExpFlagsModern(regExp) {\r\n  return regExp.flags;\r\n}\r\nfunction getRegExpFlagsLegacy(regExp) {\r\n  var flags = '';\r\n  if (regExp.global) {\r\n    flags += 'g';\r\n  }\r\n  if (regExp.ignoreCase) {\r\n    flags += 'i';\r\n  }\r\n  if (regExp.multiline) {\r\n    flags += 'm';\r\n  }\r\n  if (regExp.unicode) {\r\n    flags += 'u';\r\n  }\r\n  if (regExp.sticky) {\r\n    flags += 'y';\r\n  }\r\n  return flags;\r\n}\r\n\r\nvar getRegExpFlags = /test/g.flags === 'g' ? getRegExpFlagsModern : getRegExpFlagsLegacy;\r\nvar toStringObject = Object.prototype.toString;\r\nfunction getTagLegacy(value) {\r\n  var type = toStringObject.call(value);\r\n  return type.substring(8, type.length - 1);\r\n}\r\nfunction getTagModern(value) {\r\n  return value[Symbol.toStringTag] || getTagLegacy(value);\r\n}\r\n\r\nvar LegacyCache = /** @class */ (function () {\r\n  function LegacyCache() {\r\n      this._keys = [];\r\n      this._values = [];\r\n  }\r\n  LegacyCache.prototype.has = function (key) {\r\n      return !!~this._keys.indexOf(key);\r\n  };\r\n  LegacyCache.prototype.get = function (key) {\r\n      return this._values[this._keys.indexOf(key)];\r\n  };\r\n  LegacyCache.prototype.set = function (key, value) {\r\n      this._keys.push(key);\r\n      this._values.push(value);\r\n  };\r\n  return LegacyCache;\r\n}());\r\n\r\nfunction createCacheLegacy() {\r\n  return new LegacyCache();\r\n}\r\nfunction createCacheModern() {\r\n  return new WeakMap();\r\n}\r\nvar getTag = typeof Symbol !== 'undefined' ? getTagModern : getTagLegacy;\r\n\r\nvar createCache = typeof WeakMap !== 'undefined' ? createCacheModern : createCacheLegacy;\r\n\r\nvar DEFAULT_LOOSE_OPTIONS = {\r\n  array: copyArrayLoose,\r\n  arrayBuffer: copyArrayBuffer,\r\n  blob: copyBlob,\r\n  dataView: copyDataView,\r\n  date: copyDate,\r\n  error: copySelf,\r\n  map: copyMapLoose,\r\n  object: copyObjectLoose,\r\n  regExp: copyRegExp,\r\n  set: copySetLoose,\r\n};\r\nfunction copyRegExp(regExp, state) {\r\n  var clone = new state.Constructor(regExp.source, getRegExpFlags(regExp));\r\n  clone.lastIndex = regExp.lastIndex;\r\n  return clone;\r\n}\r\n\r\nfunction copySetLoose(set, state) {\r\n  var clone = new state.Constructor();\r\n  // set in the cache immediately to be able to reuse the object recursively\r\n  state.cache.set(set, clone);\r\n  set.forEach(function (value) {\r\n    clone.add(state.copier(value, state));\r\n  });\r\n  return clone;\r\n}\r\n\r\nfunction copyObjectLooseLegacy(object, state) {\r\n  var clone = getCleanClone(state.prototype);\r\n  // set in the cache immediately to be able to reuse the object recursively\r\n  state.cache.set(object, clone);\r\n  for (var key in object) {\r\n    if (Object.hasOwnProperty.call(object, key)) {\r\n      clone[key] = state.copier(object[key], state);\r\n    }\r\n  }\r\n  return clone;\r\n}\r\nfunction copyObjectLooseModern(object, state) {\r\n  var clone = getCleanClone(state.prototype);\r\n  // set in the cache immediately to be able to reuse the object recursively\r\n  state.cache.set(object, clone);\r\n  for (var key in object) {\r\n    if (Object.hasOwnProperty.call(object, key)) {\r\n      clone[key] = state.copier(object[key], state);\r\n    }\r\n  }\r\n  var symbols = Object.getOwnPropertySymbols(object);\r\n  for (var index = 0, length_3 = symbols.length, symbol = void 0; index < length_3; ++index) {\r\n    symbol = symbols[index];\r\n    if (Object.propertyIsEnumerable.call(object, symbol)) {\r\n      clone[symbol] = state.copier(object[symbol], state);\r\n    }\r\n  }\r\n  return clone;\r\n}\r\nfunction getCleanClone(prototype) {\r\n  if (!prototype) {\r\n    return create(null);\r\n  }\r\n  var Constructor = prototype.constructor;\r\n  if (Constructor === Object) {\r\n    return prototype === Object.prototype ? {} : create(prototype);\r\n  }\r\n  if (~toStringFunction.call(Constructor).indexOf('[native code]')) {\r\n    try {\r\n      return new Constructor();\r\n    }\r\n    catch (_a) { }\r\n  }\r\n  return create(prototype);\r\n}\r\nfunction copyMapLoose(map, state) {\r\n  var clone = new state.Constructor();\r\n  // set in the cache immediately to be able to reuse the object recursively\r\n  state.cache.set(map, clone);\r\n  map.forEach(function (value, key) {\r\n    clone.set(key, state.copier(value, state));\r\n  });\r\n  return clone;\r\n}\r\nfunction copyDate(date, state) {\r\n  return new state.Constructor(date.getTime());\r\n}\r\n/**\r\n * Copy the contents of the ArrayBuffer.\r\n */\r\nfunction copyArrayBuffer(arrayBuffer, _state) {\r\n  return arrayBuffer.slice(0);\r\n}\r\n/**\r\n * Create a new Blob with the contents of the original.\r\n */\r\nfunction copyBlob(blob, _state) {\r\n  return blob.slice(0, blob.size, blob.type);\r\n}\r\n/**\r\n * Create a new DataView with the contents of the original.\r\n */\r\nfunction copyDataView(dataView, state) {\r\n  return new state.Constructor(copyArrayBuffer(dataView.buffer, undefined));\r\n}\r\n/**\r\n * Deeply copy the indexed values in the array.\r\n */\r\nfunction copyArrayLoose(array, state) {\r\n  var clone = new state.Constructor();\r\n  // set in the cache immediately to be able to reuse the object recursively\r\n  state.cache.set(array, clone);\r\n  for (var index = 0, length_2 = array.length; index < length_2; ++index) {\r\n    clone[index] = state.copier(array[index], state);\r\n  }\r\n  return clone;\r\n}\r\n\r\nexport function createCopier(options) {\r\n  var normalizedOptions = Object.assign({}, DEFAULT_LOOSE_OPTIONS, options);\r\n  var tagSpecificCopiers = getTagSpecificCopiers(normalizedOptions);\r\n  var array = tagSpecificCopiers.Array, object = tagSpecificCopiers.Object;\r\n  function copier(value, state) {\r\n    state.prototype = state.Constructor = undefined;\r\n    if (!value || typeof value !== 'object') {\r\n      return value;\r\n    }\r\n    if (state.cache.has(value)) {\r\n      return state.cache.get(value);\r\n    }\r\n    state.prototype = Object.getPrototypeOf(value);\r\n    state.Constructor = state.prototype && state.prototype.constructor;\r\n    // plain objects\r\n    if (!state.Constructor || state.Constructor === Object) {\r\n      return object(value, state);\r\n    }\r\n    // arrays\r\n    if (Array.isArray(value)) {\r\n      return array(value, state);\r\n    }\r\n    var tagSpecificCopier = tagSpecificCopiers[getTag(value)];\r\n    if (tagSpecificCopier) {\r\n      return tagSpecificCopier(value, state);\r\n    }\r\n    return typeof value.then === 'function' ? value : object(value, state);\r\n  }\r\n  return function copy(value) {\r\n    return copier(value, {\r\n      Constructor: undefined,\r\n      cache: createCache(),\r\n      copier: copier,\r\n      prototype: undefined,\r\n    });\r\n  };\r\n}\r\n\r\nfunction getTagSpecificCopiers(options) {\r\n  return {\r\n    Arguments: options.object,\r\n    Array: options.array,\r\n    ArrayBuffer: options.arrayBuffer,\r\n    Blob: options.blob,\r\n    Boolean: copyPrimitiveWrapper,\r\n    DataView: options.dataView,\r\n    Date: options.date,\r\n    Error: options.error,\r\n    Float32Array: options.arrayBuffer,\r\n    Float64Array: options.arrayBuffer,\r\n    Int8Array: options.arrayBuffer,\r\n    Int16Array: options.arrayBuffer,\r\n    Int32Array: options.arrayBuffer,\r\n    Map: options.map,\r\n    Number: copyPrimitiveWrapper,\r\n    Object: options.object,\r\n    Promise: copySelf,\r\n    RegExp: options.regExp,\r\n    Set: options.set,\r\n    String: copyPrimitiveWrapper,\r\n    WeakMap: copySelf,\r\n    WeakSet: copySelf,\r\n    Uint8Array: options.arrayBuffer,\r\n    Uint8ClampedArray: options.arrayBuffer,\r\n    Uint16Array: options.arrayBuffer,\r\n    Uint32Array: options.arrayBuffer,\r\n    Uint64Array: options.arrayBuffer,\r\n  };\r\n}\r\nfunction copyPrimitiveWrapper(primitiveObject, state) {\r\n  return new state.Constructor(primitiveObject.valueOf());\r\n}\r\n\r\nfunction copySelf(value, _state) {\r\n  return value;\r\n}"]}