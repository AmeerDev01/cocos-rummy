{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egypt/Slot/Component/Egypt_DialogWin.ts"],"names":["_decorator","Label","Node","tween","UIOpacity","Vec3","BaseComponent","ccclass","property","DialogType","Egypt_DialogWin","timer","showNode","start","bindEvent","bindUI","showDialog","dialogType","amount","keepTime","cb","insider","setScale","uiOpacity","getComponent","opacity","active","SpriteSplash","JACKPOT","getChildByName","setPosition","string","to","scale","easing","call","window","setTimeout","hideDialog","node","destroy","clearTimeout","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, tween, UIOpacity, Vec2, Vec3 } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport enum DialogType {\r\n\tBIG_WIN = \"bigWin\",\r\n\tJACKPOT = \"jackpot\",\r\n\tMEGA_WIN = \"megaWin\",\r\n\tSUPER_WIN = \"superWin\",\r\n\tSETTLE = \"settle\"\r\n}\r\n\r\n@ccclass('Egypt_DialogWin')\r\nexport class Egypt_DialogWin extends BaseComponent {\r\n\r\n\t@property(Node)\r\n\tinsider: Node = null\r\n\r\n\t@property(Node)\r\n\tbigWin: Node = null\r\n\r\n\t@property(Node)\r\n\tjackpot: Node = null\r\n\r\n\t@property(Node)\r\n\tmegaWin: Node = null\r\n\r\n\t@property(Node)\r\n\tsuperWin: Node = null\r\n\r\n\t@property(Node)\r\n\tsettle: Node = null\r\n\r\n\t@property(Node)\r\n\tSpriteSplash: Node = null\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tprivate timer: number\r\n\tprivate showNode: Node\r\n\t/**\r\n\t * 大奖弹窗\r\n\t * @param dialogType 展示类型\r\n\t * @param amount 展示金额\r\n\t * @param keepTime 持续时间（若传0，则不自动关闭）\r\n\t * @param cb 回调函数\r\n\t */\r\n\tpublic showDialog(dialogType: DialogType, amount: number, keepTime: number, cb?: () => void) {\r\n\t\tthis.insider.setScale(new Vec3(0, 0, 0))\r\n\t\tconst uiOpacity = this.insider.getComponent(UIOpacity)\r\n\t\tuiOpacity.opacity = 0;\r\n\t\tthis.showNode = this[dialogType] as Node\r\n\t\tthis.showNode.active = true;\r\n\t\tthis.SpriteSplash.active = false;\r\n\t\tif(DialogType.JACKPOT == dialogType){\r\n\t\t\tthis.showNode.getChildByName(\"score\").setPosition(0,0);\r\n\t\t}\r\n\t\tthis.showNode.getChildByName(\"score\").getComponent(Label).string = amount + ''//.formatAmountWithCommas()\r\n\t\ttween(this.insider).to(0.5, { scale: new Vec3(1, 1, 0) }, { easing: \"backOut\" }).start()\r\n\t\ttween(uiOpacity).to(0.2, { opacity: 255 }).call(() => {\r\n\t\t\tthis.SpriteSplash.active = true;\r\n\t\t}).start()\r\n\t\tkeepTime && (this.timer = window.setTimeout(() => {\r\n\t\t\tthis.hideDialog()\r\n            this.node.destroy()\r\n\t\t\tcb && cb()\r\n\t\t}, keepTime))\r\n\t}\r\n\r\n\tpublic hideDialog() {\r\n\t\tconst uiOpacity = this.insider.getComponent(UIOpacity)\r\n\t\tthis.SpriteSplash.active = false;\r\n\t\ttween(this.insider).to(0.3, { scale: new Vec3(0, 0, 0) }).start()\r\n\t\ttween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n\t\t\tthis.showNode.active = false\r\n\t\t}).start()\r\n\t\tthis.timer && window.clearTimeout(this.timer)\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n\r\n}\r\n\r\n"]}