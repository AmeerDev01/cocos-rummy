{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfcV2/components/GxfcV2_Header.ts"],"names":["_decorator","Animation","Label","Node","BaseComponent","global","BuyType","StepNumber","SoundPathDefine","GxfcV2_Audio","mainViewModel","StepNumberV2","ccclass","property","GxfcV2_Header","init","stepNumberV2","propertyNode","props_Back_Home","props_Moeny_Top","props_Left_Bg","props_Right_Bg","props_Up_Settings","props_Moeny_Label","props_number2","props_btn_vip","props_btn_up_menu","props_menu_panel","props_spr_menu_bg","props_btn_info","props","gold","events","quitGame","isShowMenu","start","initState","bindEvent","on","EventType","TOUCH_END","playOneShot","btn_click","openPersonCenter","openShop","TAS","openVipMain","node","getChildByName","openRule","active","getComponent","stop","play","e","preventSwallow","scheduleOnce","TOUCH_START","TOUCH_MOVE","TOUCH_CANCEL","useProps","key","value","isValid","string","Number","cur","formatAmountWithCommas","formatAmountWithLetter","stepNumber","pre","num","toFixed","setFlyNode","parent","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Animation, EventTouch, Label, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { GxfcV2_Audio, mainViewModel } from '../index';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tgold: number\r\n}\r\nexport interface IEvent {\r\n\tquitGame: () => void,\r\n}\r\n\r\n@ccclass('GxfcV2_Header')\r\nexport class GxfcV2_Header extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate init = true;\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_Back_Home: new Node(),\r\n\t\tprops_Moeny_Top: new Node(),\r\n\t\tprops_Left_Bg: new Node(),\r\n\t\tprops_Right_Bg: new Node(),\r\n\t\tprops_Up_Settings: new Node(),\r\n\t\tprops_Moeny_Label: new Label(),\r\n\t\tprops_number2: new Node(),\r\n\t\tprops_btn_vip: new Node(),\r\n\t\tprops_btn_up_menu: new Node(),\r\n\t\tprops_menu_panel: new Node(),\r\n\t\tprops_spr_menu_bg: new Node(),\r\n\t\tprops_btn_info: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tgold: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tquitGame: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\tprivate isShowMenu = false;\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_Back_Home.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tthis.events.quitGame();\r\n\t\t})\r\n\t\tthis.propertyNode.props_Up_Settings.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openPersonCenter(2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_Left_Bg.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_Right_Bg.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop(BuyType.TAS)\r\n\t\t})\r\n\t\tthis.propertyNode.props_Moeny_Top.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_vip.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openVipMain()\r\n\t\t})\r\n\t\tthis.node.getChildByName('Up_Left').on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_info.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tmainViewModel.openRule()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_menu.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tif (!this.isShowMenu) {\r\n\t\t\t\tthis.isShowMenu = true;\r\n\t\t\t\tthis.propertyNode.props_menu_panel.active=!this.propertyNode.props_menu_panel.active\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).stop();\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).play();\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_END, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t\tthis.propertyNode.props_menu_panel.active = false;\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.isShowMenu = false;\r\n\t\t\t}, 0.2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_START, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_MOVE, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_CANCEL, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t}\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'gold') {\r\n\t\t\t\tif (this.init) {\r\n\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = Number(value.cur) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();\r\n\t\t\t\t\tthis.init = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = (+num.toFixed(0)) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstepNumber.setFlyNode(this.propertyNode.props_Moeny_Label.node.parent, this.propertyNode.props_Moeny_Label.node, 20)\r\n\t\t\t\t\tstepNumber.start()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}