{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/net/protocol/HttpProtocol.ts"],"names":["HttpProtocol","UserLoginProtocol","Crash_HttpManager","ProtocolCode","code","method","url","toString","keys","Object","forEach","key","push","ret","length","i","encodeURIComponent","obj","JSON","stringify","send","args","getInstance","constructor","NATIVE_USER_LOGIN"],"mappings":";;;+DAIaA,Y,EAwDAC,iB;;;;;;;;;;;;;;;;;;;;;AA5DNC,MAAAA,iB;;AACEC,MAAAA,Y,iBAAAA,Y;;;;;;;8BAGIH,Y,GAAN,MAAMA,YAAN,CAAmB;AAAA;AAAA,eACtBI,IADsB,GACV,CADU;AAAA,eAEtBC,MAFsB,GAEL,EAFK;AAAA,eAGtBC,GAHsB,GAGR,EAHQ;AAAA;;AAKtBC,QAAAA,QAAQ,GAAW;AACf,cAAG,KAAKF,MAAL,IAAe,KAAlB,EAAyB;AACrB,gBAAIG,IAAI,GAAG,EAAX;AACAC,YAAAA,MAAM,CAACD,IAAP,CAAY,IAAZ,EAAkBE,OAAlB,CAA2BC,GAAG,IAAI;AAC9B,kBAAIA,GAAG,IAAI,MAAP,IAAiBA,GAAG,IAAI,QAAxB,IAAoCA,GAAG,IAAI,KAA/C,EAAsD;AAClDH,gBAAAA,IAAI,CAACI,IAAL,CAAUD,GAAV;AACH;AACJ,aAJD;AAKA,gBAAIE,GAAG,GAAG,EAAV;;AACA,gBAAGL,IAAI,CAACM,MAAL,GAAc,CAAjB,EAAoB;AAChBD,cAAAA,GAAG,IAAI,GAAP;AACH;;AACD,iBAAI,IAAIE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGP,IAAI,CAACM,MAAxB,EAAgC,EAAEC,CAAlC,EAAqC;AACjC,kBAAIJ,GAAG,GAAGH,IAAI,CAACO,CAAD,CAAd;AACAF,cAAAA,GAAG,IAAIF,GAAG,GAAG,GAAN,GAAYK,kBAAkB,CAAC,KAAKL,GAAL,CAAD,CAArC;;AACA,kBAAGI,CAAC,GAAGP,IAAI,CAACM,MAAL,GAAc,CAArB,EAAwB;AACpBD,gBAAAA,GAAG,IAAI,GAAP;AACH;AACJ;;AACD,mBAAOA,GAAP;AACH;;AAED,cAAG,KAAKR,MAAL,IAAe,MAAlB,EAA0B;AACtB,gBAAIG,KAAI,GAAG,EAAX;AACAC,YAAAA,MAAM,CAACD,IAAP,CAAY,IAAZ,EAAkBE,OAAlB,CAA2BC,GAAG,IAAI;AAC9B,kBAAIA,GAAG,IAAI,MAAP,IAAiBA,GAAG,IAAI,QAAxB,IAAoCA,GAAG,IAAI,KAA/C,EAAsD;AAClDH,gBAAAA,KAAI,CAACI,IAAL,CAAUD,GAAV;AACH;AACJ,aAJD;AAKA,gBAAIE,IAAG,GAAG,EAAV;;AACA,gBAAGL,KAAI,CAACM,MAAL,GAAc,CAAjB,EAAoB;AAChB,kBAAIG,GAAG,GAAG,EAAV;;AACA,mBAAI,IAAIF,EAAC,GAAG,CAAZ,EAAeA,EAAC,GAAGP,KAAI,CAACM,MAAxB,EAAgC,EAAEC,EAAlC,EAAqC;AACjCE,gBAAAA,GAAG,CAACT,KAAI,CAACO,EAAD,CAAL,CAAH,GAAe,KAAKP,KAAI,CAACO,EAAD,CAAT,CAAf;AACH;;AAED,qBAAOG,IAAI,CAACC,SAAL,CAAeF,GAAf,CAAP;AACH;;AACD,mBAAOJ,IAAP;AACH;;AACD,iBAAO,EAAP;AACH;;AAEDO,QAAAA,IAAI,GAAY;AAAA,4CAAPC,IAAO;AAAPA,YAAAA,IAAO;AAAA;;AACZ;AAAA;AAAA,sDAAkBC,WAAlB,GAAgCF,IAAhC,CAAqC,IAArC,EAA2CC,IAA3C;AACH;;AAlDqB,O;;mCAwDbpB,iB,GAAN,MAAMA,iBAAN,SAAgCD,YAAhC,CAA6C;AAChDuB,QAAAA,WAAW,GAAG;AACV;AACA,eAAKnB,IAAL,GAAY;AAAA;AAAA,4CAAaoB,iBAAzB;AACA,eAAKnB,MAAL,GAAc,KAAd;AACA,eAAKC,GAAL,GAAW,iBAAX;AACH;;AAN+C,O","sourcesContent":["import Crash_HttpManager from \"../Crash_HttpManager\";\r\nimport { ProtocolCode } from \"./ProtocolDef\";\r\n\r\n\r\nexport class HttpProtocol {\r\n    code: any = 0;\r\n    method: string = \"\";\r\n    url: string = \"\";\r\n\r\n    toString(): string {\r\n        if(this.method == \"GET\") {\r\n            let keys = [];\r\n            Object.keys(this).forEach( key => {\r\n                if( key != \"code\" && key != \"method\" && key != \"url\") {\r\n                    keys.push(key);\r\n                }\r\n            })\r\n            let ret = \"\";\r\n            if(keys.length > 0) {\r\n                ret += \"?\"\r\n            }\r\n            for(let i = 0; i < keys.length; ++i) {\r\n                let key = keys[i];\r\n                ret += key + \"=\" + encodeURIComponent(this[key]);\r\n                if(i < keys.length - 1) {\r\n                    ret += \"&\";\r\n                }\r\n            }\r\n            return ret;\r\n        }\r\n\r\n        if(this.method == \"POST\") {\r\n            let keys = [];\r\n            Object.keys(this).forEach( key => {\r\n                if( key != \"code\" && key != \"method\" && key != \"url\") {\r\n                    keys.push(key);\r\n                }\r\n            })\r\n            let ret = \"\";\r\n            if(keys.length > 0) {\r\n                let obj = {};\r\n                for(let i = 0; i < keys.length; ++i) {\r\n                    obj[keys[i]] = this[keys[i]];\r\n                }\r\n\r\n                return JSON.stringify(obj);\r\n            }\r\n            return ret;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    send( ...args ) {\r\n        Crash_HttpManager.getInstance().send(this, args);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport class UserLoginProtocol extends HttpProtocol {\r\n    constructor() {\r\n        super();\r\n        this.code = ProtocolCode.NATIVE_USER_LOGIN;\r\n        this.method = \"GET\";\r\n        this.url = \"api/game/wsList\";\r\n    }\r\n}\r\n"]}