{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/common/fish/BatteryHitScoreMgr.ts"],"names":["BatteryHitScoreMgr","BatteryHitScore","constructor","sourceManage","parent","labConfig","fntConfig","rootNode","objLst","newSomeObject","k","v","i","obj","src_id","id","push","clear","forEach","destory","show","pos","rot","score","call","show_obj","length","getUseState","getId"],"mappings":";;;gGAOaA,kB;;;;;;;;;;;;;;;;;;;;AALJC,MAAAA,e,iBAAAA,e;;;;;;;;;AAET;AACA;AACA;oCACaD,kB,GAAN,MAAMA,kBAAN,CAAyB;AAQ9BE,QAAAA,WAAW,CAACC,YAAD,EAA6BC,MAA7B,EAAqCC,SAArC,EAAgDC,SAAhD,EAA2DC,QAA3D,EAA2E;AAAA,eAP9EJ,YAO8E;AAAA,eAN9EC,MAM8E;AAAA,eAL9EC,SAK8E;AAAA,eAJ9EC,SAI8E;AAAA,eAH9EE,MAG8E;AAAA,eAF9ED,QAE8E;AACpF,eAAKJ,YAAL,GAAoBA,YAApB;AACA,eAAKK,MAAL,GAAc,EAAd;AACA,eAAKJ,MAAL,GAAcA,MAAd;AACA,eAAKC,SAAL,GAAiBA,SAAjB;AACA,eAAKC,SAAL,GAAiBA,SAAjB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACD;;AAEME,QAAAA,aAAa,GAAG;AACrB,eAAK,IAAMC,CAAX,IAAgB,KAAKL,SAArB,EAAgC;AAC9B,gBAAMM,CAAC,GAAG,KAAKN,SAAL,CAAeK,CAAf,CAAV;AACA,gBAAIC,CAAC,KAAK,IAAV,EAAgB;;AAChB,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,kBAAIC,GAAG,GAAG;AAAA;AAAA,sDAAoB,KAAKV,YAAzB,EAAuC,KAAKC,MAA5C,EAAoD,KAAKE,SAAL,CAAeK,CAAC,CAACG,MAAjB,CAApD,EAA8EH,CAAC,CAACI,EAAhF,EAAoF,KAAKR,QAAzF,CAAV;AACA,mBAAKC,MAAL,CAAYQ,IAAZ,CAAiBH,GAAjB;AACD;AACF;AACF;;AAEMI,QAAAA,KAAK,GAAG;AACb,eAAKT,MAAL,CAAYU,OAAZ,CAAoBP,CAAC,IAAI;AACvBA,YAAAA,CAAC,CAACQ,OAAF;AACD,WAFD;AAGA,eAAKX,MAAL,GAAc,EAAd;AACD;;AAEMY,QAAAA,IAAI,CAACC,GAAD,EAAYC,GAAZ,EAAyBC,KAAzB,EAAwCR,EAAxC,EAAoDS,IAApD,EAA0D;AACnE,cAAIC,QAAyB,GAAG,IAAhC;;AAEA,eAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,MAAL,CAAYkB,MAAhC,EAAwCd,CAAC,EAAzC,EAA6C;AAC3C,gBAAMD,CAAC,GAAG,KAAKH,MAAL,CAAYI,CAAZ,CAAV;;AACA,gBAAID,CAAC,CAACgB,WAAF,OAAoB,KAApB,IAA6BhB,CAAC,CAACiB,KAAF,OAAcb,EAA/C,EAAmD;AACjDU,cAAAA,QAAQ,GAAGd,CAAX;AACA;AACD;AACF;;AAED,cAAI,CAACc,QAAL,EAAe;AACbA,YAAAA,QAAQ,GAAG;AAAA;AAAA,oDAAoB,KAAKtB,YAAzB,EAAuC,KAAKC,MAA5C,EAAoD,KAAKE,SAAL,CAAe,KAAKD,SAAL,CAAeU,EAAf,EAAmBD,MAAlC,CAApD,EAA+FC,EAA/F,EAAmG,KAAKR,QAAxG,CAAX;AACA,iBAAKC,MAAL,CAAYQ,IAAZ,CAAiBS,QAAjB;AACD;;AACDA,UAAAA,QAAQ,CAACL,IAAT,CAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,KAAxB,EAA+BC,IAA/B;AACD;;AAnD6B,O","sourcesContent":["import { Node, Vec3 } from \"cc\";\r\nimport SourceManage from \"../../base/SourceManage\"\r\nimport { BatteryHitScore } from \"./BatteryHitScore\";\r\n\r\n/**\r\n  打中分数管理\r\n */\r\nexport class BatteryHitScoreMgr {\r\n  private sourceManage: SourceManage;\r\n  private parent: Node;\r\n  private labConfig;\r\n  private fntConfig;\r\n  private objLst: BatteryHitScore[];\r\n  private rootNode: Node;\r\n\r\n  constructor(sourceManage: SourceManage, parent, labConfig, fntConfig, rootNode: Node) {\r\n    this.sourceManage = sourceManage;\r\n    this.objLst = []\r\n    this.parent = parent\r\n    this.labConfig = labConfig\r\n    this.fntConfig = fntConfig\r\n    this.rootNode = rootNode\r\n  }\r\n\r\n  public newSomeObject() {\r\n    for (const k in this.labConfig) {\r\n      const v = this.labConfig[k];\r\n      if (v === null) continue;\r\n      for (let i = 0; i < 5; i++) {\r\n        let obj = new BatteryHitScore(this.sourceManage, this.parent, this.fntConfig[v.src_id], v.id, this.rootNode)\r\n        this.objLst.push(obj)\r\n      }\r\n    }\r\n  }\r\n\r\n  public clear() {\r\n    this.objLst.forEach(v => {\r\n      v.destory();\r\n    })\r\n    this.objLst = [];\r\n  }\r\n\r\n  public show(pos: Vec3, rot: number, score: number, id: number, call) {\r\n    let show_obj: BatteryHitScore = null\r\n\r\n    for (let i = 0; i < this.objLst.length; i++) {\r\n      const v = this.objLst[i];\r\n      if (v.getUseState() === false && v.getId() === id) {\r\n        show_obj = v\r\n        break\r\n      }\r\n    }\r\n\r\n    if (!show_obj) {\r\n      show_obj = new BatteryHitScore(this.sourceManage, this.parent, this.fntConfig[this.labConfig[id].src_id], id, this.rootNode)\r\n      this.objLst.push(show_obj)\r\n    }\r\n    show_obj.show(pos, rot, score, call)\r\n  }\r\n\r\n}\r\n\r\n"]}