{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth/Slot/Mediator/BgMediator.ts"],"names":["BgMediator","Node","Prefab","Sprite","Toggle","CommandDefine","PrefabDefine","BaseMediator","SubGameType","AutoLaunchType","StopMode","DialogType","GodWealth_DialogWin","BgCommandConst","getBgProxy","getSocketProxy","RollerMediatorConst","AudioManager","SoundList","global","UseSetOption","addToastAction","sendNativeVibrate","BgMediatorConst","constructor","mediatorName","viewComponent","buttonThrottling","frequency","currentScore","sourceMap","key","path","SLOT_BG","sourceType","source","FLY_BG","DYNAMIC_NUMBER","DIALOG_WIN","RULE_PANEL","TOAST","listNotificationConst","name","INIT_MAIN_PANEL","handler","notification","init","pdd","Instance","option","gameSet","godWealth","betTarget","positionId","initUserSwitch","sendNotification","BG","order","UPDATE_BET_AMOUNT","SETGREYOUT","state","getBody","comp","wrapView","getComponent","setGreyOut","INITSCORE","updateScore","getNextGame","CHANGE_BG","gameType","changeBg","START_FLY_BG","done","flyBgNode","getSource","addChild","setSiblingIndex","window","setTimeout","TOGGLETHESTARTBUTTON","AUTO_LAUNCH","removeChild","checkAutoLaunch","str","isUNLIMT","getAutoLaunchNum","getTotal","setBtnState","UPDATE_NUMBER","UPDATE_AUTO_LAUNCH","setActiveButton","getAutoLaunchType","UPDATE_JACKPOT","jackPotData","setJACKPOT","UPDATE_GAME_STATUS","setDisable","getDisable","getLastGame","setDis_btn","homeButton","grayscale","UPDATE_BTN_LABEL","setBtnLabel","UPDATE_USER_GOLD","gold","getTransferGameInfo","getUserGold","setGold","SHOW_DIALOG_WIN","dialogType","amount","keepTime","dialog","type","getShiftAmount","jackpot","showDialog","NUMBEROFDISPLAYS","fab","getIsChangeGameRunning","MAIN","getCurrentScore","SUB_GAME1","YOUWON","SUB_GAME2","TREASUREBOWL","getRemainTimes","FREQUENCY","HANDOFF_JACKPOT","handoffJACKPOT","OPEN_RULE_PANEL","rulePanel","baseBetAmount","lineCount","updateBetAmount","InsufficientBalanceDisplay","bl","Balance_tips","UPDATE_CURRENT_SCORE","getInstance","playSound","coinCollection","SHOW_TOAST","content","hallDispatch","String","listenerEvent","autoButtonWrap","autoLaunch","props_toggle_fast","propsToggleFast","isChecked","pressTime","timeLimit","timer","isLongPress","ruleButton","on","EventType","TOUCH_END","buttonClick","startButton","TOUCH_START","setInterval","clearInterval","presentGame","triggeAutoLaunch","fbp","DISABLE","setAutoLaunchType","sendLaunch","END_ROLL","scheduleOnce","closeMusic","closeSubGame","addBet","add_coin","calculateTheBalanceStatus","subtractBet","reduce_coin","maxBet","children","forEach","child","index","setStopMode","TOGGLE","toggle","QUEUE_STOP","NORMAL","gameRunner","_gameRunner","setBg"],"mappings":";;;mXAkEqBA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAlEZC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;;AAEtBC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;;AACFC,MAAAA,Y;;AAIaC,MAAAA,W,iBAAAA,W;;AACXC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,Q,iBAAAA,Q;;AAChBC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,mB,iBAAAA,mB;;AACZC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,c,iBAAAA,c;;AAEZC,MAAAA,mB,kBAAAA,mB;;AACAC,MAAAA,Y,kBAAAA,Y;AAAcC,MAAAA,S,kBAAAA,S;;AACdC,MAAAA,M,kBAAAA,M;;AACFC,MAAAA,Y;;AACEC,MAAAA,c,kBAAAA,c;;AACAC,MAAAA,iB,kBAAAA,iB;;;;;;;;;AAET;AACA;AACA;AACA;AACA;iCACYC,e,0BAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;AAAAA,QAAAA,e;eAAAA,e;;;yBAwCSvB,U,GAAN,MAAMA,UAAN;AAAA;AAAA,wCAAsC;AAI5CwB,QAAAA,WAAW,CAACC,YAAD,EAA8BC,aAA9B,EAAyD;AAAA,cAAxDD,YAAwD;AAAxDA,YAAAA,YAAwD,GAAjC,IAAiC;AAAA;;AAAA,cAA3BC,aAA2B;AAA3BA,YAAAA,aAA2B,GAAN,IAAM;AAAA;;AACzE,gBAAMD,YAAN,EAAoBC,aAApB;AADyE,eAH3EC,gBAG2E,GAHxD,IAGwD;AAAA,eAF3EC,SAE2E,GAF/D,IAE+D;AAAA,eAD3EC,YAC2E,GAD9D,CAC8D;AAAA,eAGpEC,SAHoE,GAGpC,CACrC;AACEC,YAAAA,GAAG,EAAE,YADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaC,OAFrB;AAGEC,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WADqC,EAOrC;AACEJ,YAAAA,GAAG,EAAE,OADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaI,MAFrB;AAGEF,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WAPqC,EAarC;AACEJ,YAAAA,GAAG,EAAE,eADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaK,cAFrB;AAGEH,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WAbqC,EAmBrC;AACEJ,YAAAA,GAAG,EAAE,WADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaM,UAFrB;AAGEJ,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WAnBqC,EAyBrC;AACEJ,YAAAA,GAAG,EAAE,WADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaO,UAFrB;AAGEL,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WAzBqC,EA+BrC;AACEJ,YAAAA,GAAG,EAAE,OADP;AAEEC,YAAAA,IAAI,EAAE;AAAA;AAAA,8CAAaQ,KAFrB;AAGEN,YAAAA,UAAU,EAAEhC,MAHd;AAIEiC,YAAAA,MAAM,EAAE;AAJV,WA/BqC,CAHoC;AAAA,eA+JjEM,qBA/JiE,GA+JL,CACpE;AACEC,YAAAA,IAAI,EAAEnB,eAAe,CAACoB,eADxB;;AAEEC,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,mBAAKC,IAAL;AACA,kBAAIC,GAAG,GAAG;AAAA;AAAA,gDAAaC,QAAb,GAAwBC,MAAxB,CAA+BC,OAA/B,CAAuCC,SAAvC,GAAmD;AAAA;AAAA,gDAAaH,QAAb,GAAwBC,MAAxB,CAA+BC,OAA/B,CAAuCC,SAAvC,CAAiDC,SAAjD,CAA2DC,UAA9G,GAA2H,CAArI;AACA;AAAA;AAAA,sDAAiBC,cAAjB,CAAgCP,GAAhC;AACA,mBAAKQ,gBAAL,CAAsB;AAAA;AAAA,kDAAcC,EAApC,EAAwC;AAAEC,gBAAAA,KAAK,EAAE;AAAT,eAAxC,EAA2DlC,eAAe,CAACmC,iBAA3E;AACD;;AAPH,WADoE,EAUpE;AACEhB,YAAAA,IAAI,EAAEnB,eAAe,CAACoC,UADxB;;AAEEf,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEe,gBAAAA;AAAF,kBAAYf,YAAY,CAACgB,OAAb,EAAlB;AAAA,kBACEC,IAAI,GAAI,KAAKC,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CADV;;AAEA,kBAAIJ,KAAK,KAAK,CAAd,EAAiB;AACfE,gBAAAA,IAAI,CAACG,UAAL,CAAgB,OAAhB,EAAyBL,KAAK,IAAI,CAAlC;AACAE,gBAAAA,IAAI,CAACG,UAAL,CAAgB,OAAhB,EAAyBL,KAAK,IAAI,CAAlC;AACD,eAHD,MAGO;AACLE,gBAAAA,IAAI,CAACG,UAAL,CAAgB,OAAhB,EAAyB,KAAzB;AACAH,gBAAAA,IAAI,CAACG,UAAL,CAAgB,OAAhB,EAAyB,KAAzB;AACD;AAEF;;AAbH,WAVoE,EAyBpE;AACEvB,YAAAA,IAAI,EAAEnB,eAAe,CAAC2C,SADxB;;AAEEtB,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEe,gBAAAA;AAAF,kBAAYf,YAAY,CAACgB,OAAb,MAA0B,EAA5C;;AACA,kBAAID,KAAJ,EAAW;AACR,qBAAKG,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEG,WAArE,CAAiF,CAAjF;AACD;;AACD,kBAAI;AAAA;AAAA,8CAAaC,WAAb,MAA8B,CAAlC,EAAqC;AAClC,qBAAKL,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEG,WAArE,CAAiF,CAAjF;AACD;AACF;;AAVH,WAzBoE,EAqCpE;AACEzB,YAAAA,IAAI,EAAEnB,eAAe,CAAC8C,SADxB;;AAEEzB,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEyB,gBAAAA;AAAF,kBAAezB,YAAY,CAACgB,OAAb,MAA0B,EAA/C;AACA,mBAAKU,QAAL,CAAcD,QAAd;AACD;;AALH,WArCoE,EA4CpE;AACE5B,YAAAA,IAAI,EAAEnB,eAAe,CAACiD,YADxB;;AAEE5B,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAE4B,gBAAAA;AAAF,kBAAW5B,YAAY,CAACgB,OAAb,MAA0B,EAA3C;AACA,kBAAMa,SAAS,GAAG,KAAKC,SAAL,CAAe;AAAA;AAAA,gDAAavC,MAA5B,CAAlB;AACA,mBAAKV,aAAL,CAAmBkD,QAAnB,CAA4BF,SAA5B;AACAA,cAAAA,SAAS,CAACG,eAAV,CAA0B,IAA1B;AACAC,cAAAA,MAAM,CAACC,UAAP,CAAkB,MAAM;AACtBN,gBAAAA,IAAI,IAAIA,IAAI,EAAZ;AACA,qBAAKlB,gBAAL,CAAsBhC,eAAe,CAACyD,oBAAtC,EAA4D;AAAEpB,kBAAAA,KAAK,EAAE;AAAT,iBAA5D;AACA,qBAAKL,gBAAL,CAAsB;AAAA;AAAA,oDAAcC,EAApC,EAAwC,EAAxC,EAA4C;AAAA;AAAA,sDAAeyB,WAA3D;AACA,qBAAKvD,aAAL,CAAmBwD,WAAnB,CAA+BR,SAA/B;AACD,eALD,EAKG,IALH;AAMD;;AAbH,WA5CoE,EA2DpE;AACEhC,YAAAA,IAAI,EAAEnB,eAAe,CAACyD,oBADxB;;AAEEpC,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEe,gBAAAA;AAAF,kBAAYf,YAAY,CAACgB,OAAb,EAAlB;;AACA,kBAAI;AAAA;AAAA,8CAAaO,WAAb,MAA8B,CAAlC,EAAqC;AACnC,oBAAI;AAAA;AAAA,gDAAae,eAAb,EAAJ,EAAoC;AAAE;AACpC,sBAAIC,GAAG,GAAI;AAAA;AAAA,kDAAaC,QAAb,EAAD,GAA4B,GAA5B,GAAkC;AAAA;AAAA,kDAAaC,gBAAb,KAAkC,GAAlC,GAAwC;AAAA;AAAA,kDAAaC,QAAb,EAApF;AACC,uBAAKxB,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEwB,WAArE,CAAiF5B,KAAjF,EAAwF,CAAxF,EAA2FwB,GAA3F;AACD,iBAHD,MAGO;AACJ,uBAAKrB,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEwB,WAArE,CAAiF5B,KAAjF;AACD;AACF,eAPD,MAOO;AAAE;AACN,qBAAKG,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEwB,WAArE,CAAiF5B,KAAjF,EAAwF,CAAxF;AACD;AACF;;AAdH,WA3DoE,EA2EpE;AACElB,YAAAA,IAAI,EAAEnB,eAAe,CAACkE,aADxB;;AAEE7C,YAAAA,OAAO,CAACC,YAAD,EAA8B,CACnC;AACA;AACA;AACD;;AANH,WA3EoE,EAmFpE;AACEH,YAAAA,IAAI,EAAEnB,eAAe,CAACmE,kBADxB;;AAEE9C,YAAAA,OAAO,CAACC,YAAD,EAA8B;AAChB,mBAAKkB,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmE2B,eAAnE,CAAmF;AAAA;AAAA,8CAAaC,iBAAb,EAAnF;AACD;;AAJH,WAnFoE,EAyFpE;AACElD,YAAAA,IAAI,EAAEnB,eAAe,CAACsE,cADxB;;AAEEjD,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAI;AAAEiD,gBAAAA;AAAF,kBAAkBjD,YAAY,CAACgB,OAAb,EAAtB;AACmB,mBAAKE,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmE+B,UAAnE,CAA8ED,WAA9E;AACD;;AALH,WAzFoE,EAgGpE;AACEpD,YAAAA,IAAI,EAAEnB,eAAe,CAACyE,kBADxB;;AAEEpD,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAMiB,IAAI,GAAsB,KAAKC,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAhC;AACAF,cAAAA,IAAI,CAACmC,UAAL,CAAgB;AAAA;AAAA,8CAAaC,UAAb,EAAhB;;AACA,kBAAI;AAAA;AAAA,8CAAaC,WAAb,MAA8B,CAAlC,EAAqC;AACnCrC,gBAAAA,IAAI,CAACsC,UAAL,CAAgB,IAAhB;AACD,eAFD,MAEO;AACLtC,gBAAAA,IAAI,CAACsC,UAAL,CAAgB;AAAA;AAAA,gDAAaF,UAAb,EAAhB;AACD;;AACDpC,cAAAA,IAAI,CAACuC,UAAL,CAAgBrC,YAAhB,CAA6B7D,MAA7B,EAAqCmG,SAArC,GAAiD;AAAA;AAAA,8CAAaJ,UAAb,EAAjD;AACD;;AAXH,WAhGoE,EA4GjE;AACDxD,YAAAA,IAAI,EAAEnB,eAAe,CAACgF,gBADrB;;AAED3D,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAI;AAAEjB,gBAAAA;AAAF,kBAAgBiB,YAAY,CAACgB,OAAb,EAApB;AACA,mBAAKjC,SAAL,GAAiBA,SAAS,IAAI,KAAKA,SAAL,GAAiB,CAA/C;AACA,kBAAMkC,IAAI,GAAsB,KAAKC,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAhC;AACAF,cAAAA,IAAI,CAAC0C,WAAL,CAAiB,KAAK5E,SAAtB;AACD;;AAPA,WA5GiE,EAoHjE;AACDc,YAAAA,IAAI,EAAEnB,eAAe,CAACkF,gBADrB;;AAED7D,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAI;AAAEe,gBAAAA;AAAF,kBAAYf,YAAY,CAACgB,OAAb,EAAhB;AACA,kBAAI6C,IAAI,GAAG;AAAA;AAAA,sDAAiBC,mBAAjB,GAAuCC,WAAvC,CAAmDhD,KAAnD,CAAX;AACA,kBAAME,IAAI,GAAsB,KAAKC,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAhC;AACAF,cAAAA,IAAI,CAAC+C,OAAL,CAAaH,IAAb;AACD;;AAPA,WApHiE,EA6HpE;AACEhE,YAAAA,IAAI,EAAEnB,eAAe,CAACuF,eADxB;;AAEElE,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEkE,gBAAAA,UAAF;AAAcC,gBAAAA,MAAd;AAAsBC,gBAAAA,QAAtB;AAAgCxC,gBAAAA;AAAhC,kBAAyC5B,YAAY,CAACgB,OAAb,EAA/C;AACA,kBAAMqD,MAAM,GAAG,KAAKvC,SAAL,CAAe;AAAA;AAAA,gDAAarC,UAA5B,CAAf;AACA,mBAAKZ,aAAL,CAAmBkD,QAAnB,CAA4BsC,MAA5B;AACA,kBAAIC,IAAI,GAAGJ,UAAX;;AACA,kBAAIA,UAAU,KAAK,SAAf,IAA4B;AAAA;AAAA,sDAAiBK,cAAjB,CAAgC,MAAhC,EAAwCC,OAAxC,IAAmD,CAAnF,EAAsF;AACpFF,gBAAAA,IAAI,GAAG,UAAP;AACD;;AACD;AAAA;AAAA,0DAAkB,GAAlB;AACCD,cAAAA,MAAM,CAAClD,YAAP;AAAA;AAAA,6DAAD,CAAkEsD,UAAlE,CAA6EH,IAA7E,EAAmFH,MAAnF,EAA2FC,QAAQ,IAAI,IAAvG,EAA6G,MAAM;AAAExC,gBAAAA,IAAI;AAAI,eAA7H;AACD;;AAZH,WA7HoE,EA2IpE;AACE/B,YAAAA,IAAI,EAAEnB,eAAe,CAACgG,gBADxB;;AACyC;AACvC3E,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEoE,gBAAAA,QAAF;AAAYxC,gBAAAA;AAAZ,kBAAqB5B,YAAY,CAACgB,OAAb,EAA3B;AACA,kBAAIkD,UAAsB,GAAG,IAA7B;AACA,kBAAMS,GAAG,GAAG;AAAA;AAAA,6CAAZ;AACA,kBAAIR,MAAM,GAAG,CAAb;;AACA,kBAAIQ,GAAG,CAACC,sBAAJ,OAAiC,CAAC,CAAtC,EAAyC;AACvC,oBAAID,GAAG,CAACpD,WAAJ,OAAsB;AAAA;AAAA,gDAAYsD,IAAtC,EAA4C;AAC1CV,kBAAAA,MAAM,GAAG;AAAA;AAAA,0DAAiBL,mBAAjB,GAAuCgB,eAAvC,CAAuD,MAAvD,CAAT;;AACA,sBAAIH,GAAG,CAACrB,WAAJ,OAAsB;AAAA;AAAA,kDAAYyB,SAAtC,EAAiD;AAC/Cb,oBAAAA,UAAU,GAAG;AAAA;AAAA,kDAAWc,MAAxB;AACD;;AACD,sBAAIL,GAAG,CAACrB,WAAJ,OAAsB;AAAA;AAAA,kDAAY2B,SAAtC,EAAiD;AAC/Cf,oBAAAA,UAAU,GAAG;AAAA;AAAA,kDAAWgB,YAAxB;AACD;AACF;;AACD,oBAAIP,GAAG,CAACpD,WAAJ,OAAsB;AAAA;AAAA,gDAAYwD,SAAtC,EAAiD;AAC/CZ,kBAAAA,MAAM,GAAG;AAAA;AAAA,0DAAiBL,mBAAjB,GAAuCqB,cAAvC,EAAT;AACAjB,kBAAAA,UAAU,GAAG;AAAA;AAAA,gDAAWkB,SAAxB;AACD;;AACD,oBAAMf,MAAM,GAAG,KAAKvC,SAAL,CAAe;AAAA;AAAA,kDAAarC,UAA5B,CAAf;AACA,qBAAKZ,aAAL,CAAmBkD,QAAnB,CAA4BsC,MAA5B;;AACA,oBAAIH,UAAJ,EAAgB;AACbG,kBAAAA,MAAM,CAAClD,YAAP;AAAA;AAAA,iEAAD,CAAkEsD,UAAlE,CAA6EP,UAA7E,EAAyFC,MAAzF,EAAiGC,QAAQ,IAAI,IAA7G,EAAmH,MAAM;AAAExC,oBAAAA,IAAI;AAAI,mBAAnI;AACD,iBAFD,MAEO;AACLA,kBAAAA,IAAI;AACL;AACF,eArBD,MAqBO;AACLA,gBAAAA,IAAI;AACL;AACF;;AA/BH,WA3IoE,EA4KpE;AACE/B,YAAAA,IAAI,EAAEnB,eAAe,CAAC2G,eADxB;;AAEEtF,YAAAA,OAAO,CAACC,YAAD,EAA8B;AAClC,mBAAKkB,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEmE,cAArE;AACD;;AAJH,WA5KoE,EAkLpE;AACEzF,YAAAA,IAAI,EAAEnB,eAAe,CAAC6G,eADxB;;AAEExF,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAMwF,SAAS,GAAG,KAAK1D,SAAL,CAAe;AAAA;AAAA,gDAAapC,UAA5B,CAAlB;AACA,mBAAKb,aAAL,CAAmBkD,QAAnB,CAA4ByD,SAA5B;AACD;;AALH,WAlLoE,EAyLpE;AACE3F,YAAAA,IAAI,EAAEnB,eAAe,CAACmC,iBADxB;;AAEEd,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEyF,gBAAAA,aAAF;AAAiBC,gBAAAA;AAAjB,kBAA+B1F,YAAY,CAACgB,OAAb,EAArC;AACC,mBAAKE,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEwE,eAArE,CAAqFF,aAArF,EAAoGC,SAApG;AACAzD,cAAAA,MAAM,CAACC,UAAP,CAAkB,MAAI;AACpB,qBAAKxB,gBAAL,CAAsB;AAAA;AAAA,gEAAoBsC,cAA1C,EAA0DhD,YAAY,CAACgB,OAAb,EAA1D;AACD,eAFD,EAEE,IAFF;AAGD;;AARH,WAzLoE,EAmMpE;AACEnB,YAAAA,IAAI,EAAEnB,eAAe,CAACkH,0BADxB;;AAEE7F,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAE6F,gBAAAA;AAAF,kBAAS7F,YAAY,CAACgB,OAAb,EAAf;AACC,mBAAKE,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqE2E,YAArE,CAAkFD,EAAlF;AACD;;AALH,WAnMoE,EA0MpE;AACEhG,YAAAA,IAAI,EAAEnB,eAAe,CAACqH,oBADxB;;AAEEhG,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEY,gBAAAA;AAAF,kBAAYZ,YAAY,CAACgB,OAAb,MAA0B,EAA5C;AACA,kBAAMhC,YAAY,GAAG;AAAA;AAAA,sDAAiB8E,mBAAjB,GAAuCgB,eAAvC,CAAuDlE,KAAK,IAAI,MAAhE,CAArB;;AACA,kBAAI5B,YAAY,GAAG,CAAf,IAAoBA,YAAY,IAAI,KAAKA,YAA7C,EAA2D;AAC3D,qBAAKA,YAAL,GAAkBA,YAAlB;AACE;AAAA;AAAA,kDAAagH,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,4CAAUC,cAA/C;AACD;;AACA,mBAAKhF,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEG,WAArE,CAAiFtC,YAAjF;AACD;;AAVH,WA1MoE,EAsNpE;AACEa,YAAAA,IAAI,EAAEnB,eAAe,CAACyH,UADxB;;AAEEpG,YAAAA,OAAO,CAACC,YAAD,EAA8B;AACnC,kBAAM;AAAEoG,gBAAAA;AAAF,kBAAcpG,YAAY,CAACgB,OAAb,MAA0B,EAA9C;AACA;AAAA;AAAA,oCAAOqF,YAAP,CAAoB;AAAA;AAAA,oDAAe;AAAED,gBAAAA,OAAO,EAAEE,MAAM,CAACF,OAAD;AAAjB,eAAf,CAApB,EAFmC,CAGnC;AACA;AACA;AACD;;AARH,WAtNoE,CA/JK;AAE1E;;AAwCSG,QAAAA,aAAa,GAAG;AACxB,cAAMtF,IAAI,GAAsB,KAAKC,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAhC;AACA,cAAMqF,cAAc,GAAsB,KAAKtF,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmEsF,UAA1F;AACA,cAAMC,iBAAiB,GAAsB,KAAKxF,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmEwF,eAA7F;AACAD,UAAAA,iBAAiB,CAACvF,YAAlB,CAA+B5D,MAA/B,EAAuCqJ,SAAvC,GAAmD,KAAnD;AAEA,cAAIC,SAAS,GAAG,CAAhB;AACA,cAAMC,SAAS,GAAG,GAAlB,CAPwB,CAOF;;AACtB,cAAIC,KAAK,GAAG,CAAZ;AACA,cAAIC,WAAW,GAAG,KAAlB;AAEA/F,UAAAA,IAAI,CAACgG,UAAL,CAAgBC,EAAhB,CAAmB9J,IAAI,CAAC+J,SAAL,CAAeC,SAAlC,EAA6C,MAAM;AACjD;AAAA;AAAA,8CAAapB,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUoB,WAA/C;AACA,iBAAK3G,gBAAL,CAAsBhC,eAAe,CAAC6G,eAAtC;AACD,WAHD;AAIAtE,UAAAA,IAAI,CAACqG,WAAL,CAAiBJ,EAAjB,CAAoB9J,IAAI,CAAC+J,SAAL,CAAeI,WAAnC,EAAgD,MAAM;AACpDR,YAAAA,KAAK,GAAG9E,MAAM,CAACuF,WAAP,CAAmB,MAAM;AAC/BX,cAAAA,SAAS,IAAI,EAAb;;AACA,kBAAIA,SAAS,GAAGC,SAAhB,EAA2B;AACzB7E,gBAAAA,MAAM,CAACwF,aAAP,CAAqBV,KAArB;AACA,oBAAMW,WAAW,GAAG;AAAA;AAAA,gDAAanG,WAAb,EAApB;;AACA,oBAAImG,WAAW,KAAK;AAAA;AAAA,gDAAY7C,IAAhC,EAAsC;AACjB,uBAAK3D,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmEwG,gBAAnE;AACAX,kBAAAA,WAAW,GAAG,IAAd;AACD,iBAHD,MAGO;AACLA,kBAAAA,WAAW,GAAG,KAAd;AACD;AACF;AACF,aAZO,EAYL,EAZK,CAAR;AAaA;AAAA;AAAA,8CAAahB,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUoB,WAA/C;AACA,iBAAK3G,gBAAL,CAAsBhC,eAAe,CAAC2C,SAAtC;AACD,WAhBD;AAiBAJ,UAAAA,IAAI,CAACqG,WAAL,CAAiBJ,EAAjB,CAAoB9J,IAAI,CAAC+J,SAAL,CAAeC,SAAnC,EAA8C,MAAM;AAClDnF,YAAAA,MAAM,CAACwF,aAAP,CAAqBV,KAArB;;AACA,gBAAIC,WAAJ,EAAiB;AACfH,cAAAA,SAAS,GAAG,CAAZ;AACAG,cAAAA,WAAW,GAAG,KAAd;AACA;AACD;;AACkB,iBAAK9F,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAnB,CAAmEwG,gBAAnE,CAAoF,KAApF;AACA,gBAAMC,GAAG,GAAG;AAAA;AAAA,2CAAZ;;AACA,gBAAIA,GAAG,CAAC7E,iBAAJ,OAA4B;AAAA;AAAA,kDAAe8E,OAA/C,EAAwD;AACtDD,cAAAA,GAAG,CAACE,iBAAJ,CAAsB;AAAA;AAAA,oDAAeD,OAArC;AACD,aAXiD,CAYlD;;;AACA,gBAAI,CAACD,GAAG,CAACvE,UAAJ,EAAL,EAAuB;AACrB,kBAAI,KAAKvE,gBAAT,EAA2B;AAAE;AAC3B,qBAAKA,gBAAL,GAAwB,KAAxB;AACAoD,gBAAAA,UAAU,CAAC,MAAM;AACf,uBAAKpD,gBAAL,GAAwB,IAAxB;AACD,iBAFS,EAEP,IAFO,CAAV;AAGA;AAAA;AAAA,wDAAiBiJ,UAAjB;AACD;AACF,aARD,MAQO,IAAI,CAACH,GAAG,CAACtF,eAAJ,EAAL,EAA4B;AACjC,mBAAK5B,gBAAL,CAAsB;AAAA;AAAA,8DAAoBsH,QAA1C;AACD;;AACDnB,YAAAA,SAAS,GAAG,CAAZ;AACD,WAzBD,EAhCwB,CA0DxB;;AACA5F,UAAAA,IAAI,CAACuC,UAAL,CAAgB0D,EAAhB,CAAmB9J,IAAI,CAAC+J,SAAL,CAAeC,SAAlC,EAA6C,MAAM;AACjD;AAAA;AAAA,8CAAapB,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUoB,WAA/C;AACA,gBAAMO,GAAG,GAAG;AAAA;AAAA,2CAAZ;;AACA,gBAAIA,GAAG,CAACvE,UAAJ,EAAJ,EAAsB;AACpB;AACD;;AACDpC,YAAAA,IAAI,CAACgH,YAAL,CAAkB,MAAI;AACpB;AAAA;AAAA,gDAAajC,WAAb,GAA2BkC,UAA3B,CAAsC,MAAM;AAC1C;AAAA;AAAA,sCAAOC,YAAP;AACD,eAFD;AAGD,aAJD,EAIE,CAJF;AAKD,WAXD;AAYAlH,UAAAA,IAAI,CAACmH,MAAL,CAAYlB,EAAZ,CAAe9J,IAAI,CAAC+J,SAAL,CAAeC,SAA9B,EAAyC,MAAM;AAC7C,gBAAMQ,GAAG,GAAG;AAAA;AAAA,2CAAZ;;AACA,gBAAIA,GAAG,CAACvE,UAAJ,MAAoBuE,GAAG,CAACtE,WAAJ,MAAqB,CAA7C,EAAgD;AAC9C;AACD;;AACD;AAAA;AAAA,8CAAa0C,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUoC,QAA/C;AACA,iBAAK3H,gBAAL,CAAsB;AAAA;AAAA,gDAAcC,EAApC,EAAwC;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAAxC,EAA0DlC,eAAe,CAACmC,iBAA1E;AACA;AAAA;AAAA,oDAAiByH,yBAAjB;AACD,WARD;AASArH,UAAAA,IAAI,CAACsH,WAAL,CAAiBrB,EAAjB,CAAoB9J,IAAI,CAAC+J,SAAL,CAAeC,SAAnC,EAA8C,MAAM;AAClD,gBAAMQ,GAAG,GAAG;AAAA;AAAA,2CAAZ;;AACA,gBAAIA,GAAG,CAACvE,UAAJ,MAAoBuE,GAAG,CAACtE,WAAJ,MAAqB,CAA7C,EAAgD;AAC9C;AACD;;AACD;AAAA;AAAA,8CAAa0C,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUuC,WAA/C;AACA,iBAAK9H,gBAAL,CAAsB;AAAA;AAAA,gDAAcC,EAApC,EAAwC;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAAxC,EAA+DlC,eAAe,CAACmC,iBAA/E;AACA;AAAA;AAAA,oDAAiByH,yBAAjB;AACD,WARD;AASArH,UAAAA,IAAI,CAACwH,MAAL,CAAYvB,EAAZ,CAAe9J,IAAI,CAAC+J,SAAL,CAAeC,SAA9B,EAAyC,MAAM;AAC7C,gBAAMQ,GAAG,GAAG;AAAA;AAAA,2CAAZ;;AACA,gBAAIA,GAAG,CAACvE,UAAJ,MAAoBuE,GAAG,CAACtE,WAAJ,MAAqB,CAA7C,EAAgD;AAC9C;AACD;;AACD;AAAA;AAAA,8CAAa0C,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,wCAAUoC,QAA/C;AACA,iBAAK3H,gBAAL,CAAsB;AAAA;AAAA,gDAAcC,EAApC,EAAwC;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAAxC,EAA0DlC,eAAe,CAACmC,iBAA1E;AACA;AAAA;AAAA,oDAAiByH,yBAAjB;AACD,WARD;AASA9B,UAAAA,cAAc,CAACkC,QAAf,CAAwBC,OAAxB,CAAgC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAChDD,YAAAA,KAAK,CAAC1B,EAAN,CAAS9J,IAAI,CAAC+J,SAAL,CAAeC,SAAxB,EAAmC,MAAM;AACvC,kBAAMQ,GAAG,GAAG;AAAA;AAAA,6CAAZ,CADuC,CAEvC;;AACA,kBAAIA,GAAG,CAAC7E,iBAAJ,OAA4B;AAAA;AAAA,oDAAe8E,OAA/C,EAAwD;AACtDD,gBAAAA,GAAG,CAACE,iBAAJ,CAAsBe,KAAtB;AACA,qBAAKnI,gBAAL,CAAsB;AAAA;AAAA,oDAAcC,EAApC,EAAwC,EAAxC,EAA4C;AAAA;AAAA,sDAAeyB,WAA3D;AACD;AACF,aAPD;AAQD,WATD;AAUA,eAAK0G,WAAL,CAAiBpC,iBAAiB,CAACvF,YAAlB,CAA+B5D,MAA/B,CAAjB;AACAmJ,UAAAA,iBAAiB,CAACQ,EAAlB,CAAqB3J,MAAM,CAAC4J,SAAP,CAAiB4B,MAAtC,EAA+CC,MAAD,IAAoB;AAChE;AAAA;AAAA,4CAAaF,WAAb,CAAyBE,MAAM,CAACpC,SAAP,GAAmB;AAAA;AAAA,sCAASqC,UAA5B,GAAyC;AAAA;AAAA,sCAASC,MAA3E;AACD,WAFD;AAGD;;AACOJ,QAAAA,WAAW,CAACE,MAAD,EAAiB;AAClC;AAAA;AAAA,0CAAaF,WAAb,CAAyBE,MAAM,CAACpC,SAAP,GAAmB;AAAA;AAAA,oCAASqC,UAA5B,GAAyC;AAAA;AAAA,oCAASC,MAA3E;AACD;;AAmOOxH,QAAAA,QAAQ,CAACyH,UAAD,EAA2B;AACzC,cAAMC,WAAwB,GAAGD,UAAU,IAAI;AAAA;AAAA,kDAAiBrF,mBAAjB,GAAuCrC,QAAvC,EAA/C,CADyC,CAEzC;;;AACC,eAAKP,QAAL,CAAcC,YAAd,CAA2B,kBAA3B,CAAD,CAAqEkI,KAArE,CAA2E,MAA3E;AACD;;AAxYkD,O","sourcesContent":["import { Node, Prefab, Sprite, Toggle, log } from \"cc\";\r\nimport { INotification } from \"../../Framework/interfaces/INotification\";\r\nimport { CommandDefine } from \"../Const/CommandDefine\";\r\nimport { PrefabDefine } from \"../Const/PrefabDefine\";\r\nimport BaseMediator from \"./BaseMediator\"\r\nimport { IlistTypeHander } from \"../types/IlistTypeHander\";\r\nimport { ISourceFile } from \"../types/ISourceFile\";\r\nimport { GodWealth_SlotBg } from \"../Component/GodWealth_SlotBg\";\r\nimport { goldState, SubGameType } from \"../Proxy/SocketProxy\";\r\nimport { AutoLaunchType, StopMode } from \"../Repositories/BgRepository\";\r\nimport { DialogType, GodWealth_DialogWin } from \"../Component/GodWealth_DialogWin\";\r\nimport { BgCommandConst } from \"../Command/BgCommand\";\r\nimport { getBgProxy, getSocketProxy } from \"../GodWealth_utils\";\r\nimport { GodWealth_Toast } from \"../Component/GodWealth_Toast\";\r\nimport { RollerMediatorConst } from \"./RollerMediator\";\r\nimport { AudioManager, SoundList } from \"../Managr/AudioManager\";\r\nimport { global } from \"db://assets/script/hall\";\r\nimport UseSetOption from \"db://assets/script/utils/UseSetOption\";\r\nimport { addToastAction } from \"../../../../hall/store/actions/baseBoard\";\r\nimport { sendNativeVibrate } from \"../../../../common/bridge\";\r\n\r\n// export interface IlistNotificationer {\r\n//  name: string\r\n//  isListen?: boolean\r\n//  handler(notification: INotification): void\r\n// }\r\nexport enum BgMediatorConst {\r\n  INIT_MAIN_PANEL = \"initMainPanel\",\r\n  /**开始飞水果 */\r\n  START_FLY_BG = \"startFlyBg\",\r\n  /**更新一些关于数字的界面（弃用） */\r\n  UPDATE_NUMBER = \"updateNumber\",\r\n  /**修改背景图片 */\r\n  CHANGE_BG = \"changeBG\",\r\n  /**更新自动启动按钮面板 */\r\n  UPDATE_AUTO_LAUNCH = \"updateAutoLaunch\",\r\n  /**更新游戏进行状态 */\r\n  UPDATE_GAME_STATUS = \"updateGameStatus\",\r\n  /**展示大奖弹窗 */\r\n  SHOW_DIALOG_WIN = \"showDialogWin\",\r\n  /**展示规则弹窗 */\r\n  OPEN_RULE_PANEL = \"openRulePanel\",\r\n  /**刷新下注信息 */\r\n  UPDATE_BET_AMOUNT = \"updateBetAmount\",\r\n  /**更新当前的奖励 */\r\n  UPDATE_CURRENT_SCORE = \"updateCurrentScore\",\r\n  /**展示toast */\r\n  SHOW_TOAST = \"showToast\",\r\n  /*更换按钮文字*/\r\n  UPDATE_BTN_LABEL = \"updateBtnLabel\",\r\n  /*更新玩家金币*/\r\n  UPDATE_USER_GOLD = \"updateUserGold\",\r\n  UPDATE_JACKPOT = \"UPDATE_JACKPOT\",\r\n  HANDOFF_JACKPOT = 'handoff_jackpot',\r\n  /*切换启动按钮状态*/\r\n  TOGGLETHESTARTBUTTON = 'togglethestartbutton',\r\n  /*初始化积分*/\r\n  INITSCORE = 'initScore',\r\n  /*其他动画*/\r\n  NUMBEROFDISPLAYS = 'numberOfDisplays',\r\n  /*余额不足*/\r\n  InsufficientBalanceDisplay = \"InsufficientBalanceDisplay\",\r\n  /*设置+-按钮置灰*/\r\n  SETGREYOUT = 'SETGREYOUT'\r\n}\r\n\r\nexport default class BgMediator extends BaseMediator {\r\n  buttonThrottling = true\r\n  frequency = null\r\n  currentScore=0\r\n  public constructor(mediatorName: string = null, viewComponent: any = null) {\r\n    super(mediatorName, viewComponent)\r\n  }\r\n  public sourceMap: Array<ISourceFile> = [\r\n    {\r\n      key: 'fruitsSlot',\r\n      path: PrefabDefine.SLOT_BG,\r\n      sourceType: Prefab,\r\n      source: null\r\n    },\r\n    {\r\n      key: 'flyBg',\r\n      path: PrefabDefine.FLY_BG,\r\n      sourceType: Prefab,\r\n      source: null\r\n    },\r\n    {\r\n      key: 'dynamicNumber',\r\n      path: PrefabDefine.DYNAMIC_NUMBER,\r\n      sourceType: Prefab,\r\n      source: null\r\n    },\r\n    {\r\n      key: 'dialogWin',\r\n      path: PrefabDefine.DIALOG_WIN,\r\n      sourceType: Prefab,\r\n      source: null\r\n    },\r\n    {\r\n      key: 'rulePanel',\r\n      path: PrefabDefine.RULE_PANEL,\r\n      sourceType: Prefab,\r\n      source: null\r\n    },\r\n    {\r\n      key: 'toast',\r\n      path: PrefabDefine.TOAST,\r\n      sourceType: Prefab,\r\n      source: null\r\n    }\r\n  ]\r\n\r\n  protected listenerEvent() {\r\n    const comp = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\"))\r\n    const autoButtonWrap = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).autoLaunch\r\n    const props_toggle_fast = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).propsToggleFast\r\n    props_toggle_fast.getComponent(Toggle).isChecked = false;\r\n\r\n    let pressTime = 0\r\n    const timeLimit = 500 //按压触发自动面板时间\r\n    let timer = 0\r\n    let isLongPress = false\r\n    \r\n    comp.ruleButton.on(Node.EventType.TOUCH_END, () => {\r\n      AudioManager.getInstance().playSound(SoundList.buttonClick)\r\n      this.sendNotification(BgMediatorConst.OPEN_RULE_PANEL)\r\n    })\r\n    comp.startButton.on(Node.EventType.TOUCH_START, () => {\r\n      timer = window.setInterval(() => {\r\n        pressTime += 10\r\n        if (pressTime > timeLimit) {\r\n          window.clearInterval(timer)\r\n          const presentGame = getBgProxy().getNextGame()\r\n          if (presentGame === SubGameType.MAIN) {\r\n            (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).triggeAutoLaunch();\r\n            isLongPress = true\r\n          } else {\r\n            isLongPress = false\r\n          }\r\n        }\r\n      }, 10);\r\n      AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n      this.sendNotification(BgMediatorConst.INITSCORE)\r\n    })\r\n    comp.startButton.on(Node.EventType.TOUCH_END, () => {\r\n      window.clearInterval(timer);\r\n      if (isLongPress) {\r\n        pressTime = 0\r\n        isLongPress = false\r\n        return\r\n      }\r\n      (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).triggeAutoLaunch(false);\r\n      const fbp = getBgProxy()\r\n      if (fbp.getAutoLaunchType() !== AutoLaunchType.DISABLE) {\r\n        fbp.setAutoLaunchType(AutoLaunchType.DISABLE)\r\n      }\r\n      // 禁用状态不能点击发送下注\r\n      if (!fbp.getDisable()) {\r\n        if (this.buttonThrottling) { // 按钮防抖节流\r\n          this.buttonThrottling = false\r\n          setTimeout(() => {\r\n            this.buttonThrottling = true\r\n          }, 1000)\r\n          getSocketProxy().sendLaunch();\r\n        }\r\n      } else if (!fbp.checkAutoLaunch()) {\r\n        this.sendNotification(RollerMediatorConst.END_ROLL)\r\n      }\r\n      pressTime = 0\r\n    })\r\n    // 点击首页按钮\r\n    comp.homeButton.on(Node.EventType.TOUCH_END, () => {\r\n      AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n      const fbp = getBgProxy()\r\n      if (fbp.getDisable()) {\r\n        return\r\n      }\r\n      comp.scheduleOnce(()=>{\r\n        AudioManager.getInstance().closeMusic(() => {\r\n          global.closeSubGame()\r\n        });\r\n      },1)\r\n    })\r\n    comp.addBet.on(Node.EventType.TOUCH_END, () => {\r\n      const fbp = getBgProxy()\r\n      if (fbp.getDisable() || fbp.getLastGame() != 0) {\r\n        return\r\n      }\r\n      AudioManager.getInstance().playSound(SoundList.add_coin)\r\n      this.sendNotification(CommandDefine.BG, { order: \"add\" }, BgMediatorConst.UPDATE_BET_AMOUNT)\r\n      getSocketProxy().calculateTheBalanceStatus()\r\n    })\r\n    comp.subtractBet.on(Node.EventType.TOUCH_END, () => {\r\n      const fbp = getBgProxy()\r\n      if (fbp.getDisable() || fbp.getLastGame() != 0) {\r\n        return\r\n      }\r\n      AudioManager.getInstance().playSound(SoundList.reduce_coin)\r\n      this.sendNotification(CommandDefine.BG, { order: \"subtract\" }, BgMediatorConst.UPDATE_BET_AMOUNT)\r\n      getSocketProxy().calculateTheBalanceStatus()\r\n    })\r\n    comp.maxBet.on(Node.EventType.TOUCH_END, () => {\r\n      const fbp = getBgProxy()\r\n      if (fbp.getDisable() || fbp.getLastGame() != 0) {\r\n        return\r\n      }\r\n      AudioManager.getInstance().playSound(SoundList.add_coin)\r\n      this.sendNotification(CommandDefine.BG, { order: \"max\" }, BgMediatorConst.UPDATE_BET_AMOUNT)\r\n      getSocketProxy().calculateTheBalanceStatus()\r\n    })\r\n    autoButtonWrap.children.forEach((child, index) => {\r\n      child.on(Node.EventType.TOUCH_END, () => {\r\n        const fbp = getBgProxy()\r\n        // 必须处于未开启状态才能修改自动执行\r\n        if (fbp.getAutoLaunchType() === AutoLaunchType.DISABLE) {\r\n          fbp.setAutoLaunchType(index);\r\n          this.sendNotification(CommandDefine.BG, {}, BgCommandConst.AUTO_LAUNCH)\r\n        }\r\n      })\r\n    })\r\n    this.setStopMode(props_toggle_fast.getComponent(Toggle));\r\n    props_toggle_fast.on(Toggle.EventType.TOGGLE, (toggle: Toggle) => {\r\n      getBgProxy().setStopMode(toggle.isChecked ? StopMode.QUEUE_STOP : StopMode.NORMAL);\r\n    })\r\n  }\r\n  private setStopMode(toggle: Toggle) {\r\n    getBgProxy().setStopMode(toggle.isChecked ? StopMode.QUEUE_STOP : StopMode.NORMAL);\r\n  }\r\n\r\n  protected listNotificationConst: Array<IlistTypeHander<BgMediator>> = [\r\n    {\r\n      name: BgMediatorConst.INIT_MAIN_PANEL,\r\n      handler(notification: INotification) {\r\n        this.init()\r\n        let pdd = UseSetOption.Instance().option.gameSet.godWealth ? UseSetOption.Instance().option.gameSet.godWealth.betTarget.positionId : 1\r\n        getSocketProxy().initUserSwitch(pdd)\r\n        this.sendNotification(CommandDefine.BG, { order: \"curr\" }, BgMediatorConst.UPDATE_BET_AMOUNT)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.SETGREYOUT,\r\n      handler(notification: INotification) {\r\n        const { state } = notification.getBody(),\r\n          comp = (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg)\r\n        if (state !== 0) {\r\n          comp.setGreyOut('SZX_-', state == 1)\r\n          comp.setGreyOut('SZX_+', state == 2)\r\n        } else {\r\n          comp.setGreyOut('SZX_-', false)\r\n          comp.setGreyOut('SZX_+', false)\r\n        }\r\n\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.INITSCORE,\r\n      handler(notification: INotification) {\r\n        const { state } = notification.getBody() || {}\r\n        if (state) {\r\n          (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).updateScore(0);\r\n        }\r\n        if (getBgProxy().getNextGame() == 0) {\r\n          (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).updateScore(0);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.CHANGE_BG,\r\n      handler(notification: INotification) {\r\n        const { gameType } = notification.getBody() || {}\r\n        this.changeBg(gameType)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.START_FLY_BG,\r\n      handler(notification: INotification) {\r\n        const { done } = notification.getBody() || {};\r\n        const flyBgNode = this.getSource(PrefabDefine.FLY_BG)\r\n        this.viewComponent.addChild(flyBgNode)\r\n        flyBgNode.setSiblingIndex(1000)\r\n        window.setTimeout(() => {\r\n          done && done();\r\n          this.sendNotification(BgMediatorConst.TOGGLETHESTARTBUTTON, { state: true })\r\n          this.sendNotification(CommandDefine.BG, {}, BgCommandConst.AUTO_LAUNCH)\r\n          this.viewComponent.removeChild(flyBgNode)\r\n        }, 3000)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.TOGGLETHESTARTBUTTON,\r\n      handler(notification: INotification) {\r\n        const { state } = notification.getBody();\r\n        if (getBgProxy().getNextGame() == 0) {\r\n          if (getBgProxy().checkAutoLaunch()) { // 是自动\r\n            let str = (getBgProxy().isUNLIMT()) ? \"∞\" : getBgProxy().getAutoLaunchNum() + \"/\" + getBgProxy().getTotal();\r\n            (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).setBtnState(state, 3, str);\r\n          } else {\r\n            (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).setBtnState(state);\r\n          }\r\n        } else { // 小游戏\r\n          (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).setBtnState(state, 1);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_NUMBER,\r\n      handler(notification: INotification) {\r\n        // const { betAmount, score } = notification.getBody();\r\n        // (this.wrapView.getComponent(\"SlotBg\") as SlotBg).updateBetAmount(betAmount);\r\n        // (this.wrapView.getComponent(\"SlotBg\") as SlotBg).updateScore(score);\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_AUTO_LAUNCH,\r\n      handler(notification: INotification) {\r\n        (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).setActiveButton(getBgProxy().getAutoLaunchType())\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_JACKPOT,\r\n      handler(notification: INotification) {\r\n        let { jackPotData } = notification.getBody();\r\n        (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\")).setJACKPOT(jackPotData)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_GAME_STATUS,\r\n      handler(notification: INotification) {\r\n        const comp = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\"))\r\n        comp.setDisable(getBgProxy().getDisable())\r\n        if (getBgProxy().getLastGame() != 0) {\r\n          comp.setDis_btn(true)\r\n        } else {\r\n          comp.setDis_btn(getBgProxy().getDisable())\r\n        }\r\n        comp.homeButton.getComponent(Sprite).grayscale = getBgProxy().getDisable()\r\n      }\r\n    }, {\r\n      name: BgMediatorConst.UPDATE_BTN_LABEL,\r\n      handler(notification: INotification) {\r\n        let { frequency } = notification.getBody()\r\n        this.frequency = frequency || this.frequency - 1\r\n        const comp = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\"))\r\n        comp.setBtnLabel(this.frequency)\r\n      }\r\n    }, {\r\n      name: BgMediatorConst.UPDATE_USER_GOLD,\r\n      handler(notification: INotification) {\r\n        let { state } = notification.getBody()\r\n        let gold = getSocketProxy().getTransferGameInfo().getUserGold(state)\r\n        const comp = (<GodWealth_SlotBg>this.wrapView.getComponent(\"GodWealth_SlotBg\"))\r\n        comp.setGold(gold)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.SHOW_DIALOG_WIN,\r\n      handler(notification: INotification) {\r\n        const { dialogType, amount, keepTime, done } = notification.getBody()\r\n        const dialog = this.getSource(PrefabDefine.DIALOG_WIN) as Node;\r\n        this.viewComponent.addChild(dialog);\r\n        let type = dialogType\r\n        if (dialogType === 'jackpot' && getSocketProxy().getShiftAmount(\"curr\").jackpot == 0) {\r\n          type = 'superWin'\r\n        }\r\n        sendNativeVibrate(200);\r\n        (dialog.getComponent(GodWealth_DialogWin) as GodWealth_DialogWin).showDialog(type, amount, keepTime || 2000, () => { done() })\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.NUMBEROFDISPLAYS,// 其他的动画\r\n      handler(notification: INotification) {\r\n        const { keepTime, done } = notification.getBody();\r\n        let dialogType: DialogType = null;\r\n        const fab = getBgProxy()\r\n        let amount = 0\r\n        if (fab.getIsChangeGameRunning() !== -1) {\r\n          if (fab.getNextGame() === SubGameType.MAIN) {\r\n            amount = getSocketProxy().getTransferGameInfo().getCurrentScore(\"auto\")\r\n            if (fab.getLastGame() === SubGameType.SUB_GAME1) {\r\n              dialogType = DialogType.YOUWON\r\n            }\r\n            if (fab.getLastGame() === SubGameType.SUB_GAME2) {\r\n              dialogType = DialogType.TREASUREBOWL\r\n            }\r\n          }\r\n          if (fab.getNextGame() === SubGameType.SUB_GAME1) {\r\n            amount = getSocketProxy().getTransferGameInfo().getRemainTimes()\r\n            dialogType = DialogType.FREQUENCY\r\n          }\r\n          const dialog = this.getSource(PrefabDefine.DIALOG_WIN);\r\n          this.viewComponent.addChild(dialog);\r\n          if (dialogType) {\r\n            (dialog.getComponent(GodWealth_DialogWin) as GodWealth_DialogWin).showDialog(dialogType, amount, keepTime || 2000, () => { done() });\r\n          } else {\r\n            done()\r\n          }\r\n        } else {\r\n          done()\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.HANDOFF_JACKPOT,\r\n      handler(notification: INotification) {\r\n        (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).handoffJACKPOT();\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.OPEN_RULE_PANEL,\r\n      handler(notification: INotification) {\r\n        const rulePanel = this.getSource(PrefabDefine.RULE_PANEL);\r\n        this.viewComponent.addChild(rulePanel)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_BET_AMOUNT,\r\n      handler(notification: INotification) {\r\n        const { baseBetAmount, lineCount } = notification.getBody();\r\n        (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).updateBetAmount(baseBetAmount, lineCount);\r\n        window.setTimeout(()=>{\r\n          this.sendNotification(RollerMediatorConst.UPDATE_JACKPOT, notification.getBody());\r\n        },1000)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.InsufficientBalanceDisplay,\r\n      handler(notification: INotification) {\r\n        const { bl } = notification.getBody();\r\n        (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).Balance_tips(bl)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.UPDATE_CURRENT_SCORE,\r\n      handler(notification: INotification) {\r\n        const { order } = notification.getBody() || {}\r\n        const currentScore = getSocketProxy().getTransferGameInfo().getCurrentScore(order || \"auto\");\r\n        if (currentScore > 0 && currentScore != this.currentScore) {\r\n        this.currentScore=currentScore\r\n          AudioManager.getInstance().playSound(SoundList.coinCollection);\r\n        }\r\n        (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).updateScore(currentScore)\r\n      }\r\n    },\r\n    {\r\n      name: BgMediatorConst.SHOW_TOAST,\r\n      handler(notification: INotification) {\r\n        const { content } = notification.getBody() || {};\r\n        global.hallDispatch(addToastAction({ content: String(content) }))\r\n        // const toastPanel = this.getSource(PrefabDefine.TOAST)\r\n        // this.viewComponent.addChild(toastPanel);\r\n        // (toastPanel.getComponent(\"GodWealth_Toast\") as GodWealth_Toast).showContent(content)\r\n      }\r\n    }\r\n  ]\r\n  private changeBg(gameRunner?: SubGameType) {\r\n    const _gameRunner: SubGameType = gameRunner || getSocketProxy().getTransferGameInfo().gameType();\r\n    // (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).setBg(_gameRunner === SubGameType.MAIN ? \"bg_1\" : \"bg_2\")\r\n    (this.wrapView.getComponent(\"GodWealth_SlotBg\") as GodWealth_SlotBg).setBg(\"bg_1\")\r\n  }\r\n}\r\n"]}