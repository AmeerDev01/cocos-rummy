{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Component/phoenix_DialogWin.ts"],"names":["_decorator","Label","Node","tween","UIOpacity","Vec3","phoenix_BaseComponent","ccclass","property","DialogType","phoenix_DialogWin","timer","showNode","start","bindEvent","bindUI","showDialog","dialogType","amount","keepTime","cb","insider","setScale","uiOpacity","getComponent","opacity","active","SpriteSplash","getChildByName","string","to","scale","easing","call","window","setTimeout","hideDialog","node","destroy","clearTimeout","update","deltaTime"],"mappings":"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","sourcesContent":["import {_decorator, Label, Node, tween, UIOpacity, Vec3} from 'cc';\r\nimport phoenix_BaseComponent from './phoenix_BaseComponent';\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n\r\nexport enum DialogType {\r\n    BIG_WIN = \"bigWin\",\r\n    JACKPOT = \"jackpot\",\r\n    MEGA_WIN = \"megaWin\",\r\n    SUPER_WIN = \"superWin\",\r\n    SETTLE = \"settle\"\r\n}\r\n\r\n@ccclass('phoenix_DialogWin')\r\nexport class phoenix_DialogWin extends phoenix_BaseComponent {\r\n\r\n    @property(Node)\r\n    insider: Node = null\r\n\r\n    @property(Node)\r\n    bigWin: Node = null\r\n\r\n    @property(Node)\r\n    jackpot: Node = null\r\n\r\n    @property(Node)\r\n    megaWin: Node = null\r\n\r\n    @property(Node)\r\n    superWin: Node = null\r\n\r\n    @property(Node)\r\n    settle: Node = null\r\n\r\n    @property(Node)\r\n    SpriteSplash: Node = null\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n    }\r\n\r\n    protected bindUI(): void {\r\n    }\r\n\r\n    private timer: number\r\n    private showNode: Node\r\n\r\n    /**\r\n     * 大奖弹窗\r\n     * @param dialogType 展示类型\r\n     * @param amount 展示金额\r\n     * @param keepTime 持续时间（若传0，则不自动关闭）\r\n     * @param cb 回调函数\r\n     */\r\n    public showDialog(dialogType: DialogType, amount: number, keepTime: number, cb?: () => void) {\r\n        this.insider.setScale(new Vec3(0, 0, 0))\r\n        const uiOpacity = this.insider.getComponent(UIOpacity)\r\n        uiOpacity.opacity = 0;\r\n        this.showNode = this[dialogType] as Node\r\n        this.showNode.active = true;\r\n        this.SpriteSplash.active = false;\r\n        this.showNode.getChildByName(\"score\").getComponent(Label).string = amount + ''//.formatAmountWithCommas()\r\n        tween(this.insider).to(0.5, { scale: new Vec3(1, 1, 0) }, { easing: \"backOut\" }).start()\r\n        tween(uiOpacity).to(0.2, { opacity: 255 }).call(() => {\r\n            this.SpriteSplash.active = true;\r\n        }).start()\r\n        keepTime && (this.timer = window.setTimeout(() => {\r\n            this.hideDialog()\r\n            this.node.destroy()\r\n            cb && cb()\r\n        }, keepTime))\r\n    }\r\n\r\n    public hideDialog() {\r\n        const uiOpacity = this.insider.getComponent(UIOpacity)\r\n        this.SpriteSplash.active = false;\r\n        tween(this.insider).to(0.3, {scale: new Vec3(0, 0, 0)}).start()\r\n        tween(uiOpacity).to(0.3, {opacity: 0}).call(() => {\r\n            this.showNode.active = false\r\n        }).start()\r\n        this.timer && window.clearTimeout(this.timer)\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n\r\n}\r\n\r\n"]}