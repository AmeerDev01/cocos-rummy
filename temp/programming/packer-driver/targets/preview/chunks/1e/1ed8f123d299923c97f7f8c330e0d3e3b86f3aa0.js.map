{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth/Slot/Component/GodWealth_Icon.ts"],"names":["_decorator","Node","Label","sp","Sprite","SpriteFrame","UITransform","Widget","GodWealth_BaseComponent","iconConfig","getBgProxy","ccclass","property","GodWealth_Icon","SkeletonData","type","displayName","iconId","iconDir","iconSize","bindUI","rootUi","root","getComponent","anchorY","setFace","icon","find","item","id","node","getChildByName","active","face","Skeleton","skeletonData","name","premultipliedAlpha","animation","animationArr","left","distance","top","destroy","setScale","setEffect","animationIndex","length","iseff","effectBorder","hiddenAmounts","amountNum","setNumBG","mini","major","getWinningMultiplier","amountBg","str","spriteFrame","amount_BG","string","bindEvent","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, Label, Skeleton, sp, Sprite, SpriteAtlas, SpriteFrame, UITransform, Vec3, Widget } from 'cc';\r\nimport GodWealth_BaseComponent from './GodWealth_BaseComponent';\r\nimport iconConfig from '../GodWealth_config'\r\nimport {getBgProxy} from \"../GodWealth_utils\";\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype ConfigType = {\r\n\tid: number\r\n\tname: string\r\n\tfileName: string\r\n\tanimationArr?: string[]\r\n\tdistance: number[]\r\n}\r\n\r\n@ccclass('GodWealth_Icon')\r\nexport class GodWealth_Icon extends GodWealth_BaseComponent {\r\n\t@property(Node)\r\n\tface: Node = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticon10: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonJ: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonQ: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonK: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonA: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ttongqian: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tyuanbao: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tyaoqianshu: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tbaicai: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\twild: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tscatter: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tbaohe: sp.SkeletonData = null\r\n\r\n\t@property(Node)\r\n\teffectBorder: Node = null\r\n    @property({ type: [SpriteFrame], displayName: 'amount_BG' })\r\n    amount_BG: Array<SpriteFrame> = [];\r\n\t// private iconDir = {\r\n\t// \ticon_1: this.apple,\r\n\t// \ticon_2: this.banana,\r\n\t// \ticon_3: this.strawberry,\r\n\t// \ticon_4: this.watermelon,\r\n\t// \ticon_5: this.grape,\r\n\t// \ticon_6: this.bell,\r\n\t// \ticon_7: this.wild,\r\n\t// \ticon_8: this.icon777,\r\n\t// \ticon_9: this.bar1,\r\n\t// \ticon_10: this.bar2,\r\n\t// \ticon_11: this.bar3\r\n\t// }\r\n\r\n\tpublic iconId: number = 0\r\n\r\n\tprivate iconDir: ConfigType[]\r\n\tprivate iconSize: 'normal' | 'large' = 'normal'\r\n\tprivate iconConfig: ConfigType\r\n\r\n\tprotected bindUI(): void {\r\n\t\tconst rootUi = this.root.getComponent(UITransform) as UITransform\r\n\t\trootUi.anchorY = 1\r\n\r\n\t\t// rootUi.anchorX = 0\r\n\t}\r\n\t/**传入图标的ID */\r\n\tpublic setFace(iconId: number) {\r\n\t\tthis.iconId = iconId\r\n\t\tthis.iconDir = iconConfig.icon\r\n\t\tthis.iconConfig = this.iconDir.find(item => item.id === iconId)\r\n\t\tthis.node.getChildByName(\"face\").active = true\r\n\t\tthis.face.getComponent(sp.Skeleton).skeletonData = this[this.iconConfig.name]\r\n\t\tthis.face.getComponent(sp.Skeleton).premultipliedAlpha = false\r\n\t\tthis.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[0]\r\n\t\tthis.node.getChildByName(\"face\").getComponent(Widget).left = this.iconConfig.distance[0]\r\n\t\tthis.node.getChildByName(\"face\").getComponent(Widget).top = this.iconConfig.distance[1]\r\n        if (this.iconConfig.name === 'scatter'){\r\n            this.node.getChildByName('focusBorder').destroy()\r\n        }\r\n\t\tif (this.iconConfig.name === 'scatter' || this.iconConfig.name === 'wild') {\r\n\t\t\tthis.face.setScale(0.85, 0.85)\r\n\t\t}\r\n\t\t// this.effectBorder.active = true\r\n\t}\r\n\r\n\t/**启动或停止效果\r\n\t * animationIndex设置为0，或不设置的话，就停止效果\r\n\t */\r\n\tpublic setEffect(animationIndex: number = 0) {\r\n\t\t// this.face.getComponent(sp.Skeleton).setAnimation(1, this.iconConfig.animationArr[animationIndex], true)\r\n\t\tif (this.iconSize === 'large') return\r\n\t\tif (animationIndex > this.iconConfig.animationArr.length - 1) {\r\n\t\t\tanimationIndex = this.iconConfig.animationArr.length - 1\r\n\t\t}\r\n\t\tthis.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[animationIndex]\r\n\r\n\t\tconst iseff = animationIndex === 0 ? false : true\r\n\t\tthis.effectBorder.active = iseff\r\n\t}\r\n    public hiddenAmounts(amountNum){\r\n        this.setNumBG(amountNum)\r\n    }\r\n    /**\r\n     设置宝箱数字图片\r\n    */\r\n    setNumBG(amountNum){ //\r\n        let {mini,major}=getBgProxy().getWinningMultiplier()\r\n        let amountBg:Node=this.node.getChildByName('amount').getChildByName('bg')\r\n        let str= this.node.getChildByName('amount').getChildByName('label').getComponent(Label)\r\n        if(amountNum<mini){\r\n            amountBg.getComponent(Sprite).spriteFrame=this.amount_BG[0]\r\n            str.string=amountNum\r\n        }else if(amountNum>mini&&amountNum<major){\r\n            amountBg.getComponent(Sprite).spriteFrame=this.amount_BG[1]\r\n            str.string='MINI'\r\n        }else if(amountNum>major){\r\n            amountBg.getComponent(Sprite).spriteFrame=this.amount_BG[2]\r\n            str.string='MAJOR'\r\n        }\r\n    }\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}