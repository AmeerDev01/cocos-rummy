{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/net/protocol/WsProtocol.ts"],"names":["WsProtocol","establishAConnection","PlayerWagering","RoomDrawingRecords","Crash_WsManager","ProtocolCode","constructor","code","queueId","data","token","args","sendTm","toString","obj","JSON","stringify","setData","send","getInstance","REQ_USER_INFORMATION","setParams","REQ_PLAYER_WAGERING","roomId","tableId","memberName","memberId","gold","odds","REQ_ROOM_DRAWING_RECORDS"],"mappings":";;;6DAIaA,U,EAgCAC,oB,EAUAC,c,EAgBAC,kB;;;;;;;;;;;;;;;;;;;;;;;AA9DNC,MAAAA,e;;AACEC,MAAAA,Y,iBAAAA,Y;;;;;;;4BAGIL,U,GAAN,MAAMA,UAAN,CAAiB;AAOpBM,QAAAA,WAAW,CAACC,IAAD,EAAe;AAAA,eAN1BC,OAM0B,GANR,IAMQ;AAAA,eAL1BD,IAK0B,GALX,IAKW;AAAA,eAJ1BE,IAI0B,GAJd,IAIc;AAAA,eAH1BC,KAG0B,GAHhB,IAGgB;AAAA,eAF1BC,IAE0B,GAFd,IAEc;AAAA,eAD1BC,MAC0B,GADT,IACS;AACtB,eAAKL,IAAL,GAAYA,IAAZ;AACH;;AAEDM,QAAAA,QAAQ,GAAW;AACf,cAAIC,GAAO,GAAE;AACTP,YAAAA,IAAI,EAAE,KAAKA,IADF;AAETE,YAAAA,IAAI,EAAC,KAAKA,IAFD;AAGTD,YAAAA,OAAO,EAAE,KAAKA;AAHL,WAAb;;AAKA,cAAG,KAAKE,KAAR,EAAc;AACVI,YAAAA,GAAG,CAACJ,KAAJ,GAAU,KAAKA,KAAf;AACH;;AACD,iBAAOK,IAAI,CAACC,SAAL,CAAeF,GAAf,CAAP;AACH;;AAEDG,QAAAA,OAAO,CAACR,IAAD,EAAY;AACf,eAAKA,IAAL,GAAYA,IAAZ;AACH;;AACDS,QAAAA,IAAI,GAAU;AAAA,4CAANP,IAAM;AAANA,YAAAA,IAAM;AAAA;;AACV,eAAKA,IAAL,GAAYA,IAAZ;AACA;AAAA;AAAA,kDAAgBQ,WAAhB,GAA8BD,IAA9B,CAAmC,IAAnC;AACH;;AA7BmB,O,GA+BxB;;;sCACajB,oB,GAAN,MAAMA,oBAAN,SAAmCD,UAAnC,CAA8C;AACjDM,QAAAA,WAAW,GAAG;AACV,gBAAM;AAAA;AAAA,4CAAac,oBAAnB;AACH;;AACDC,QAAAA,SAAS,CAACX,KAAD,EAAgB;AACrB,eAAKA,KAAL,GAAaA,KAAb;AACA,iBAAO,IAAP;AACH;;AAPgD,O,GASrD;;;gCACaR,c,GAAN,MAAMA,cAAN,SAA6BF,UAA7B,CAAwC;AAC3CM,QAAAA,WAAW,GAAG;AACV,gBAAM;AAAA;AAAA,4CAAagB,mBAAnB;AACH;;AACDD,QAAAA,SAAS,CAACZ,IAAD,EAAO;AACZ,eAAKA,IAAL,GAAY;AACRc,YAAAA,MAAM,EAAEd,IAAI,CAACe,OADL;AAERC,YAAAA,UAAU,EAAEhB,IAAI,CAACgB,UAFT;AAGRC,YAAAA,QAAQ,EAAEjB,IAAI,CAACiB,QAHP;AAIRC,YAAAA,IAAI,EAAElB,IAAI,CAACkB,IAJH;AAKRC,YAAAA,IAAI,EAAEnB,IAAI,CAACmB;AALH,WAAZ;AAOA,iBAAO,IAAP;AACH;;AAb0C,O,GAe/C;;;oCACazB,kB,GAAN,MAAMA,kBAAN,SAAiCH,UAAjC,CAA4C;AAC/CM,QAAAA,WAAW,GAAG;AACV,gBAAM;AAAA;AAAA,4CAAauB,wBAAnB;AACH;;AACDR,QAAAA,SAAS,CAACZ,IAAD,EAAO;AACZ,eAAKA,IAAL,GAAYA,IAAI,CAACe,OAAjB;AACA,iBAAO,IAAP;AACH;;AAP8C,O","sourcesContent":["import Crash_WsManager from \"../Crash_WsManager\";\r\nimport { ProtocolCode } from \"./ProtocolDef\";\r\n\r\n\r\nexport class WsProtocol {\r\n    queueId: number = null;\r\n    code: string = null;\r\n    data: any = null;\r\n    token:any=null\r\n    args: any = null;\r\n    sendTm: number = null;\r\n    constructor(code: string) {\r\n        this.code = code;\r\n    }\r\n\r\n    toString(): string {\r\n        let obj:any= {\r\n            code: this.code,\r\n            data:this.data,\r\n            queueId: this.queueId,\r\n        };\r\n        if(this.token){\r\n            obj.token=this.token\r\n        }\r\n        return JSON.stringify(obj);\r\n    }\r\n\r\n    setData(data: any) {\r\n        this.data = data;\r\n    }\r\n    send(...args) {\r\n        this.args = args;\r\n        Crash_WsManager.getInstance().send(this);\r\n    }\r\n}\r\n// 获取用户信息\r\nexport class establishAConnection extends WsProtocol {\r\n    constructor() {\r\n        super(ProtocolCode.REQ_USER_INFORMATION);\r\n    }\r\n    setParams(token: string) {\r\n        this.token = token\r\n        return this;\r\n    }\r\n}\r\n//获取玩家下注请求\r\nexport class PlayerWagering extends WsProtocol {\r\n    constructor() {\r\n        super(ProtocolCode.REQ_PLAYER_WAGERING);\r\n    }\r\n    setParams(data) {\r\n        this.data = {\r\n            roomId: data.tableId,\r\n            memberName: data.memberName,\r\n            memberId: data.memberId,\r\n            gold: data.gold,\r\n            odds: data.odds,\r\n        }\r\n        return this;\r\n    }\r\n}\r\n// 获取查看房间开奖记录\r\nexport class RoomDrawingRecords extends WsProtocol {\r\n    constructor() {\r\n        super(ProtocolCode.REQ_ROOM_DRAWING_RECORDS);\r\n    }\r\n    setParams(data) {\r\n        this.data = data.tableId\r\n        return this;\r\n    }\r\n}\r\n"]}