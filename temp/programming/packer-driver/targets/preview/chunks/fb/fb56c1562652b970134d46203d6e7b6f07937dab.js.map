{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Component/phoenix_SlotBg.ts"],"names":["_decorator","AudioSource","Button","Animation","Label","Layers","Node","Prefab","sp","Sprite","SpriteFrame","UIOpacity","Vec3","phoenix_BaseComponent","global","NumberRoller","AudioManager","SoundList","BuyType","ccclass","property","phoenix_SlotBg","SkeletonData","GoldNumberRoller","timeAccumulator","autoLaunchState","lastScore","start","setTimeout","_nodes","setSiblingIndex","bindUI","flyCrane","startFlyingCrane","setScale","scheduleOnce","topButton","on","EventType","TOUCH_END","getInstance","playSound","buttonClick","openShop","beliButton","speclalButton","TAS","settingButton","openPersonCenter","audio","node","addComponent","setAudioSource","bindEvent","updateBetAmount","baseBetAmount","lineCount","betAmount","numberStr","formatAmountWithCommas","getComponent","string","Balance_tips","bl","spr_nomoney","active","updateScore","score","isChange","setBtnLabel","str","setBtnState","state","type","num","setBg","bgName","isValid","console","log","spriteFrame","setGold","label","getChildByName","startNumberMini","parseInt","replace","Number","labelStr","Math","abs","String","toFixed","animation","play","startRolling","triggeAutoLaunch","autoLaunch","setActiveButton","autoLaunchType","children","forEach","child","index","opacity","setJACKPOT","jackPotData","handoffJACKPOT","ske","Skeleton","skeletonData","flyingCrane","addChild","setPosition","layer","Enum","UI_2D","setDis_btn","disable","grayscale","setGreyOut","setDisable","button","startButton","sprite","update","deltaTime","updateTheMusicStatus"],"mappings":"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","sourcesContent":["import {\r\n    _decorator,\r\n    AudioSource,\r\n    Button,\r\n    find,\r\n    Animation,\r\n    Label,\r\n    Layers,\r\n    Node,\r\n    Prefab,\r\n    sp,\r\n    Sprite,\r\n    SpriteFrame,\r\n    tween,\r\n    UIOpacity,\r\n    Vec3\r\n} from 'cc';\r\nimport phoenix_BaseComponent from './phoenix_BaseComponent';\r\nimport {AutoLaunchType} from '../Repositories/BgRepository';\r\nimport {global} from '../../../../hall';\r\nimport {NumberRoller} from \"../utils/NumberRoller\";\r\nimport {AudioManager, SceneBgMusic, SoundList} from \"../Managr/AudioManager\";\r\nimport { BuyType } from '../../../../hall/components/Hall_ShopPanel';\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n@ccclass('phoenix_SlotBg')\r\nexport class phoenix_SlotBg extends phoenix_BaseComponent {\r\n\r\n    //返回首页\r\n    @property(Node)\r\n    homeButton: Node = null\r\n\r\n    //充值按钮\r\n    @property(Node)\r\n    topButton: Node = null\r\n\r\n    //商城\r\n    @property(Node)\r\n    beliButton: Node = null\r\n\r\n    //礼包\r\n    @property(Node)\r\n    speclalButton: Node = null\r\n\r\n    //设置\r\n    @property(Node)\r\n    settingButton: Node = null\r\n\r\n    @property(Node)\r\n    startButton: Node = null\r\n\r\n    @property(Node)\r\n    baseBet: Node = null\r\n\r\n    @property(Node)\r\n    betAmount: Node = null\r\n\r\n    @property(Node)\r\n\tspr_nomoney: Node = null\r\n\r\n    @property(Node)\r\n    lineCount: Node = null\r\n\r\n    @property(Node)\r\n    score: Node = null\r\n\r\n    @property(Node)\r\n    addShift: Node = null\r\n\r\n    @property(Node)\r\n    subtractShift: Node = null\r\n\r\n    @property(Node)\r\n    autoLaunch: Node = null\r\n\r\n    @property(Node)\r\n    ruleButton: Node = null\r\n\r\n    @property(SpriteFrame)\r\n    bg_1: SpriteFrame = null\r\n\r\n    @property(SpriteFrame)\r\n    bg_2: SpriteFrame = null\r\n\r\n    @property(Node)\r\n    gameArea: Node = null\r\n\r\n    @property(Node)\r\n    addBet: Node = null\r\n\r\n    @property(Node)\r\n    subtractBet: Node = null\r\n\r\n    @property(Node)\r\n    maxBet: Node = null\r\n    @property(Prefab)\r\n    toast: Prefab = null\r\n\r\n    @property(sp.SkeletonData)\r\n    flyingCrane: sp.SkeletonData = null\r\n\r\n    @property(Node)\r\n    JackPotContent: Node = null\r\n\r\n    @property(Node)\r\n    JackPotItem: Node = null\r\n    @property(Node)\r\n    propsToggleFast: Node = null\r\n\r\n    private GoldNumberRoller: NumberRoller = new NumberRoller();\r\n    private timeAccumulator: number = 0\r\n    autoLaunchState=false\r\n    start() {\r\n        setTimeout(() => {\r\n            this._nodes['Up_Feature'].setSiblingIndex(9999)\r\n        }, 100)\r\n    }\r\n\r\n    protected bindUI(): void {\r\n        // this.autoLaunch.children.forEach(child => {\r\n        // \tchild.on(Node.EventType.TOUCH_START, ({ target }) => {\r\n        // \t\t(target as Node).getComponent(UIOpacity).opacity = 0\r\n        // \t})\r\n        // \tchild.on(Node.EventType.TOUCH_END, ({ target }) => {\r\n        // \t\ttween(target.getComponent(UIOpacity)).to(0.2, { opacity: 255 }).start();\r\n        // \t})\r\n        // })\r\n        const flyCrane = this.startFlyingCrane()\r\n        flyCrane.setScale(new Vec3(-1, 1, 1))\r\n        this.scheduleOnce(() => {\r\n            this.startFlyingCrane()\r\n        }, 3)\r\n\r\n        // // 点击首页按钮\r\n        // this.homeButton.on(Node.EventType.TOUCH_END, () => {\r\n        //     AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n        //     AudioManager.getInstance().closeMusic(()=>{\r\n        //         global.closeSubGame()\r\n        //     });\r\n        // })\r\n        // 点击充值按钮\r\n        this.topButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击商城按钮\r\n        this.beliButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击礼包按钮\r\n        this.speclalButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop(BuyType.TAS)\r\n        })\r\n        // 点击设置按钮\r\n        this.settingButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openPersonCenter(2)\r\n        })\r\n        let audio: any = this.node.addComponent(AudioSource);\r\n        AudioManager.getInstance().setAudioSource(audio);\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n        // bindClickEvent(this.startButton, () => { })\r\n    }\r\n\r\n    /**更新下注金额 */\r\n    public updateBetAmount(baseBetAmount: number, lineCount: number): void {\r\n        const betAmount = baseBetAmount * lineCount\r\n        let numberStr: string = betAmount.formatAmountWithCommas()\r\n        this.lineCount.getComponent(Label).string = `${lineCount} × ${baseBetAmount}`;\r\n        this.betAmount.getComponent(Label).string = betAmount + ''//numberStr\r\n    }\r\n    \r\n    public Balance_tips(bl){\r\n            this.spr_nomoney.active=bl\r\n        }\r\n\r\n    private lastScore = 0;\r\n    /**更新积分 */\r\n    public updateScore(score: number): boolean {\r\n        if(score==0){\r\n            this._nodes['goodluck'].active=true\r\n            this._nodes['bottom_score'].active=false\r\n        }else {\r\n            this._nodes['goodluck'].active = false\r\n            this._nodes['bottom_score'].active = true\r\n            this.score.getComponent(Label).string = score + \"\"\r\n        }\r\n        const isChange = this.lastScore !== score;\r\n        this.lastScore = score;\r\n        return isChange;\r\n    }\r\n\r\n    public setBtnLabel(str) {\r\n        //this.setBtnState(false,1)\r\n        this._nodes['START'].getComponent(Label).string = str + \"\"\r\n    }\r\n    public setBtnState(state,type=0,num?){\r\n        // if(type==0){ // 主游戏按钮\r\n        //     this._nodes['STARTBG'].active=state\r\n        //     this._nodes['scrollingThePicture'].active=!state\r\n        //     this._nodes['START'].active=false\r\n        // }else { // 小游戏按钮\r\n        //     this._nodes['STARTBG'].active=false\r\n        //     this._nodes['scrollingThePicture'].active=false\r\n        //     this._nodes['START'].active=true\r\n        // }\r\n        if(type==0){ // 主游戏按钮\r\n            this._nodes['STARTBG'].active=state\r\n            this._nodes['scrollingThePicture'].active=!state\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else if(type==1){ // 小游戏按钮\r\n            this._nodes['STARTBG'].active=false\r\n            this._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=true\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else{ // 自动按钮\r\n\t\t\tthis._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['STARTBG'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=true\r\n\t\t\tthis._nodes['AUTO'].getComponent(Label).string=num\r\n\t\t}\r\n    }\r\n\r\n    /**设置背景图片 */\r\n    public setBg(bgName: 'bg_1' | 'bg_2') {\r\n        if(!this.node.isValid) return;\r\n        console.log(bgName)\r\n        this.node.getComponent(Sprite).spriteFrame = this[bgName]\r\n    }\r\n\r\n    // 更新金币数量\r\n    public setGold(str:string) {\r\n        // 漂浮效果\r\n        let label= this._nodes['Moeny_Bg'].getChildByName('number').getComponent(Label)\r\n        let startNumberMini =parseInt(label.string.replace(/,/g, \"\"));\r\n        if(startNumberMini - Number(str) == 0){\r\n            return false\r\n        }else{\r\n            this._nodes['number2'].active=true\r\n            let labelStr=''\r\n            if(startNumberMini - Number(str)<0){\r\n                labelStr='+'+ Math.abs(startNumberMini - Number(str))\r\n            }else {\r\n                labelStr='-'+ (startNumberMini - Number(str))\r\n            }\r\n            this._nodes['number2'].getComponent(Label).string= String(Number(labelStr).toFixed(0))\r\n            let animation:Animation =this._nodes['number2'].getComponent(Animation)\r\n            animation.play();\r\n            // 动画播放\r\n            this.GoldNumberRoller.startRolling(startNumberMini,Number(String(Number(str).toFixed(0))), 500,label)\r\n        }\r\n    }\r\n\r\n    /**展示自动启动按钮组面板 */\r\n    public triggeAutoLaunch(state?) {\r\n        this.autoLaunch.active=true\r\n        if(state===false){\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t\tthis.autoLaunchState=false\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.autoLaunchState=!this.autoLaunchState\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_up')\r\n\t\t\t}else{\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\n    /**自动按钮设置为激活状态 */\r\n    public setActiveButton(autoLaunchType: AutoLaunchType) {\r\n        this.autoLaunch.children.forEach((child, index) => {\r\n            if (index === autoLaunchType) {\r\n                child.getComponent(UIOpacity).opacity = 60\r\n            } else {\r\n                child.getComponent(UIOpacity).opacity = 255\r\n            }\r\n        })\r\n        if(this.autoLaunchState){\r\n\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\tthis.autoLaunchState=false\r\n\t\t}\r\n    }\r\n\r\n    /**set jackPOT */\r\n    public setJACKPOT(jackPotData) {\r\n        // this.JackPotContent.destroyAllChildren()\r\n        // jackPotData.forEach(item => {\r\n        //     let node = instantiate(this.JackPotItem)\r\n        //     node.getChildByName('One_Right').getComponent(Label).string = item.nickName + ''\r\n        //     find('One_Left/One_Label', node).getComponent(Label).string = item.winningAmount.formatAmountWithCommas()\r\n        //     node.active = true\r\n        //     this.JackPotContent.addChild(node)\r\n        // })\r\n    }\r\n\r\n    handoffJACKPOT() {\r\n        this._nodes['ScrollView'].active = !this._nodes['ScrollView'].active\r\n    }\r\n\r\n    /**启动飞鹤 */\r\n    public startFlyingCrane() {\r\n        const node = new Node(\"flyingCrane\")\r\n        const ske = node.addComponent(sp.Skeleton)\r\n        ske.skeletonData = this.flyingCrane\r\n        ske.animation = 'animation'\r\n        this.node.addChild(node)\r\n        node.setSiblingIndex(1)\r\n        node.setPosition(new Vec3(0, 0))\r\n        node.layer = Layers.Enum.UI_2D\r\n        return node\r\n        // node.setPosition(new Vec3(640, -250))\r\n        // tween(node).to(3, { position: new Vec3(-640, 250) }).call(() => {\r\n        // \tthis.startFlyingCrane()\r\n        // }).start()\r\n    }\r\n    // 设置小游戏按钮置灰\r\n    setDis_btn(disable:boolean){\r\n        this._nodes['SZX_-'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['SZX_+'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['maxBet'].getComponent(Sprite).grayscale = disable\r\n    }\r\n    setGreyOut(str,disable){\r\n        this._nodes[str].getComponent(Sprite).grayscale = disable\r\n    }\r\n    /**设置面板按钮可用性 */\r\n    setDisable(disable: boolean) {\r\n        // const op = this.startButton.getComponent(UIOpacity)\r\n        // op.opacity = disable ? 100 : 255\r\n        const button = this.startButton.getComponent(Button); // 获取节点的 Sprite 组件\r\n        // button.interactable = disable\r\n        const sprite = this.startButton.getComponent(Sprite);\r\n        sprite.grayscale = disable\r\n\r\n        // const material = Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE); // 获取置灰材质\r\n        // const material = Material.getInstantiatedBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE);\r\n        // node.setMaterial(material, 0);\r\n\r\n        // const mat = new Material();\r\n        // mat.initialize({\r\n        // \t// 通过 effect 名指定材质使用的着色器资源\r\n        // \teffectAsset: 'pipeline/skybox',\r\n        // \tdefines: {\r\n        // \t\tUSE_RGBE_CUBEMAP: true\r\n        // \t}\r\n        // })\r\n        // this.node.getComponent(Sprite).setMaterial(Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE + ''), 0);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this.timeAccumulator += deltaTime;\r\n        if (this.timeAccumulator >= 3) {\r\n            this.timeAccumulator = 0;\r\n            AudioManager.getInstance().updateTheMusicStatus()\r\n        }\r\n        this.GoldNumberRoller.update(deltaTime); // 手动触发滚动逻辑\r\n    }\r\n}\r\n\r\n"]}