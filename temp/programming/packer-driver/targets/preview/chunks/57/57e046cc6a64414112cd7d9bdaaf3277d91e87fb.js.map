{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/common/fish/SkillPlayer.ts"],"names":["SkillPlayer","skillConfig","commonConfig","textureConfig","skillFuncList","sklUseSkew","scaleRatio","init","sklConfig","comConfig","tConfig","skillList","uninit","getScaleRatio","setUseSkew","buse","getUseSkew","getConfigs","skConfig","play","obj","id","k","v","m","ids","n","func"],"mappings":";;;iBAIaA,W;;;;;;;;;;;;;AAJb;AACA;AACA;AACA;6BACaA,W,GAAN,MAAMA,WAAN,CAAkB;AAAA;AAAA,eACfC,WADe,GACD,IADC;AAAA,eAEfC,YAFe,GAEA,IAFA;AAAA,eAGfC,aAHe,GAGC,IAHD;AAAA,eAKfC,aALe,GAKC,IALD;AAAA,eAMfC,UANe,GAMF,KANE;;AAOvB;AAPuB,eAQfC,UARe,GAQM,CARN;AAAA;;AAUhBC,QAAAA,IAAI,CAACC,SAAD,EAAYC,SAAZ,EAAuBC,OAAvB,EAAgCC,SAAhC,EAA2CL,UAA3C,EAA+D;AACxE,eAAKL,WAAL,GAAmBO,SAAnB;AACA,eAAKN,YAAL,GAAoBO,SAApB;AACA,eAAKN,aAAL,GAAqBO,OAArB;AACA,eAAKJ,UAAL,GAAkBA,UAAlB;AAEA,eAAKD,UAAL,GAAkB,KAAlB;AACA,eAAKD,aAAL,GAAqBO,SAArB;AACD;;AAEMC,QAAAA,MAAM,GAAG;AACd,eAAKR,aAAL,GAAqB,IAArB;AACA,eAAKC,UAAL,GAAkB,KAAlB;AAEA,eAAKJ,WAAL,GAAmB,IAAnB;AACA,eAAKC,YAAL,GAAoB,IAApB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACD;;AAEMU,QAAAA,aAAa,GAAG;AACrB,iBAAO,KAAKP,UAAZ;AACD;;AAEMQ,QAAAA,UAAU,CAACC,IAAD,EAAO;AACtB,eAAKV,UAAL,GAAkBU,IAAlB;AACD;;AAEMC,QAAAA,UAAU,GAAG;AAClB,iBAAO,KAAKX,UAAZ;AACD;;AAEMY,QAAAA,UAAU,GAAG;AAClB,iBAAO;AAAEC,YAAAA,QAAQ,EAAE,KAAKjB,WAAjB;AAA8BQ,YAAAA,SAAS,EAAE,KAAKP,YAA9C;AAA4DQ,YAAAA,OAAO,EAAE,KAAKP;AAA1E,WAAP;AACD;;AAEMgB,QAAAA,IAAI,CAACC,GAAD,EAAMC,EAAN,EAAU;AACnB,eAAK,IAAMC,CAAX,IAAgB,KAAKlB,aAArB,EAAoC;AAClC,gBAAMmB,CAAC,GAAG,KAAKnB,aAAL,CAAmBkB,CAAnB,CAAV;;AACA,iBAAK,IAAME,CAAX,IAAgBD,CAAC,CAACE,GAAlB,EAAuB;AACrB,kBAAMC,CAAC,GAAGH,CAAC,CAACE,GAAF,CAAMD,CAAN,CAAV;;AACA,kBAAIE,CAAC,KAAKL,EAAV,EAAc;AACZ,oBAAIE,CAAC,CAACI,IAAN,EAAY;AACVJ,kBAAAA,CAAC,CAACI,IAAF,CAAOP,GAAP,EAAYC,EAAZ;AACA;AACD;AACF;AACF;AACF;AACF;;AA1DsB,O","sourcesContent":["/**\r\n特技播放器\r\n */\r\n////////////////////////////////////\r\nexport class SkillPlayer {\r\n  private skillConfig = null\r\n  private commonConfig = null\r\n  private textureConfig = null\r\n\r\n  private skillFuncList = null\r\n  private sklUseSkew = false\r\n  /**缩放比例 */\r\n  private scaleRatio: number = 1;\r\n\r\n  public init(sklConfig, comConfig, tConfig, skillList, scaleRatio: number) {\r\n    this.skillConfig = sklConfig\r\n    this.commonConfig = comConfig\r\n    this.textureConfig = tConfig\r\n    this.scaleRatio = scaleRatio\r\n\r\n    this.sklUseSkew = false\r\n    this.skillFuncList = skillList\r\n  }\r\n\r\n  public uninit() {\r\n    this.skillFuncList = null\r\n    this.sklUseSkew = false\r\n\r\n    this.skillConfig = null\r\n    this.commonConfig = null\r\n    this.textureConfig = null\r\n  }\r\n\r\n  public getScaleRatio() {\r\n    return this.scaleRatio\r\n  }\r\n\r\n  public setUseSkew(buse) {\r\n    this.sklUseSkew = buse\r\n  }\r\n\r\n  public getUseSkew() {\r\n    return this.sklUseSkew\r\n  }\r\n\r\n  public getConfigs() {\r\n    return { skConfig: this.skillConfig, comConfig: this.commonConfig, tConfig: this.textureConfig }\r\n  }\r\n\r\n  public play(obj, id) {\r\n    for (const k in this.skillFuncList) {\r\n      const v = this.skillFuncList[k];\r\n      for (const m in v.ids) {\r\n        const n = v.ids[m];\r\n        if (n === id) {\r\n          if (v.func) {\r\n            v.func(obj, id)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n"]}