{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_ShareSure.ts"],"names":["Label","Node","Sprite","_decorator","log","BaseComponent","global","Throttler","ApiUrl","omitStr","ccclass","property","Hall_ShareSure","propertyNode","props_btn_set_batal","props_btn_tentu","props_Label_pemain","props_Label_id","props_spr_head","props","avatarIndex","memberId","nickName","actingId","events","batalActing","close","start","initState","bindEvent","on","EventType","TOUCH_END","isDebouncerAsync","RECOMMEND_BIND","then","isPass","bindUI","useProps","key","value","loadHeadSprite","cur","string","update","deltaTime"],"mappings":"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","sourcesContent":["import { Label, Node, Sprite, _decorator, log, sp } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport { global } from '../index';\r\nimport Throttler from '../../utils/Throttler';\r\nimport { ApiUrl } from '../apiUrl';\r\nimport { omitStr } from '../../utils/tool';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\tavatarIndex?: number,\r\n\tmemberId?: string,\r\n\tnickName?: string,\r\n\tactingId?: string,\r\n}\r\nexport interface IEvent {\r\n\tbatalActing: (actingId: string) => void,\r\n\tclose: () => void,\r\n}\r\n\r\n@ccclass('Hall_ShareSure')\r\nexport class Hall_ShareSure extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_set_batal: new Node(),\r\n\t\tprops_btn_tentu: new Node(),\r\n\t\tprops_Label_pemain: new Label(),\r\n\t\tprops_Label_id: new Label(),\r\n\t\tprops_spr_head: new Sprite(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tavatarIndex: -1,\r\n\t\tmemberId: '',\r\n\t\tnickName: '',\r\n\t\tactingId: '',\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tbatalActing: (actingId: string) => { },\r\n\t\tclose: () => { },\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_set_batal.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.close();\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_tentu.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tThrottler.isDebouncerAsync(ApiUrl.RECOMMEND_BIND, 500, true, () => {\r\n\t\t\t}).then(isPass => {\r\n\t\t\t\tthis.events.batalActing(this.props.actingId);\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any; cur: any; }): void {\r\n\t\tlog(\"usr === \", key, value);\r\n\t\tif (key === 'avatarIndex') {\r\n\t\t\tglobal.loadHeadSprite(value.cur, this.propertyNode.props_spr_head);\r\n\t\t} else if (key === 'memberId') {\r\n\t\t\tthis.propertyNode.props_Label_id.string = value.cur;\r\n\t\t} else if (key === 'nickName') {\r\n\t\t\tthis.propertyNode.props_Label_pemain.string = omitStr(value.cur, 14);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}