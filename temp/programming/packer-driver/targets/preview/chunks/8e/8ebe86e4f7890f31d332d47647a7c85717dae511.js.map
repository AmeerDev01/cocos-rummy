{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/starlight/components/Starlight_RoleView.ts"],"names":["_decorator","Node","sp","BaseComponent","SkeletonAnimationPlayer","starlight_Audio","SoundPathDefine","ccclass","property","Starlight_RoleView","ani","propertyNode","props_princess","props_princess2","props_flash","props","roleAttack","gameType","events","start","getComponent","Skeleton","ROLE_STATE","MAIN","initState","bindEvent","useProps","key","value","playAnimation","cur","playOneShot","THOR_SMILES","changeAnimation","ATTACK","active","startFalling","clearTheDrop","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, Label, Layout, Node, ScrollView, sp } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { GameType } from '../type';\r\nimport SkeletonAnimationPlayer from '../SkeletonPlay';\r\nimport { starlight_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\troleAttack?: number,\r\n\tgameType?: number\r\n\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\nconst enum ROLE_STATE {\r\n\tMAIN = 'idle',\r\n\tATTACK = 'idle_j',\r\n}\r\n@ccclass('Starlight_RoleView')\r\nexport class Starlight_RoleView extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate ani\r\n\tstart() {\r\n\t\tthis.ani = new SkeletonAnimationPlayer(this.propertyNode.props_princess.getComponent(sp.Skeleton), ROLE_STATE.MAIN, true, () => { });\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_princess: new Node(),\r\n\t\tprops_princess2: new Node(),\r\n\t\tprops_flash: new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\troleAttack: 0,\r\n\t\tgameType: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === 'gameType') {\r\n\t\t\tnew SkeletonAnimationPlayer(this.propertyNode.props_princess.getComponent(sp.Skeleton), ROLE_STATE.MAIN, true).playAnimation();\r\n\t\t\t// if (this.props.gameType === GameType.MAIN) {\r\n\t\t\t\t\r\n\t\t\t// } else if (this.props.gameType === GameType.SUBGAME1) {\r\n\t\t\t// \tnew SkeletonAnimationPlayer(this.propertyNode.props_princess.getComponent(sp.Skeleton), ROLE_STATE.ATTACK, false).playAnimation();\r\n\t\t\t// }\r\n\t\t}\r\n\t\tif (key === 'roleAttack') {\r\n\t\t\tif (value.cur === 0) {\r\n\t\t\t\tif (this.ani) {\r\n\t\t\t\t\tstarlight_Audio.playOneShot(SoundPathDefine.THOR_SMILES)\r\n\t\t\t\t\tthis.ani = new SkeletonAnimationPlayer(this.propertyNode.props_princess.getComponent(sp.Skeleton), ROLE_STATE.MAIN, true, () => { });\r\n\t\t\t\t\tthis.ani.playAnimation()\r\n\t\t\t\t}\r\n\t\t\t} else if (value.cur === 1) {\r\n\t\t\t\tif (this.ani) {\r\n\t\t\t\t\tthis.ani.changeAnimation(ROLE_STATE.ATTACK, false, () => {\r\n\t\t\t\t\t\tthis.ani.changeAnimation(ROLE_STATE.MAIN, true, () => { })\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} else if (value.cur === 2) {\r\n\t\t\t\tthis.propertyNode.props_princess.active = false\r\n\t\t\t\tthis.propertyNode.props_princess2.active = true\r\n\t\t\t\tnew SkeletonAnimationPlayer(this.propertyNode.props_princess2.getComponent(sp.Skeleton), 'idle4', false, () => {\r\n\t\t\t\t\tthis.propertyNode.props_princess.active = true\r\n\t\t\t\t\tthis.propertyNode.props_princess2.active = false\r\n\t\t\t\t}).playAnimation();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate startFalling() {\r\n\r\n\t}\r\n\tprivate clearTheDrop() {\r\n\r\n\t}\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}