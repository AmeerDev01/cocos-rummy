{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Component/phoenix_Icon.ts"],"names":["_decorator","Label","Node","sp","UITransform","phoenix_BaseComponent","iconConfig","getBgProxy","SubGameType","ccclass","property","phoenix_Icon","SkeletonData","iconId","iconDir","iconSize","bindUI","rootUi","root","getComponent","anchorY","setFace","icon","find","item","id","name","console","log","face","Skeleton","premultipliedAlpha","getLastGame","skeletonData","phoenixAtlas","getFreeGamePositionId","node","getChildByName","active","animation","animationArr","destroy","setScale","e","playYuanbao","playFreeGae","MAIN","amount","isValid","setPosition","position","setEffect","animationIndex","length","iseff","effectBorder","hiddenAmounts","state","amountNum","string","bindEvent","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Label, Node, sp, UITransform, Widget } from 'cc';\r\nimport phoenix_BaseComponent from './phoenix_BaseComponent';\r\nimport iconConfig from '../phoenix_config'\r\nimport { getBgProxy } from '../phoenix_utils';\r\nimport { SubGameType } from '../Proxy/SocketProxy';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype ConfigType = {\r\n    id: number\r\n    name: string\r\n    fileName: string\r\n    animationArr?: string[]\r\n    distance: number[]\r\n}\r\n\r\n@ccclass('phoenix_Icon')\r\nexport class phoenix_Icon extends phoenix_BaseComponent {\r\n    @property(Node)\r\n    face: Node = null\r\n\r\n    @property(sp.SkeletonData)\r\n    icon9: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    icon10: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    iconJ: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    iconQ: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    iconK: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    iconA: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    bat: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    turtle: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    frog: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    tigger: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    scatter: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    wild: sp.SkeletonData = null\r\n\r\n    @property(sp.SkeletonData)\r\n    yuanbao: sp.SkeletonData = null\r\n\r\n    @property(Node)\r\n    effectBorder: Node = null\r\n\r\n    @property(sp.SkeletonData)\r\n    phoenixAtlas: Array<sp.SkeletonData> = [];\r\n    // private iconDir = {\r\n    // \ticon_1: this.apple,\r\n    // \ticon_2: this.banana,\r\n    // \ticon_3: this.strawberry,\r\n    // \ticon_4: this.watermelon,\r\n    // \ticon_5: this.grape,\r\n    // \ticon_6: this.bell,\r\n    // \ticon_7: this.wild,\r\n    // \ticon_8: this.icon777,\r\n    // \ticon_9: this.bar1,\r\n    // \ticon_10: this.bar2,\r\n    // \ticon_11: this.bar3\r\n    // }\r\n\r\n    public iconId: number = 0\r\n\r\n    private iconDir: ConfigType[]\r\n    private iconSize: 'normal' | 'large' = 'normal'\r\n    private iconConfig: ConfigType\r\n\r\n    protected bindUI(): void {\r\n        const rootUi = this.root.getComponent(UITransform) as UITransform\r\n        rootUi.anchorY = 1\r\n\r\n        // rootUi.anchorX = 0\r\n    }\r\n\r\n    /**传入图标的ID */\r\n    public setFace(iconId: number) {\r\n        try {\r\n            this.iconId = iconId\r\n            this.iconDir = iconConfig.icon\r\n            this.iconConfig = this.iconDir.find(item => item.id === iconId)\r\n            if (!this[this.iconConfig.name]) {\r\n                console.log(this.iconConfig.name)\r\n            }\r\n            this.face.getComponent(sp.Skeleton).premultipliedAlpha = false\r\n            if (this.iconConfig.name === 'wild') {\r\n                if (getBgProxy().getLastGame() !== 0) { // 不等于主游戏\r\n                    this.face.getComponent(sp.Skeleton).skeletonData = this.phoenixAtlas[getBgProxy().getFreeGamePositionId()]\r\n                } else {\r\n                    this.face.getComponent(sp.Skeleton).skeletonData = this[this.iconConfig.name]\r\n                }\r\n            } else {\r\n                this.node.getChildByName(\"face\").active = true\r\n                this.face.getComponent(sp.Skeleton).skeletonData = this[this.iconConfig.name]\r\n                this.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[0]\r\n            }\r\n            // this.node.getChildByName(\"face\").getComponent(Widget).left = this.iconConfig.distance[0]\r\n            // this.node.getChildByName(\"face\").getComponent(Widget).top = this.iconConfig.distance[1]\r\n            if (this.iconConfig.name === 'scatter') { //|| this.iconConfig.name === 'wild'\r\n                this.node.getChildByName('focusBorder').destroy()\r\n            }\r\n            if (this.iconConfig.name === 'scatter' || this.iconConfig.name === 'wild') {\r\n                this.face.setScale(0.85, 0.85)\r\n            }\r\n        } catch (e) {\r\n        }\r\n        // this.effectBorder.active = true\r\n    }\r\n    playYuanbao() {\r\n        this.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = 'animation'\r\n    }\r\n    playFreeGae(active: boolean) {\r\n        if(this.iconConfig.name === 'wild' && getBgProxy().getLastGame() !== SubGameType.MAIN){\r\n            let amount = this.node.getChildByName('amount')\r\n            if (!amount.isValid) return;\r\n            amount.setPosition(this.face.position);\r\n            amount.active = active\r\n        }\r\n    }\r\n    /**启动或停止效果\r\n     * animationIndex设置为0，或不设置的话，就停止效果\r\n     */\r\n    public setEffect(animationIndex: number = 0) {\r\n        // this.face.getComponent(sp.Skeleton).setAnimation(1, this.iconConfig.animationArr[animationIndex], true)\r\n        if (this.iconSize === 'large') return\r\n        if (animationIndex > this.iconConfig.animationArr.length - 1) {\r\n            animationIndex = this.iconConfig.animationArr.length - 1\r\n        }\r\n        // 普通连线不展示元宝的动画\r\n        if(this.iconConfig.name !== 'yuanbao'){\r\n            this.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[animationIndex]\r\n        }\r\n\r\n        const iseff = animationIndex === 0 ? false : true\r\n        this.effectBorder.active = iseff\r\n    }\r\n\r\n    public hiddenAmounts(state: boolean, amountNum) {\r\n        let amount = this.node.getChildByName('amount')\r\n        if (state) {\r\n            this.node.getChildByName('focusBorder').active = false\r\n            this.node.getChildByName('focusBorder2').active = true\r\n        } else {\r\n            this.node.getChildByName('focusBorder').active = true\r\n            this.node.getChildByName('focusBorder2').active = false\r\n        }\r\n        amount.getComponent(Label).string = amountNum + ''\r\n        amount.active = state\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n"]}