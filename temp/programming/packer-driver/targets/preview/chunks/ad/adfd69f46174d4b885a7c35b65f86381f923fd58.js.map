{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egyptV2/type.ts"],"names":["config","RollerStatus","IconEffectType","DirectionType","IconSizeType","GameType","AutoLauncherType","DialogType","JactpotType","IconId","getAutoCount","type","TIME_500","TIME_100","TIME_50","TIME_20","TIME_10","NONE","isLimit","autoLauncherType","LIMIT","LAMIT_FAST","isSubGameToSubGame","viewGameType","currGameType","SUBGAME1","SUBGAME2","isAuto","autoLauncherInfo","gameTypeInfo","MAIN","totalCount","leftCount","verifyBetResultData","data","dl","Object","prototype","hasOwnProperty","call","toString","si","length","rollerId","calBetAmount","positionId","amountInfo","betSwitcher","amount","find","v","betAmount","value","getColumnLockIconArr","values","columnIndex","icons","filter","map","lockIcon","index","iconId","getBigWinConfig","magnification","i","winning","element","minRate","undefined"],"mappings":"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","sourcesContent":["import config from \"./config\"\r\n\r\n/**\r\n * 滑动状态\r\n */\r\nexport enum RollerStatus {\r\n  /**滑动中 */\r\n  RUNNING,\r\n  /**滑动结束中 */\r\n  ENDING,\r\n  /**滑动结束 */\r\n  END\r\n}\r\n\r\n/**滚动信息 */\r\nexport type RollerInfo = {\r\n  /**滑槽序号 */\r\n  index: number,\r\n  /**停止位置 */\r\n  stopIndex: number,\r\n}\r\n\r\nexport enum IconEffectType {\r\n  /**无闪动 */\r\n  NONE,\r\n  /**一般闪动 */\r\n  NORMAIL\r\n}\r\n\r\nexport enum DirectionType {\r\n  UP, DOWN\r\n}\r\n\r\nexport enum IconSizeType {\r\n  NORMAIL, LARGE\r\n}\r\n\r\nexport type IconType = {\r\n  iconId: number\r\n  /**图标所处队列的序号 */\r\n  queueIndex: number,\r\n  /**闪动类型 */\r\n  iconEffect: IconEffectType\r\n  /**宽度 */\r\n  width: number\r\n  /**高度 */\r\n  height: number\r\n  /**上下的纵向间隔 */\r\n  intervalHeight: number\r\n  /**缩放 */\r\n  // scale: number,\r\n  /**是否是大图标 */\r\n  LargeIcon: boolean,\r\n  /**原数数据 */\r\n  uiData: {\r\n    id: number;\r\n    name: string;\r\n    fileName: string;\r\n    skeleton: string;\r\n    animationArr: string[];\r\n    distance: number[];\r\n    scale: number[]\r\n  }\r\n}\r\n\r\nexport enum GameType {\r\n  NONE = -1,\r\n  MAIN = 0,\r\n  SUBGAME1 = 1,\r\n  SUBGAME2 = 2\r\n}\r\n\r\n/**游戏类型信息 */\r\nexport type GameTypeInfo = {\r\n  /**上一局游戏 */\r\n  lastGameType: GameType\r\n  /**下一局游戏 */\r\n  currGameType: GameType\r\n  /**当前界面所处的游戏类型 */\r\n  viewGameType: GameType,\r\n  /**当前小游戏剩余次数 */\r\n  leftCount: number,\r\n  /**游戏奖励 */\r\n  freeGameAmount?: number,\r\n  /**下一个小游戏剩余次数 */\r\n  nextLeftCount?: number\r\n}\r\n\r\n/**自动运行类型 */\r\nexport enum AutoLauncherType {\r\n  NONE = 'none',\r\n  LIMIT = 'limit',\r\n  LAMIT_FAST = 'limit_fast',\r\n  TIME_500 = 't500',\r\n  TIME_100 = 't100',\r\n  TIME_50 = 't50',\r\n  TIME_20 = 't20',\r\n  TIME_10 = 't10'\r\n}\r\n\r\n/**\r\n * 自动运行数据\r\n */\r\nexport type AutoLauncherInfo = {\r\n  /**自动运行类型 */\r\n  autoLauncherType: AutoLauncherType,\r\n  /**总次数 */\r\n  totalCount: number,\r\n  /**剩余次数 */\r\n  leftCount: number\r\n}\r\n\r\n/**爆奖弹出层类型 */\r\nexport enum DialogType {\r\n  BIG_WIN = \"bigWin\",\r\n  JACKPOT = \"jackpot\",\r\n  MEGA_WIN = \"megaWin\",\r\n  SUPER_WIN = \"superWin\",\r\n  /**免费游戏进入 */\r\n  FREE_GAME_ENTRY = \"freeGameEntry\",\r\n  /**免费游戏结算 */\r\n  FREE_GAME_SETTLEMENT = \"freeGameSettlement\",\r\n}\r\n\r\n/**弹窗信息 */\r\nexport type DialogInfo = {\r\n  dialogType: DialogType,\r\n  params: any[],\r\n}\r\n\r\n/**\r\n * 子游戏动画播放信息\r\n */\r\nexport type SubGameAnimationPlayInfo = {\r\n  gameType: GameType,\r\n  param: number\r\n}\r\n\r\nexport type RollOptionType = {\r\n  /**统一的滚动速度 */\r\n  rollerSpeed: number,\r\n  /**停止的动作时间 */\r\n  stopSpeed: number,\r\n  /**单图标的高度 */\r\n  singleRollerHeight: number,\r\n  /**单图标的宽度 */\r\n  singleRollerWidth: number,\r\n  /**单图标的上下间隔 */\r\n  singleIntervalHeight: number,\r\n  /**滑槽的宽度 */\r\n  rollerWidth: number,\r\n  /**滑槽的左右间隔宽度 */\r\n  rollerIntervalWidth: number,\r\n  /**滑动方向 */\r\n  direction: DirectionType\r\n}\r\n\r\nexport enum JactpotType {\r\n  BANANA,\r\n  STRAWBERRY,\r\n  APPLE,\r\n  GRAPE,\r\n  WATERMELON,\r\n  LEVEL\r\n}\r\n\r\nexport type AuthDataVo = {\r\n  bl: number,\r\n  fixedChessboardIcon: any[],\r\n  freeGameAmount: number,\r\n  freeGameCount: number,\r\n  gameType: number,\r\n  iconStay: number,\r\n  lv: number,\r\n  memberId: string,\r\n  tableId: string,\r\n}\r\n\r\n/**图标id定义 */\r\nexport enum IconId {\r\n  SCATTER = 11,\r\n  WILD = 12,\r\n  /**甲壳虫 */\r\n  BEETLE = 13,\r\n  /**太阳神 */\r\n  SUN_GOD = 14,\r\n}\r\n\r\n/**锁定图标信息 */\r\nexport type LockIcon = {\r\n  /**图标id */\r\n  iconId: number\r\n  /**所在列的第几个位置 */\r\n  index: number,\r\n  /**图标上的金额 */\r\n  amount: number\r\n}\r\n\r\n/**下注之后获取的最后一次结果数据 */\r\nexport type RollerLaunchResult = {\r\n  \"dl\": {\r\n    \"si\": [{\r\n      /**本轮结算之后的余额 */\r\n      \"bl\": number,\r\n      /**扣除下注金额之后的余额 */\r\n      \"blab\": number,\r\n      /**转之前的余额 */\r\n      \"blb\": number,\r\n      /**气泡奖励 */\r\n      \"bubble\": number,\r\n      // /**投注金额 */\r\n      // \"cs\": 0,\r\n      \"iconStay\": number,\r\n      /**要定住的图标 */\r\n      \"fixedChessboardIcon\": [],\r\n      /**这一此转动获得的奖励 */\r\n      \"ctw\": number,\r\n      /**免费游戏的图标和位置 */\r\n      \"freegame\": { \"1\": number },\r\n      /**剩余小游戏次数 */\r\n      \"freeCount\": number,\r\n      /**免费游戏（小游戏）的得分奖励 */\r\n      \"freeGameAmount\": number,\r\n      \"gameType\": number,\r\n      /**本轮中奖的道具及该道具对应的奖励金额 */\r\n      \"lw\": { \"6\": number },\r\n      /**获得的奖励倍数 */\r\n      \"magnification\": number,\r\n      /**盈亏情况 */\r\n      \"np\": number,\r\n      /**\t5条滚轴对应的道具ID【上升或下降前】 [[9, 10, 11], [6, 7, 8], [6, 7, 8], [2, 3, 4], [7, 8, 9]] */\r\n      \"rl\": [],\r\n      /**滚轴Id */\r\n      \"rollerId\": [],\r\n      /**页面出现\"上升/下降\"图标的个数 */\r\n      \"sc\": number,\r\n      /**进入的小游戏ID，0不进入，1对应小游戏1,2对应小游戏2。 */\r\n      \"sgb\": number,\r\n      /**每条线的投注额 */\r\n      \"tb\": number,\r\n      /**本轮投注总额 */\r\n      \"tbb\": number,\r\n      /**总奖励 */\r\n      \"tw\": number,\r\n      /**中奖的道具ID以及位置，格式为：“中奖图标ID”[[滚轴id,滚轴上的图标ID]] */\r\n      \"wp\": { \"2\": [[0, 0], [1, 0], [2, 0]] }\r\n    }]\r\n  }\r\n}\r\n\r\nexport type JackpotData = {\r\n  avatarIndex: number,\r\n  nickName: string,\r\n  winningAmount: number,\r\n}\r\n\r\n/**\r\n * 获得自动次数\r\n * @param type \r\n * @returns \r\n */\r\nexport const getAutoCount = (type: AutoLauncherType) => {\r\n  if (AutoLauncherType.TIME_500 === type) {\r\n    return 500;\r\n  } else if (AutoLauncherType.TIME_100 === type) {\r\n    return 100;\r\n  } else if (AutoLauncherType.TIME_50 === type) {\r\n    return 50;\r\n  } else if (AutoLauncherType.TIME_20 === type) {\r\n    return 20;\r\n  } else if (AutoLauncherType.TIME_10 === type) {\r\n    return 10;\r\n  } else if (AutoLauncherType.NONE === type) {\r\n    return 0;\r\n  }\r\n\r\n  return -99;\r\n}\r\n\r\n/**\r\n * 是否无限运行\r\n * @returns \r\n */\r\nexport const isLimit = (autoLauncherType: AutoLauncherType) => {\r\n  return autoLauncherType === AutoLauncherType.LIMIT || autoLauncherType === AutoLauncherType.LAMIT_FAST;\r\n}\r\n\r\n/**是否小游戏切到小游戏 */\r\nexport const isSubGameToSubGame = (viewGameType: GameType, currGameType: GameType) => {\r\n  return viewGameType === GameType.SUBGAME1 && currGameType === GameType.SUBGAME2 || viewGameType === GameType.SUBGAME2 && currGameType === GameType.SUBGAME1\r\n}\r\n\r\n/**是否自动 */\r\nexport const isAuto = (autoLauncherInfo: AutoLauncherInfo, gameTypeInfo: GameTypeInfo) => {\r\n  // 小游戏中都是自动\r\n  if (gameTypeInfo.viewGameType !== GameType.MAIN && gameTypeInfo.viewGameType === gameTypeInfo.currGameType) {\r\n    return true;\r\n  }\r\n  if (autoLauncherInfo) {\r\n    if (autoLauncherInfo.autoLauncherType !== AutoLauncherType.NONE) {\r\n      if (autoLauncherInfo.totalCount === -99) {\r\n        return true;\r\n      }\r\n      return autoLauncherInfo.leftCount > 0;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n/**验证下注返回数据 */\r\nexport const verifyBetResultData = (data: RollerLaunchResult) => {\r\n  if (!data) {\r\n    return 1;\r\n  }\r\n\r\n  if (!data.dl) {\r\n    return 2;\r\n  }\r\n\r\n  if (!Object.prototype.hasOwnProperty.call(data.dl, 'si')) {\r\n    return 3;\r\n  }\r\n\r\n  if (Object.prototype.toString.call(data.dl.si) !== '[object Array]') {\r\n    return 4;\r\n  }\r\n\r\n  const si = data.dl.si as any[];\r\n  if (si.length === 0) {\r\n    return 5;\r\n  }\r\n\r\n  if (!data.dl.si[0]) {\r\n    return 6;\r\n  }\r\n\r\n  if (!Object.prototype.hasOwnProperty.call(data.dl.si[0], 'rollerId')) {\r\n    return 7;\r\n  }\r\n\r\n  if (!data.dl.si[0].rollerId) {\r\n    return 8;\r\n  }\r\n  const rollerId = data.dl.si[0].rollerId as any[];\r\n  if (rollerId.length === 0) {\r\n    return 9;\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\n/**计算下注金额 */\r\nexport const calBetAmount = (positionId: number) => {\r\n  const amountInfo = config.betSwitcher[0].amount.find(v => v.positionId === positionId);\r\n  return config.betAmount * amountInfo.value;\r\n}\r\n\r\n/**\r\n * 获得列锁定的图标列表\r\n * @param values \r\n * @param columnIndex \r\n * @returns \r\n */\r\nexport const getColumnLockIconArr = (values: any[], columnIndex: number) => {\r\n  if (!values || values.length === 0) {\r\n    return [];\r\n  }\r\n  const icons = values.filter(v => v[0] === columnIndex).map(v => {\r\n    const lockIcon: LockIcon = {\r\n      index: v[1],\r\n      iconId: v[2],\r\n      amount: v[3]\r\n    }\r\n    return lockIcon;\r\n  })\r\n\r\n  return icons ? icons : [];\r\n}\r\n\r\nexport const getBigWinConfig = (magnification: number) => {\r\n  for (let i = config.winning.length - 1; i >= 0; i--) {\r\n    const element = config.winning[i];\r\n    if (magnification >= element.minRate) {\r\n      return element;\r\n    }\r\n  }\r\n  return undefined;\r\n}"]}