{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/game/Crash_Current_rateLayer.ts"],"names":["_decorator","UITransform","Sprite","Crash_DataManager","Counter","Crash_ViewBase","ccclass","property","Crash_Current_rateLayer","numberSpriteFrame","counter","total","init","time","getInstance","getNumberSpriteFrame","_nodes","getComponent","spriteFrame","find","item","name","value","val","toFixed","setCurrentParameters","arr","toString","split","active","length","character","index","sprName","width","height","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, UITransform, Sprite,SpriteFrame } from 'cc';\r\nimport {Crash_DataManager} from \"../manager/Crash_DataManager\";\r\nimport Counter from '../utils/Counter';\r\nimport {Crash_ViewBase} from \"../BaseView/Crash_ViewBase\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CrashCurrent_rateLayer')\r\nexport class Crash_Current_rateLayer extends Crash_ViewBase {\r\n    numberSpriteFrame:SpriteFrame[]=null\r\n    private counter: Counter | null = null;\r\n    total:number=0\r\n    init(time,total) {\r\n        this.total=total\r\n        this.numberSpriteFrame=Crash_DataManager.getInstance().getNumberSpriteFrame()\r\n        this._nodes['Multiple_5'].getComponent(Sprite).spriteFrame = this.numberSpriteFrame.find(item => item.name === 'zi_hj_beishu_x');\r\n        this._nodes['Multiple_6'].getComponent(Sprite).spriteFrame = this.numberSpriteFrame.find(item => item.name === 'zi_hj_beishu_x');\r\n        this._nodes['Multiple_7'].getComponent(Sprite).spriteFrame = this.numberSpriteFrame.find(item => item.name === 'zi_hj_beishu_x');\r\n        this.counter = new Counter(time, 100,this.total, (value) => {\r\n            let val = value.toFixed(2);\r\n            Crash_DataManager.getInstance().setCurrentParameters(value.toFixed(2))\r\n            let arr = val.toString().split('');\r\n            // 根据 arr.length 设置节点的活动性\r\n            this._nodes['Multiple_6'].active = arr.length >= 5;\r\n            this._nodes['Multiple_7'].active = arr.length >= 6;\r\n            for (let index = 0; index < arr.length; index++) {\r\n                let character = arr[index];\r\n                let name = `Multiple_${index + 1}`;\r\n                let sprName = `zi_hj_beishu_${character}`;\r\n                if (character === '.') {\r\n                    sprName = 'zi_hj_beishu_dian';\r\n                    this._nodes[name].getComponent(UITransform).width = 17;\r\n                    this._nodes[name].getComponent(UITransform).height = 61;\r\n                }else {\r\n                    this._nodes[name].getComponent(UITransform).width = 42;\r\n                    this._nodes[name].getComponent(UITransform).height = 45;\r\n                }\r\n                this._nodes[name].getComponent(Sprite).spriteFrame = this.numberSpriteFrame.find(item => item.name === sprName);\r\n            }\r\n        });\r\n    }\r\n    update(deltaTime: number) {\r\n        if (this.counter) {\r\n            this.counter.update(deltaTime);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}