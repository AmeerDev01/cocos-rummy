{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dfdc/store/reducer/roller.ts"],"names":["instantiate","ActionTypes","initState","reduxAct","default","config","copy","createReducer","DFDC_BEGIN_ROLL","state","payload","_state","rollerIndex","rollData","rollerMap","rolling","direction","normalRollOption","speed","stopIconIndex","forEach","item","roundAllEnd","DFDC_INIT_ROLL","DFDC_SET_STOP_ROLL","rollerMapItem","DFDC_END_ROLLING","DFDC_SET_FLICKER","iconEffectData","iconEffect","coord","flickerCoord","DFDC_SET_ROUNT_END","DFDC_SET_ROLL_SPEED","speedBackUp","speedMultiple","i","DFDC_SET_YUANBAO_FLICKER","iconYuanBaoEffectData","DFDC_SET_FREEGAME_FLICKER","iconFreeGameEffectData"],"mappings":"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","sourcesContent":["import { instantiate } from \"cc\";\r\nimport { ActionTypes, ActionPayLoad, InitStateType, initState } from \"../actions/roller\";\r\nimport { default as reduxAct } from 'redux-act'\r\nimport config from \"../../config\";\r\nimport { copy } from \"../../../../utils/tool\";\r\n\r\nexport default reduxAct.createReducer<InitStateType>({\r\n  [ActionTypes.DFDC_BEGIN_ROLL]: (state, payload: ActionPayLoad<ActionTypes.DFDC_BEGIN_ROLL>): InitStateType => {\r\n    const _state = instantiate(state)\r\n    if (payload.rollerIndex !== -1) {\r\n      const rollData = _state.rollerMap[payload.rollerIndex]\r\n      _state.rollerMap[payload.rollerIndex].rolling = true\r\n      _state.rollerMap[payload.rollerIndex].direction = payload.direction || config.normalRollOption.direction\r\n      payload.speed && (_state.rollerMap[payload.rollerIndex].speed = payload.speed)\r\n      // _state.rollerMap[payload.rollerIndex].speed = payload.speed || (rollData.LargeRoller ? config.largeRollOption.rollerSpeed : config.normalRollOption.rollerSpeed)\r\n      // _state.rollerMap[payload.rollerIndex].speedBackUp = payload.speed || (rollData.LargeRoller ? config.largeRollOption.rollerSpeed : config.normalRollOption.rollerSpeed)\r\n      _state.rollerMap[payload.rollerIndex].stopIconIndex = -1\r\n    } else {\r\n      _state.rollerMap.forEach(item => {\r\n        item.rolling = true\r\n        item.direction = payload.direction || config.normalRollOption.direction\r\n        payload.speed && (item.speed = payload.speed)\r\n        // item.speed = payload.speed || (item.LargeRoller ? config.largeRollOption.rollerSpeed : config.normalRollOption.rollerSpeed)\r\n        // item.speedBackUp = payload.speed || (item.LargeRoller ? config.largeRollOption.rollerSpeed : config.normalRollOption.rollerSpeed)\r\n        item.stopIconIndex = -1\r\n      })\r\n    }\r\n    _state.roundAllEnd = false\r\n    return {\r\n      ..._state\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_INIT_ROLL]: (state, payload: ActionPayLoad<ActionTypes.DFDC_INIT_ROLL>): InitStateType => {\r\n    // const _state = instantiate(state)\r\n    // _state.rollerMap = payload.rollerMap\r\n    // return {\r\n    //   ..._state\r\n    // }\r\n    return {\r\n      ...state,\r\n      rollerMap: copy(payload.rollerMap)\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_STOP_ROLL]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_STOP_ROLL>): InitStateType => {\r\n    const rollerMapItem = instantiate(state.rollerMap[payload.rollerIndex])\r\n    rollerMapItem.stopIconIndex = payload.stopIconIndex\r\n    state.rollerMap[payload.rollerIndex] = rollerMapItem\r\n    // const _state = instantiate(state)\r\n    // _state.rollerMap[payload.rollerIndex].stopIconIndex = payload.stopIconIndex\r\n    return {\r\n      ...state,\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_END_ROLLING]: (state, payload: ActionPayLoad<ActionTypes.DFDC_END_ROLLING>): InitStateType => {\r\n    // const _state = instantiate(state)\r\n    state.rollerMap[payload.rollerIndex].rolling = payload.rolling\r\n    return {\r\n      ...state\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_FLICKER]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_FLICKER>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      iconEffectData: {\r\n        iconEffect: payload.iconEffect,\r\n        coord: payload.flickerCoord\r\n      }\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_ROUNT_END]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_ROUNT_END>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      roundAllEnd: payload.roundAllEnd\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_ROLL_SPEED]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_ROLL_SPEED>): InitStateType => {\r\n    const _state = instantiate(state)\r\n    if (payload.rollerIndex) {\r\n      _state.rollerMap[payload.rollerIndex].speed = _state.rollerMap[payload.rollerIndex].speedBackUp * payload.speedMultiple\r\n    } else {\r\n      _state.rollerMap.forEach(i => i.speed = i.speedBackUp * payload.speedMultiple)\r\n    }\r\n    return {\r\n      ..._state\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_YUANBAO_FLICKER]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_YUANBAO_FLICKER>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      iconYuanBaoEffectData: {\r\n        iconEffect: payload.iconEffect,\r\n        coord: payload.flickerCoord\r\n      }\r\n    }\r\n  },\r\n  [ActionTypes.DFDC_SET_FREEGAME_FLICKER]: (state, payload: ActionPayLoad<ActionTypes.DFDC_SET_FREEGAME_FLICKER>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      iconFreeGameEffectData: {\r\n        iconEffect: payload.iconEffect,\r\n        coord: payload.flickerCoord\r\n      }\r\n    }\r\n  },\r\n}, initState);\r\n"]}