{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragonTiger/ViewModel/DragonTigerUsersViewModel.ts"],"names":["_decorator","ViewModel","StoreInject","getStore","SKT_MAG_TYPE","sktInstance","gameCacheData","ccclass","property","UsersViewModel","constructor","begin","setEvent","giveGift","value","memberId","num","data","roomId","interactionId","toSitId","sendSktMessage","GIVE_GIFT","connect","inject","state","roomLeftInfoVos","history","roomRightInfoVos","userInfo","memberName","memberData","usersInfo","game","newBetData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AAGFC,MAAAA,S;AAAaC,MAAAA,W,iBAAAA,W;;AAIXC,MAAAA,Q,iBAAAA,Q;;AAGAC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,W,iBAAAA,W;;AACdC,MAAAA,a,iBAAAA,a;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;AAGxBS,MAAAA,c,WADL;AAAA;AAAA,sCAAY;AAAA;AAAA,iCAAZ,C,gBAAD,MACMA,cADN;AAAA;AAAA,kCAC0E;AAGtEC,QAAAA,WAAW,GAAG;AACV,gBAAM,mBAAN;AACD;;AAESC,QAAAA,KAAK,GAAG;AAEhB,eAAKC,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAACC,KAAD,EAAgBC,QAAhB,EAAkCC,GAAlC,KAAkD;AAC1D,kBAAMC,IAAe,GAAG;AACtBC,gBAAAA,MAAM,EAAE;AAAA;AAAA,oDAAcA,MADA;;AAEtB;AACAC,gBAAAA,aAAa,EAAEL,KAHO;;AAItB;AACAM,gBAAAA,OAAO,EAAEL,QALa;;AAMtB;AACAC,gBAAAA,GAAG,EAAEA;AAPiB,eAAxB;AASA;AAAA;AAAA,8CAAYK,cAAZ,CAA2B;AAAA;AAAA,gDAAaC,SAAxC,EAAmDL,IAAnD;AACD;AAZW,WAAd;AAeD;;AAGMM,QAAAA,OAAO,GAAG;AACf,eAAKC,MAAL,CAAY,EAAZ,EAAiBC,KAAD,IAAsB;AACpC,mBAAO;AACLC,cAAAA,eAAe,EAACD,KAAK,CAACE,OAAN,CAAcD,eADzB;AAELE,cAAAA,gBAAgB,EAACH,KAAK,CAACE,OAAN,CAAcC,gBAF1B;AAGLb,cAAAA,QAAQ,EAACU,KAAK,CAACI,QAAN,CAAed,QAHnB;AAILe,cAAAA,UAAU,EAACL,KAAK,CAACI,QAAN,CAAeC,UAJrB;AAKLC,cAAAA,UAAU,EAAEN,KAAK,CAACE,OAAN,CAAcI,UALrB;AAMLC,cAAAA,SAAS,EAAEP,KAAK,CAACQ,IAAN,CAAWD,SANjB;AAOLE,cAAAA,UAAU,EAACT,KAAK,CAACQ,IAAN,CAAWC;AAPjB,aAAP;AASD,WAVD;AAWA,iBAAO,IAAP;AACD;;AAxCmE,O;;yBA4C3DzB,c","sourcesContent":["import { _decorator, assetManager,AssetManager, Component, instantiate, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { DragonTiger_users, IProps, IEvent } from \"../components/DragonTiger_users\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport mainGameViewModel from './DragonTigerMainViewModel';\r\nimport {sourceManageSeletor} from '../index';\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from '../store';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { EffectType } from '../../../utils/NodeIOEffect';\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from '../socketConnect';\r\nimport { gameCacheData, ReqGiftSo } from '../type';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@StoreInject(getStore())\r\nclass UsersViewModel extends ViewModel<DragonTiger_users, IProps, IEvent> {\r\n\r\n\r\n    constructor() {\r\n        super('DragonTiger_users')     \r\n      }\r\n\r\n      protected begin() { \r\n\r\n        this.setEvent({\r\n          giveGift: (value: number, memberId: string, num: number) => {\r\n            const data: ReqGiftSo = {\r\n              roomId: gameCacheData.roomId,\r\n              /**道具Id */\r\n              interactionId: value,\r\n              /**获赠玩家 */\r\n              toSitId: memberId,\r\n              /** 总共需要花费的金币 */\r\n              num: num\r\n            }\r\n            sktInstance.sendSktMessage(SKT_MAG_TYPE.GIVE_GIFT, data)\r\n          }\r\n        })\r\n\r\n      }\r\n    \r\n      \r\n      public connect() {\r\n        this.inject({}, (state: StateType) => {\r\n          return {\r\n            roomLeftInfoVos:state.history.roomLeftInfoVos,\r\n            roomRightInfoVos:state.history.roomRightInfoVos,\r\n            memberId:state.userInfo.memberId,\r\n            memberName:state.userInfo.memberName,\r\n            memberData: state.history.memberData,\r\n            usersInfo: state.game.usersInfo,\r\n            newBetData:state.game.newBetData,\r\n          }\r\n        })\r\n        return this\r\n      }\r\n\r\n}\r\n\r\nexport default UsersViewModel\r\n\r\n"]}