{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealthV2/components/GodWealthV2_Header.ts"],"names":["_decorator","Label","Node","Animation","BaseComponent","global","BuyType","StepNumber","godWealthV2_Audio","mainViewModel","SoundPathDefine","StepNumberV2","ccclass","property","GodWealthV2_Header","stepNumberV2","init","propertyNode","props_Back_Home","props_Moeny_Top","props_Left_Bg","props_Right_Bg","props_Up_Settings","props_Moeny_Label","props_btn_vip","props_btn_up_menu","props_menu_panel","props_spr_menu_bg","props_btn_info","props","gold","positionId","events","quitGame","isShowMenu","start","initState","bindEvent","on","EventType","TOUCH_END","playOneShot","BTN_CLICK","openPersonCenter","openShop","TAS","openVipMain","node","getChildByName","openRule","active","getComponent","stop","play","e","preventSwallow","scheduleOnce","TOUCH_START","TOUCH_MOVE","TOUCH_CANCEL","useProps","key","value","isValid","string","Number","cur","formatAmountWithCommas","formatAmountWithLetter","stepNumber","pre","num","toFixed","setFlyNode","parent","getHomeNode","getMoenyLabelNode","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, EventTouch, Label, Node,Animation } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { godWealthV2_Audio, mainViewModel } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport config from '../config';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { calBetAmount } from '../type';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tgold: number,\r\n\tpositionId:number,\r\n}\r\nexport interface IEvent {\r\n\tquitGame: () => void,\r\n}\r\n\r\n@ccclass('GodWealthV2_Header')\r\nexport class GodWealthV2_Header extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate init = true;\r\n\tprotected propertyNode = {\r\n\t\tprops_Back_Home: new Node(),\r\n\t\tprops_Moeny_Top: new Node(),\r\n\t\tprops_Left_Bg: new Node(),\r\n\t\tprops_Right_Bg: new Node(),\r\n\t\tprops_Up_Settings: new Node(),\r\n\t\tprops_Moeny_Label: new Label(),\r\n\t\tprops_btn_vip: new Node(),\r\n\t\tprops_btn_up_menu: new Node(),\r\n\t\tprops_menu_panel: new Node(),\r\n\t\tprops_spr_menu_bg: new Node(),\r\n\t\tprops_btn_info: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tgold: 0,\r\n\t\tpositionId:0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tquitGame: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\tprivate isShowMenu = false;\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_Back_Home.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t// if (mainViewModel.footerViewModel.comp.isBtnDisable()) {\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tthis.events.quitGame();\r\n\t\t})\r\n\t\tthis.propertyNode.props_Up_Settings.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openPersonCenter(2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_Left_Bg.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_Right_Bg.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openShop(BuyType.TAS)\r\n\t\t})\r\n\t\tthis.propertyNode.props_Moeny_Top.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_vip.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openVipMain()\r\n\t\t})\r\n\t\tthis.node.getChildByName('Up_Left').on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_info.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tmainViewModel.openRule()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_menu.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgodWealthV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tif (!this.isShowMenu) {\r\n\t\t\t\tthis.isShowMenu = true;\r\n\t\t\t\tthis.propertyNode.props_menu_panel.active=!this.propertyNode.props_menu_panel.active\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).stop();\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).play();\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_END, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t\tthis.propertyNode.props_menu_panel.active = false;\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.isShowMenu = false;\r\n\t\t\t}, 0.2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_START, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_MOVE, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_CANCEL, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'gold') {\r\n\t\t\t\tif (this.init) {\r\n\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = Number(value.cur) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();\r\n\t\t\t\t\tthis.init = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = (+num.toFixed(0)) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstepNumber.setFlyNode(this.propertyNode.props_Moeny_Label.node.parent, this.propertyNode.props_Moeny_Label.node, 20)\r\n\t\t\t\t\tstepNumber.start()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getHomeNode() {\r\n\t\treturn this.propertyNode.props_Back_Home\r\n\t}\r\n\r\n\tpublic getMoenyLabelNode() {\r\n\t\treturn this.propertyNode.props_Moeny_Label\r\n\t}\r\n\r\n\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}"]}