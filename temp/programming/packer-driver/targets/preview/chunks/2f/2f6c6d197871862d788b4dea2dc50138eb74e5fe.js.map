{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth111/components/GodWealth_roller.ts"],"names":["_decorator","Mask","Node","tween","UITransform","Vec3","Widget","BaseComponent","DirectionType","IconEffectType","GameType","SMALLGAME","RollerIconViewModel","sourceManageSeletor","PrefabPathDefine","config","endRollingAction","setRollSpeed","dataTransfer","DataKeyType","ccclass","property","GodWealth_roller","displayIconList","displayIconList2","nextJoinIconIndex","lastRemoveIconIndex","compensation","lastInsertIconViewModel","timer_clear","lastLineY","rollerHeight","rollConfig","normalRollOption","baoHeItemArr","propertyNode","props_roller","props_roller2","props_roller_mask","props","rollerType","iconEffectData","iconEffect","NONE","iconEffectArr","isSpeedUp","stopMode","isSortStop","iconBaoHeEffectData","baoheIconNum","iconFreeGameEffectData","iconEffectItemData","baoheIcon","viewGameType","currGameType","freeGamePositionId","CHOSSE0","isJumpStop","events","rollStart","rollEnd","rollerIndex","start","initState","roundEnd","bindEvent","useProps","key","value","pre","direction","DOWN","cur","iconQueue","length","initRoller","rolling","comp","node","position","y","UP","getRollerHeight","creator","setState","stopIconIndex","bringForwardEnd","dispatch","FIXED_CHESSBOARD_ICON","filter","i","index","map","baoheIconIndex","isUnMount","l","item","indexOf","setProps","iconData","iconId","getPropertyNode","props_amount","active","props_baohe_label","string","clearBaoHeIcon","SUBGAME2","forEach","p","baoHeIcon","mountView","getFile","ICON2","source","appendTo","baoHeAmount","connect","x","z","viewNode","getPosition","setPosition","singleRollerHeight","push","iconFreeGameEffect","removeAllChildren","isInit","iconViewModel","joinIcon","insideCount","children","itemHeight","getComponent","height","intervalHeight","width","left","intervalWidth","right","stopSpeed","ICON","console","log","Math","random","toFixed","speed","cache","bindUI","useState","enabled","window","setInterval","iconMv","undefined","update","deltaTime","_node","queueIndex","unMount","then","singleIntervalHeight","to","easing","call","state","getRoundEnd","onDestroy","clearInterval"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Label, Mask, Node, sp, tween, UITransform, Vec3, Widget } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { RollerType, IconType, DirectionType, IconEffectType, RollOptionType, GameType, SMALLGAME } from '../type';\r\nimport RollerIconViewModel from '../viewModel/RollerIconViewModel';\r\nimport { playFastRoller, sourceManageSeletor } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport config from '../config';\r\nimport { endRollingAction, setRollSpeed } from '../store/actions/roller';\r\nimport { SkeletalPathDefine } from '../sourceDefine/skeletalDefine';\r\nimport dataTransfer, { DataKeyType } from '../dataTransfer';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\t/**本轮转动是否结束，不能使用rolling，因为rolling = false之后 ，才开始刹车停止，roundEnd是刹车完之后 */\r\n\troundEnd: boolean,\r\n}\r\n\r\nexport interface IProps {\r\n\trollerType?: RollerType,\r\n\ticonEffectData?: {\r\n\t\ticonEffect: IconEffectType,\r\n\t\ticonEffectArr?: number[]\r\n\t},\r\n\tisSpeedUp?: boolean,\r\n\tstopMode: 'index' | 'jump'\r\n\tisSortStop: boolean\r\n\ticonBaoHeEffectData?: {\r\n\t\ticonEffect: IconEffectType,\r\n\t\tbaoheIconNum?:number[],\r\n\t\ticonEffectArr?: number[]\r\n\t},\r\n\ticonFreeGameEffectData?: {\r\n\t\ticonEffect: IconEffectType,\r\n\t\ticonEffectArr?: number[]\r\n\t},\r\n\ticonEffectItemData?:{\r\n\t\ticonEffect: IconEffectType,\r\n\t\ticonEffectArr?: number[]\r\n\t},\r\n\tbaoheIcon?:number[],\r\n\tviewGameType: GameType,\r\n\tcurrGameType:GameType,\r\n\tfreeGamePositionId: SMALLGAME,\r\n\tisJumpStop: boolean,\r\n}\r\nexport interface IEvent {\r\n\trollStart?: () => void,\r\n\trollEnd?: (rollerIndex: number) => void\r\n}\r\n\r\n@ccclass('GodWealth_roller')\r\nexport class GodWealth_roller extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\t/**展示中的图标列表 */\r\n\tpublic displayIconList: RollerIconViewModel[] = []\r\n\tpublic displayIconList2: RollerIconViewModel[] = []\r\n\r\n\r\n\t/**下一个将要加入的icon */\r\n\tprivate nextJoinIconIndex: number = 0\r\n\t/**刚刚卸载掉的图标 */\r\n\tprivate lastRemoveIconIndex: number = 0\r\n\t/**删补图标时候的纵向补偿值 */\r\n\tprivate compensation: number = 0\r\n\tprivate lastInsertIconViewModel: RollerIconViewModel\r\n\tprivate timer_clear: number\r\n\tprivate lastLineY: number = 0\r\n\t// private coordList: Array<number> = []\r\n\tprivate rollerHeight: number\r\n\tprivate rollConfig: RollOptionType = config.normalRollOption\r\n\r\n\tpublic baoHeItemArr: RollerIconViewModel[] = [];\r\n\t// /**本轮转动是否结束，不能使用rolling，因为rolling = false之后 ，才开始刹车停止，roundEnd是刹车完之后 */\r\n\t// public roundEnd: boolean = true\r\n\tprotected propertyNode = {\r\n\t\tprops_roller: new Node(),\r\n\t\tprops_roller2: new Node(),\r\n\t\tprops_roller_mask:new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\trollerType: null,\r\n\t\ticonEffectData: {\r\n\t\t\ticonEffect: IconEffectType.NONE,\r\n\t\t\ticonEffectArr: []\r\n\t\t},\r\n\t\tisSpeedUp: false,\r\n\t\tstopMode: 'jump',\r\n\t\tisSortStop: false,\r\n\t\ticonBaoHeEffectData: {\r\n\t\t\ticonEffect: IconEffectType.NONE,\r\n\t\t\tbaoheIconNum:[],\r\n\t\t\ticonEffectArr: []\r\n\t\t},\r\n\t\ticonFreeGameEffectData:{\r\n\t\t\ticonEffect: IconEffectType.NONE,\r\n\t\t\ticonEffectArr: []\r\n\t\t},\r\n\t\ticonEffectItemData:{\r\n\t\t\ticonEffect: IconEffectType.NONE,\r\n\t\t\ticonEffectArr: []\r\n\t\t},\r\n\t\tbaoheIcon:[],\r\n\t\tviewGameType: GameType.NONE,\r\n\t\tcurrGameType:GameType.NONE,\r\n\t\tfreeGamePositionId: SMALLGAME.CHOSSE0,\r\n\t\tisJumpStop:false\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\trollStart: () => { },\r\n\t\trollEnd: (rollerIndex: number) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\troundEnd: true\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"rollerType\") {\r\n\r\n\t\t\tif (!value.pre) {\r\n\t\t\t\tthis.nextJoinIconIndex = this.props.rollerType.direction === DirectionType.DOWN ? (value.cur.iconQueue as IconType[]).length - 1 : 0\r\n\t\t\t\tthis.initRoller()\r\n\t\t\t} else {\r\n\t\t\t\t//更新\r\n\t\t\t\tif (value.pre.rolling === false && value.cur.rolling === true) {\r\n\t\t\t\t\twhile ((this.props.rollerType.direction === DirectionType.DOWN && this.lastInsertIconViewModel.comp.node.position.y < 0) ||\r\n\t\t\t\t\t\t(this.props.rollerType.direction === DirectionType.UP && this.lastInsertIconViewModel.comp.node.position.y > -this.getRollerHeight())) {\r\n\t\t\t\t\t\tthis.lastInsertIconViewModel = this.creator()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setState({ roundEnd: false })\r\n\t\t\t\t\t// console.log(\"this.props.isJumpStop isSortStop\",this.props.isSortStop);\r\n\t\t\t\t\t// if (!this.props.isSortStop) {\r\n\t\t\t\t\t// \tplayFastRoller()\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tthis.events.rollStart()\r\n\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (value.cur.rolling === false) {\r\n\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (value.pre.stopIconIndex !== value.cur.stopIconIndex) {\r\n\t\t\t\t\tif (this.props.stopMode === \"jump\") {\r\n\t\t\t\t\t\t// 放弃这种模式(控制跳跃的距离来实现步停)\r\n\t\t\t\t\t\tthis.bringForwardEnd(this.props.rollerType, 2)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.dispatch(setRollSpeed(this.props.isSpeedUp ? 1.5 : 1))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"iconEffectData\") {\r\n\t\t\t//displayIconList可能还没有清除掉节点已经被释放的对象\r\n\t\t\tconst baoheIconNum = dataTransfer(DataKeyType.FIXED_CHESSBOARD_ICON).filter(i => i[0] === this.props.rollerType.index).map(i => i[2]);//宝盒的金币值\r\n\t\t\tconst baoheIconIndex = dataTransfer(DataKeyType.FIXED_CHESSBOARD_ICON).filter(i => i[0] === this.props.rollerType.index).map(i => i[1]);//宝盒的下标\r\n\t\t\tthis.displayIconList = this.displayIconList.filter(i => !i.isUnMount)\r\n\t\t\tfor (let i = 0, l = this.displayIconList.length; i < l; i++) {\r\n\t\t\t\t/**index是图标从下往上的序列号 */\r\n\t\t\t\tconst index = i\r\n\t\t\t\tconst item = this.displayIconList[index]\r\n\r\n\t\t\t\tif (this.props.iconEffectData.iconEffectArr.indexOf(index) !== -1) {\r\n\t\t\t\t\titem.setProps({ iconEffect: this.props.iconEffectData.iconEffect })\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.setProps({ iconEffect: IconEffectType.NONE })\r\n\t\t\t\t}\r\n\t\t\t\tif (baoheIconIndex.indexOf(index) !== -1) {\r\n\t\t\t\t\tif (item.comp.props.iconData.iconId === 12) {\r\n\t\t\t\t\t\t(item.comp.getPropertyNode().props_amount as Node).active = true;\t\r\n\t\t\t\t\t\t(item.comp.getPropertyNode().props_baohe_label as Label).string = baoheIconNum[baoheIconIndex.indexOf(index)] + '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"baoheIcon\") {\r\n\r\n\t\t}\r\n\t\tif (key === \"iconBaoHeEffectData\") {\r\n\t\t\tthis.clearBaoHeIcon()\r\n\t\t\tthis.baoHeItemArr = [];\r\n\t\t\tif (this.props.currGameType !== GameType.SUBGAME2) { return };\r\n\t\t\tif (value.cur.iconEffectArr.length) {\r\n\t\t\t\tvalue.cur.iconEffectArr.forEach((p, i) => {\r\n\t\t\t\t\tlet index: number = 1;\r\n\t\t\t\t\tlet baoHeIcon =  new RollerIconViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.ICON2).source).appendTo(this.propertyNode.props_roller2).setProps({ baoHeAmount:value.cur.baoheIconNum[i] }).connect()\r\n\t\t\t\t\t// const iconNodeSprite = baoHeIcon.comp.getWrapNode().getChildByName(\"iconNode_sprite\");\r\n\t\t\t\t\tconst { x, y, z } = baoHeIcon.viewNode.getPosition();\r\n\t\t\t\t\tif (p === 0) {\r\n\t\t\t\t\t\tindex = 2;\r\n\t\t\t\t\t} else if (p === 2) {\r\n\t\t\t\t\t\tindex = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbaoHeIcon.viewNode.setPosition(new Vec3(x, y - index * config.normalRollOption.singleRollerHeight - 70));\r\n\t\t\t\t\t(baoHeIcon.comp.getPropertyNode().props_baohe_label as Label).string = value.cur.baoheIconNum[i] + '';\r\n\t\t\t\t\t(baoHeIcon.comp.getPropertyNode().props_amount as Node).active = true;\r\n\t\t\t\t\tthis.baoHeItemArr.push(baoHeIcon)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"iconFreeGameEffectData\") {\r\n\t\t\t//displayIconList可能还没有清除掉节点已经被释放的对象\r\n\t\t\tthis.displayIconList = this.displayIconList.filter(i => !i.isUnMount)\r\n\t\t\tfor (let i = 0, l = this.displayIconList.length; i < l; i++) {\r\n\t\t\t\t/**index是图标从下往上的序列号 */\r\n\t\t\t\tconst index = i\r\n\t\t\t\tconst item = this.displayIconList[index]\r\n\t\t\t\tif (this.props.iconFreeGameEffectData.iconEffectArr.indexOf(index) !== -1) {\r\n\t\t\t\t\titem.setProps({ iconFreeGameEffect: this.props.iconFreeGameEffectData.iconEffect })\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.setProps({ iconFreeGameEffect: IconEffectType.NONE })\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"viewGameType\") {\r\n\t\t\tthis.propertyNode.props_roller2.active = value.cur === GameType.SUBGAME2;\r\n\t\t\tthis.propertyNode.props_roller_mask.active = value.cur === GameType.SUBGAME2;\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tpublic clearBaoHeIcon() {\r\n\t\tthis.propertyNode.props_roller2.removeAllChildren()\r\n\t}\r\n\r\n\t/**主要用于初始化的时候 */\r\n\tprivate creator(isInit: boolean = false) {\r\n\t\t\t// const baoheIconNum = dataTransfer(DataKeyType.FIXED_CHESSBOARD_ICON)\r\n\t\t\t// console.log(\"baoheIconNum\",baoheIconNum);\r\n\t\t\r\n\t\tconst iconViewModel = this.joinIcon(isInit)\r\n\t\tconst insideCount = this.propertyNode.props_roller.children.filter(i => i.active).length - 1\r\n\t\tconst position = iconViewModel.comp.node.getPosition()\r\n\t\tconst iconData = this.props.rollerType.iconQueue[this.nextJoinIconIndex]\r\n\t\tconst itemHeight = iconViewModel.comp.node.getComponent(UITransform).height + iconData.intervalHeight * 2\r\n\t\tif (this.props.rollerType.direction === DirectionType.DOWN) {\r\n\t\t\ticonViewModel.comp.node.setPosition(new Vec3(position.x, -this.getRollerHeight() + (itemHeight / 2) + (insideCount * itemHeight), 1))\r\n\t\t\tif (iconViewModel.comp.props.iconData.iconId === 12) {//宝盒图标\r\n\t\t\t\t// (iconViewModel.comp.getPropertyNode().props_amount as Node).active = true;\r\n\t\t\t\t// (iconViewModel.comp.getPropertyNode().props_baohe_label as Label).string = '888';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ticonViewModel.comp.node.setPosition(new Vec3(position.x, -(insideCount * itemHeight) - (itemHeight / 2), 1))\r\n\t\t}\r\n\t\t\t\t\r\n\t\treturn iconViewModel\r\n\t}\r\n\r\n\t/**初始化 */\r\n\tprivate initRoller() {\r\n\t\t//取队列最后n个图标\t \r\n\t\tthis.rollConfig = config.normalRollOption\r\n\t\tthis.propertyNode.props_roller.getComponent(UITransform).width = this.props.rollerType.width\r\n\t\tthis.propertyNode.props_roller.getComponent(Widget).left = this.props.rollerType.intervalWidth\r\n\t\tthis.propertyNode.props_roller.getComponent(Widget).right = this.props.rollerType.intervalWidth\r\n\t\tthis.node.getComponent(UITransform).width = this.props.rollerType.width + this.props.rollerType.intervalWidth * 2\r\n\t\t// this.propertyNode.props_daqipao.active = this.props.rollerType.LargeRoller\r\n\r\n\t\tthis.lastInsertIconViewModel = this.creator(true)\r\n\t\twhile ((this.props.rollerType.direction === DirectionType.DOWN && this.lastInsertIconViewModel.comp.node.position.y < 0) ||\r\n\t\t\t(this.props.rollerType.direction === DirectionType.UP && this.lastInsertIconViewModel.comp.node.position.y > -this.getRollerHeight())) {\r\n\t\t\tthis.lastInsertIconViewModel = this.creator(true)\r\n\t\t}\r\n\t\t\r\n\t\r\n\t}\r\n\t/**提前结束,这个停止方式，应该只支持indexTrgger这种触发方案 */\r\n\tprivate bringForwardEnd(rollerType: RollerType, stopSpeed: number = 4) {\r\n\t\tif (rollerType.stopIconIndex + stopSpeed >= this.props.rollerType.iconQueue.length) {\r\n\t\t\tif (rollerType.stopIconIndex === this.props.rollerType.iconQueue.length) {\r\n\t\t\t\tthis.nextJoinIconIndex = 2;\r\n\t\t\t} else {\t\t\t\t\r\n\t\t\t\tthis.nextJoinIconIndex = this.props.rollerType.iconQueue.length - rollerType.stopIconIndex\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (rollerType.stopIconIndex === 2) {\r\n\t\t\t\tthis.nextJoinIconIndex = 4;\r\n\t\t\t} {\r\n\t\t\t\t\r\n\t\t\t\tthis.nextJoinIconIndex = rollerType.stopIconIndex + stopSpeed;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// private showBaoHeAmount() {\r\n\t// \tlet rl = dataTransfer(DataKeyType.TU_BIAO_ID);\r\n\t// \tlet arrItemArr = [];\r\n\t// \trl.forEach((arrItem, index) => arrItemArr.push(...arrItem));\r\n\r\n\t// \tconsole.log(\"arrItemArr\",arrItemArr);\r\n\t// \tarrItemArr.forEach\r\n\t// }\r\n\r\n\t/**\r\n\t * 添加图标\r\n\t * @returns \r\n\t */\r\n\tprivate joinIcon(isInit: boolean = false) {\r\n\t\t//下一个要加入的图标\r\n\t\tconst iconData = this.props.rollerType.iconQueue[this.nextJoinIconIndex];\t\r\n\t\tconst iconViewModel = new RollerIconViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.ICON).source).appendTo(this.propertyNode.props_roller).setProps({ iconData }).connect()\r\n\t\tconst position = iconViewModel.comp.node.getPosition()\r\n\t\tif ( iconData && iconData.iconId === 12 && isInit) {//this.props && this.props.viewGameType === GameType.SUBGAME2 &&\r\n\t\tconsole.log(\"iconData.iconId isInit\",iconData.iconId,isInit);\r\n\r\n\t\t\t(iconViewModel.comp.getPropertyNode().props_amount as Node).active = true;\r\n\t\t\t(iconViewModel.comp.getPropertyNode().props_baohe_label as Label).string = (Math.random() * 100).toFixed(0) + '';\r\n\t\t}\r\n\t\t//icon的高度加上上下纵向高度\r\n\t\tconst itemHeight = iconViewModel.comp.node.getComponent(UITransform).height + iconData.intervalHeight * 2\r\n\t\tif (this.props.rollerType.direction === DirectionType.DOWN) {\r\n\t\t\ticonViewModel.comp.node.setPosition(new Vec3(position.x, this.lastLineY + itemHeight - this.props.rollerType.speed, 1))\r\n\t\t\tthis.nextJoinIconIndex--\r\n\t\t\tthis.nextJoinIconIndex === -1 && (this.nextJoinIconIndex = this.props.rollerType.iconQueue.length - 1)\r\n\t\t\tthis.compensation = iconViewModel.comp.node.position.y\r\n\t\t} else {\r\n\t\t\ticonViewModel.comp.node.setPosition(new Vec3(position.x, this.lastLineY - itemHeight + this.props.rollerType.speed, 1))\r\n\t\t\tthis.nextJoinIconIndex++\r\n\t\t\tthis.nextJoinIconIndex === this.props.rollerType.iconQueue.length  && (this.nextJoinIconIndex = 0)\r\n\t\t}\r\n\t\tthis.displayIconList.push(iconViewModel)\r\n\t\treturn iconViewModel\r\n\t}\r\n\r\n\t/**\r\n\t * 滑槽高度，考虑滑槽的高度可能动态，这里动态获取，当然，也可以设置cache=true，获取上一次动态取的高度\r\n\t * @param cache 是否取上一次动态取的高度\r\n\t * @returns \r\n\t */\r\n\tprivate getRollerHeight(cache: boolean = false) {\r\n\t\tif (!cache) {\r\n\t\t\tthis.rollerHeight = this.propertyNode.props_roller.getComponent(UITransform).height\r\n\t\t}\r\n\t\treturn this.rollerHeight\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.rollerHeight = this.getRollerHeight()\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tthis.node.getComponent(Mask).enabled = !value.cur\r\n\t\t}, [\"roundEnd\"])\r\n\t\t!this.timer_clear && (this.timer_clear = window.setInterval(() => {\r\n\t\t\tthis.displayIconList = this.displayIconList.filter(iconMv => {\r\n\t\t\t\tif (iconMv.isUnMount) {\r\n\t\t\t\t\ticonMv = undefined\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t}, 200))\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\t\tif (this.props.rollerType.rolling) {\r\n\t\t\tthis.displayIconList.filter(item => item.comp.node && item.comp.node.active).forEach((iconMv, i) => {\r\n\t\t\t\tconst _node = iconMv.comp.node\r\n\t\t\t\tconst { x, y, z } = _node.getPosition()\r\n\t\t\t\tif (this.props.rollerType.direction === DirectionType.DOWN) {\r\n\t\t\t\t\t_node.setPosition(new Vec3(x, y - this.props.rollerType.speed, z))\r\n\t\t\t\t\tif (_node.getPosition().y <= -(this.getRollerHeight(true) + _node.getComponent(UITransform).height / 2)) {\r\n\t\t\t\t\t\tthis.lastLineY = this.propertyNode.props_roller.children[this.propertyNode.props_roller.children.length - 1].position.y\r\n\t\t\t\t\t\tthis.lastRemoveIconIndex = iconMv.comp.props.iconData.queueIndex\r\n\t\t\t\t\t\ticonMv.unMount().then(() => {\r\n\t\t\t\t\t\t\tif (this.props.rollerType.stopIconIndex !== this.lastInsertIconViewModel.comp.props.iconData.queueIndex) {\r\n\t\t\t\t\t\t\t\tthis.lastInsertIconViewModel = this.joinIcon()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.props.rollerType.stopIconIndex === this.lastInsertIconViewModel.comp.props.iconData.queueIndex) {\r\n\t\t\t\t\t\t// this.props.rollerType.rolling = false\r\n\t\t\t\t\t\tthis.dispatch(endRollingAction(this.props.rollerType.index, false))\r\n\t\t\t\t\t\tconst itemHeight = this.rollConfig.singleRollerHeight + (this.rollConfig.singleIntervalHeight * 2)\r\n\t\t\t\t\t\t// console.log(this.props.rollerType.index, 'delete icon')\r\n\r\n\t\t\t\t\t\ttween(iconMv.comp.node).to(this.rollConfig.stopSpeed, { position: new Vec3(x, -this.getRollerHeight(true) + (i - 0.5) * itemHeight, z) }, { easing: \"backOut\" }).call(() => {\r\n\t\t\t\t\t\t\tif (_node.getPosition().y <= -(this.getRollerHeight(true) + _node.getComponent(UITransform).height / 2)) {\r\n\t\t\t\t\t\t\t\t// 超出的要删除\r\n\t\t\t\t\t\t\t\tthis.lastLineY = this.propertyNode.props_roller.children[this.propertyNode.props_roller.children.length - 1].position.y\r\n\t\t\t\t\t\t\t\tthis.lastRemoveIconIndex = iconMv.comp.props.iconData.queueIndex\r\n\t\t\t\t\t\t\t\ticonMv.unMount().then(() => {\r\n\t\t\t\t\t\t\t\t\t//这里有一定可能存在多个溢出滑道的图标，所以可能执行2次甚至2次以上\r\n\t\t\t\t\t\t\t\t\tif (!this.state.roundEnd && this.displayIconList.length - 1 === i) {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ roundEnd: true })\r\n\t\t\t\t\t\t\t\t\t\t// this.dispatch(setRoundEnd(true))\r\n\t\t\t\t\t\t\t\t\t\t// this.roundEnd = true\r\n\t\t\t\t\t\t\t\t\t\tthis.events.rollEnd(this.props.rollerType.index)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!this.state.roundEnd) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({ roundEnd: true })\r\n\t\t\t\t\t\t\t\t\tthis.events.rollEnd(this.props.rollerType.index)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).start()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_node.setPosition(new Vec3(x, y + this.props.rollerType.speed, z))\r\n\t\t\t\t\tif (_node.getPosition().y >= _node.getComponent(UITransform).height / 2) {\r\n\t\t\t\t\t\tthis.lastLineY = this.propertyNode.props_roller.children[this.propertyNode.props_roller.children.length - 1].position.y\r\n\t\t\t\t\t\tthis.lastRemoveIconIndex = iconMv.comp.props.iconData.queueIndex\r\n\t\t\t\t\t\ticonMv.unMount().then(() => {\r\n\t\t\t\t\t\t\tif (this.props.rollerType.stopIconIndex !== this.lastInsertIconViewModel.comp.props.iconData.queueIndex) {\r\n\t\t\t\t\t\t\t\tthis.lastInsertIconViewModel = this.joinIcon()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.props.rollerType.stopIconIndex === this.lastInsertIconViewModel.comp.props.iconData.queueIndex) {\r\n\t\t\t\t\t\t// this.props.rollerType.rolling = false\r\n\t\t\t\t\t\tthis.dispatch(endRollingAction(this.props.rollerType.index, false))\r\n\t\t\t\t\t\tconst itemHeight = this.rollConfig.singleRollerHeight + (this.rollConfig.singleIntervalHeight * 2)\r\n\t\t\t\t\t\t//恢复到默认位置并对齐，第一个元素是最上面那个\r\n\t\t\t\t\t\ttween(iconMv.comp.node).to(this.rollConfig.stopSpeed, { position: new Vec3(x, -itemHeight * (i - 0.5), z) }, { easing: \"backOut\" }).call(() => {\r\n\t\t\t\t\t\t\tif (_node.getPosition().y >= _node.getComponent(UITransform).height / 2) {\r\n\t\t\t\t\t\t\t\tthis.lastLineY = this.propertyNode.props_roller.children[this.propertyNode.props_roller.children.length - 1].position.y\r\n\t\t\t\t\t\t\t\tthis.lastRemoveIconIndex = iconMv.comp.props.iconData.queueIndex\r\n\t\t\t\t\t\t\t\ticonMv.unMount().then(() => {\r\n\t\t\t\t\t\t\t\t\t// this.events.rollEnd(this.props.rollerType.index)\r\n\t\t\t\t\t\t\t\t\t//这里有一定可能存在多个溢出滑道的图标，所以可能执行2次甚至2次以上\r\n\t\t\t\t\t\t\t\t\tif (!this.state.roundEnd) {\r\n\t\t\t\t\t\t\t\t\t\t// this.dispatch(setRoundEnd(true))\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ roundEnd: true })\r\n\t\t\t\t\t\t\t\t\t\t// this.roundEnd = true\r\n\t\t\t\t\t\t\t\t\t\tthis.events.rollEnd(this.props.rollerType.index)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!this.state.roundEnd) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({ roundEnd: true })\r\n\t\t\t\t\t\t\t\t\tthis.events.rollEnd(this.props.rollerType.index)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).start()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tpublic getRoundEnd() {\r\n\t\treturn this.state.roundEnd\r\n\t}\r\n\tonDestroy() {\r\n\t\twindow.clearInterval(this.timer_clear)\r\n\t}\r\n}\r\n\r\n"]}