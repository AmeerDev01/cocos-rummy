{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/utils/Countdown.ts"],"names":["Countdown","_time","_timer","_onUpdate","_onEnd","startCountdown","options","duration","onUpdate","onEnd","setInterval","updateCountdown","stopCountdown","clearInterval"],"mappings":";;;iBAMqBA,S;;;;;;;;;;;;;yBAAAA,S,GAAN,MAAMA,SAAN,CAAgB;AAAA;AAAA,eACnBC,KADmB,GACH,CADG;AAAA,eAEnBC,MAFmB,GAEF,CAFE;AAAA,eAGnBC,SAHmB;AAAA,eAInBC,MAJmB;AAAA;;AAM3BC,QAAAA,cAAc,CAACC,OAAD,EAA4B;AACtC,eAAKL,KAAL,GAAaK,OAAO,CAACC,QAArB;AACA,eAAKJ,SAAL,GAAiBG,OAAO,CAACE,QAAzB;AACA,eAAKJ,MAAL,GAAcE,OAAO,CAACG,KAAtB;AACA,eAAKP,MAAL,GAAcQ,WAAW,CAAC,MAAM;AAC5B,iBAAKC,eAAL;AACH,WAFwB,EAEtB,GAFsB,CAAzB;AAGH;;AAEDC,QAAAA,aAAa,GAAG;AACZC,UAAAA,aAAa,CAAC,KAAKX,MAAN,CAAb;AACH;;AAEOS,QAAAA,eAAe,GAAG;AACtB,eAAKV,KAAL;;AACA,cAAI,KAAKE,SAAT,EAAoB;AAChB,iBAAKA,SAAL,CAAe,KAAKF,KAApB;AACH;;AACD,cAAI,KAAKA,KAAL,IAAc,CAAlB,EAAqB;AACjB,iBAAKW,aAAL;;AACA,gBAAI,KAAKR,MAAT,EAAiB;AACb,mBAAKA,MAAL;AACH;AACJ;AACJ;;AA9B0B,O","sourcesContent":["interface CountdownOptions {\r\n    duration: number;\r\n    onUpdate?: (time: number) => void;\r\n    onEnd?: () => void;\r\n}\r\n\r\nexport default class Countdown {\r\n    private _time: number = 0;\r\n    private _timer: number = 0;\r\n    private _onUpdate?: (time: number) => void;\r\n    private _onEnd?: () => void;\r\n\r\n    startCountdown(options: CountdownOptions) {\r\n        this._time = options.duration;\r\n        this._onUpdate = options.onUpdate;\r\n        this._onEnd = options.onEnd;\r\n        this._timer = setInterval(() => {\r\n            this.updateCountdown();\r\n        }, 100);\r\n    }\r\n\r\n    stopCountdown() {\r\n        clearInterval(this._timer);\r\n    }\r\n\r\n    private updateCountdown() {\r\n        this._time--;\r\n        if (this._onUpdate) {\r\n            this._onUpdate(this._time);\r\n        }\r\n        if (this._time <= 0) {\r\n            this.stopCountdown();\r\n            if (this._onEnd) {\r\n                this._onEnd();\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}