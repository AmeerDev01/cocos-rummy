{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/yxx/components/Yxx_BetArea.ts"],"names":["_decorator","bezier","Button","Game","game","instantiate","Label","Node","tween","UIOpacity","UITransform","Vec3","BaseComponent","global","lang","addToastAction","ToastPosition","formatNumber","getNodeByNameDeep","config","initBetData","playChip","playGetCoin","sourceManageSeletor","PrefabPathDefine","AnimationStatus","BetType","GameStatus","ChipViewModel","ccclass","property","Yxx_BetArea","initFinish","betLoading","tweens","betAreaInfo","Map","animationCount","animationTotalCount","isShowGame","isLockBet","betTimer","Set","propertyNode","props_btn_deer","props_btn_chook","props_btn_crab","props_btn_fish","props_btn_shrimp","props_btn_gourd","props_xingxing","props","newBetData","selectChip","myHead","gameStatus","newResult","animationStatus","powers","cancelBetData","events","myBet","betData","clearBet","openShop","sendGameShowEvent","eventShowCallback","start","initState","bindEvent","initAreaEvent","on","EVENT_HIDE","EVENT_SHOW","destroyCallBack","off","EventType","TOUCH_END","meBet","DEER","CHOOK","CRAB","FISH","SHRIMP","GOURD","changeBetAreaStatus","node","children","filter","v","name","startsWith","forEach","getComponent","transition","isBetStatus","Transition","SPRITE","NONE","startBetHandle","clear","updateLockBetStatus","hideWinSprite","clearAllBetAreaGlod","hideAllWinRate","getChildByName","opacity","stop","flickerWinSprite","result","Array","from","betTypes","uiOpacity","getNodeByBetType","t","repeatForever","to","push","betType","BET","gold","hallDispatch","content","write","k","palyingModule","RechangeGlod","placeStr","index","userId","isMyBet","useProps","key","value","cur","flyChip","FLY_CHIP","flyToHealerChip","KAI_GAI","CLOSE_GAI","RECHANGE_ADD_GOLD","cancelBet","getFlyChipSpeedSecond","gameOption","flyChipSpeed","getFlyChipSpeedMilliscond","isFly","isRobot","has","time","add","chipTypes","find","betAmount","betArea","getBetArea","viewModel","createChip","betId","isWinRateBet","addBetInfo","chipNode","comp","endPositon","randomBetEndPosition","uiTransform","startPosition","getBetStartPosition","setWorldPosition","convertToWorldSpaceAR","position","easing","winRateMaxIndex","flyStar","setPosition","showWinRate","updateBetAreaGlod","parent","betInfos","get","length","undefined","endPosition","getStar","starNode","active","addChild","playWinRateTween","scheduleOnce","destroy","tweenNode","endPos","playTime","callBack","startPos","startAngle","eulerAngles","fruitTween","x","y","mixY","maxY","mixX","maxX","progressX","end","current","progressY","parallel","progress","onUpdate","isValid","z","call","chips","betInfo","concat","lossAreaFlyChip","lossAnimationEnd","number","healerFlyToBetArea","flyHealerToBetAreaEnd","flyBetAreaToHead","chip","chipFlyToHead","getFlyToHeadEndPosition","getMyHeadPosition","worldPosition","unMount","isMe","seatNumber","onlineNumberPosition","headLocations","myHeadPosition","getDealerPosition","dealerPosition","prizeCount","odds","betTypeOdds","copyBetInfo","bb","arr","fill","map","clearBetAreaGlod","removeAllChildren","totalBetAmount","meTotalBetAmount","string","width","height","Math","random","chipValue","mountView","getFile","CHIP","source","appendTo","connect","setProps","set","winRate","unlockBetMinGold","recycleChip","i","splice","formatAmountWithCommas","formatAmountWithLetter","MIDDLE","InitGameModule","BetFaild","format","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, bezier, Button, Game, game, instantiate, Label, Node, Tween, tween, UIOpacity, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global, lang } from '../../../hall';\r\nimport { addToastAction, ToastPosition } from '../../../hall/store/actions/baseBoard';\r\nimport { formatNumber, getNodeByNameDeep } from '../../../utils/tool';\r\nimport config, { initBetData } from '../config';\r\nimport { playChip, playGetCoin, sourceManageSeletor } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { AnimationStatus, BetData, BetType, GameStatus, HeadType, PowerVo, Result } from '../type';\r\nimport ChipViewModel from '../viewModel/ChipViewModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype BetInfo = {\r\n\tindex: number,\r\n\tuserId: string,\r\n\tisMe: boolean,\r\n\tchips: ChipViewModel[]\r\n}\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\t/**最新的下注信息 */\r\n\tnewBetData: BetData,\r\n\t/**选择的筹码 */\r\n\tselectChip: number,\r\n\tmyHead: HeadType,\r\n\tgameStatus: GameStatus,\r\n\t/**最新结果 */\r\n\tnewResult: Result,\r\n\t/**动画状态 */\r\n\tanimationStatus: AnimationStatus,\r\n\t/**权限验证 */\r\n\tpowers: PowerVo[],\r\n\t/**取消下注信息 */\r\n\tcancelBetData: BetData,\r\n}\r\nexport interface IEvent {\r\n\tmyBet: (betData: BetData) => void\r\n\tclearBet: () => void,\r\n\topenShop: () => void,\r\n\tsendGameShowEvent: () => void,\r\n}\r\n\r\n@ccclass('Yxx_BetArea')\r\nexport class Yxx_BetArea extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate initFinish = true;\r\n\tprivate betLoading = false;\r\n\tprivate tweens: Tween<UIOpacity>[] = [];\r\n\tprivate betAreaInfo: Map<BetType, BetInfo[]> = new Map();\r\n\tprivate animationCount = 0;\r\n\tprivate animationTotalCount = 0;\r\n\tprivate isShowGame = true;\r\n\t// 是否锁定下注\r\n\tprivate isLockBet = false;\r\n\tprivate betTimer: Set<number> = new Set();\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_deer: new Node(),\r\n\t\tprops_btn_chook: new Node(),\r\n\t\tprops_btn_crab: new Node(),\r\n\t\tprops_btn_fish: new Node(),\r\n\t\tprops_btn_shrimp: new Node(),\r\n\t\tprops_btn_gourd: new Node(),\r\n\t\tprops_xingxing: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tnewBetData: null,\r\n\t\tselectChip: 1000,\r\n\t\tmyHead: null,\r\n\t\tgameStatus: null,\r\n\t\tnewResult: null,\r\n\t\tanimationStatus: null,\r\n\t\tpowers: null,\r\n\t\tcancelBetData: null\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tmyBet: (betData: BetData) => { },\r\n\t\tclearBet: () => { },\r\n\t\topenShop: () => { },\r\n\t\tsendGameShowEvent: () => { },\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t}\r\n\t}\r\n\r\n\tprivate eventShowCallback;\r\n\tprotected bindEvent(): void {\r\n\t\tthis.initAreaEvent();\r\n\r\n\t\tgame.on(Game.EVENT_HIDE, () => {\r\n\t\t\tthis.isShowGame = false;\r\n\t\t\t// console.log(\"EVENT_HIDE =========\");\r\n\t\t});\r\n\t\tthis.eventShowCallback = game.on(Game.EVENT_SHOW, () => {\r\n\t\t\tthis.isShowGame = true;\r\n\t\t\t// console.log(\"EVENT_SHOW =========\");\r\n\t\t\tthis.events.sendGameShowEvent();\r\n\t\t});\r\n\t}\r\n\r\n\tprotected destroyCallBack(): void {\r\n\t\tthis.eventShowCallback && game.off(Game.EVENT_SHOW, this.eventShowCallback);\r\n\t}\r\n\r\n\tprivate initAreaEvent(): void {\r\n\t\tthis.propertyNode.props_btn_deer.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.DEER))\r\n\t\tthis.propertyNode.props_btn_chook.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.CHOOK))\r\n\t\tthis.propertyNode.props_btn_crab.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.CRAB))\r\n\t\tthis.propertyNode.props_btn_fish.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.FISH))\r\n\t\tthis.propertyNode.props_btn_shrimp.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.SHRIMP))\r\n\t\tthis.propertyNode.props_btn_gourd.on(Node.EventType.TOUCH_END, () => this.meBet(BetType.GOURD))\r\n\t}\r\n\r\n\tprivate changeBetAreaStatus() {\r\n\t\tthis.node.children.filter(v => v.name.startsWith(\"props_btn_\")).forEach(v => {\r\n\t\t\tv.getComponent(Button).transition = this.isBetStatus() ? Button.Transition.SPRITE : Button.Transition.NONE;\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 开始下注处理\r\n\t */\r\n\tprivate startBetHandle() {\r\n\t\t// this.initFinish = true;\r\n\t\tthis.betTimer && this.betTimer.clear();\r\n\t\tthis.updateLockBetStatus();\r\n\t\t// 清理下注区域数据\r\n\t\tthis.betAreaInfo.clear();\r\n\t\t// 隐藏赢的区域\r\n\t\tthis.hideWinSprite();\r\n\t\t// 清理桌面筹码\r\n\t\tthis.clearAllBetAreaGlod();\r\n\t\tthis.hideAllWinRate();\r\n\t\t// 清理redix里的下注数据\r\n\t\tthis.events.clearBet();\r\n\t\t// this.testbet();\r\n\t}\r\n\r\n\t// private test_t = 0;\r\n\t// private testbet() {\r\n\t// \tif (this.test_t === -2) {\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \twindow.clearInterval(this.test_t);\r\n\t// \tthis.test_t = window.setInterval(() => {\r\n\t// \t\tthis.meBet(BetType.DEER);\r\n\t// \t}, 100)\r\n\t// }\r\n\r\n\t/**\r\n\t * 隐藏下注区域的高亮\r\n\t */\r\n\tprivate hideWinSprite() {\r\n\t\tthis.node.children.filter(v => v.name.startsWith(\"props_btn_\")).forEach(v => {\r\n\t\t\tv.getChildByName(\"Sprite_Win\").getComponent(UIOpacity).opacity = 0;\r\n\t\t})\r\n\r\n\t\tif (this.tweens) {\r\n\t\t\tthis.tweens.forEach(v => v.stop());\r\n\t\t\tthis.tweens = [];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 闪烁赢的区域\r\n\t */\r\n\tprivate flickerWinSprite(result: Result) {\r\n\t\tArray.from(new Set(result.betTypes)).forEach(v => {\r\n\t\t\tconst uiOpacity = this.getNodeByBetType(v).getChildByName(\"Sprite_Win\").getComponent(UIOpacity) as UIOpacity;\r\n\t\t\tconst t = tween(uiOpacity).repeatForever(tween().to(0.5, { opacity: 255 }).to(0.5, { opacity: 0 }));\r\n\t\t\tt.start();\r\n\t\t\tthis.tweens.push(t);\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getNodeByBetType(betType: BetType) {\r\n\t\tif (BetType.CHOOK === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_chook;\r\n\t\t} else if (BetType.CRAB === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_crab;\r\n\t\t} else if (BetType.DEER === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_deer;\r\n\t\t} else if (BetType.FISH === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_fish;\r\n\t\t} else if (BetType.GOURD === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_gourd;\r\n\t\t} else if (BetType.SHRIMP === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_shrimp;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isBetStatus(): boolean {\r\n\t\treturn this.props.gameStatus === GameStatus.BET;\r\n\t}\r\n\r\n\t/**\r\n\t * 自己下注\r\n\t * @param betType \r\n\t * @returns \r\n\t */\r\n\tprivate meBet(betType: BetType): void {\r\n\t\tif (!this.isBetStatus()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// console.log('meBet betLoading ---------------------', this.betLoading, this.props.myHead.gold);\r\n\r\n\t\t// 等待下注返回后才能进行下一次下注\r\n\t\tif (this.betLoading || !this.initFinish) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.isLockBet) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.props.selectChip > this.props.myHead.gold) {\r\n\t\t\t// 提示用户余额不足\r\n\t\t\tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.RechangeGlod, {}, { placeStr: \"您的余额不足请充值\" }) }));\r\n\t\t\t// 打开商店\r\n\t\t\t// this.events.openShop();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.betLoading = true;\r\n\r\n\t\tconst betData = initBetData(this.props.myHead.index, this.props.myHead.userId, betType, this.props.selectChip);\r\n\t\tbetData.isMyBet = true;\r\n\r\n\t\tthis.events.myBet(betData);\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\t// console.log(\"bet area props \", key, value);\r\n\t\tif (key === 'newBetData' && value.cur) {\r\n\t\t\tthis.flyChip(value.cur);\r\n\t\t} else if (key === 'powers') {\r\n\t\t\tthis.initFinish = true;\r\n\t\t\tthis.updateLockBetStatus();\r\n\t\t} else if (key === 'gameStatus') {\r\n\t\t\tthis.changeBetAreaStatus();\r\n\r\n\t\t\tif (value.cur === GameStatus.BET) {\r\n\t\t\t\tthis.betLoading = false;\r\n\t\t\t\tthis.startBetHandle();\r\n\t\t\t}\r\n\t\t} else if (key === 'animationStatus') {\r\n\t\t\tif (value.cur === AnimationStatus.FLY_CHIP) {\r\n\t\t\t\tthis.flyToHealerChip();\r\n\t\t\t} else if (value.cur === AnimationStatus.KAI_GAI) {\r\n\t\t\t\tthis.flickerWinSprite(this.props.newResult);\r\n\t\t\t} else if (value.cur === AnimationStatus.CLOSE_GAI) {\r\n\t\t\t\tthis.hideWinSprite();\r\n\t\t\t\tthis.betAreaInfo.clear();\r\n\t\t\t\tthis.clearAllBetAreaGlod();\r\n\t\t\t\tthis.hideAllWinRate();\r\n\t\t\t} else if (value.cur === AnimationStatus.RECHANGE_ADD_GOLD) {\r\n\t\t\t\tif (this.isBetStatus()) {\r\n\t\t\t\t\tthis.updateLockBetStatus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (key === 'cancelBetData') {\r\n\t\t\t// console.log(\"bet area props \", key, value);\r\n\t\t\t// try {\r\n\t\t\t// \tconst d = null;\r\n\t\t\t// \td.e = 0;\r\n\t\t\t// } catch (error) {\r\n\t\t\t// \tconsole.error(error);\r\n\t\t\t// }\r\n\t\t\tthis.cancelBet(value.cur);\r\n\t\t} else if (key === 'myHead' && value.cur) {\r\n\t\t\tthis.updateLockBetStatus();\r\n\t\t\tthis.betLoading = false;\r\n\t\t\t// console.log('useProps    betLoading ---------------------', this.betLoading, this.props.myHead.gold);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获得飞筹码速度（秒），一般用于 tween\r\n\t * @returns \r\n\t */\r\n\tprivate getFlyChipSpeedSecond() {\r\n\t\treturn config.gameOption.flyChipSpeed;\r\n\t}\r\n\t/**\r\n\t * 获得飞筹码速度（毫秒）\r\n\t * @returns \r\n\t */\r\n\tprivate getFlyChipSpeedMilliscond() {\r\n\t\treturn this.getFlyChipSpeedSecond() * 1000;\r\n\t}\r\n\r\n\t/**\r\n\t * 飞筹码\r\n\t * @param betData \r\n\t * @param isFly 是否飞筹码的动画，false用于刚进入初始化筹码\r\n\t */\r\n\tpublic flyChip(betData: BetData, isFly: boolean = true): void {\r\n\t\tif (betData.isMyBet) {\r\n\t\t\t// this.betLoading = false;\r\n\t\t\t// console.log(\"my flyChip\", betData);\r\n\t\t}\r\n\r\n\t\tconst isRobot = betData.userId.startsWith('170');\r\n\t\tif (!isRobot) {\r\n\t\t\tif (this.betTimer.has(betData.time)) {\r\n\t\t\t\t// console.log(`${betData.userId} 下注金额 ${betData.betAmount}, 重复了, time: ${betData.time}`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.betTimer.add(betData.time);\r\n\t\t}\r\n\r\n\t\t// 下注筹码不存在，不处理\r\n\t\tif (!config.chipTypes.find(v => v.value === betData.betAmount)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tisFly = betData.isFly;\r\n\t\tisFly = this.isShowGame;\r\n\t\tconst betArea = this.getBetArea(betData.betType).getChildByName(\"Layout_bet\");\r\n\t\tconst viewModel = this.createChip(betData.betAmount, betData.betId, betArea);\r\n\r\n\t\tconst isWinRateBet = this.isWinRateBet(betData.betType);\r\n\t\t// log(\"flyChip ===\", betData);\r\n\t\tthis.addBetInfo(betData, viewModel);\r\n\t\tconst chipNode = viewModel.comp.node;\r\n\r\n\t\tconst endPositon = this.randomBetEndPosition(betArea);\r\n\r\n\t\tif (isFly) {\r\n\t\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\t\t\tconst startPosition = this.getBetStartPosition(betData);\r\n\t\t\tchipNode.setWorldPosition(uiTransform.convertToWorldSpaceAR(startPosition));\r\n\t\t\ttween(chipNode).to(this.getFlyChipSpeedSecond(), { position: endPositon }, { easing: 'quintOut' }).start();\r\n\t\t\tif (!isWinRateBet && betData.index === config.gameOption.winRateMaxIndex) {\r\n\t\t\t\tthis.flyStar(startPosition, betData.betType);\r\n\t\t\t}\r\n\t\t\tplayChip();\r\n\t\t} else {\r\n\t\t\tchipNode.setPosition(endPositon);\r\n\r\n\t\t\tif (betData.index === config.gameOption.winRateMaxIndex) {\r\n\t\t\t\tthis.showWinRate(betData.betType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.updateBetAreaGlod(betData, betArea.parent);\r\n\t}\r\n\r\n\t/**是否大赢家位置下注 */\r\n\tprivate isWinRateBet(betType: BetType) {\r\n\t\tconst betInfos = this.betAreaInfo.get(betType);\r\n\t\tif (!betInfos || betInfos.length === 0) return undefined;\r\n\t\treturn betInfos.find(v => v.index === config.gameOption.winRateMaxIndex);\r\n\t}\r\n\r\n\t/**飞星星 */\r\n\tprivate flyStar(startPosition: Vec3, betType: BetType) {\r\n\t\tconst endPosition = this.getStar(betType).position;\r\n\t\tconst starNode = instantiate(this.propertyNode.props_xingxing);\r\n\t\tstarNode.active = true;\r\n\t\tthis.node.addChild(starNode);\r\n\t\tstarNode.setPosition(startPosition);\r\n\r\n\t\tthis.playWinRateTween(starNode, endPosition, 1, () => {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.showWinRate(betType);\r\n\t\t\t\tstarNode.destroy();\r\n\t\t\t}, 0.5);\r\n\t\t});\r\n\t}\r\n\r\n\t/**飞星星抛物线动画 */\r\n\tprivate playWinRateTween(tweenNode: Node, endPos: Vec3, playTime: number, callBack: Function) {\r\n\t\tconst startPos = tweenNode.position;\r\n\t\tconst startAngle = tweenNode.eulerAngles;\r\n\t\tconst fruitTween = tween(startPos);\r\n\r\n\t\tconst x = (startPos.x + endPos.x) / 2;\r\n\t\tconst y = (startPos.y + endPos.y) / 2;\r\n\r\n\t\tconst mixY = y + y * 0.6;\r\n\t\tconst maxY = y + y * 0.6;\r\n\t\tconst mixX = x;\r\n\t\tconst maxX = x;\r\n\t\tvar progressX = function (start, end, current, t) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tcurrent = bezier(start, mixX, maxX, end, t);\r\n\t\t\treturn current;\r\n\t\t}\r\n\t\tvar progressY = function (start, end, current, t) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tcurrent = bezier(start, mixY, maxY, end, t);\r\n\t\t\treturn current;\r\n\t\t}\r\n\r\n\t\tfruitTween.parallel(\r\n\t\t\ttween().to(playTime, { x: endPos.x }, {\r\n\t\t\t\tprogress: progressX, onUpdate: () => {\r\n\t\t\t\t\ttweenNode.isValid && tweenNode.setPosition(startPos);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttween().to(playTime, { y: endPos.y }, {\r\n\t\t\t\tprogress: progressY, onUpdate: () => {\r\n\t\t\t\t\ttweenNode.isValid && tweenNode.setPosition(startPos);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t).start();\r\n\t\ttween(startAngle).to(playTime, { z: 360 }, {\r\n\t\t\tonUpdate: () => {\r\n\t\t\t\tif (tweenNode.isValid) {\r\n\t\t\t\t\ttweenNode.eulerAngles = startAngle;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).call(() => callBack()).start();\r\n\t}\r\n\r\n\t/**\r\n\t * 筹码飞向荷官\r\n\t */\r\n\tprivate flyToHealerChip() {\r\n\t\tlet chips: ChipViewModel[] = [];\r\n\t\tthis.betAreaInfo.forEach((v, k) => {\r\n\t\t\t// 找出未中奖的区域\r\n\t\t\tif (!this.props.newResult.betTypes.find(betType => betType === k)) {\r\n\t\t\t\tv.forEach(betInfo => {\r\n\t\t\t\t\tchips = chips.concat(betInfo.chips);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.lossAreaFlyChip(chips);\r\n\t}\r\n\r\n\t// 输的区域动画飞向荷官之后结束的处理，然后是荷官飞筹码到赢的区域\r\n\tprivate lossAnimationEnd() {\r\n\t\tthis.animationCount++;\r\n\t\tif (this.animationCount < this.animationTotalCount) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.animationTotalCount = 0;\r\n\t\tthis.animationCount = 0;\r\n\r\n\t\t// log(\"lossAnimationEnd ====\");\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tthis.node.isValid && this.props.newResult && new Set(this.props.newResult.betTypes).forEach(v => {\r\n\t\t\t\tconst number = this.props.newResult.betTypes.filter(betType => betType === v).length;\r\n\t\t\t\tthis.animationTotalCount += this.healerFlyToBetArea(v, number);\r\n\t\t\t})\r\n\t\t}, 0.5)\r\n\r\n\t}\r\n\r\n\t/**荷官飞筹码到下注区域结束 */\r\n\tprivate flyHealerToBetAreaEnd() {\r\n\t\tthis.animationCount++;\r\n\t\tif (this.animationCount < this.animationTotalCount) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.animationTotalCount = 0;\r\n\t\tthis.animationCount = 0;\r\n\r\n\t\t// log(\"flyHealerToBetAreaEnd ====\");\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\t// 筹码飞向头像\r\n\t\t\tthis.flyBetAreaToHead();\r\n\t\t}, 0.5)\r\n\t}\r\n\r\n\t/**\r\n\t * 筹码下注区域飞向头像\r\n\t */\r\n\tprivate flyBetAreaToHead() {\r\n\t\tnew Set(this.props.newResult.betTypes).forEach(v => {\r\n\t\t\tconst betInfos = this.betAreaInfo.get(v);\r\n\t\t\tif (betInfos) {\r\n\t\t\t\tbetInfos.forEach(betInfo => {\r\n\t\t\t\t\tbetInfo.chips.forEach(chip => {\r\n\t\t\t\t\t\tthis.chipFlyToHead(chip, betInfo);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**筹码飞向用户头像 */\r\n\tprivate chipFlyToHead(chip: ChipViewModel, betInfo: BetInfo) {\r\n\t\tconst chipNode = chip.comp.node;\r\n\t\tconst endPositon = betInfo ? this.getFlyToHeadEndPosition(betInfo) : this.getMyHeadPosition();\r\n\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\r\n\t\ttween(chipNode).to(this.getFlyChipSpeedSecond(), { worldPosition: uiTransform.convertToWorldSpaceAR(endPositon) })\r\n\t\t\t.call(() => {\r\n\t\t\t\tchip.unMount();\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n\r\n\t/**筹码飞向头像的结束坐标 */\r\n\tprivate getFlyToHeadEndPosition(betInfo: BetInfo) {\r\n\t\tif (betInfo.isMe) {\r\n\t\t\t// 播放获得金币的音效\r\n\t\t\tplayGetCoin();\r\n\t\t\treturn this.getMyHeadPosition();\r\n\t\t}\r\n\r\n\t\tif (betInfo.index >= config.gameOption.seatNumber) {\r\n\t\t\treturn new Vec3(config.gameOption.onlineNumberPosition.x, config.gameOption.onlineNumberPosition.y);\r\n\t\t}\r\n\r\n\t\treturn new Vec3(config.headLocations[betInfo.index].x, config.headLocations[betInfo.index].y);\r\n\t}\r\n\r\n\t/**\r\n\t * 获得自己的头像位置\r\n\t * @returns \r\n\t */\r\n\tprivate getMyHeadPosition() {\r\n\t\treturn new Vec3(config.gameOption.myHeadPosition.x, config.gameOption.myHeadPosition.y);\r\n\t}\r\n\r\n\t/**\r\n\t * 输的区域飞筹码\r\n\t * @param chips \r\n\t */\r\n\tprivate lossAreaFlyChip(chips: ChipViewModel[]) {\r\n\t\tthis.animationTotalCount = chips.length;\r\n\t\tif (this.animationTotalCount === 0) {\r\n\t\t\tthis.lossAnimationEnd();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tchips.forEach(chip => {\r\n\t\t\tconst chipNode = chip.comp.node;\r\n\t\t\tconst endPositon = this.getDealerPosition();\r\n\t\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\r\n\t\t\ttween(chipNode).to(this.getFlyChipSpeedSecond(), { worldPosition: uiTransform.convertToWorldSpaceAR(endPositon) })\r\n\t\t\t\t.call(() => {\r\n\t\t\t\t\tthis.lossAnimationEnd();\r\n\t\t\t\t\tchip.unMount();\r\n\t\t\t\t})\r\n\t\t\t\t.start();\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getDealerPosition(): Vec3 {\r\n\t\treturn new Vec3(config.gameOption.dealerPosition.x, config.gameOption.dealerPosition.y);\r\n\t}\r\n\r\n\t/**\r\n\t * 荷官飞筹码到下注区域\r\n\t * @param chips \r\n\t * @param prizeCount 奖励个数 \r\n\t */\r\n\tprivate healerFlyToBetArea(betType: BetType, prizeCount: number) {\r\n\t\tconst betInfos = this.betAreaInfo.get(betType);\r\n\t\tif (!betInfos) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// log(\"healerFlyToBetArea === betInfos\", betInfos);\r\n\t\t// 获得赔率\r\n\t\tconst odds = config.betTypeOdds.find(v => v.betType === betType).odds[prizeCount - 1];\r\n\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\t\tconst betArea = this.getBetArea(betType).getChildByName(\"Layout_bet\");\r\n\t\tconst copyBetInfo = this.copyBetInfo(betInfos, betArea, odds);\r\n\r\n\t\tlet chips: ChipViewModel[] = [];\r\n\t\tcopyBetInfo.forEach(v => chips = chips.concat(v.chips));\r\n\t\t// log(\"healerFlyToBetArea === \", chips.length);\r\n\t\tchips.forEach(v => {\r\n\t\t\tconst startPosition = this.getDealerPosition();\r\n\t\t\tconst endPositon = this.randomBetEndPosition(betArea);\r\n\r\n\t\t\tconst chipNode = v.comp.node;\r\n\t\t\tchipNode.setWorldPosition(uiTransform.convertToWorldSpaceAR(startPosition));\r\n\r\n\t\t\ttween(chipNode).to(this.getFlyChipSpeedSecond(), { position: endPositon }).call(() => { this.flyHealerToBetAreaEnd() }).start();\r\n\t\t})\r\n\r\n\t\t// 把荷官赔付的筹码加入到用户下注的数组中去\r\n\t\tcopyBetInfo.forEach(v => {\r\n\t\t\tconst betInfo = betInfos.find(bb => bb.userId === v.userId);\r\n\t\t\tbetInfo.chips = betInfo.chips.concat(v.chips);\r\n\t\t})\r\n\r\n\t\treturn chips.length;\r\n\t}\r\n\r\n\tprivate copyBetInfo(betInfos: BetInfo[], parent: Node, odds: number): BetInfo[] {\r\n\t\tconst arr: BetInfo[] = [];\r\n\r\n\t\tnew Array(odds).fill(0).forEach(v => {\r\n\t\t\tbetInfos.forEach(betInfo => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tindex: betInfo.index,\r\n\t\t\t\t\tuserId: betInfo.userId,\r\n\t\t\t\t\tisMe: betInfo.isMe,\r\n\t\t\t\t\tchips: betInfo.chips.filter(chip => chip.comp.props).map(chip => this.createChip(chip.comp.props.value, chip.comp.props.betId, parent))\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tprivate clearAllBetAreaGlod() {\r\n\t\tthis.animationCount = 0;\r\n\t\tthis.animationTotalCount = 0;\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_chook);\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_crab);\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_deer);\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_fish);\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_gourd);\r\n\t\tthis.clearBetAreaGlod(this.propertyNode.props_btn_shrimp);\r\n\t}\r\n\r\n\tprivate clearBetAreaGlod(betArea: Node) {\r\n\t\tbetArea.getChildByName(\"Layout_bet\").removeAllChildren();\r\n\t\tthis.updateBetAreaGlod({\r\n\t\t\tindex: 0, userId: \"\", betAmount: 0, betType: null, betId: '', totalBetAmount: 0, meTotalBetAmount: 0\r\n\t\t}, betArea);\r\n\t}\r\n\r\n\tprivate updateBetAreaGlod(betData: BetData, betArea: Node): void {\r\n\t\tif (betData.totalBetAmount === 0) {\r\n\t\t\tgetNodeByNameDeep(\"Label_bet_all\", betArea).getComponent(Label).string = \"\";\r\n\t\t} else {\r\n\t\t\tgetNodeByNameDeep(\"Label_bet_all\", betArea).getComponent(Label).string = formatNumber(betData.totalBetAmount);\r\n\t\t}\r\n\r\n\t\tgetNodeByNameDeep(\"Label_bet_mine\", betArea).parent.active = betData.meTotalBetAmount > 0;\r\n\t\tgetNodeByNameDeep(\"Label_bet_mine\", betArea).getComponent(Label).string = formatNumber(betData.meTotalBetAmount);\r\n\t}\r\n\r\n\t/**\r\n\t * 获得下注筹码飞的开始坐标\r\n\t * @param index \r\n\t * @returns \r\n\t */\r\n\tprivate getBetStartPosition(betData: BetData): Vec3 {\r\n\t\tif (betData.isMyBet) {\r\n\t\t\treturn new Vec3(config.gameOption.myHeadPosition.x, config.gameOption.myHeadPosition.y);\r\n\t\t}\r\n\r\n\t\tif (betData.index >= config.gameOption.seatNumber) {\r\n\t\t\treturn new Vec3(config.gameOption.onlineNumberPosition.x, config.gameOption.onlineNumberPosition.y);\r\n\t\t}\r\n\r\n\t\treturn new Vec3(config.headLocations[betData.index].x, config.headLocations[betData.index].y);\r\n\t}\r\n\r\n\tprivate randomBetEndPosition(betArea: Node): Vec3 {\r\n\t\tconst uiTransform: UITransform = betArea.getComponent(UITransform);\r\n\t\tconst width = uiTransform.width * 0.5;\r\n\t\tconst height = uiTransform.height * 0.2;\r\n\t\tlet x = width / 2 - Math.random() * width;\r\n\t\tlet y = height / 2 - Math.random() * height;\r\n\r\n\t\treturn new Vec3(x, y);\r\n\t}\r\n\r\n\tprivate getBetArea(betType: BetType): Node {\r\n\t\tif (BetType.CHOOK === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_chook;\r\n\t\t} else if (BetType.CRAB === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_crab;\r\n\t\t} else if (BetType.DEER === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_deer;\r\n\t\t} else if (BetType.FISH === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_fish;\r\n\t\t} else if (BetType.GOURD === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_gourd;\r\n\t\t} else if (BetType.SHRIMP === betType) {\r\n\t\t\treturn this.propertyNode.props_btn_shrimp;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate createChip(chipValue: number, betId: string, parent: Node): ChipViewModel {\r\n\t\treturn new ChipViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.CHIP).source).appendTo(parent).connect().setProps({ value: chipValue, betId });\r\n\t}\r\n\r\n\t/**\r\n\t * 添加下注信息\r\n\t * @param betData \r\n\t * @param viewModel \r\n\t */\r\n\tprivate addBetInfo(betData: BetData, viewModel: ChipViewModel) {\r\n\t\tlet betInfos = this.betAreaInfo.get(betData.betType);\r\n\t\tif (!betInfos) {\r\n\t\t\tbetInfos = [];\r\n\t\t\tthis.betAreaInfo.set(betData.betType, betInfos);\r\n\t\t}\r\n\r\n\t\tlet betInfo = betInfos.find(v => v.userId === betData.userId);\r\n\t\tif (betInfo) {\r\n\t\t\tbetInfo.chips.push(viewModel);\r\n\t\t} else {\r\n\t\t\tbetInfos.push({\r\n\t\t\t\tindex: betData.index,\r\n\t\t\t\tuserId: betData.userId,\r\n\t\t\t\tisMe: betData.isMyBet,\r\n\t\t\t\tchips: [viewModel]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// log(\"addBetInfo : \", betData.betType, betInfos);\r\n\t}\r\n\r\n\t/**显示星星在下注区域 */\r\n\tprivate showWinRate(betType: BetType) {\r\n\t\tif (!this.node || !this.node.isValid) return;\r\n\t\tthis.getStar(betType).active = true;\r\n\t}\r\n\r\n\t/**获得星星 */\r\n\tprivate getStar(betType: BetType) {\r\n\t\treturn this.node.children.find(winRate => winRate.name.startsWith(\"props_win_rate_max_\" + betType));\r\n\t}\r\n\r\n\tprivate hideAllWinRate() {\r\n\t\tif (!this.node || !this.node.isValid) return;\r\n\t\tthis.node.children.filter(winRate => winRate.name.startsWith(\"props_win_rate_max\")).forEach(v => v.active = false);\r\n\t}\r\n\r\n\tprivate updateLockBetStatus() {\r\n\t\tif (!this.props.myHead) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLockBet = this.props.myHead.gold < config.gameOption.unlockBetMinGold;\r\n\t\tif (!this.isLockBet && this.props.powers && this.props.powers.length > 0) {\r\n\t\t\tthis.isLockBet = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate cancelBet(cancelBetData: BetData) {\r\n\t\tif (cancelBetData) {\r\n\t\t\t// window.clearInterval(this.test_t);\r\n\t\t\t// this.test_t = -2;\r\n\r\n\t\t\tlet recycleChip = false;\r\n\t\t\tconst betInfos = this.betAreaInfo.get(cancelBetData.betType);\r\n\t\t\tif (betInfos && betInfos.length > 0) {\r\n\t\t\t\tconst chips = betInfos.find(v => v.isMe).chips;\r\n\t\t\t\tfor (let i = 0; i < chips.length; i++) {\r\n\t\t\t\t\tconst chip = chips[i];\r\n\t\t\t\t\tif (chip.comp.props.value === cancelBetData.betAmount) {\r\n\t\t\t\t\t\tchips.splice(i, 1);\r\n\t\t\t\t\t\tthis.chipFlyToHead(chip, undefined);\r\n\t\t\t\t\t\trecycleChip = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (recycleChip) {\r\n\t\t\t\tconst betArea = this.getBetArea(cancelBetData.betType).getChildByName(\"Layout_bet\");\r\n\t\t\t\tthis.updateBetAreaGlod(cancelBetData, betArea.parent);\r\n\r\n\t\t\t\tconst betAmount = cancelBetData.betAmount < 10000 ? cancelBetData.betAmount.formatAmountWithCommas() : cancelBetData.betAmount.formatAmountWithLetter();\r\n\r\n\t\t\t\tglobal.hallDispatch(\r\n\t\t\t\t\taddToastAction({\r\n\t\t\t\t\t\tposition: ToastPosition.MIDDLE,\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\tlang.write(k => k.InitGameModule.BetFaild, {}, { placeStr: \"{0} 筹码下注失败\" }).format(betAmount)\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.hideWinSprite();\r\n\t\tthis.clearAllBetAreaGlod();\r\n\t\tthis.hideAllWinRate();\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}