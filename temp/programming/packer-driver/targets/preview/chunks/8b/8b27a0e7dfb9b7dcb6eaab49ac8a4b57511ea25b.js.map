{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/thor/Roller.ts"],"names":["Roller","DirectionType","constructor","rollerData","rollerQueue","viewIconArr","nextJoinIcon","rollerCreator","iconShowNum","iconSizeType","i","calculateNextJoinIcon","push","direction","DOWN","length"],"mappings":";;;8FAIqBA,M;;;;;;;;;;;;;;;;;;;;;;;;AAFZC,MAAAA,a,iBAAAA,a;;;;;;;;;yBAEYD,M,GAAN,MAAMA,MAAN,CAAa;AAC1BE,QAAAA,WAAW,CAACC,UAAD,EAAyBC,WAAzB,EAAgD;AAI3D;AAJ2D,eAKpDA,WALoD,GAK5B,EAL4B;AAAA,eAMpDD,UANoD;;AAO3D;AAP2D,eAQpDE,WARoD,GAQvB,EARuB;;AAS3D;AAT2D,eAUpDC,YAVoD;AACzD,eAAKH,UAAL,GAAkBA,UAAlB;AACA,eAAKC,WAAL,GAAmBA,WAAnB;AACD;;AAQD;AACF;AACA;AACA;AACA;AACSG,QAAAA,aAAa,CAACC,WAAD,EAAsBC,YAAtB,EAAkD;AACpE;AACA;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,WAApB,EAAiCE,CAAC,EAAlC,EAAsC;AACpC,iBAAKC,qBAAL;AACA,iBAAKN,WAAL,CAAiBO,IAAjB,CAAsB,KAAKN,YAA3B;AACD;;AACD,iBAAO,KAAKD,WAAZ;AACD;AACD;;;AACOM,QAAAA,qBAAqB,GAAG;AAC7B,cAAI,KAAKL,YAAT,EAAuB;AACrB,gBAAI,KAAKH,UAAL,CAAgBU,SAAhB,KAA8B;AAAA;AAAA,gDAAcC,IAAhD,EAAsD;AACpD,mBAAKR,YAAL;;AACA,kBAAI,KAAKA,YAAL,GAAoB,CAAxB,EAA2B;AACzB,qBAAKA,YAAL,GAAoB,KAAKF,WAAL,CAAiBW,MAAjB,GAA0B,CAA9C;AACD;AACF,aALD,MAKO;AACL,mBAAKT,YAAL;AACD;AACF,WATD,MASO;AACL,iBAAKA,YAAL,GAAoB,KAAKH,UAAL,CAAgBU,SAAhB,KAA8B;AAAA;AAAA,gDAAcC,IAA5C,GAAmD,KAAKV,WAAL,CAAiBW,MAAjB,GAA0B,CAA7E,GAAiF,CAArG;AACD;;AACD,iBAAO,KAAKT,YAAZ;AACD;;AAzCyB,O","sourcesContent":["import { instantiate } from 'cc'\r\nimport config from './config'\r\nimport { DirectionType, IconSizeType, IconType, RollerType } from './type'\r\n\r\nexport default class Roller {\r\n  constructor(rollerData: RollerType, rollerQueue: number[]) {\r\n    this.rollerData = rollerData\r\n    this.rollerQueue = rollerQueue\r\n  }\r\n  /**当前这条滑槽关联的数据 */\r\n  public rollerQueue: number[] = []\r\n  public rollerData: RollerType\r\n  /**当前滑槽中的图标 */\r\n  public viewIconArr: Array<number> = []\r\n  /**下一个要加入的图标 */\r\n  public nextJoinIcon: number\r\n  /**\r\n   * 初始化滑槽\r\n   * @param iconShowNum 需要显示多少个图标\r\n   * @param rollerData 滑槽数据RollerType\r\n   */\r\n  public rollerCreator(iconShowNum: number, iconSizeType: IconSizeType) {\r\n    // const targetQueue = iconSizeType === IconSizeType.LARGE ? config.largeIconRollerQueue : config.iconRollerQueue\r\n    // const iconSourceList = iconSizeType === IconSizeType.LARGE ? config.largeIcon : config.rollerIcon\r\n    for (let i = 0; i < iconShowNum; i++) {\r\n      this.calculateNextJoinIcon()\r\n      this.viewIconArr.push(this.nextJoinIcon)\r\n    }\r\n    return this.viewIconArr\r\n  }\r\n  /**计算下一个序号 */\r\n  public calculateNextJoinIcon() {\r\n    if (this.nextJoinIcon) {\r\n      if (this.rollerData.direction === DirectionType.DOWN) {\r\n        this.nextJoinIcon--\r\n        if (this.nextJoinIcon < 0) {\r\n          this.nextJoinIcon = this.rollerQueue.length - 1\r\n        }\r\n      } else {\r\n        this.nextJoinIcon++\r\n      }\r\n    } else {\r\n      this.nextJoinIcon = this.rollerData.direction === DirectionType.DOWN ? this.rollerQueue.length - 1 : 0\r\n    }\r\n    return this.nextJoinIcon\r\n  }\r\n}"]}