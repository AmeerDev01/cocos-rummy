{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragonTiger/components/DragonTiger_historyWin.ts"],"names":["_decorator","instantiate","Label","Layout","Node","ProgressBar","Sprite","UITransform","BaseComponent","sourceManageSeletor","SpriteFramePathDefine","ccclass","property","DragonTiger_historyWin","gameHistoryIcon","propertyNode","props_btn_history_close","props_BarBlue","props_BarYellow","props_spr_history_girdBg","props_label_dragon_p","props_label_tiger_p","props_ProgressBar","props_label_history_naga","props_label_history_harimau","props_label_history_seri","props_label_history_putaran","props_spr_icon_1","props","historyList","data","dragonNum","tigerNum","dragon","tiger","drawNum","events","onClosePanel","start","initState","bindEvent","on","EventType","TOUCH_END","useProps","key","value","getComponent","string","cur","width","length","gridParent","numbersArray","removeAllChildren","rows","cols","cellWidth","cellHeight","gridLayout","addComponent","type","Type","GRID","paddingLeft","spacingX","spacingY","startAxis","AxisDirection","HORIZONTAL","i","gameWinIcon","spriteFrame","getFile","DRAGONTIGER_HISTORY_DRAGON","source","DRAGONTIGER_HISTORY_TIGER","DRAGONTIGER_HISTORY_SERI","active","addChild","init","getChildByName","toggleCallback","event","customEventData","changeProgressBar","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AACAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,K,OAAAA,K;AACAC,MAAAA,M,OAAAA,M;AACAC,MAAAA,I,OAAAA,I;AACAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,M,OAAAA,M;AACAC,MAAAA,W,OAAAA,W;;AAEOC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,qB,iBAAAA,qB;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;wCAoBjBa,sB,WADZF,OAAO,CAAC,wBAAD,C,gBAAR,MACaE,sBADb;AAAA;AAAA,0CAKE;AAAA;AAAA;AAAA,eACQC,eADR;AAAA,eAMUC,YANV,GAMyB;AACvBC,YAAAA,uBAAuB,EAAE,IAAIZ,IAAJ,EADF;AAEvBa,YAAAA,aAAa,EAAE,IAAIb,IAAJ,EAFQ;AAGvBc,YAAAA,eAAe,EAAE,IAAId,IAAJ,EAHM;AAIvBe,YAAAA,wBAAwB,EAAE,IAAIf,IAAJ,EAJH;AAKvBgB,YAAAA,oBAAoB,EAAE,IAAIhB,IAAJ,EALC;AAMvBiB,YAAAA,mBAAmB,EAAE,IAAIjB,IAAJ,EANE;AAOvBkB,YAAAA,iBAAiB,EAAE,IAAIjB,WAAJ,EAPI;AAQvBkB,YAAAA,wBAAwB,EAAE,IAAIrB,KAAJ,EARH;AASvBsB,YAAAA,2BAA2B,EAAE,IAAItB,KAAJ,EATN;AAUvBuB,YAAAA,wBAAwB,EAAE,IAAIvB,KAAJ,EAVH;AAWvBwB,YAAAA,2BAA2B,EAAE,IAAIxB,KAAJ,EAXN;AAYvByB,YAAAA,gBAAgB,EAAC,IAAIvB,IAAJ;AAZM,WANzB;AAAA,eAqBOwB,KArBP,GAqBuB;AACrBC,YAAAA,WAAW,EAAE;AACXC,cAAAA,IAAI,EAAE,EADK;AAEXC,cAAAA,SAAS,EAAE,CAFA;AAGXC,cAAAA,QAAQ,EAAE,CAHC;AAIXC,cAAAA,MAAM,EAAE,CAJG;AAKXC,cAAAA,KAAK,EAAE,CALI;AAMXC,cAAAA,OAAO,EAAE;AANE;AADQ,WArBvB;AAAA,eAgCOC,MAhCP,GAgCwB;AACtBC,YAAAA,YAAY,EAAE,MAAM,CAAE;AADA,WAhCxB;AAAA;;AAEAC,QAAAA,KAAK,GAAG,CAEP;;AAgCSC,QAAAA,SAAS,GAAG;AACpB,iBAAO,EAAP;AACD;;AAESC,QAAAA,SAAS,GAAS;AAC1B,eAAKzB,YAAL,CAAkBC,uBAAlB,CAA0CyB,EAA1C,CACErC,IAAI,CAACsC,SAAL,CAAeC,SADjB,EAEE,MAAM;AACJ,iBAAKP,MAAL,CAAYC,YAAZ;AACD,WAJH;AAMD;;AAESO,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACnE,cAAID,GAAG,KAAK,aAAZ,EAA2B;AACzB,iBAAK9B,YAAL,CAAkBM,mBAAlB,CAAsC0B,YAAtC,CAAmD7C,KAAnD,EAA0D8C,MAA1D,GACEF,KAAK,CAACG,GAAN,CAAUf,KAAV,GAAkB,GADpB;AAEA,iBAAKnB,YAAL,CAAkBK,oBAAlB,CAAuC2B,YAAvC,CAAoD7C,KAApD,EAA2D8C,MAA3D,GACAF,KAAK,CAACG,GAAN,CAAUhB,MAAV,GAAmB,GADnB;AAEA,iBAAKlB,YAAL,CAAkBE,aAAlB,CAAgC8B,YAAhC,CAA6CxC,WAA7C,EAA0D2C,KAA1D,GACG,KAAKnC,YAAL,CAAkBO,iBAAlB,CAAoCyB,YAApC,CAAiDxC,WAAjD,EAA8D2C,KAA9D,GACDJ,KAAK,CAACG,GAAN,CAAUhB,MADV,GACmB,GAFrB;AAGA,iBAAKlB,YAAL,CAAkBQ,wBAAlB,CAA2CwB,YAA3C,CAAwD7C,KAAxD,EAA+D8C,MAA/D,GACE,UAAUF,KAAK,CAACG,GAAN,CAAUlB,SADtB;AAEA,iBAAKhB,YAAL,CAAkBS,2BAAlB,CAA8CuB,YAA9C,CAA2D7C,KAA3D,EAAkE8C,MAAlE,GACE,aAAaF,KAAK,CAACG,GAAN,CAAUjB,QADzB;AAEA,iBAAKjB,YAAL,CAAkBU,wBAAlB,CAA2CsB,YAA3C,CAAwD7C,KAAxD,EAA+D8C,MAA/D,GACE,UAAUF,KAAK,CAACG,GAAN,CAAUd,OADtB;AAEA,iBAAKpB,YAAL,CAAkBW,2BAAlB,CAA8CqB,YAA9C,CAA2D7C,KAA3D,EAAkE8C,MAAlE,GACE,aAAaF,KAAK,CAACG,GAAN,CAAUnB,IAAV,CAAeqB,MAD9B;AAEA,gBAAIC,UAAU,GAAG,KAAKrC,YAAL,CAAkBI,wBAAnC;AAEA,gBAAIkC,YAAY,GAAGP,KAAK,CAACG,GAAN,CAAUnB,IAA7B;AACA,iBAAKhB,eAAL,GAAuBb,WAAW,CAAC,KAAKc,YAAL,CAAkBY,gBAAnB,CAAlC;AACAyB,YAAAA,UAAU,CAACE,iBAAX,GApByB,CAqBzB;;AACA,gBAAIC,IAAI,GAAG,EAAX;AACA,gBAAIC,IAAI,GAAG,CAAX;AACA,gBAAIC,SAAS,GAAG,EAAhB;AACA,gBAAIC,UAAU,GAAG,EAAjB,CAzByB,CA2BzB;;AACA,gBAAIC,UAAU,GAAGP,UAAU,CAACQ,YAAX,CAAwBzD,MAAxB,CAAjB;AACAwD,YAAAA,UAAU,CAACE,IAAX,GAAkB1D,MAAM,CAAC2D,IAAP,CAAYC,IAA9B;AACAJ,YAAAA,UAAU,CAACK,WAAX,GAAuB,CAAvB;AACAL,YAAAA,UAAU,CAACM,QAAX,GAAsB,CAAtB;AACAN,YAAAA,UAAU,CAACO,QAAX,GAAsB,CAAtB;AACAP,YAAAA,UAAU,CAACQ,SAAX,GAAuBhE,MAAM,CAACiE,aAAP,CAAqBC,UAA5C,CAjCyB,CAiC+B;AAIxD;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjB,YAAY,CAACF,MAAjC,EAAyCmB,CAAC,EAA1C,EAA8C;AAE5C,kBAAIC,WAAW,GAAGtE,WAAW,CAAC,KAAKa,eAAN,CAA7B;;AAEA,kBAAIuC,YAAY,CAACiB,CAAD,CAAZ,KAAoB,CAAxB,EAA2B;AACzBC,gBAAAA,WAAW,CAACxB,YAAZ,CAAyBzC,MAAzB,EAAiCkE,WAAjC,GACE;AAAA;AAAA,kEAAsBC,OAAtB,CACE;AAAA;AAAA,oEAAsBC,0BADxB,EAEEC,MAHJ;AAID,eALD,MAKO,IAAItB,YAAY,CAACiB,CAAD,CAAZ,KAAoB,CAAxB,EAA2B;AAChCC,gBAAAA,WAAW,CAACxB,YAAZ,CAAyBzC,MAAzB,EAAiCkE,WAAjC,GACE;AAAA;AAAA,kEAAsBC,OAAtB,CACE;AAAA;AAAA,oEAAsBG,yBADxB,EAEED,MAHJ;AAID,eALM,MAKA;AACLJ,gBAAAA,WAAW,CAACxB,YAAZ,CAAyBzC,MAAzB,EAAiCkE,WAAjC,GACE;AAAA;AAAA,kEAAsBC,OAAtB,CACE;AAAA;AAAA,oEAAsBI,wBADxB,EAEEF,MAHJ;AAID;;AACDJ,cAAAA,WAAW,CAACO,MAAZ,GAAmB,IAAnB;AACA1B,cAAAA,UAAU,CAAC2B,QAAX,CAAoBR,WAApB;AAED;AAGF;AACF;;AAESS,QAAAA,IAAI,GAAE;AAEd,eAAKlE,eAAL,GAAuBb,WAAW,CAChC,KAAKc,YAAL,CAAkBI,wBAAlB,CAA2C8D,cAA3C,CACE,kBADF,CADgC,CAAlC;AAKD;;AAEDC,QAAAA,cAAc,CAACC,KAAD,EAAeC,eAAf,EAAwC,CAAE;;AAE9CC,QAAAA,iBAAiB,GAAG,CAC7B;;AAESC,QAAAA,MAAM,GAAS,CAAE;;AAE3BC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AArI5B,O","sourcesContent":["import {\r\n  _decorator,\r\n  instantiate,\r\n  Label,\r\n  Layout,\r\n  Node,\r\n  ProgressBar,\r\n  Sprite,\r\n  UITransform,\r\n} from \"cc\";\r\nimport { BaseComponent } from \"../../../base/BaseComponent\";\r\nimport { initToggle } from \"../../../utils/tool\";\r\nimport { sourceManageSeletor } from \"../index\";\r\nimport { SpriteFramePathDefine } from \"../sourceDefine/spriteDefine\";\r\nimport { SKT_MAG_TYPE, sktMsgListener } from \"../socketConnect\";\r\nimport { setHistoryListAction } from \"../store/actions/history\";\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport type History = {\r\n  data: number[];\r\n  dragonNum: number;\r\n  tigerNum: number;\r\n  dragon: number;\r\n  tiger: number;\r\n  drawNum: number;\r\n};\r\nexport interface IState {}\r\n\r\nexport interface IProps {\r\n  historyList: History;\r\n}\r\nexport interface IEvent {\r\n  onClosePanel: () => void;\r\n}\r\n\r\n@ccclass(\"DragonTiger_historyWin\")\r\nexport class DragonTiger_historyWin extends BaseComponent<\r\n  IState,\r\n  IProps,\r\n  IEvent\r\n> {\r\n  private gameHistoryIcon:Node;\r\n  start() {\r\n \r\n  }\r\n\r\n  protected propertyNode = {\r\n    props_btn_history_close: new Node(),\r\n    props_BarBlue: new Node(),\r\n    props_BarYellow: new Node(),\r\n    props_spr_history_girdBg: new Node(),\r\n    props_label_dragon_p: new Node(),\r\n    props_label_tiger_p: new Node(),\r\n    props_ProgressBar: new ProgressBar(),\r\n    props_label_history_naga: new Label(),\r\n    props_label_history_harimau: new Label(),\r\n    props_label_history_seri: new Label(),\r\n    props_label_history_putaran: new Label(),\r\n    props_spr_icon_1:new Node(),\r\n  };\r\n\r\n  public props: IProps = {\r\n    historyList: {\r\n      data: [],\r\n      dragonNum: 0,\r\n      tigerNum: 0,\r\n      dragon: 0,\r\n      tiger: 0,\r\n      drawNum: 0,\r\n    },\r\n  };\r\n\r\n  public events: IEvent = {\r\n    onClosePanel: () => {},\r\n  };\r\n\r\n  protected initState() {\r\n    return {};\r\n  }\r\n\r\n  protected bindEvent(): void {\r\n    this.propertyNode.props_btn_history_close.on(\r\n      Node.EventType.TOUCH_END,\r\n      () => {\r\n        this.events.onClosePanel();\r\n      }\r\n    );\r\n  }\r\n\r\n  protected useProps(key: keyof IProps, value: { pre: any; cur: any }) {\r\n    if (key === \"historyList\") {\r\n      this.propertyNode.props_label_tiger_p.getComponent(Label).string =\r\n        value.cur.tiger + \"%\";\r\n      this.propertyNode.props_label_dragon_p.getComponent(Label).string =\r\n      value.cur.dragon + \"%\";\r\n      this.propertyNode.props_BarBlue.getComponent(UITransform).width =\r\n        (this.propertyNode.props_ProgressBar.getComponent(UITransform).width *\r\n        value.cur.dragon) /100;\r\n      this.propertyNode.props_label_history_naga.getComponent(Label).string =\r\n        \"naga:\" + value.cur.dragonNum;\r\n      this.propertyNode.props_label_history_harimau.getComponent(Label).string =\r\n        \"harimau:\" + value.cur.tigerNum;\r\n      this.propertyNode.props_label_history_seri.getComponent(Label).string =\r\n        \"seri:\" + value.cur.drawNum;\r\n      this.propertyNode.props_label_history_putaran.getComponent(Label).string =\r\n        \"Putaran:\" + value.cur.data.length;\r\n      let gridParent = this.propertyNode.props_spr_history_girdBg;\r\n     \r\n      let numbersArray = value.cur.data\r\n      this.gameHistoryIcon = instantiate(this.propertyNode.props_spr_icon_1);\r\n      gridParent.removeAllChildren()\r\n      // gridParent.getComponent(Layout).destroy()\r\n      let rows = 21;\r\n      let cols = 5;\r\n      let cellWidth = 45;\r\n      let cellHeight = 44;\r\n\r\n      // 设置网格布局\r\n      let gridLayout = gridParent.addComponent(Layout);\r\n      gridLayout.type = Layout.Type.GRID;\r\n      gridLayout.paddingLeft=2\r\n      gridLayout.spacingX = 2;\r\n      gridLayout.spacingY = 3;\r\n      gridLayout.startAxis = Layout.AxisDirection.HORIZONTAL; // 从左到右排列\r\n\r\n      \r\n     \r\n      // 循环遍历数字数组，创建并添加子节点\r\n      for (let i = 0; i < numbersArray.length; i++) {\r\n      \r\n        let gameWinIcon = instantiate(this.gameHistoryIcon);\r\n\r\n        if (numbersArray[i] === 1) {\r\n          gameWinIcon.getComponent(Sprite).spriteFrame =\r\n            sourceManageSeletor().getFile(\r\n              SpriteFramePathDefine.DRAGONTIGER_HISTORY_DRAGON\r\n            ).source;\r\n        } else if (numbersArray[i] === 2) {\r\n          gameWinIcon.getComponent(Sprite).spriteFrame =\r\n            sourceManageSeletor().getFile(\r\n              SpriteFramePathDefine.DRAGONTIGER_HISTORY_TIGER\r\n            ).source;\r\n        } else {\r\n          gameWinIcon.getComponent(Sprite).spriteFrame =\r\n            sourceManageSeletor().getFile(\r\n              SpriteFramePathDefine.DRAGONTIGER_HISTORY_SERI\r\n            ).source;\r\n        }\r\n        gameWinIcon.active=true\r\n        gridParent.addChild(gameWinIcon);\r\n\r\n      }\r\n\r\n     \r\n    }\r\n  }\r\n\r\n  protected init(){\r\n\r\n    this.gameHistoryIcon = instantiate(\r\n      this.propertyNode.props_spr_history_girdBg.getChildByName(\r\n        \"props_spr_icon_1\"\r\n      )\r\n    );\r\n  }\r\n\r\n  toggleCallback(event: Event, customEventData: string) {}\r\n\r\n  protected changeProgressBar() {\r\n  }\r\n\r\n  protected bindUI(): void {}\r\n\r\n  update(deltaTime: number) {}\r\n}\r\n"]}