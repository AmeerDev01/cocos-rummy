{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_Withdraw/Hall_WithdrawalPanel.ts"],"names":["_decorator","assetManager","Button","EditBox","instantiate","Label","Node","ScrollView","Sprite","SpriteFrame","tween","UITransform","BaseComponent","maskBankCardNumber","InputValidator","addToastAction","TaskScheduler","Task","lang","ModalBox","Guide","config","ccclass","property","Hall_WithdrawalPanel","taskScheduler","taskScheduler2","propertyNode","props_btn_tips_close","props_label_saldo_num","props_btn_withdrawal_ikat","props_EditBox_jumlah","props_btn_withdrawal_subtract","props_btn_withdrawal_add","props_btn_withdrawal_max","props_btn_withdrawal_kirim","props_no_bank_choose","props_had_bank_choose","props_btn_withdrawal_catatan","props_spr_one","props_no_message","props_scrollView_withDraw","props_layout_remind_lakt","props_layout_remind_jumlah","props_layout_remind_kirim","props_btn_newHelp","props","memberAssetGoldPieces","withdrawBankChannelChoose","validFlowingWater","events","onClosePanel","openWithdrawBank","trueToWithdraw","amount","openWithdrawBill","start","initState","bindEvent","on","EventType","TOUCH_END","amountStr","getComponent","string","grayscale","amount2","begin","isDecimal","done","dispatch","content","write","k","HallModule","HallWithdrawalNoEnough","placeStr","limitDown","limitUp","HallWithdrawalglod","down","formatAmountWithCommas","up","HallWithdrawalMessage","node","fristLogin","main","beginGuide","useProps","key","value","cur","active","getChildByName","accountNumber","loadRemote","iconMax","err","asset","spriteFrame","createWithImage","isFlowingWater","addWithdrawBill","dataList","isFrist","children","length","slice","forEach","item","creatorNodeItem","addChild","setSiblingIndex","data","index","joinqQueue","l","destroy","height","to","scheduleOnce","transferTime","nickName","orderMoney","elapsedTime","destroyCallBack","stopQueue","bindUI","Instance","isShow","show","withdrawal","flllowWaterNoLevel","type","guide_1","guide_2","guide_3","bindDone","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, assetManager, Button, Component, EditBox, ImageAsset, instantiate, Label, Node, ScrollView, Sprite, SpriteFrame, tween, UITransform } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { WithdrawBankChannelType } from '../../store/actions/withdraw';\r\nimport { bundleHall } from '../../index';\r\nimport { maskBankCardNumber } from '../../../utils/tool';\r\nimport InputValidator from '../../../utils/InputValidator';\r\nimport { addToastAction } from '../../store/actions/baseBoard';\r\nimport TaskScheduler, { Task } from '../../../utils/TaskScheduler';\r\nimport { lang } from '../../index';\r\nimport ModalBox from '../../../common/ModalBox';\r\nimport Guide from '../../../utils/Guide';\r\nimport { config } from '../../config';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tmemberAssetGoldPieces: number\r\n\twithdrawBankChannelChoose: WithdrawBankChannelType,\r\n\tvalidFlowingWater: number\r\n}\r\nexport interface IEvent {\r\n\tonClosePanel?: () => void\r\n\t/**打开提现渠道 */\r\n\topenWithdrawBank?: () => void\r\n\t/**确认提现 */\r\n\ttrueToWithdraw?: (amount: number) => void\r\n\t/**打开提现流水 */\r\n\topenWithdrawBill?: () => void\r\n}\r\n\r\nexport type WithDrawHistoryType = {\r\n\telapsedTime: string,\r\n\tnickName: string,\r\n\torderMoney: number,\r\n\torderStatus: number,\r\n\ttransferTime: string\r\n}\r\n\r\n@ccclass('Hall_WithdrawalPanel')\r\nexport class Hall_WithdrawalPanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\tprivate taskScheduler: TaskScheduler = new TaskScheduler()\r\n\tprivate taskScheduler2: TaskScheduler = new TaskScheduler()\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_tips_close: new Node(),\r\n\t\t/**用户余额 */\r\n\t\tprops_label_saldo_num: new Node(),\r\n\t\t/**选择提现渠道按钮 */\r\n\t\tprops_btn_withdrawal_ikat: new Node(),\r\n\t\t/**提现金额 */\r\n\t\tprops_EditBox_jumlah: new Node(),\r\n\t\t/**减金额 */\r\n\t\tprops_btn_withdrawal_subtract: new Node(),\r\n\t\t/**加金额 */\r\n\t\tprops_btn_withdrawal_add: new Node(),\r\n\t\t/**最大金额 */\r\n\t\tprops_btn_withdrawal_max: new Node(),\r\n\t\t/**Tips */\r\n\t\tprops_btn_withdrawal_kirim: new Node(),\r\n\t\t/**未选择银行卡 */\r\n\t\tprops_no_bank_choose: new Node(),\r\n\t\t/**已选择银行卡 */\r\n\t\tprops_had_bank_choose: new Node(),\r\n\t\t/**打开流水按钮 */\r\n\t\tprops_btn_withdrawal_catatan: new Node(),\r\n\t\t/**末班样式 */\r\n\t\tprops_spr_one: new Node(),\r\n\t\t/**无数据节点 */\r\n\t\tprops_no_message: new Node(),\r\n\t\t/**提现记录 */\r\n\t\tprops_scrollView_withDraw: new Node(),\r\n\r\n\t\t/**引导界面1 */\r\n\t\tprops_layout_remind_lakt: new Node(),\r\n\t\t/**引导界面1 */\r\n\t\tprops_layout_remind_jumlah: new Node(),\r\n\t\t/**引导界面1 */\r\n\t\tprops_layout_remind_kirim: new Node(),\r\n\t\t/**手动打开引导 */\r\n\t\tprops_btn_newHelp: new Button()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tmemberAssetGoldPieces: 0,\r\n\t\twithdrawBankChannelChoose: null,\r\n\t\tvalidFlowingWater: -1\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClosePanel: () => { },\r\n\t\topenWithdrawBank: () => { },\r\n\t\ttrueToWithdraw: (amount: number) => { },\r\n\t\topenWithdrawBill: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onClosePanel()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_ikat.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.openWithdrawBank()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_subtract.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst amountStr = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string\r\n\t\t\tconst amount = amountStr === \"\" ? 0 : +amountStr\r\n\t\t\tif (amount <= 100) {\r\n\t\t\t\tthis.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = 0 + ''\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = (amount - 10000) + ''\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_add.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst amountStr = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string\r\n\t\t\tconst amount = amountStr === \"\" ? 0 : +amountStr\r\n\t\t\tif (amount + 100 > this.props.memberAssetGoldPieces) {\r\n\t\t\t\tthis.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = this.props.memberAssetGoldPieces + ''\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = (amount + 10000) + ''\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_max.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = this.props.memberAssetGoldPieces + ''\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_catatan.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.openWithdrawBill()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_withdrawal_kirim.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.propertyNode.props_btn_withdrawal_kirim.getComponent(Sprite).grayscale) return\r\n\t\t\tif (this.props.withdrawBankChannelChoose) {\r\n\t\t\t\tconst amount2 = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string;\r\n\t\t\t\tnew InputValidator().begin().isDecimal(amount2, false).done(() => {\r\n\t\t\t\t\tif (+amount2 > this.props.memberAssetGoldPieces) {\r\n\t\t\t\t\t\tthis.dispatch(addToastAction({ content: lang.write(k => k.HallModule.HallWithdrawalNoEnough, {}, { placeStr: \"对不起，您的可提现金额不足~\" }) }))\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (+amount2 < this.props.withdrawBankChannelChoose.limitDown || +amount2 > this.props.withdrawBankChannelChoose.limitUp) {\r\n\t\t\t\t\t\tthis.dispatch(addToastAction({\r\n\t\t\t\t\t\t\tcontent: lang.write(k => k.HallModule.HallWithdrawalglod, {\r\n\t\t\t\t\t\t\t\tdown: this.props.withdrawBankChannelChoose.limitDown.formatAmountWithCommas(),\r\n\t\t\t\t\t\t\t\tup: this.props.withdrawBankChannelChoose.limitUp.formatAmountWithCommas()\r\n\t\t\t\t\t\t\t}, { placeStr: \"对不起，提现金额应在{down}~{up}之间\" })\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.events.trueToWithdraw(+amount2)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.dispatch(addToastAction({ content: lang.write(k => k.HallModule.HallWithdrawalMessage, {}, { placeStr: \"请选择提现到账的银行信息~\" }) }))\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_newHelp.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconfig.fristLogin = { main: true }\r\n\t\t\tthis.beginGuide()\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tkey === \"memberAssetGoldPieces\" && (this.propertyNode.props_label_saldo_num.getComponent(Label).string = value.cur.formatAmountWithCommas())\r\n\t\tif (key === \"withdrawBankChannelChoose\") {\r\n\t\t\tconst cur = value.cur as WithdrawBankChannelType\r\n\t\t\tthis.propertyNode.props_no_bank_choose.active = false\r\n\t\t\tthis.propertyNode.props_had_bank_choose.active = true\r\n\t\t\tthis.propertyNode.props_had_bank_choose.getChildByName(\"account_number\").getComponent(Label).string = maskBankCardNumber(cur.accountNumber, 3)\r\n\t\t\t// bundleHall.load(`withdrawal/resource/icon_withdrawal_${cur.name.toLocaleLowerCase()}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t// \t!err && (this.propertyNode.props_had_bank_choose.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = sp)\r\n\t\t\t// })\r\n\t\t\tassetManager.loadRemote(this.props.withdrawBankChannelChoose.iconMax, (err, asset: ImageAsset) => {\r\n\t\t\t\tif (this.propertyNode && !err) {\r\n\t\t\t\t\tthis.propertyNode.props_had_bank_choose.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (key === \"validFlowingWater\") {\r\n\t\t\tthis.isFlowingWater()\r\n\t\t\t!(this.propertyNode.props_btn_withdrawal_kirim as Node).getComponent(Sprite).grayscale && this.beginGuide()\r\n\t\t}\r\n\t}\r\n\t/**添加流水 */\r\n\tpublic addWithdrawBill(dataList: WithDrawHistoryType[]) {\r\n\t\tif (!this.propertyNode) return\r\n\t\tconst isFrist: boolean = this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children.length ? true : false\r\n\t\tthis.propertyNode.props_no_message.active = false\r\n\t\tif (isFrist) {\r\n\t\t\t//先整几条进去\r\n\t\t\tdataList.slice(0, 5).forEach((item) => {\r\n\t\t\t\tconst node = this.creatorNodeItem(item)\r\n\t\t\t\tthis.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.addChild(node)\r\n\t\t\t\tnode.setSiblingIndex(0)\r\n\t\t\t})\r\n\t\t}\r\n\t\tdataList.forEach((data, index) => {\r\n\t\t\tif (isFrist && index < 5) return\r\n\t\t\tthis.taskScheduler.joinqQueue(new Task((done) => {\r\n\t\t\t\tconst l = this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children.length\r\n\t\t\t\tif (l > 10) {\r\n\t\t\t\t\tthis.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children[l - 3].destroy()\r\n\t\t\t\t}\r\n\t\t\t\tconst node = this.creatorNodeItem(data)\r\n\t\t\t\tthis.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.addChild(node)\r\n\t\t\t\tnode.getComponent(UITransform).height = 0\r\n\t\t\t\ttween(node.getComponent(UITransform)).to(0.1, { height: 120 }).start()\r\n\t\t\t\tnode.setSiblingIndex(0)\r\n\t\t\t\tthis.scheduleOnce(() => done(), 1.5)\r\n\t\t\t}))\r\n\t\t})\r\n\t}\r\n\r\n\tprivate creatorNodeItem(data: WithDrawHistoryType) {\r\n\t\tconst node = instantiate(this.propertyNode.props_spr_one)\r\n\t\tnode.active = true\r\n\t\tnode.getChildByName(\"label_time\").getComponent(Label).string = data.transferTime\r\n\t\tnode.getChildByName(\"label_name\").getComponent(Label).string = data.nickName\r\n\t\tnode.getChildByName(\"label_menarik\").getComponent(Label).string = data.orderMoney.formatAmountWithCommas() + ' RP'\r\n\t\tnode.getChildByName(\"label_waktu\").getComponent(Label).string = data.elapsedTime\r\n\t\treturn node\r\n\t}\r\n\r\n\tprotected destroyCallBack(): void {\r\n\t\tthis.taskScheduler.stopQueue(false)\r\n\t\tthis.taskScheduler2.stopQueue(false)\r\n\t}\r\n\tprotected bindUI(): void {\r\n\t\t// 第二次打开，就得看这个了\r\n\t\tthis.isFlowingWater()\r\n\t}\r\n\r\n\tprivate isFlowingWater() {\r\n\t\tif (this.props.validFlowingWater > 0) {\r\n\t\t\t!ModalBox.Instance().isShow && ModalBox.Instance().show({ content: lang.write(k => k.withdrawal.flllowWaterNoLevel, {}, { placeStr: \"抱歉，你的投注额未达到提现标准！\" }), type: \"Prompt\" },\r\n\t\t\t\t() => true);\r\n\t\t\t(this.propertyNode.props_btn_withdrawal_kirim as Node).getComponent(Sprite).grayscale = true\r\n\t\t} else {\r\n\t\t\t(this.propertyNode.props_btn_withdrawal_kirim as Node).getComponent(Sprite).grayscale = false\r\n\t\t}\r\n\t}\r\n\r\n\tpublic beginGuide() {\r\n\t\tif (config.fristLogin.main && !config.fristLogin['hasShow_1']) {\r\n\t\t\t//标明这里已经显示了\r\n\t\t\tconfig.fristLogin['hasShow_1'] = true\r\n\t\t\tconst guide_1 = new Guide(this.propertyNode.props_btn_withdrawal_ikat, this.propertyNode.props_layout_remind_lakt)\r\n\t\t\tconst guide_2 = new Guide(this.propertyNode.props_EditBox_jumlah, this.propertyNode.props_layout_remind_jumlah)\r\n\t\t\tconst guide_3 = new Guide(this.propertyNode.props_btn_withdrawal_kirim, this.propertyNode.props_layout_remind_kirim)\r\n\t\t\t// this.taskScheduler.stopQueue(false)\r\n\t\t\tthis.taskScheduler2.joinqQueue(new Task((done) => {\r\n\t\t\t\tguide_1.begin().bindDone(() => done())\r\n\t\t\t})).joinqQueue(new Task((done) => {\r\n\t\t\t\tguide_2.begin().bindDone(() => done())\r\n\t\t\t})).joinqQueue(new Task((done) => {\r\n\t\t\t\tguide_3.begin().bindDone(() => done())\r\n\t\t\t}))\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}