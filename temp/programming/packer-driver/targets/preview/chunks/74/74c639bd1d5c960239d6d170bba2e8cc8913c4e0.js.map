{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/thorV2/components/ThorV2_Main.ts"],"names":["_decorator","Animation","Button","instantiate","Label","Node","ScrollView","sp","Sprite","Tween","tween","UIOpacity","UITransform","Vec3","BaseComponent","changeGame","updateFreeGameOdds","updateGameMode","updateGold","updateSubGameWinloss","updateWinloss","calBetAmount","GameModeType","GameType","RollerStatus","updateRollerStatus","thorv2_Audio","mainViewModel","sourceManageSeletor","SoundPathDefine","StepNumber","config","cacheData","ccclass","property","ThorV2_Main","props_thorSk","props_shandianSk","props_transitionSk","contentItemInitHeight","winBoxAnimation","kaiguanNodeOriginPos","kaiguanNodeMovePos","propsLabelRateOriginPos","props_label_gold_animation","props_label_rate_animation","winOdds","isAddRateAnimationEnd","propertyNode","props_action_bar","props_top","props_main_panel","props_smallGame_panel","props_spr_MainRoller_list","props_content","props_item","props_ScrollView_note","props_thor","props_shandian","props_spr_tools_rate","props_btn_rate","props_btn_olpn_kaiguan","props_spr_tools_beli","props_spr_win_box","props_sklekton_lightning","props_label_beil","props_label_rateNum","props_label_rate","props_label_gold","props_label_rate_small","props_label_sg_num","props","betDropDownlist","positionId","gold","gameTypeInfo","lastGameType","MAIN","currGameType","viewGameType","leftCount","subGameAnimationPlayInfo","jackpotDatas","jackpotTotalAmount","autoLauncherInfo","winIconDataItem","rollerStatus","END","playThorAnimation","playWinOddsAnimation","winloss","subGameWinloss","betAmount","gameModeType","normal","freeGameOdds","events","onSendBet","onOpenBuyMiniPanel","start","initState","getActionBarNode","getTopNode","bindEvent","setCompleteListener","e","animation","name","setAnimation","node","active","clearTracks","subGameAnimationEndHandle","on","EventType","FINISHED","string","getComponent","opacity","params","length","done","CLICK","buyToWin","playOneShot","BUY_RATE_BTN_CLICK","dispatch","BUY_FREE_BTN","play","odds","type","updateEndStatus","isUpdateGold","rollerLaunchResult","si","dl","balanceAfterSettlement","scheduleOnce","getRollerPanel","useProps","key","value","isValid","cur","playSubGameAnimation","changeGameType","RUNNING","removeWinIconItem","changeRollerStatusHandle","addWinIconItem","playAddOddsAnimation","updateGameModeType","updateFreeGameOddsLabel","updateFreeAmount","gameType","isMainGame","isChangeGame","SUBGAME1","FREE_TRANS","FREE_MANY","bindUI","Skeleton","height","position","clone","worldPosition","isSubGame","SUBGAME2","isNextMainGame","changeGameTypeTime","playBgMusic","contentTransform","item","getChildByName","count","amount","formatAmountWithCommas","itemHeight","setPosition","iconConfig","icon","find","v","id","itemId","smallName","spriteFrame","getFile","source","index","children","addChild","contentHeight","endPos","getItemEndPos","to","call","scrollToTop","y","parent","forEach","by","destroy","timeScale","THOR_SMILES","undefined","showOrHideNode","pre","num","Number","toFixed","set","normalRollOption","numberRollerTime","nodePanel","isShow","hideOp","getBuyMiniGameAmount","updateBtnStatus","kaiguanNode","isWin","stopAllByTarget","disableBtnBuyMini","disable","isDisableBuyMini","disableBtnDouble","disableBtn","btnRate","enabled","btnNode","str","flyFreeGameTotalOdds","labelRateTemp","setWorldPosition","delayTime","oddsLabelAnimationParam","lessenTime","lessenScale","WILDMULTIPLIER","delay","getWinOddsPosition","scale","playWinlossAnimation","isEnd","totalOdds","getOddsLabelValue","labelNode","oddsLabel","parseInt","toUpperCase","replace","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, animation, Animation, AnimationState, Button, Graphics, instantiate, Label, Mask, Node, ScrollView, sp, Sprite, Tween, tween, UIOpacity, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { changeGame, setAutoLauncherInfo, setBetDropDownList, updateFreeGameOdds, updateGameMode, updateGold, updateSubGameWinloss, updateWinloss } from '../store/actions/game';\r\nimport { AutoLauncherInfo, AutoLauncherType, calBetAmount, GameModeType, GameType, GameTypeInfo, getAutoCount, isLimit, JackpotData, PlayAnimationData, RollerStatus, SubGameAnimationPlayInfo, WinIconData } from '../type';\r\nimport { updateRollerStatus } from '../store/actions/roller';\r\nimport { thorv2_Audio, mainViewModel, sourceManageSeletor } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { global } from '../../../hall';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport config from '../config';\r\nimport { Shake } from '../../../utils/Shake';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { cacheData } from '../dataTransfer';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tbetDropDownlist: boolean,\r\n\t/** 选择的线id */\r\n\tpositionId: number,\r\n\t/** 余额 */\r\n\tgold: number,\r\n\t/**游戏类型信息 */\r\n\tgameTypeInfo: GameTypeInfo,\r\n\t/** 子游戏过场动画播放信息 */\r\n\tsubGameAnimationPlayInfo: SubGameAnimationPlayInfo,\r\n\t/** jackpot数据 */\r\n\tjackpotDatas: JackpotData[],\r\n\t/** jackpot总金额 */\r\n\tjackpotTotalAmount: number,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo: AutoLauncherInfo,\r\n\t/**中奖的图标数据 */\r\n\twinIconDataItem: WinIconData,\r\n\t/**滚动状态 */\r\n\trollerStatus: RollerStatus,\r\n\t/**播放雷神动画 */\r\n\tplayThorAnimation: PlayAnimationData,\r\n\t/**播放中奖倍数动画 */\r\n\tplayWinOddsAnimation: PlayAnimationData\r\n\t/** 当前输赢 */\r\n\twinloss: number,\r\n\t/** 小游戏的总输赢 */\r\n\tsubGameWinloss: number,\r\n\t/**下注金额 */\r\n\tbetAmount: number,\r\n\t/**游戏模式 */\r\n\tgameModeType: GameModeType,\r\n\t/**免费游戏倍数 */\r\n\tfreeGameOdds: number,\r\n}\r\nexport interface IEvent {\r\n\tonSendBet: () => void,\r\n\tonOpenBuyMiniPanel: () => void,\r\n}\r\n\r\n@ccclass('ThorV2_Main')\r\nexport class ThorV2_Main extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate props_thorSk: sp.Skeleton;\r\n\tprivate props_shandianSk: sp.Skeleton;\r\n\t/**转场动画 */\r\n\tprivate props_transitionSk: sp.Skeleton;\r\n\tprivate contentItemInitHeight = 0;\r\n\tprivate winBoxAnimation: Animation;\r\n\r\n\tprivate kaiguanNodeOriginPos;\r\n\tprivate kaiguanNodeMovePos;\r\n\tprivate propsLabelRateOriginPos;\r\n\r\n\r\n\t/**播放输赢金额动画的回调 */\r\n\tprivate props_label_gold_animation: Animation;\r\n\tprivate props_label_rate_animation: Animation;\r\n\r\n\tprivate winOdds = 0;\r\n\r\n\t/**是否累加倍率动画结束 */\r\n\tprivate isAddRateAnimationEnd: boolean;\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_action_bar: new Node(),\r\n\t\tprops_top: new Node(),\r\n\t\tprops_main_panel: new Node(),\r\n\t\tprops_smallGame_panel: new Node(),\r\n\t\tprops_spr_MainRoller_list: new Node(),\r\n\t\tprops_content: new Node(),\r\n\t\tprops_item: new Node(),\r\n\t\tprops_ScrollView_note: new Node(),\r\n\t\tprops_thor: new Node(),\r\n\t\tprops_shandian: new Node(),\r\n\t\tprops_spr_tools_rate: new Node(),\r\n\t\tprops_btn_rate: new Node(),\r\n\t\tprops_btn_olpn_kaiguan: new Node(),\r\n\t\tprops_spr_tools_beli: new Node(),\r\n\t\tprops_spr_win_box: new Node(),\r\n\t\t/**转场闪电动画 */\r\n\t\tprops_sklekton_lightning: new Node(),\r\n\t\tprops_label_beil: new Label(),\r\n\t\tprops_label_rateNum: new Label(),\r\n\t\tprops_label_rate: new Label(),\r\n\t\tprops_label_gold: new Label(),\r\n\t\t/**小游戏左边显示的倍率 */\r\n\t\tprops_label_rate_small: new Label(),\r\n\t\t/**免费游戏次数 */\r\n\t\tprops_label_sg_num: new Label(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tbetDropDownlist: false,\r\n\t\tpositionId: 0,\r\n\t\tgold: 0,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.MAIN,\r\n\t\t\tcurrGameType: GameType.MAIN,\r\n\t\t\tviewGameType: GameType.MAIN,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tsubGameAnimationPlayInfo: null,\r\n\t\tjackpotDatas: [],\r\n\t\tjackpotTotalAmount: 0,\r\n\t\tautoLauncherInfo: null,\r\n\t\twinIconDataItem: null,\r\n\t\trollerStatus: RollerStatus.END,\r\n\t\tplayThorAnimation: null,\r\n\t\tplayWinOddsAnimation: null,\r\n\t\twinloss: 0,\r\n\t\tsubGameWinloss: 0,\r\n\t\tbetAmount: 0,\r\n\t\tgameModeType: GameModeType.normal,\r\n\t\tfreeGameOdds: 0,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonSendBet: () => { },\r\n\t\tonOpenBuyMiniPanel: () => { },\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tpublic getActionBarNode() {\r\n\t\treturn this.propertyNode.props_action_bar;\r\n\t}\r\n\r\n\tpublic getTopNode() {\r\n\t\treturn this.propertyNode.props_top;\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.props_thorSk.setCompleteListener((e: sp.spine.TrackEntry) => {\r\n\t\t\tif (e.animation.name === 'anima_1') {\r\n\t\t\t\tthis.props_thorSk.setAnimation(0, 'anima_3', false)\r\n\t\t\t\tthis.props_shandianSk.node.active = true;\r\n\t\t\t\tthis.props_shandianSk.setAnimation(0, 'animation', false)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.props_shandianSk.setCompleteListener((e: sp.spine.TrackEntry) => {\r\n\t\t\tthis.props_shandianSk.node.active = false;\r\n\t\t\tthis.props_shandianSk.clearTracks();\r\n\t\t})\r\n\t\tthis.props_transitionSk.setCompleteListener((e: sp.spine.TrackEntry) => {\r\n\t\t\tthis.props_transitionSk.node.active = false;\r\n\t\t\tthis.props_transitionSk.clearTracks();\r\n\r\n\t\t\tthis.subGameAnimationEndHandle(0);\r\n\t\t})\r\n\r\n\t\tthis.winBoxAnimation.on(Animation.EventType.FINISHED, () => {\r\n\t\t\tthis.propertyNode.props_label_rate.string = ''\r\n\t\t\tthis.propertyNode.props_label_rate.node.getComponent(UIOpacity).opacity = 255;\r\n\t\t\tif (this.props.playWinOddsAnimation.params.length > 2) {\r\n\t\t\t\tconst done = this.props.playWinOddsAnimation.params[2]\r\n\t\t\t\tdone && done();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_rate.on(Button.EventType.CLICK, () => {\r\n\t\t\tconst gameModeType = this.props.gameModeType === GameModeType.normal ? GameModeType.buyToWin : GameModeType.normal;\r\n\r\n\t\t\tif (gameModeType === GameModeType.buyToWin) {\r\n\t\t\t\tthorv2_Audio.playOneShot(SoundPathDefine.BUY_RATE_BTN_CLICK)\r\n\t\t\t}\r\n\t\t\tthis.dispatch(updateGameMode(gameModeType))\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_spr_tools_beli.on(Button.EventType.CLICK, () => {\r\n\t\t\tthorv2_Audio.playOneShot(SoundPathDefine.BUY_FREE_BTN)\r\n\t\t\tthis.events.onOpenBuyMiniPanel();\r\n\t\t})\r\n\r\n\t\tthis.props_label_rate_animation.on(Animation.EventType.FINISHED, () => {\r\n\t\t\tif (this.isAddRateAnimationEnd) {\r\n\t\t\t\tthis.isAddRateAnimationEnd = false;\r\n\t\t\t\tthis.winBoxAnimation.play()\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.props_label_gold_animation.on(Animation.EventType.FINISHED, () => {\r\n\t\t\tif (this.winOdds > 0) {\r\n\t\t\t\tthis.propertyNode.props_label_rate.string = this.winOdds + 'X';\r\n\t\t\t\tthis.props_label_rate_animation.play();\r\n\t\t\t\tthis.winOdds = 0;\r\n\t\t\t} else if (this.props.playWinOddsAnimation) {\r\n\t\t\t\tconst odds = this.props.playWinOddsAnimation.params[0];\r\n\t\t\t\tconst type = this.props.playWinOddsAnimation.params[1];\r\n\t\t\t\tthis.propertyNode.props_label_rate.string = odds + 'X';\r\n\r\n\t\t\t\tif (type === 0) {\r\n\t\t\t\t\tthis.winBoxAnimation.play();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**更新结束状态 */\r\n\tpublic updateEndStatus(isUpdateGold: boolean = true) {\r\n\t\tif (cacheData.rollerLaunchResult) {\r\n\t\t\tconst si = cacheData.rollerLaunchResult.dl.si[0]\r\n\t\t\tif (si.balanceAfterSettlement > this.props.gold && isUpdateGold) {\r\n\t\t\t\tthis.dispatch(updateGold(si.balanceAfterSettlement))\r\n\t\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t\t\t}, 0.5)\r\n\t\t\t} else {\r\n\t\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getRollerPanel() {\r\n\t\treturn this.propertyNode.props_spr_MainRoller_list;\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'subGameAnimationPlayInfo') {\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.playSubGameAnimation();\r\n\t\t\t\t}\r\n\t\t\t} else if (key === 'gameTypeInfo') {\r\n\t\t\t\tthis.changeGameType(this.props.gameTypeInfo.viewGameType);\r\n\t\t\t} else if (key === 'rollerStatus') {\r\n\t\t\t\tif (this.props.rollerStatus === RollerStatus.RUNNING) {\r\n\t\t\t\t\tthis.removeWinIconItem();\r\n\t\t\t\t}\r\n\t\t\t\tthis.changeRollerStatusHandle();\r\n\t\t\t} else if (key === 'winIconDataItem') {\r\n\t\t\t\tthis.addWinIconItem();\r\n\t\t\t} else if (key === 'playThorAnimation') {\r\n\t\t\t\tthis.playThorAnimation();\r\n\t\t\t} else if (key === 'playWinOddsAnimation') {\r\n\t\t\t\tthis.playAddOddsAnimation();\r\n\t\t\t} else if (key === 'winloss') {\r\n\t\t\t\tthis.updateWinloss(value);\r\n\t\t\t} else if (key === 'gameModeType') {\r\n\t\t\t\tthis.updateGameModeType(value);\r\n\t\t\t} else if (key === 'freeGameOdds') {\r\n\t\t\t\tthis.updateFreeGameOddsLabel();\r\n\t\t\t} else if (key === '_setDone') {\r\n\t\t\t\tthis.updateFreeAmount();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate changeGameType(gameType: GameType) {\r\n\t\tconst isMainGame = gameType === GameType.MAIN;\r\n\t\t// 主游戏要显示的界面\r\n\t\tthis.propertyNode.props_main_panel.active = isMainGame;\r\n\t\t// 子游戏要显示的界面\r\n\t\tthis.propertyNode.props_smallGame_panel.active = !isMainGame;\r\n\t\tif (!isMainGame) {\r\n\t\t\tthis.propertyNode.props_label_sg_num.string = this.props.gameTypeInfo.leftCount + '';\r\n\t\t}\r\n\r\n\t\tif (this.isChangeGame()) {\r\n\t\t\tif (this.props.gameTypeInfo.currGameType === GameType.SUBGAME1) {\r\n\t\t\t\tthorv2_Audio.playOneShot(SoundPathDefine.FREE_TRANS)\r\n\t\t\t} else {\r\n\t\t\t\tthorv2_Audio.playOneShot(SoundPathDefine.FREE_MANY)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**是否准备切换游戏 */\r\n\tprivate isChangeGame() {\r\n\t\treturn this.props.gameTypeInfo && this.props.gameTypeInfo.viewGameType !== this.props.gameTypeInfo.currGameType;\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.props_thorSk = this.propertyNode.props_thor.getComponent(sp.Skeleton);\r\n\t\tthis.props_shandianSk = this.propertyNode.props_shandian.getComponent(sp.Skeleton);\r\n\r\n\t\tthis.propertyNode.props_sklekton_lightning.active = false;\r\n\t\tthis.props_transitionSk = this.propertyNode.props_sklekton_lightning.getComponent(sp.Skeleton);\r\n\r\n\t\tthis.contentItemInitHeight = this.propertyNode.props_content.getComponent(UITransform).height;\r\n\t\tthis.winBoxAnimation = this.propertyNode.props_spr_win_box.getComponent(Animation);\r\n\r\n\t\tthis.propertyNode.props_spr_win_box.getComponent(UIOpacity).opacity = 0;\r\n\r\n\t\tthis.kaiguanNodeOriginPos = this.propertyNode.props_btn_olpn_kaiguan.position.clone();\r\n\t\tthis.kaiguanNodeMovePos = new Vec3(20, 0);\r\n\t\tthis.propsLabelRateOriginPos = this.propertyNode.props_label_rate.node.worldPosition.clone();\r\n\r\n\t\tthis.props_label_gold_animation = this.propertyNode.props_label_gold.getComponent(Animation);\r\n\t\tthis.props_label_rate_animation = this.propertyNode.props_label_rate.getComponent(Animation);\r\n\r\n\t\tthis.propertyNode.props_label_rate.string = '';\r\n\r\n\t\tthis.updateFreeGameOddsLabel();\r\n\t}\r\n\r\n\tprivate isSubGame(gameType: GameType) {\r\n\t\treturn gameType === GameType.SUBGAME1 || gameType === GameType.SUBGAME2\r\n\t}\r\n\r\n\tprivate isMainGame() {\r\n\t\treturn this.props.gameTypeInfo.viewGameType === GameType.MAIN;\r\n\t}\r\n\r\n\tprivate isNextMainGame() {\r\n\t\treturn this.props.gameTypeInfo.currGameType === GameType.MAIN;\r\n\t}\r\n\r\n\tprivate playSubGameAnimation() {\r\n\t\tthis.props_transitionSk.node.active = true;\r\n\t\tthis.props_transitionSk.setAnimation(0, \"animation\", false);\r\n\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tconst gameTypeInfo = { ...this.props.gameTypeInfo }\r\n\t\t\tgameTypeInfo.lastGameType = gameTypeInfo.viewGameType;\r\n\t\t\tgameTypeInfo.viewGameType = gameTypeInfo.currGameType;\r\n\t\t\tthis.dispatch(changeGame(gameTypeInfo))\r\n\t\t\t// 进入到小游戏1之后，把进入前的这一局的输赢设置为0\r\n\t\t\tif (gameTypeInfo.viewGameType === GameType.SUBGAME1) {\r\n\t\t\t\tthis.dispatch(updateWinloss(0));\r\n\t\t\t\tthis.dispatch(updateSubGameWinloss(0));\r\n\t\t\t}\r\n\t\t}, config.changeGameTypeTime)\r\n\t}\r\n\r\n\t/**动画结束处理 */\r\n\tprivate subGameAnimationEndHandle(type: number) {\r\n\t\tmainViewModel.playBgMusic();\r\n\t\tthis.dispatch(updateFreeGameOdds(0))\r\n\t\t// console.log(\"subGameAnimationEndHandle ==========================\");\r\n\t\tthis.updateEndStatus();\r\n\t}\r\n\r\n\tprivate addWinIconItem() {\r\n\t\tif (!this.props.winIconDataItem) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst contentTransform = this.propertyNode.props_content.getComponent(UITransform);\r\n\r\n\t\tconst item = instantiate(this.propertyNode.props_item);\r\n\t\titem.active = true;\r\n\t\titem.getChildByName(\"props_label_num\").getComponent(Label).string = this.props.winIconDataItem.count + '';\r\n\t\titem.getChildByName(\"props_label_glod\").getComponent(Label).string = this.props.winIconDataItem.amount.formatAmountWithCommas();\r\n\r\n\t\tconst itemHeight = item.getComponent(UITransform).height;\r\n\t\titem.setPosition(new Vec3(0, this.contentItemInitHeight + itemHeight));\r\n\r\n\t\tconst iconConfig = config.icon.find(v => v.id === this.props.winIconDataItem.itemId)\r\n\t\tif (iconConfig.smallName) {\r\n\t\t\tconst spriteFrame = sourceManageSeletor().getFile(iconConfig.smallName).source;\r\n\t\t\titem.getChildByName(\"props_spr_icon\").getComponent(Sprite).spriteFrame = spriteFrame;\r\n\t\t}\r\n\t\tconst index = this.propertyNode.props_content.children.length;\r\n\t\tthis.propertyNode.props_content.addChild(item);\r\n\r\n\t\tconst contentHeight = (index + 1) * item.getComponent(UITransform).height;\r\n\t\tcontentTransform.height = this.contentItemInitHeight < contentHeight ? contentHeight : this.contentItemInitHeight;\r\n\r\n\t\tconst endPos = this.getItemEndPos(index);\r\n\t\ttween(item).to(0.5, { position: endPos })\r\n\t\t\t.call(() => {\r\n\t\t\t\tthis.propertyNode.props_ScrollView_note.getComponent(ScrollView).scrollToTop(0.1, false);\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n\r\n\tprivate getItemEndPos(index: number) {\r\n\t\tconst height = this.propertyNode.props_item.getComponent(UITransform).height;\r\n\t\tconst y = index * height + height / 2;\r\n\t\treturn new Vec3(0, y);\r\n\t}\r\n\r\n\tprivate removeWinIconItem() {\r\n\t\tconst height = this.propertyNode.props_content.parent.getComponent(UITransform).height;\r\n\t\tthis.propertyNode.props_content.children.forEach(v => {\r\n\t\t\ttween(v).by(0.2, { position: new Vec3(0, -height) }).call(() => { v.destroy() }).start();\r\n\t\t})\r\n\t}\r\n\r\n\tprivate playThorAnimation() {\r\n\t\tif (!this.props.playThorAnimation) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.props_thorSk.timeScale = this.props.playThorAnimation.timeScale;\r\n\t\tthis.props_thorSk.getComponent(sp.Skeleton).setAnimation(0, 'anima_1', false);\r\n\r\n\t\tthorv2_Audio.playOneShot(SoundPathDefine.THOR_SMILES)\r\n\t}\r\n\r\n\tprivate updateWinloss(value: { pre: any, cur: any }, done = undefined) {\r\n\t\tthis.showOrHideNode(this.propertyNode.props_spr_win_box, value.cur > 0);\r\n\t\tif (value.cur > 0) {\r\n\t\t\tnew StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t// const numStr = num > 10000 ? Number(num.toFixed(0)).formatAmountWithLetter() : Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t\t\tthis.propertyNode.props_label_gold.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\tdone && done();\r\n\t\t\t\t}\r\n\t\t\t}).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showOrHideNode(nodePanel: Node, isShow: boolean, hideOp: number = 0) {\r\n\t\tconst opacity = nodePanel.getComponent(UIOpacity)\r\n\t\tif (isShow && opacity.opacity === 255) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!isShow && opacity.opacity === hideOp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttween(opacity).to(0.2, { opacity: isShow ? 255 : hideOp }).start();\r\n\t}\r\n\r\n\tprivate playAddOddsAnimation() {\r\n\t\tif (!this.props.playWinOddsAnimation) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.propertyNode.props_label_rate.string === '') {\r\n\t\t\tthis.props_label_gold_animation.play(\"animation_win_gold\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateFreeAmount() {\r\n\t\tthis.propertyNode.props_label_beil.string = Number(this.getBuyMiniGameAmount()).formatAmountWithCommas();\r\n\r\n\t\tlet betAmount = calBetAmount(this.props.betAmount, this.props.positionId);\r\n\t\tthis.propertyNode.props_label_rateNum.string = Number(betAmount).formatAmountWithCommas();\r\n\t}\r\n\r\n\tprivate updateBtnStatus() {\r\n\t\tthis.props\r\n\t}\r\n\r\n\tpublic getBuyMiniGameAmount() {\r\n\t\treturn calBetAmount(config.betAmount, this.props.positionId) * 100;\r\n\t}\r\n\r\n\tprivate updateGameModeType(value: { pre: any, cur: any }) {\r\n\t\tconst kaiguanNode = this.propertyNode.props_btn_olpn_kaiguan;\r\n\t\tconst isWin = value.cur === GameModeType.buyToWin;\r\n\t\tkaiguanNode.getChildByName(\"icon_kaiguan_duihao\").active = isWin;\r\n\t\tkaiguanNode.getChildByName(\"icon_kaiguan_jiantou\").active = !isWin;\r\n\r\n\r\n\t\tTween.stopAllByTarget(kaiguanNode)\r\n\r\n\t\tif (isWin) {\r\n\t\t\ttween(kaiguanNode).to(0.2, { position: this.kaiguanNodeMovePos }).start();\r\n\t\t} else {\r\n\t\t\ttween(kaiguanNode).to(0.2, { position: this.kaiguanNodeOriginPos }).start();\r\n\t\t}\r\n\r\n\t\tthis.disableBtnBuyMini(isWin);\r\n\t}\r\n\r\n\tprivate changeRollerStatusHandle() {\r\n\t\tconst disable = this.props.rollerStatus !== RollerStatus.END\r\n\t\tconst isDisableBuyMini = disable || this.props.gameModeType === GameModeType.buyToWin;\r\n\t\tthis.disableBtnBuyMini(isDisableBuyMini)\r\n\t\tthis.disableBtnDouble(disable)\r\n\t}\r\n\r\n\t/**禁用购买小游戏按钮 */\r\n\tprivate disableBtnBuyMini(value: boolean) {\r\n\t\tthis.disableBtn(this.propertyNode.props_spr_tools_beli, value)\r\n\t}\r\n\r\n\t/**禁用翻倍道具 */\r\n\tprivate disableBtnDouble(value: boolean) {\r\n\t\tconst btnRate = this.propertyNode.props_btn_rate\r\n\t\tbtnRate.getComponent(Button).enabled = !value;\r\n\t\tTween.stopAllByTarget(btnRate.getComponent(UIOpacity));\r\n\t\tthis.showOrHideNode(this.propertyNode.props_spr_tools_rate, !value, 100)\r\n\t}\r\n\r\n\tprivate disableBtn(btnNode: Node, value: boolean) {\r\n\t\tbtnNode.getComponent(Button).enabled = !value;\r\n\t\tTween.stopAllByTarget(btnNode.getComponent(UIOpacity));\r\n\t\tthis.showOrHideNode(btnNode, !value, 100)\r\n\t}\r\n\r\n\tprivate updateFreeGameOddsLabel() {\r\n\t\tconst str = this.props.freeGameOdds === 0 ? '' : this.props.freeGameOdds + 'X';\r\n\t\tthis.propertyNode.props_label_rate_small.string = str;\r\n\r\n\t\tif (this.props.freeGameOdds > 0) {\r\n\t\t\tthis.propertyNode.props_label_rate_small.getComponent(Animation).play();\r\n\t\t}\r\n\t}\r\n\r\n\t/**飞免费游戏的倍率 */\r\n\tpublic flyFreeGameTotalOdds(done) {\r\n\t\tif (this.isMainGame() || this.props.freeGameOdds === 0) {\r\n\t\t\tdone && done(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst labelRateTemp = instantiate(this.propertyNode.props_label_rate_small.node);\r\n\t\tthis.node.addChild(labelRateTemp);\r\n\t\tlabelRateTemp.setWorldPosition(this.propertyNode.props_label_rate_small.node.worldPosition)\r\n\r\n\t\tconst delayTime = config.normalRollOption.oddsLabelAnimationParam.delayTime;\r\n\t\tconst lessenTime = config.normalRollOption.oddsLabelAnimationParam.lessenTime;\r\n\t\tconst lessenScale = config.normalRollOption.oddsLabelAnimationParam.lessenScale;\r\n\r\n\t\tthorv2_Audio.playOneShot(SoundPathDefine.WILDMULTIPLIER)\r\n\r\n\t\ttween(labelRateTemp).delay(delayTime * 1.5)\r\n\t\t\t.to(lessenTime, { worldPosition: this.getWinOddsPosition(), scale: new Vec3(lessenScale, lessenScale) }).call(() => {\r\n\t\t\t\tlabelRateTemp.destroy();\r\n\t\t\t\tdone && done(true);\r\n\r\n\t\t\t\tthis.playWinlossAnimation(this.props.freeGameOdds, false);\r\n\t\t\t}).start();\r\n\t}\r\n\r\n\t/**播放输赢动画 */\r\n\tpublic playWinlossAnimation(odds: number, isEnd: boolean) {\r\n\t\tif (this.propertyNode.props_label_rate.string === '') {\r\n\t\t\tthis.winOdds = odds;\r\n\t\t\tthis.props_label_gold_animation.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet totalOdds = this.getOddsLabelValue(this.propertyNode.props_label_rate.node) + odds;\r\n\t\tthis.isAddRateAnimationEnd = isEnd;\r\n\t\tthis.propertyNode.props_label_rate.string = totalOdds + 'X';\r\n\t\tthis.props_label_rate_animation.play();\r\n\t}\r\n\r\n\tprivate getOddsLabelValue(labelNode: Node) {\r\n\t\tconst oddsLabel = labelNode.getComponent(Label).string;\r\n\t\tconst odds = parseInt(oddsLabel.toUpperCase().replace(\"X\", \"\"));\r\n\t\treturn odds;\r\n\t}\r\n\r\n\t/**获得赢的倍率的世界坐标 */\r\n\tpublic getWinOddsPosition() {\r\n\t\treturn this.propsLabelRateOriginPos;\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}