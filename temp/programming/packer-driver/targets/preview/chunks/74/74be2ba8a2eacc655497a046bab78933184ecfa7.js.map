{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/qiuqiu/components/Qiuqiu_Card.ts"],"names":["_decorator","Node","Sprite","tween","UIOpacity","UITransform","Vec3","BaseComponent","sourceManageSeletor","SpriteFramePathDefine","ccclass","property","Qiuqiu_Card","cardImageMap","CARD_NUMBER_0","CARD_NUMBER_1","CARD_NUMBER_2","CARD_NUMBER_3","CARD_NUMBER_4","CARD_NUMBER_5","CARD_NUMBER_6","propertyNode","props_spr_card_up","props_spr_card_down","props_spr_handcard_bg","props_beimian","props","upFace","downFace","events","start","initState","bindEvent","useProps","key","value","cur","spriteFrame","getFile","source","setScale","scale","node","tf","getComponent","width","openCard","isAnima","t1","to","t2","call","active","setOpacity","show","opacity","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Node, Sprite, tween, UIOpacity, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { sourceManageSeletor } from '../index';\r\nimport { SpriteFramePathDefine } from '../sourceDefine/spriteDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\tupFace?: number,\r\n\tdownFace?: number,\r\n}\r\nexport interface IEvent {\r\n}\r\n\r\n@ccclass('Qiuqiu_Card')\r\nexport class Qiuqiu_Card extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\tprivate cardImageMap = [\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_0,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_1,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_2,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_3,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_4,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_5,\r\n\t\tSpriteFramePathDefine.CARD_NUMBER_6\r\n\t]\r\n\tprotected propertyNode = {\r\n\t\tprops_spr_card_up: new Sprite(),\r\n\t\tprops_spr_card_down: new Sprite(),\r\n\t\tprops_spr_handcard_bg: new Node(),\r\n\t\tprops_beimian: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tupFace: -1,\r\n\t\tdownFace: -1,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t}\r\n\t}\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"upFace\" && value.cur >= 0) {\r\n\t\t\tthis.propertyNode.props_spr_card_up.spriteFrame = sourceManageSeletor().getFile(this.cardImageMap[value.cur]).source\r\n\t\t}\r\n\t\tif (key === \"downFace\" && value.cur >= 0) {\r\n\t\t\tthis.propertyNode.props_spr_card_down.spriteFrame = sourceManageSeletor().getFile(this.cardImageMap[value.cur]).source\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setScale(scale: number) {\r\n\t\tthis.node.setScale(new Vec3(scale, scale));\r\n\t\tconst tf = this.node.getComponent(UITransform);\r\n\t\ttf.width *= scale;\r\n\t}\r\n\r\n\t/**翻牌 */\r\n\tpublic openCard(isAnima: boolean) {\r\n\t\tif (isAnima) {\r\n\t\t\tthis.propertyNode.props_spr_handcard_bg.setScale(new Vec3(0, 1));\r\n\t\t\tconst t1 = tween(this.propertyNode.props_beimian).to(0.2, { scale: new Vec3(0, 1) });\r\n\t\t\tconst t2 = tween(this.propertyNode.props_spr_handcard_bg).to(0.2, { scale: new Vec3(1, 1) });\r\n\t\t\tt1.call(() => {\r\n\t\t\t\tt2.start();\r\n\t\t\t}).start();\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_beimian.active = false;\r\n\t\t}\r\n\t\tthis.setOpacity(true);\r\n\t}\r\n\r\n\tprivate setOpacity(show: boolean) {\r\n\t\tthis.node.getComponent(UIOpacity).opacity = show ? 255 : 0;\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.setOpacity(false);\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}