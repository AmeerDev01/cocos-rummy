{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth111/viewModel/AutoLauncherViewModel.ts"],"names":["ViewModel","StoreInject","getStore","AutoLauncherType","GameType","changeAutoLauncherType","setAutoLaunchedTimes","setShowAuthLaunch","dataTransfer","DataKeyType","setRollSpeed","autoLauncherTypeWithTimes","NONE","TIME_10","TIME_20","TIME_50","TIME_100","TIME_500","LIMIT","AutoLauncherViewModel","constructor","isWaiting","isRollEnd","autoLaunchedTimes","autoLauncherType","lanuchEvent","begin","window","setInterval","console","log","GAME_TYPE","MAIN","dispatch","undefined","setLaunchEvent","connect","inject","state","game","isShowAutoLaunch"],"mappings":"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","sourcesContent":["import { Node } from \"cc\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { GodWealth_authLauncher, IProps, IEvent } from \"../components/GodWealth_authLauncher\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from \"../store\"\r\nimport { AutoLauncherType, GameType } from \"../type\"\r\nimport { footerViewModel } from \"../index\"\r\nimport { changeAutoLauncherType, setAutoLaunchedTimes, setShowAuthLaunch } from \"../store/actions/game\"\r\nimport dataTransfer, { DataKeyType } from \"../dataTransfer\"\r\nimport { setRollSpeed } from \"../store/actions/roller\"\r\n\r\nexport const autoLauncherTypeWithTimes = {\r\n  [AutoLauncherType.NONE]: 0,\r\n  [AutoLauncherType.TIME_10]: 10,\r\n  [AutoLauncherType.TIME_20]: 20,\r\n  [AutoLauncherType.TIME_50]: 50,\r\n  [AutoLauncherType.TIME_100]: 100,\r\n  [AutoLauncherType.TIME_500]: 500,\r\n  // [AutoLauncherType.LAMIT_FAST]: 10000,\r\n  [AutoLauncherType.LIMIT]: 20000,\r\n}\r\n@StoreInject(getStore())\r\nclass AutoLauncherViewModel extends ViewModel<GodWealth_authLauncher, IProps, IEvent> {\r\n  constructor() {\r\n    super('GodWealth_authLauncher')\r\n  }\r\n  private isWaiting: boolean = true\r\n  private isRollEnd: boolean = true\r\n  private autoLaunchedTimes: number = 0\r\n  private autoLauncherType: AutoLauncherType = AutoLauncherType.NONE\r\n\r\n  private lanuchEvent: () => void\r\n  protected begin() {\r\n    window.setInterval(() => {\r\n      if (this.isWaiting && this.autoLauncherType !== AutoLauncherType.NONE) {\r\n        if (this.autoLaunchedTimes < autoLauncherTypeWithTimes[this.autoLauncherType]) {\r\n          console.log('自动启动', this.autoLaunchedTimes, autoLauncherTypeWithTimes[this.autoLauncherType])\r\n          this.lanuchEvent && this.lanuchEvent()\r\n          if (dataTransfer(DataKeyType.GAME_TYPE) === GameType.MAIN) {\r\n            this.dispatch(setAutoLaunchedTimes(undefined))\r\n          }\r\n        } else {\r\n          this.dispatch(setShowAuthLaunch(false))\r\n          this.dispatch(changeAutoLauncherType(AutoLauncherType.NONE))\r\n          this.dispatch(setAutoLaunchedTimes(0))\r\n          this.dispatch(setRollSpeed(1))\r\n        }\r\n      }\r\n    }, 500)\r\n  }\r\n\r\n  /**设置自动运行器要自动运行的函数 */\r\n  public setLaunchEvent(lanuchEvent: () => void) {\r\n    this.lanuchEvent = lanuchEvent\r\n  }\r\n  public connect() {\r\n    this.inject({}, (state: StateType) => {\r\n      this.isWaiting = state.game.isWaiting\r\n      this.autoLauncherType = state.game.autoLauncherType\r\n      this.autoLaunchedTimes = state.game.autoLaunchedTimes\r\n      return {\r\n        isShowAutoLaunch: state.game.isShowAutoLaunch,\r\n        isWaiting: state.game.isWaiting,\r\n        autoLauncherType: state.game.autoLauncherType\r\n      }\r\n    })\r\n    return this\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default AutoLauncherViewModel"]}