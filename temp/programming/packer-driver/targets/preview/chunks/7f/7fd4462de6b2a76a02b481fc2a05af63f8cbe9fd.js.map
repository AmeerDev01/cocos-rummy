{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/common/fish/Battery.ts"],"names":["Battery","Animation","Component","Label","Node","Sprite","UITransform","Vec2","Vec3","instantiate","sp","view","addAnimation","createAnimationNode","createSkeleton","getAnimation","llcompare","llminus","llplus","pi","pia","LockFish","BatteryHitScoreMgr","global","GAME_TYPE_FRIENDROOM","GAME_TYPE_GOLDROOM","textureConfig","commonConfig","batteryAllConfig","batterySkinConfig","batScoreConfig","fntScoreConfig","sendBulletMax","send_ReqLock","send_ReqFire","send_ReqCancelLock","send_ReqSwitchBattery","wepShow","dataManager","noMoney","uiCreater","stop_all_action","batteryConfig","skinConfig","side","cur_angle","cur_move_pos","local_pos","key_is_down","send_bullet_add_time","user_info","front_fish_data_id","is_auto_send","use_auto_send","auto_exit_time","auto_exit_time_add","begin_pos","move_pos","bulletSartPos","show_persion_ui","show_change_battery_ui","skeleton_obj","spr_obj","paohuo_obj","pao_am_obj","pao_lock_obj","is_play_over","is_pao_over","is_can_use_lock","add_fish_gold","sken_scale_org","sendBulletNum","ui_lst","ui_lstInit","node_pao_position","paohuo_src","pao_am_src","pao_lock_src","lock_obj","hit_score_obj","sourceManager","fishManager","bulletManager","batteryManager","backgroundSceneManager","musicEffectPlayer","parentNode","create","ui","ttConfig","cConfig","bbConfig","skConfig","scoreConfig","fntConfig","sendFuncs","sceneParam","lock","fire","cancelLock","switchBattery","init","initData","initUI","player_id","server_id","set_id","is_local","gold","head_id","level","vip_level","nick_name","battery_id","battery_score","isPowerBattery","room_id","ready","offline","bullet","getNodePao","getChildByName","node","addChild","getWorldPosition","setSiblingIndex","children","length","registerEvent","setUIstate","resetCheckUI","setReady","showOffline","newAnimationsAndobject","getRootNode","battery_paohuo_src_id","active","setPosition","angle","battery_am_src_id","battery_lock_src_id","getComponent","string","registerTouch","unRegisterTouch","on","EventType","TOUCH_END","e","console","log","show","onMinusBarrelIndex","onAddBarrelIndex","getSceneWidth","scene_size","width","getSceneHeight","height","onTouchBegan","isLockFish","getUILocation","pos","x","y","isMyBattery","getVisibleSize","rotationBatteryByPos","send_v","onTouchMoved","onTouchEnded","Math","abs","lockFishByPoint","setAutoFire","fsh_id","getFishIdByPoint","forceToLockFish","bauto","getRotationAngle","rotate_angle","getBatteryRotationAngle","bangle","pos1","pos2","k","atan","setBatteryInfo","info","id","paoPos","showEnterAnimation","setUIinfo","setBatterySrcByConfig","createLockObj","newSomeObject","updateEgrAction","getRoomType","headSprite","loadHeadSprite","setUserUIHidden","room_info","getRoomInfo","type","stage","getLockState","getCurrentLockFishId","getLockFishId","setBatteryBeishu","beishu","is_eff","play","runBatteryFireAni","battery_am_mus_id","cutBattery","battery_change_mus_id","setLockFish","parent","getLockAngle","getCurrentLockAngle","isLockObjChange","getSide","isLongTimeNoSendBullet","is_no_send","resumeBatteryState","destroy","stop","clear","skins","paohuo_offset","anis","src","setAnchorPoint","sk","Skeleton","setAnimation","ani1","timeScale","addComponent","setCompleteListener","setRotationAndPosBySide","lkey","lock_line_key","lockTexturesInfo","lock_src_id","offset_pos","clone","setLockCall","sendLockMsg","msg","fishId","sprEgr","config","battyer_egr","an","getSendBulletPos","ranti","offset_dis","cos","sin","getNoOffsetBulletPos","update","dt","sendBullet","setAngle","isCanSendBullet","bulletId","getBulletID","runSendBullet","is_can_send_bullet","cut_state","getSceneState","isHaveEnoughScore","bserver","mus_eff_lst","bulletID","runFirePaohuoAni","ani2","time_scale","resetLockandAutoFireState","lower","setLockFisState","setFireState","callControl","state","unLockFish","lockFish","unlock","setUnlockFish","getUserInfo","getBatteryPos","setScoreVal","val","show_val","setHitScore","v","score","addScoreNode","rotat","push","fishGold","shift","rotationInformation","parseInt","position","getPosition","bk_size","new_pos","resetRotation","anchorPoint","setStartGame","Number","getDEfntConfig","defnt","minusBulletNum","setPowerBattery","isPower","onDestroy"],"mappings":";;;sTAmCaA,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnCJC,MAAAA,S,OAAAA,S;AAA0BC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAcC,MAAAA,M,OAAAA,M;AAAqBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAcC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,I,OAAAA,I;;AAG7IC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,mB,iBAAAA,mB;AAAqBC,MAAAA,c,iBAAAA,c;AAAyDC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,O,iBAAAA,O;AAASC,MAAAA,M,iBAAAA,M;;AAC9HC,MAAAA,E,iBAAAA,E;AAAIC,MAAAA,G,iBAAAA,G;;AAGJC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,kB,iBAAAA,kB;;AAGAC,MAAAA,M,iBAAAA,M;;;;;;;;;AAEHC,MAAAA,oB,GAAuB,C;AACvBC,MAAAA,kB,GAAqB,C;;yBAqBdzB,O,GAAN,MAAMA,OAAN,SAAsBE,SAAtB,CAAgC;AAAA;AAAA;AAAA,eAE9BwB,aAF8B;AAAA,eAG9BC,YAH8B;AAAA,eAI9BC,gBAJ8B;AAAA,eAK9BC,iBAL8B;AAAA,eAM9BC,cAN8B;AAAA,eAO9BC,cAP8B;AAAA,eAS9BC,aAT8B,GASd,EATc;AAAA,eAW9BC,YAX8B;AAAA,eAY9BC,YAZ8B;AAAA,eAa9BC,kBAb8B;AAAA,eAc9BC,qBAd8B;AAAA,eAe9BC,OAf8B;AAAA,eAgB9BC,WAhB8B;AAAA,eAiB9BC,OAjB8B;AAAA,eAkB9BC,SAlB8B;AAAA,eAoB9BC,eApB8B;AAAA,eAqB9BC,aArB8B;AAAA,eAsB9BC,UAtB8B;AAAA,eAuB9BC,IAvB8B;AAAA,eAwB9BC,SAxB8B;AAAA,eAyB9BC,YAzB8B;;AA0BrC;AA1BqC,eA2B9BC,SA3B8B;AAAA,eA4B9BC,WA5B8B;AAAA,eA6B9BC,oBA7B8B;AAAA,eA8B9BC,SA9B8B;AAAA,eA+B9BC,kBA/B8B;AAAA,eAgC9BC,YAhC8B;AAAA,eAiC9BC,aAjC8B;AAAA,eAkC9BC,cAlC8B;AAAA,eAmC9BC,kBAnC8B;AAAA,eAoC9BC,SApC8B;AAAA,eAqC9BC,QArC8B;AAAA,eAsC9BC,aAtC8B;AAAA,eAuC9BC,eAvC8B;AAAA,eAwC9BC,sBAxC8B,GAwCL,KAxCK;AAwCA;AAxCA,eAyC9BC,YAzC8B,GAyCT,IAzCS;AAyCL;AAzCK,eA0C9BC,OA1C8B,GA0Cd,IA1Cc;AA0CV;AA1CU,eA2C9BC,UA3C8B,GA2CX,IA3CW;AA2CP;AA3CO,eA4C9BC,UA5C8B,GA4CX,IA5CW;AA4CP;AA5CO,eA6C9BC,YA7C8B,GA6CT,IA7CS;AA6CL;AA7CK,eA+C9BC,YA/C8B,GA+Cf,KA/Ce;AA+CV;AA/CU,eAgD9BC,WAhD8B,GAgDhB,KAhDgB;AAgDX;AAhDW,eAiD9BC,eAjD8B,GAiDZ,KAjDY;AAiDP;AAjDO,eAkD9BC,aAlD8B,GAkDd,EAlDc;AAkDZ;AAlDY,eAmD9BC,cAnD8B,GAmDb,CAnDa;AAAA,eAoD9BC,aApD8B,GAoDd,CApDc;AAAA,eAsD9BC,MAtD8B;AAAA,eAuD9BC,UAvD8B;AAAA,eAwD9BC,iBAxD8B;AAAA,eAyD9BC,UAzD8B;AAAA,eA0D9BC,UA1D8B;AAAA,eA2D9BC,YA3D8B;AAAA,eA6D9BC,QA7D8B;AAAA,eA+D9BC,aA/D8B;AAAA,eAgE7BC,aAhE6B;AAAA,eAiE7BC,WAjE6B;AAAA,eAkE7BC,aAlE6B;AAAA,eAmE7BC,cAnE6B;AAAA,eAoE7BC,sBApE6B;AAAA,eAqE7BC,iBArE6B;AAAA,eAsE7BC,UAtE6B;AAAA;;AAwE9BC,QAAAA,MAAM,CAACC,EAAD,EAAaC,QAAb,EAAuBC,OAAvB,EAAgCC,QAAhC,EAA0CC,QAA1C,EAAoDC,WAApD,EAAiEC,SAAjE,EAA4EC,SAA5E,EAAuFC,UAAvF,EACXhB,aADW,EACkBC,WADlB,EAC4CC,aAD5C,EAC0EC,cAD1E,EAEXC,sBAFW,EAEqCC,iBAFrC,EAE2E;AACtF,eAAK3D,aAAL,GAAqB+D,QAArB;AACA,eAAK9D,YAAL,GAAoB+D,OAApB;AACA,eAAK9D,gBAAL,GAAwB+D,QAAxB;AACA,eAAK9D,iBAAL,GAAyB+D,QAAzB;AACA,eAAK9D,cAAL,GAAsB+D,WAAtB;AACA,eAAK9D,cAAL,GAAsB+D,SAAtB;AACA,eAAKtD,SAAL,GAAiBgD,EAAjB;AAEA,eAAKvD,YAAL,GAAoB8D,SAAS,CAACE,IAA9B;AACA,eAAK/D,YAAL,GAAoB6D,SAAS,CAACG,IAA9B;AACA,eAAK/D,kBAAL,GAA0B4D,SAAS,CAACI,UAApC;AACA,eAAK/D,qBAAL,GAA6B2D,SAAS,CAACK,aAAvC;AAEA,eAAK/D,OAAL,GAAe2D,UAAU,CAAC3D,OAA1B;AACA,eAAKC,WAAL,GAAmB0D,UAAU,CAAC1D,WAA9B;AACA,eAAKC,OAAL,GAAeyD,UAAU,CAACzD,OAA1B;AAEA,eAAKyC,aAAL,GAAqBA,aAArB;AACA,eAAKC,WAAL,GAAmBA,WAAnB;AACA,eAAKC,aAAL,GAAqBA,aAArB;AACA,eAAKC,cAAL,GAAsBA,cAAtB;AACA,eAAKC,sBAAL,GAA8BA,sBAA9B;AACA,eAAKC,iBAAL,GAAyBA,iBAAzB;AAEA,eAAKgB,IAAL;AACD;;AAEOA,QAAAA,IAAI,GAAG;AACb,eAAKC,QAAL;AACA,eAAKC,MAAL;AACD;;AAEOD,QAAAA,QAAQ,GAAG;AACjB,eAAK7D,eAAL,GAAuB,KAAvB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACA,eAAKC,UAAL,GAAkB,IAAlB;AACA,eAAKC,IAAL,GAAY,CAAZ;AACA,eAAKC,SAAL,GAAiB,CAAjB;AACA,eAAKC,YAAL,GAAoB,IAAItC,IAAJ,EAApB;AACA,eAAKuC,SAAL,GAAiB,IAAIvC,IAAJ,EAAjB;AAEA,eAAKwC,WAAL,GAAmB,KAAnB;AACA,eAAKC,oBAAL,GAA4B,CAA5B;AAEA,eAAKC,SAAL,GAAiB;AAAC;AAChBsD,YAAAA,SAAS,EAAE,EADI;AACD;AACdC,YAAAA,SAAS,EAAE,CAFI;AAEF;AACbC,YAAAA,MAAM,EAAE,CAHO;AAIfC,YAAAA,QAAQ,EAAE,KAJK;AAIC;AAChBC,YAAAA,IAAI,EAAE,CALS;AAKP;AACRC,YAAAA,OAAO,EAAE,CANM;AAMJ;AACXC,YAAAA,KAAK,EAAE,CAPQ;AAON;AACTC,YAAAA,SAAS,EAAE,CARI;AAQF;AACbC,YAAAA,SAAS,EAAE,EATI;AASD;AACdC,YAAAA,UAAU,EAAE,CAVG;AAUD;AACdC,YAAAA,aAAa,EAAE,CAXA;AAWE;AACjBC,YAAAA,cAAc,EAAE,KAZD;AAYQ;AACvBC,YAAAA,OAAO,EAAE,EAbM;AAaH;AACZC,YAAAA,KAAK,EAAE,CAdQ;AAcL;AACVC,YAAAA,OAAO,EAAE,CAfM;AAeH;AACZC,YAAAA,MAAM,EAAE,CAhBO,CAgBJ;;AAhBI,WAAjB;AAmBA,eAAKpE,kBAAL,GAA0B,CAAC,CAA3B,CA/BiB,CA+BW;;AAC5B,eAAKC,YAAL,GAAoB,KAApB,CAhCiB,CAgCQ;;AACzB,eAAKC,aAAL,GAAqB,KAArB,CAjCiB,CAiCS;;AAC1B,eAAKC,cAAL,GAAsB,EAAtB,CAlCiB,CAkCO;;AACxB,eAAKC,kBAAL,GAA0B,CAA1B,CAnCiB,CAmCU;;AAC3B,eAAKC,SAAL,GAAiB,IAAIhD,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAjB,CApCiB,CAoCc;;AAC/B,eAAKiD,QAAL,GAAgB,IAAIjD,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAhB,CArCiB,CAqCa;;AAC9B,eAAKkD,aAAL,GAAqB,IAAIlD,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAArB,CAtCiB,CAsCkB;;AAEnC,eAAKmD,eAAL,GAAuB,KAAvB,CAxCiB,CAwCW;;AAC5B,eAAKC,sBAAL,GAA8B,KAA9B,CAzCiB,CAyCkB;;AACnC,eAAKC,YAAL,GAAoB,IAApB,CA1CiB,CA0CO;;AACxB,eAAKC,OAAL,GAAe,IAAf,CA3CiB,CA2CE;;AACnB,eAAKC,UAAL,GAAkB,IAAlB,CA5CiB,CA4CK;;AACtB,eAAKC,UAAL,GAAkB,IAAlB,CA7CiB,CA6CK;;AACtB,eAAKC,YAAL,GAAoB,IAApB,CA9CiB,CA8CO;;AAExB,eAAKC,YAAL,GAAoB,KAApB,CAhDiB,CAgDQ;;AACzB,eAAKC,WAAL,GAAmB,KAAnB,CAjDiB,CAiDO;;AACxB,eAAKC,eAAL,GAAuB,KAAvB,CAlDiB,CAkDW;;AAC5B,eAAKC,aAAL,GAAqB,EAArB,CAnDiB,CAmDM;;AACvB,eAAKC,cAAL,GAAsB,CAAtB;AACA,eAAKC,aAAL,GAAqB,CAArB;AACD;;AAEOiD,QAAAA,UAAU,GAAG;AACnB,iBAAO,KAAKhD,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,CAAP;AACD;;AAEOlB,QAAAA,MAAM,GAAG;AACf,eAAK/B,MAAL,GAAc/D,WAAW,CAAC,KAAK+B,SAAN,CAAzB;AACA,eAAKiC,UAAL,GAAkBhE,WAAW,CAAC,KAAK+B,SAAN,CAA7B;AACA,eAAKkF,IAAL,CAAUC,QAAV,CAAmB,KAAKnD,MAAxB;AAEA,eAAKE,iBAAL,GAAyB,KAAK8C,UAAL,GAAkBI,gBAAlB,EAAzB;AAEA,eAAKF,IAAL,CAAUG,eAAV,CAA0B,KAAKH,IAAL,CAAUI,QAAV,CAAmBC,MAA7C;AAEA,eAAKC,aAAL;AACA,eAAKC,UAAL;AACA,eAAKC,YAAL;AACA,eAAKC,QAAL;AACA,eAAKC,WAAL;AAEA,eAAKC,sBAAL;AAEA,eAAKtD,aAAL,GAAqB;AAAA;AAAA,wDAAuB,KAAKC,aAA5B,EAA2C,KAAKR,MAAhD,EAAwD,KAAK1C,cAA7D,EAA6E,KAAKC,cAAlF,EAAkG,KAAKoD,cAAL,CAAoBmD,WAApB,EAAlG,CAArB;AACD;;AACOD,QAAAA,sBAAsB,GAAG;AAC/B,eAAK1D,UAAL,GAAkB,KAAKjD,aAAL,CAAmB,KAAKC,YAAL,CAAkB4G,qBAArC,CAAlB;;AACA,cAAI,KAAK5D,UAAT,EAAqB;AACnB,gBAAI,CAAC,KAAKZ,UAAV,EAAsB;AACpB,mBAAKA,UAAL,GAAkB;AAAA;AAAA,8DAAoB,KAAKiB,aAAzB,EAAwC,KAAKwC,UAAL,EAAxC,EAA2D,KAAK7C,UAAhE,EAA4E,KAA5E,EAAmF,KAAnF,EAA0F,MAAM;AAChH,qBAAKR,WAAL,GAAmB,KAAnB;AACA,qBAAKJ,UAAL,CAAgByE,MAAhB,GAAyB,KAAzB;AACD,eAHiB,CAAlB;AAIA,mBAAKzE,UAAL,CAAgB0E,WAAhB,CAA4B,GAA5B,EAAiC,CAAjC;AACA,mBAAK1E,UAAL,CAAgByE,MAAhB,GAAyB,KAAzB;AACA,mBAAKzE,UAAL,CAAgB2E,KAAhB,GAAwB,EAAxB;AACD;AACF;;AAED,eAAK9D,UAAL,GAAkB,KAAKlD,aAAL,CAAmB,KAAKC,YAAL,CAAkBgH,iBAArC,CAAlB;;AACA,cAAI,KAAK/D,UAAT,EAAqB;AACnB,gBAAI,CAAC,KAAKZ,UAAV,EAAsB;AACpB,mBAAKA,UAAL,GAAkB;AAAA;AAAA,8DAAoB,KAAKgB,aAAzB,EAAwC,KAAKwC,UAAL,EAAxC,EAA2D,KAAK5C,UAAhE,EAA4E,KAA5E,EAAmF,KAAnF,EAA0F,MAAM;AAChH,qBAAKT,WAAL,GAAmB,KAAnB;AACA,qBAAKJ,UAAL,CAAgByE,MAAhB,GAAyB,KAAzB;AACD,eAHiB,CAAlB;AAIA,mBAAKxE,UAAL,CAAgByE,WAAhB,CAA4B,CAA5B,EAA+B,CAA/B;AACA,mBAAKzE,UAAL,CAAgBwE,MAAhB,GAAyB,KAAzB;AACA,mBAAKxE,UAAL,CAAgB6D,eAAhB,CAAgC,KAAhC;AACD;AACF;;AAED,eAAKhD,YAAL,GAAoB,KAAKnD,aAAL,CAAmB,KAAKC,YAAL,CAAkBiH,mBAArC,CAApB;;AACA,cAAI,KAAK/D,YAAT,EAAuB;AACrB,gBAAI,CAAC,KAAKZ,YAAV,EAAwB;AACtB,mBAAKA,YAAL,GAAoB;AAAA;AAAA,8DAAoB,KAAKe,aAAzB,EAAwC,KAAKwC,UAAL,EAAxC,EAA2D,KAAK3C,YAAhE,EAA8E,KAA9E,EAAqF,IAArF,CAApB,CADsB,CAEtB;;AACA,mBAAKZ,YAAL,CAAkBwE,WAAlB,CAA8B,CAA9B,EAAiC,EAAjC;AACA,mBAAKxE,YAAL,CAAkBuE,MAAlB,GAA2B,KAA3B;AACD;AACF;AACF;;AAEOP,QAAAA,UAAU,GAAG;AACnB,eAAKzD,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,IAApD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,gBAA3B,EAA6Ce,MAA7C,GAAsD,KAAtD;AAEA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,KAAnD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,KAAhD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAkD,KAAlD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA0D,KAA1D;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,KAApD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDe,MAAhD,GAAyD,KAAzD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,KAApD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,SAA3B,EAAsCe,MAAtC,GAA+C,KAA/C,CAXmB,CAYnB;;AAGA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,GAAqE,GAArE;AACA,eAAKtE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCoB,YAAzC,CAAsD1I,KAAtD,EAA6D2I,MAA7D,GAAsE,IAAtE;AACA,eAAKtE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCoB,YAAvC,CAAoD1I,KAApD,EAA2D2I,MAA3D,GAAoE,SAApE,CAjBmB,CAkBnB;;AACA,eAAKtE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CoB,YAA3C,CAAwD1I,KAAxD,EAA+D2I,MAA/D,GAAwE,SAAxE;AACD;;AACOC,QAAAA,aAAa,CAACzD,UAAD,EAAmB,CACtC;AACA;AACA;AACD;;AAEO0D,QAAAA,eAAe,CAAC1D,UAAD,EAAmB,CACxC;AACA;AACA;AACD;;AAEO4C,QAAAA,YAAY,GAAG,CACrB;AACA;AACA;AACA;AACD;;AAEOF,QAAAA,aAAa,GAAG;AACtB,eAAKxD,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCwB,EAAvC,CAA0C7I,IAAI,CAAC8I,SAAL,CAAeC,SAAzD,EAAqEC,CAAD,IAAO;AACzE,iBAAKzF,eAAL,GAAuB,CAAC,KAAKA,eAA7B;AACA,iBAAKa,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDe,MAAhD,GAAyD,KAAK7E,eAA9D;AACD,WAHD;AAMA,eAAKa,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDwB,EAAjD,CAAoD7I,IAAI,CAAC8I,SAAL,CAAeC,SAAnE,EAA+EC,CAAD,IAAO;AACnF,gBAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC0C,cAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACA,mBAAK1F,sBAAL,GAA8B,CAAC,KAAKA,sBAApC;AACA,mBAAKY,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAmD,KAAK5E,sBAAxD;AACA,mBAAKY,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA2D,KAAK5E,sBAAhE;AACA,mBAAKvB,OAAL,CAAakH,IAAb,CAAkB,KAAK7H,aAAvB,EAAsC,KAAKG,iBAA3C;AACD;AACF,WARD;AAUA,eAAK2C,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCwB,EAAxC,CAA2C7I,IAAI,CAAC8I,SAAL,CAAeC,SAA1D,EAAsEC,CAAD,IAAO;AAC1E,gBAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,mBAAK6C,kBAAL;AACD;AACF,WAJD;AAMA,eAAKhF,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCwB,EAAvC,CAA0C7I,IAAI,CAAC8I,SAAL,CAAeC,SAAzD,EAAqEC,CAAD,IAAO;AACzE,gBAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,mBAAK8C,gBAAL;AACD;AACF,WAJD;AAMA,eAAKjF,MAAL,CAAYiD,cAAZ,CAA2B,gBAA3B,EAA6CwB,EAA7C,CAAgD7I,IAAI,CAAC8I,SAAL,CAAeC,SAA/D,EAA2EC,CAAD,IAAO;AAC/E,gBAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,mBAAK/C,sBAAL,GAA8B,CAAC,KAAKA,sBAApC;AACA,mBAAKY,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAkD,KAAK5E,sBAAvD;AACA,mBAAKY,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA0D,KAAK5E,sBAA/D;AACD;AACF,WAND;AAOD;;AAEO8F,QAAAA,aAAa,GAAG;AACtB,iBAAO,KAAK/H,YAAL,CAAkBgI,UAAlB,CAA6BC,KAApC;AACD;;AAEOC,QAAAA,cAAc,GAAG;AACvB,iBAAO,KAAKlI,YAAL,CAAkBgI,UAAlB,CAA6BG,MAApC;AACD;;AAEMC,QAAAA,YAAY,CAACX,CAAD,EAAgB;AACjC,cAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAK3D,WAAL,GAAmB,IAAnB;;AACA,gBAAI,KAAKgH,UAAL,OAAsB,IAA1B,EAAgC;AAC9B,qBAAO,IAAP;AACD;;AAED,gBAAIjH,SAAS,GAAGqG,CAAC,CAACa,aAAF,EAAhB;AACA,gBAAIC,GAAG,GAAG,IAAI1J,IAAJ,CAASuC,SAAS,CAACoH,CAAnB,EAAsBpH,SAAS,CAACqH,CAAhC,CAAV;;AACA,gBAAI,KAAKC,WAAL,OAAuB,IAAvB,IAA+B,KAAKzH,IAAL,KAAc,CAAjD,EAAoD;AAClDsH,cAAAA,GAAG,GAAG,IAAI1J,IAAJ,CAASG,IAAI,CAAC2J,cAAL,GAAsBH,CAAtB,GAA0BpH,SAAS,CAACoH,CAA7C,EAAgDxJ,IAAI,CAAC2J,cAAL,GAAsBF,CAAtB,GAA0BrH,SAAS,CAACqH,CAApF,CAAN;AACD;;AAED,iBAAKG,oBAAL,CAA0BL,GAA1B;AACA,iBAAK1G,SAAL,GAAiB0G,GAAjB;AAEA,iBAAKjH,oBAAL,GAA4B,KAAKP,aAAL,CAAmB8H,MAA/C;;AAEA,gBAAI,KAAKH,WAAL,OAAuB,IAA3B,EAAiC;AAC/B,mBAAK7F,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA0D,KAA1D;AACA,mBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAkD,KAAlD;AACA,mBAAK5E,sBAAL,GAA8B,KAA9B;AACD;AACF;;AAED,iBAAO,IAAP;AACD;;AAEM6G,QAAAA,YAAY,CAACrB,CAAD,EAAI;AACrB,cAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAK3D,WAAL,GAAmB,IAAnB;;AACA,gBAAI,KAAKgH,UAAL,OAAsB,IAA1B,EAAgC;AAC9B,qBAAO,IAAP;AACD;;AACD,gBAAIjH,SAAS,GAAGqG,CAAC,CAACa,aAAF,EAAhB;AACA,gBAAIC,GAAG,GAAGnH,SAAV;;AACA,gBAAI,KAAKsH,WAAL,OAAuB,IAAvB,IAA+B,KAAKzH,IAAL,KAAc,CAAjD,EAAoD;AAClDsH,cAAAA,GAAG,GAAG,IAAI1J,IAAJ,CAASG,IAAI,CAAC2J,cAAL,GAAsBH,CAAtB,GAA0BpH,SAAS,CAACoH,CAA7C,EAAgDxJ,IAAI,CAAC2J,cAAL,GAAsBF,CAAtB,GAA0BrH,SAAS,CAACqH,CAApF,CAAN;AACD;;AACD,iBAAKG,oBAAL,CAA0BL,GAA1B;AACA,iBAAKzG,QAAL,GAAgByG,GAAhB;AACD;;AAED,iBAAO,IAAP;AACD;;AAEMQ,QAAAA,YAAY,CAACtB,CAAD,EAAI;AACrB,cAAI,KAAKlG,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAK3D,WAAL,GAAmB,KAAnB;;AACA,gBAAI,KAAKoB,eAAL,KAAyB,IAA7B,EAAmC;AACjC,kBAAKuG,IAAI,CAACC,GAAL,CAAS,KAAKpH,SAAL,CAAe2G,CAAf,GAAmB,KAAK1G,QAAL,CAAc0G,CAA1C,IAA+C,EAA/C,IAAqDQ,IAAI,CAACC,GAAL,CAAS,KAAKpH,SAAL,CAAe4G,CAAf,GAAmB,KAAK3G,QAAL,CAAc2G,CAA1C,IAA+C,EAArG,IACD,KAAK3G,QAAL,CAAc0G,CAAd,KAAoB,CAApB,IAAyB,KAAK1G,QAAL,CAAc2G,CAAd,KAAoB,CADhD,EACoD;AAClD,oBAAIrH,SAAS,GAAGqG,CAAC,CAACa,aAAF,EAAhB;AACA,oBAAIC,GAAG,GAAGnH,SAAV;;AACA,oBAAI,KAAKsH,WAAL,OAAuB,IAAvB,IAA+B,KAAKzH,IAAL,KAAc,CAAjD,EAAoD;AAClDsH,kBAAAA,GAAG,GAAG,IAAI1J,IAAJ,CAASG,IAAI,CAAC2J,cAAL,GAAsBH,CAAtB,GAA0BpH,SAAS,CAACoH,CAA7C,EAAgDxJ,IAAI,CAAC2J,cAAL,GAAsBF,CAAtB,GAA0BrH,SAAS,CAACqH,CAApF,CAAN;AACD;;AACD,qBAAKS,eAAL,CAAqBX,GAArB;;AAEA,oBAAI,KAAKF,UAAL,OAAsB,IAA1B,EAAgC;AAC9B;AACA,uBAAKc,WAAL,CAAiB,IAAjB;AACD;AACF;AACF;;AACD,iBAAKtH,SAAL,GAAiB,IAAIhD,IAAJ,EAAjB;AACA,iBAAKiD,QAAL,GAAgB,IAAIjD,IAAJ,EAAhB;AAED;;AAED,iBAAO,KAAP;AACD;;AAEOqK,QAAAA,eAAe,CAACX,GAAD,EAAM;AAC3B,cAAIa,MAAM,GAAG,KAAK9F,WAAL,CAAiB+F,gBAAjB,CAAkCd,GAAlC,CAAb;AACA,eAAKpF,QAAL,CAAcmG,eAAd,CAA8BF,MAA9B;AACD;;AAEOD,QAAAA,WAAW,CAACI,KAAD,EAAQ;AACzB,cAAIA,KAAK,KAAK,IAAV,IAAkB,KAAKhI,SAAL,CAAeyD,QAAf,KAA4B,IAAlD,EAAwD;AACtD,iBAAKvD,YAAL,GAAoB8H,KAApB;;AACA,gBAAI,KAAK7H,aAAL,KAAuB,IAA3B,EAAiC;AAC/B,mBAAKD,YAAL,GAAoB,IAApB;AACD;AACF;AACF;;AAEMiH,QAAAA,WAAW,GAAG;AACnB,iBAAO,KAAKnH,SAAL,CAAeyD,QAAtB;AACD;;AAEO4D,QAAAA,oBAAoB,CAACL,GAAD,EAAM;AAChC,eAAKrH,SAAL,GAAiB,KAAKsI,gBAAL,CAAsBjB,GAAtB,EAA2B,KAAKnH,SAAhC,EAA2C,KAAKH,IAAhD,CAAjB;AACA,cAAIwI,YAAY,GAAG,KAAKC,uBAAL,CAA6B,KAAKxI,SAAlC,CAAnB,CAFgC,CAIhC;;AACA,eAAK2E,UAAL,GAAkBkB,KAAlB,GAA0B0C,YAA1B;AACD,SAvZoC,CAyZrC;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAEQC,QAAAA,uBAAuB,CAACC,MAAD,EAAS;AACtC,cAAIF,YAAY,GAAG,CAAnB;;AACA,cAAI,KAAKxI,IAAL,IAAa,CAAjB,EAAoB;AAClBwI,YAAAA,YAAY,GAAG;AAAA;AAAA,8BAAUE,MAAV,GAAmB;AAAA;AAAA,8BAAM,CAAxC;AACD,WAFD,MAEO,IAAI,KAAK1I,IAAL,IAAa,CAAjB,EAAoB;AACzBwI,YAAAA,YAAY,GAAG;AAAA;AAAA,8BAAUE,MAAV,GAAmB;AAAA;AAAA,8BAAM,CAAN,GAAU,CAA5C;AACD,WAFM,MAEA,IAAI,KAAK1I,IAAL,IAAa,CAAjB,EAAoB;AACzBwI,YAAAA,YAAY,GAAG;AAAA;AAAA,8BAAME,MAArB;AACD,WAFM,MAEA,IAAI,KAAK1I,IAAL,IAAa,CAAjB,EAAoB;AACzBwI,YAAAA,YAAY,GAAGE,MAAf;AACD;;AAED,iBAAOF,YAAP;AACD,SAtboC,CAwbrC;;;AACQD,QAAAA,gBAAgB,CAACI,IAAD,EAAOC,IAAP,EAAa5I,IAAb,EAAmB;AAEzC,cAAI8F,KAAK,GAAG,CAAZ;;AACA,cAAI6C,IAAI,CAACpB,CAAL,KAAWqB,IAAI,CAACrB,CAApB,EAAuB;AACrB,gBAAIvH,IAAI,KAAK,CAAT,IAAc2I,IAAI,CAACnB,CAAL,IAAUoB,IAAI,CAACpB,CAAjC,EAAoC;AAClC1B,cAAAA,KAAK,GAAG,EAAR;AACD,aAFD,MAEO,IAAI9F,IAAI,KAAK,CAAT,IAAc2I,IAAI,CAACnB,CAAL,GAASoB,IAAI,CAACpB,CAAhC,EAAmC;AACxC1B,cAAAA,KAAK,GAAG,GAAR;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAT,IAAc2I,IAAI,CAACnB,CAAL,IAAUoB,IAAI,CAACpB,CAAjC,EAAoC;AACzC1B,cAAAA,KAAK,GAAG,EAAR;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAT,IAAc2I,IAAI,CAACnB,CAAL,GAASoB,IAAI,CAACpB,CAAhC,EAAmC;AACxC1B,cAAAA,KAAK,GAAG,GAAR;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAb,EAAgB;AACrB8F,cAAAA,KAAK,GAAG,GAAR;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAb,EAAgB;AACrB8F,cAAAA,KAAK,GAAG,EAAR;AACD;AACF,WAdD,MAcO;AACL,gBAAI+C,CAAC,GAAG,CAACF,IAAI,CAACnB,CAAL,GAASoB,IAAI,CAACpB,CAAf,KAAqBmB,IAAI,CAACpB,CAAL,GAASqB,IAAI,CAACrB,CAAnC,CAAR,CADK,CAGL;;AACAzB,YAAAA,KAAK,GAAGiC,IAAI,CAACe,IAAL,CAAUD,CAAV;AAAA;AAAA;AAAA;AAAA,yBAAR;;AAEA,gBAAI7I,IAAI,KAAK,CAAT,IAAc8F,KAAK,IAAI,CAA3B,EAA8B;AAC5BA,cAAAA,KAAK,GAAG;AAAA;AAAA,gCAAUA,KAAlB;AACD,aAFD,MAEO,IAAI9F,IAAI,KAAK,CAAb,EAAgB;AACrB8F,cAAAA,KAAK,GAAG;AAAA;AAAA,gCAAMA,KAAd;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAT,IAAc8F,KAAK,GAAG,CAA1B,EAA6B;AAClCA,cAAAA,KAAK,GAAG;AAAA;AAAA,gCAAMA,KAAd;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAT,IAAc8F,KAAK,IAAI,CAA3B,EAA8B;AACnCA,cAAAA,KAAK,GAAG;AAAA;AAAA,gCAAUA,KAAlB;AACD,aAFM,MAEA,IAAI9F,IAAI,KAAK,CAAT,IAAc8F,KAAK,IAAI,CAA3B,EAA8B;AACnCA,cAAAA,KAAK,GAAG;AAAA;AAAA,gCAAMA,KAAd;AACD;AACF;;AAED,iBAAOA,KAAP;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACSiD,QAAAA,cAAc,CAACC,IAAD,EAAOtG,UAAP,EAAyB;AAC5C,eAAKA,UAAL,GAAkBA,UAAlB;AACA,eAAKpC,SAAL,GAAiB0I,IAAI,CAAC1I,SAAtB;AACA,eAAKqB,aAAL,GAAqB,CAArB;AAEA,eAAKC,MAAL,CAAYiD,cAAZ,CAA2B,gBAA3B,EAA6Ce,MAA7C,GAAsD,IAAtD;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,KAApD;AAEA,eAAK9F,aAAL,GAAqB,KAAKd,gBAAL,CAAsB,KAAKsB,SAAL,CAAe+D,UAArC,CAArB;AACA,eAAKtE,UAAL,GAAkB,KAAKd,iBAAL,CAAuB,KAAKa,aAAL,CAAmBmJ,EAA1C,CAAlB;AAEA,eAAKjJ,IAAL,GAAYgJ,IAAI,CAAChJ,IAAjB;AACA,eAAKG,SAAL,GAAiB6I,IAAI,CAAC7I,SAAtB;AAEA,cAAI+I,MAAM,GAAG,KAAKtE,UAAL,GAAkBI,gBAAlB,EAAb;AACA,eAAK7E,SAAL,GAAiB+I,MAAjB;;AACA,cAAIxG,UAAU,CAACoD,KAAX,KAAqB,GAAzB,EAA8B;AAAE;AAC9B,iBAAK3F,SAAL,GAAiB,IAAIvC,IAAJ,CAASG,IAAI,CAAC2J,cAAL,GAAsBH,CAAtB,GAA0B2B,MAAM,CAAC3B,CAA1C,EAA6CxJ,IAAI,CAAC2J,cAAL,GAAsBF,CAAtB,GAA0B0B,MAAM,CAAC1B,CAA9E,CAAjB;AACD,WAlB2C,CAmB5C;;;AACA,cAAI,KAAKxH,IAAL,KAAc,CAAlB,EAAqB;AACnB,iBAAKC,SAAL,GAAiB,GAAjB,CADmB,CAEnB;AACA;AACD,WAJD,MAIO,IAAI,KAAKD,IAAL,KAAc,CAAlB,EAAqB;AAC1B;AACA;AACA,iBAAKC,SAAL,GAAiB,EAAjB;AACD;;AAED,eAAKkJ,kBAAL;AACA,eAAKC,SAAL;AAEA,eAAK7D,QAAL;AACA,eAAKC,WAAL,GAlC4C,CAoC5C;;AACA,eAAK6D,qBAAL;AACA,eAAKC,aAAL;AAEA,eAAKnH,aAAL,CAAmBoH,aAAnB;;AAEA,cAAI,KAAKjJ,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAKoC,aAAL,CAAmBzD,UAAnB;AACD;;AAED,eAAK8G,eAAL;AACD;;AAEML,QAAAA,kBAAkB,GAAG,CAC1B;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACD;;AAEOC,QAAAA,SAAS,GAAG;AAClB;AACA;AACA;AACA,eAAKxH,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CoB,YAA3C,CAAwD1I,KAAxD,EAA+D2I,MAA/D,GAAwE,WAAW,KAAK5F,SAAL,CAAe6D,SAAlG;AACA,eAAKvC,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,QAAwE,KAAK5F,SAAL,CAAe0D,IAAvF;;AACA,cAAI,KAAKtE,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3D,iBAAKgD,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCoB,YAAzC,CAAsD1I,KAAtD,EAA6D2I,MAA7D,GAAsE,KAAK5F,SAAL,CAAeqE,MAAf,GAAwB,EAA9F;AACD,WAFD,MAEO;AACL,iBAAK/C,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCoB,YAAzC,CAAsD1I,KAAtD,EAA6D2I,MAA7D,GAAsE,KAAK5F,SAAL,CAAegE,aAAf,GAA+B,EAArG;AACD;;AAED,eAAK1C,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA0D,KAA1D;AACA,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAkD,KAAlD;;AAEA,cAAK,KAAK6B,WAAL,OAAuB,IAAxB,IAAkC,KAAK/H,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAzE,EAAgG;AAC9F,iBAAKgD,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCe,MAAzC,GAAkD,IAAlD;AACA,iBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,oBAA3B,EAAiDe,MAAjD,GAA0D,IAA1D;AACA,iBAAK5E,sBAAL,GAA8B,IAA9B;AACD,WAJD,MAIO;AACL,iBAAKY,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCe,MAAxC,GAAiD,KAAjD;AACA,iBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,KAAhD;AACD;;AAED,cAAI,KAAKlG,WAAL,CAAiB+J,WAAjB,OAAmC5K,kBAAvC,EAA2D;AACzD,gBAAI;AAAA;AAAA,wCAAU,KAAKyB,SAAL,CAAe0D,IAAzB,EAA+B,KAAK1D,SAAL,CAAegE,aAA9C,IAA+D,CAAnE,EAAsE;AACpE,mBAAK1C,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,IAAnD;AACD,aAFD,MAEO;AACL,mBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,KAAnD;AACD;AACF;;AAED,eAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDe,MAAhD,GAAyD,KAAzD,CAhCkB,CAkClB;;AACA,cAAM8D,UAAU,GAAG,KAAK9H,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCoB,YAAvC,CAAoDxI,MAApD,CAAnB;AACA;AAAA;AAAA,gCAAOkM,cAAP,CAAsB,KAAKrJ,SAAL,CAAe2D,OAArC,EAA8CyF,UAA9C,EApCkB,CAsClB;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AAEME,QAAAA,eAAe,GAAG;AACvB,eAAK7I,eAAL,GAAuB,KAAvB;AACA,eAAKa,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDe,MAAhD,GAAyD,KAAzD;AACD,SA/mBoC,CAinBrC;;;AACQgB,QAAAA,kBAAkB,GAAG;AAC3B,cAAIiD,SAAS,GAAG,KAAKnK,WAAL,CAAiBoK,WAAjB,CAA6B,KAAKxJ,SAAL,CAAekE,OAA5C,CAAhB;;AACA,cAAIqF,SAAS,IAAI,CAAC,KAAKvJ,SAAL,CAAeiE,cAAjC,EAAiD;AAC/C,iBAAK/E,qBAAL,CAA2B;AAAEuK,cAAAA,IAAI,EAAE;AAAR,aAA3B;AACD;AACF,SAvnBoC,CAynBrC;;;AACQlD,QAAAA,gBAAgB,GAAG;AACzB,cAAIgD,SAAS,GAAG,KAAKnK,WAAL,CAAiBoK,WAAjB,CAA6B,KAAKxJ,SAAL,CAAekE,OAA5C,CAAhB;;AACA,cAAIqF,SAAS,IAAI,CAAC,KAAKvJ,SAAL,CAAeiE,cAAjC,EAAiD;AAC/C,iBAAK/E,qBAAL,CAA2B;AAAEuK,cAAAA,IAAI,EAAE;AAAR,aAA3B;AACD;AACF;;AAEOxE,QAAAA,QAAQ,GAAG;AACjB,cAAI,KAAK7F,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3D,iBAAKgD,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCe,MAAxC,GAAmD,KAAKtF,SAAL,CAAemE,KAAf,KAAyB,CAA1B,IAAiC,KAAK/E,WAAL,CAAiBsK,KAAjB,KAA2B,CAA9G;AACD,WAFD,MAEO;AACL,iBAAKpI,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCe,MAAxC,GAAiD,KAAjD;AACD;AACF;;AAEOJ,QAAAA,WAAW,GAAG;AACpB,cAAI,KAAK9F,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3D,iBAAKgD,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAsD,KAAKtF,SAAL,CAAeoE,OAAf,KAA2B,CAAjF;AACD,WAFD,MAEO;AACL,iBAAK9C,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,KAApD;AACD;AACF;;AAEMwB,QAAAA,UAAU,GAAG;AAClB,cAAI,KAAKlF,QAAT,EAAmB;AACjB,gBAAI,KAAKA,QAAL,CAAc+H,YAAd,MAAgC,KAAK/H,QAAL,CAAcgI,oBAAd,OAAyC,CAAC,CAA9E,EAAiF;AAC/E,qBAAO,IAAP;AACD;AACF;;AAED,iBAAO,KAAP;AACD;;AAEMC,QAAAA,aAAa,GAAG;AACrB,cAAI,KAAKjI,QAAT,EAAmB;AACjB,mBAAO,KAAKA,QAAL,CAAcgI,oBAAd,EAAP;AACD;;AAED,iBAAO,CAAC,CAAR;AACD;;AAEME,QAAAA,gBAAgB,CAACC,MAAD,EAAiBC,MAAjB,EAAkC;AAEvD,cAAI;AAAA;AAAA,sCAAU,KAAKhK,SAAL,CAAe0D,IAAzB,EAA+BqG,MAA/B,IAAyC,CAA7C,EAAgD;AAC9C,iBAAKzI,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,IAAhD;;AACA,gBAAI,KAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,KAAqD,IAAzD,EAA+D;AAC7D,mBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,KAAhD;AACD;AACF,WALD,MAKO;AACL,iBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,KAAhD;AACD;;AACD,eAAKtF,SAAL,CAAegE,aAAf,GAA+B+F,MAA/B;AACA,eAAKzI,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCoB,YAAzC,CAAsD1I,KAAtD,EAA6D2I,MAA7D,GAAsE,KAAK5F,SAAL,CAAegE,aAAf,GAA+B,EAArG;;AAEA,cAAIgG,MAAM,KAAK,IAAf,EAAqB;AACnB,iBAAKlJ,UAAL,CAAgBwE,MAAhB,GAAyB,IAAzB;AACA,iBAAKxE,UAAL,CAAgB6E,YAAhB,CAA6B5I,SAA7B,EAAwCkN,IAAxC;AAEA,iBAAKC,iBAAL;AACA,iBAAK/H,iBAAL,CAAuB8H,IAAvB,CAA4B,KAAKxL,YAAL,CAAkB0L,iBAA9C;AACD;AACF;;AAEMC,QAAAA,UAAU,CAACzB,EAAD,EAAK;AACpB,eAAK3I,SAAL,CAAe+D,UAAf,GAA4B4E,EAA5B;AACA,eAAKnJ,aAAL,GAAqB,KAAKd,gBAAL,CAAsBiK,EAAtB,CAArB;AACA,eAAKlJ,UAAL,GAAkB,KAAKd,iBAAL,CAAuB,KAAKa,aAAL,CAAmBmJ,EAA1C,CAAlB,CAHoB,CAKpB;;AACA,eAAK9H,UAAL,CAAgByE,MAAhB,GAAyB,KAAzB;AAGA,eAAKtE,YAAL,GAAoB,KAApB;AACA,eAAKC,WAAL,GAAmB,KAAnB;AACA,eAAKkB,iBAAL,CAAuB8H,IAAvB,CAA4B,KAAKxL,YAAL,CAAkB4L,qBAA9C;AAEA,eAAKtB,qBAAL;AACD;;AAEMuB,QAAAA,WAAW,CAACzC,MAAD,EAAS;AACzB,cAAI,KAAKjG,QAAT,EAAmB;AACjB,iBAAKA,QAAL,CAAc0I,WAAd,CAA0BzC,MAA1B;;AAEA,gBAAI,KAAK9G,YAAL,CAAkBuE,MAAlB,KAA6B,KAAjC,EAAwC;AACtC,mBAAKvE,YAAL,CAAkBuE,MAAlB,GAA2B,IAA3B;AACA;AAAA;AAAA,gDAAa,KAAKvE,YAAlB,EAAgCkJ,IAAhC;AACA,mBAAKlJ,YAAL,CAAkB4D,eAAlB,CAAkC,KAAK5D,YAAL,CAAkBwJ,MAAlB,CAAyB3F,QAAzB,CAAkCC,MAApE;AACD;AACF;AACF;;AAEM2F,QAAAA,YAAY,GAAG;AACpB,cAAI,KAAK5I,QAAT,EAAmB;AACjB,mBAAO,KAAKA,QAAL,CAAc6I,mBAAd,EAAP;AACD;;AAED,iBAAO,CAAP;AACD;;AAEMC,QAAAA,eAAe,GAAG;AACvB,cAAI,KAAK9I,QAAT,EAAmB;AACjB,mBAAO,KAAKA,QAAL,CAAc8I,eAAd,EAAP;AACD;;AAED,iBAAO,IAAP;AACD;;AAEMC,QAAAA,OAAO,GAAG;AACf,iBAAO,KAAKjL,IAAZ;AACD;;AAEMkL,QAAAA,sBAAsB,GAAG;AAC9B,cAAIC,UAAU,GAAG,KAAjB;;AACA,cAAI,KAAK7K,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,gBAAI,KAAKpD,kBAAL,GAA0B,KAAKD,cAAnC,EAAmD;AACjDyK,cAAAA,UAAU,GAAG,IAAb;AACD,aAFD,MAEO;AACLA,cAAAA,UAAU,GAAG,KAAb;AACD;AACF;;AAED,iBAAOA,UAAP;AACD;;AAGMC,QAAAA,kBAAkB,GAAG;AAC1B,eAAKvL,eAAL,GAAuB,KAAvB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACA,eAAKC,UAAL,GAAkB,IAAlB;AACA,eAAKC,IAAL,GAAY,CAAZ;AACA,eAAKE,YAAL,GAAoB,IAAItC,IAAJ,EAApB;AACA,eAAKqC,SAAL,GAAiB,CAAjB;AACA,eAAKE,SAAL,GAAiB,IAAIvC,IAAJ,EAAjB;AACA,eAAKwC,WAAL,GAAmB,KAAnB;AACA,eAAKC,oBAAL,GAA4B,CAA5B;AACA,eAAKC,SAAL,GAAiB;AACfsD,YAAAA,SAAS,EAAE,EADI;AAEfE,YAAAA,MAAM,EAAE,CAFO;AAGfD,YAAAA,SAAS,EAAE,CAHI;AAIfE,YAAAA,QAAQ,EAAE,KAJK;AAKfC,YAAAA,IAAI,EAAE,CALS;AAMfC,YAAAA,OAAO,EAAE,CANM;AAOfC,YAAAA,KAAK,EAAE,CAPQ;AAQfC,YAAAA,SAAS,EAAE,CARI;AASfC,YAAAA,SAAS,EAAE,EATI;AAUfC,YAAAA,UAAU,EAAE,CAVG;AAWfC,YAAAA,aAAa,EAAE,CAXA;AAYfC,YAAAA,cAAc,EAAE,KAZD;AAafC,YAAAA,OAAO,EAAE,EAbM;AAcfC,YAAAA,KAAK,EAAE,CAdQ;AAefC,YAAAA,OAAO,EAAE,CAfM;AAgBfC,YAAAA,MAAM,EAAE;AAhBO,WAAjB;AAkBA,eAAKpE,kBAAL,GAA0B,CAAC,CAA3B;AACA,eAAKC,YAAL,GAAoB,KAApB;AACA,eAAKC,aAAL,GAAqB,KAArB;AACA,eAAKE,kBAAL,GAA0B,CAA1B;AACA,eAAKC,SAAL,GAAiB,IAAIhD,IAAJ,EAAjB;AACA,eAAKiD,QAAL,GAAgB,IAAIjD,IAAJ,EAAhB;AAEA,eAAKmD,eAAL,GAAuB,KAAvB,CAnC0B,CAmCE;;AAC5B,eAAKC,sBAAL,GAA8B,KAA9B,CApC0B,CAoCS;;AACnC,eAAKM,YAAL,GAAoB,KAApB,CArC0B,CAqCD;;AACzB,eAAKC,WAAL,GAAmB,KAAnB,CAtC0B,CAsCF;;AACxB,eAAKC,eAAL,GAAuB,KAAvB,CAvC0B,CAuCE;;AAC5B,eAAKG,aAAL,GAAqB,CAArB;;AAEA,cAAI,KAAKT,OAAT,EAAkB;AAChB,iBAAKA,OAAL,CAAamK,OAAb;AACA,iBAAKnK,OAAL,GAAe,IAAf;AACD;;AAED,cAAI,KAAKD,YAAT,EAAuB;AACrB;AACA,iBAAKA,YAAL,CAAkBoK,OAAlB;AACA,iBAAKpK,YAAL,GAAoB,IAApB;AACD,WAnDyB,CAqD1B;;;AACA;AAAA;AAAA,4CAAa,KAAKI,YAAlB,EAAgCiK,IAAhC;AACA,eAAKjK,YAAL,CAAkBuE,MAAlB,GAA2B,KAA3B,CAvD0B,CAyD1B;;AACA;AAAA;AAAA,4CAAa,KAAKxE,UAAlB,EAA8BkK,IAA9B;AACA,eAAKlK,UAAL,CAAgBwE,MAAhB,GAAyB,KAAzB,CA3D0B,CA6D1B;;AACA;AAAA;AAAA,4CAAa,KAAKzE,UAAlB,EAA8BmK,IAA9B;AACA,eAAKnK,UAAL,CAAgByE,MAAhB,GAAyB,KAAzB;AAEA,eAAKhB,UAAL,GAAkBkB,KAAlB,GAA0B,EAA1B;AAEA,eAAKT,UAAL;;AAEA,cAAI,KAAKnD,QAAL,KAAkB,IAAtB,EAA4B;AAC1B,iBAAKA,QAAL,CAAcmJ,OAAd;AACA,iBAAKnJ,QAAL,GAAgB,IAAhB;AACD;;AAED,eAAKC,aAAL,CAAmBoJ,KAAnB;AACA,eAAK9J,aAAL,GAAqB,EAArB;AACA,eAAK2E,eAAL,CAAqB,KAAK1D,UAA1B;AACD;;AAEO2G,QAAAA,qBAAqB,GAAG;AAC9B,cAAImC,KAAK,GAAG,KAAKzL,UAAjB;AACA,eAAKoB,UAAL,CAAgB0E,WAAhB,CAA4B,KAAK/F,aAAL,CAAmB2L,aAA/C,EAA8D,CAA9D;;AAEA,cAAI,KAAKvK,OAAT,EAAkB;AAChB,iBAAKA,OAAL,CAAamK,OAAb;AACA,iBAAKnK,OAAL,GAAe,IAAf;AACD;;AAED,cAAI,KAAKD,YAAT,EAAuB;AACrB;AACA,iBAAKA,YAAL,CAAkBoK,OAAlB;AACA,iBAAKpK,YAAL,GAAoB,IAApB;AACD;;AAED,cAAIuK,KAAJ,EAAW;AACT,gBAAIA,KAAK,CAACvC,EAAN,KAAa,CAAjB,EAAoB;AAAC;AACnB,kBAAIyC,IAAI,GAAG,KAAK5M,aAAL,CAAmB0M,KAAK,CAACG,GAAzB,CAAX;AACA,mBAAKzK,OAAL,GAAe;AAAA;AAAA,8DAAoB,KAAKkB,aAAzB,EAAwC,KAAKwC,UAAL,EAAxC,EAA2D8G,IAA3D,EAAiE,KAAjE,EAAwE,KAAxE,CAAf;AACA,mBAAKxK,OAAL,CAAa+E,YAAb,CAA0BvI,WAA1B,EAAuCkO,cAAvC,CAAsD,IAAIjO,IAAJ,CAAS,IAAT,EAAe,GAAf,CAAtD;AACA,mBAAKuD,OAAL,CAAa2E,WAAb,CAAyB,CAAzB,EAA4B,CAA5B,EAJkB,CAMlB;AACD,aAPD,MAOO;AACL;AACA;AACA;AACA,mBAAK5E,YAAL,GAAoB;AAAA;AAAA,oDAAe,KAAKmB,aAApB,EAAmC,KAAKwC,UAAL,EAAnC,EAAsD4G,KAAK,CAACG,GAA5D,CAApB;AACA,kBAAME,EAAE,GAAG,KAAK5K,YAAL,CAAkBgF,YAAlB,CAA+BnI,EAAE,CAACgO,QAAlC,CAAX;AACAD,cAAAA,EAAE,CAACE,YAAH,CAAgB,CAAhB,EAAmBP,KAAK,CAACQ,IAAzB,EAA+B,IAA/B;AACA,mBAAKtK,cAAL,GAAsBmK,EAAE,CAACI,SAAzB;AACA,mBAAKhL,YAAL,CAAkBiL,YAAlB,CAA+BxO,WAA/B,EAA4CkO,cAA5C,CAA2D,IAAIjO,IAAJ,CAAS,IAAT,EAAe,GAAf,CAA3D;AACA,mBAAKsD,YAAL,CAAkB4E,WAAlB,CAA8B,EAA9B,EAAkC,CAAlC;AACAgG,cAAAA,EAAE,CAACM,mBAAH,CAAuB,MAAM;AAC3B,qBAAK7K,YAAL,GAAoB,KAApB;AACAuK,gBAAAA,EAAE,CAACI,SAAH,GAAe,KAAKvK,cAApB;AACAmK,gBAAAA,EAAE,CAACE,YAAH,CAAgB,CAAhB,EAAmBP,KAAK,CAACQ,IAAzB,EAA+B,IAA/B;AACD,eAJD;AAKD;AACF;AACF;;AAEMI,QAAAA,uBAAuB,CAACpM,IAAD,EAAO;AACnC,cAAIA,IAAI,KAAK,CAAb,EAAgB;AACd,iBAAK4B,MAAL,CAAYkE,KAAZ,GAAoB,EAApB;AACA,iBAAK7F,SAAL,GAAiB,CAAjB;AACD,WAHD,MAGO,IAAID,IAAI,KAAK,CAAb,EAAgB;AACrB,iBAAK4B,MAAL,CAAYkE,KAAZ,GAAoB,GAApB;AACA,iBAAK7F,SAAL,GAAiB,GAAjB;AACD,WAHM,MAGA,IAAID,IAAI,KAAK,CAAb,EAAgB;AACrB,iBAAK4B,MAAL,CAAYkE,KAAZ,GAAoB,GAApB;AACA,iBAAK7F,SAAL,GAAiB,GAAjB;AACD,WAHM,MAGA,IAAID,IAAI,KAAK,CAAb,EAAgB;AACrB,iBAAK4B,MAAL,CAAYkE,KAAZ,GAAoB,CAApB;AACA,iBAAK7F,SAAL,GAAiB,EAAjB;AACD;AACF;;AAEMqJ,QAAAA,aAAa,GAAG;AACrB,cAAI,CAAC,KAAKpH,QAAV,EAAoB;AAClB,gBAAIoF,GAAG,GAAG,KAAKxC,IAAL,CAAUE,gBAAV,EAAV;;AACA,gBAAI,KAAKtC,UAAL,CAAgBoD,KAAhB,KAA0B,GAA9B,EAAmC;AACjCwB,cAAAA,GAAG,GAAG,IAAI1J,IAAJ,CAASG,IAAI,CAAC2J,cAAL,GAAsBH,CAAtB,GAA0BD,GAAG,CAACC,CAAvC,EAA0CxJ,IAAI,CAAC2J,cAAL,GAAsBF,CAAtB,GAA0BF,GAAG,CAACE,CAAxE,CAAN;AACD;;AAED,gBAAIwB,IAAI,GAAG;AACT6B,cAAAA,MAAM,EAAE,KAAKnI,UADJ;AAET1C,cAAAA,IAAI,EAAE,KAAKA,IAFF;AAGT+D,cAAAA,QAAQ,EAAE,KAAKzD,SAAL,CAAeyD,QAHhB;AAITsI,cAAAA,IAAI,EAAE,KAAKvM,aAAL,CAAmBwM,aAJhB;AAKTC,cAAAA,gBAAgB,EAAE,KAAKzN,aAAL,CAAmB,KAAKC,YAAL,CAAkByN,WAArC,CALT;AAMTC,cAAAA,UAAU,EAAEnF,GAAG,CAACoF,KAAJ,EANH;AAOT9I,cAAAA,SAAS,EAAE,KAAKtD,SAAL,CAAesD;AAPjB,aAAX;AAUA,iBAAK1B,QAAL,GAAgB;AAAA;AAAA,sCAAa8G,IAAb,EAAmB,KAAKjK,YAAxB,EAAsC,KAAKqD,aAA3C,EAA0D,KAAKC,WAA/D,EAA4E,KAAKE,cAAjF,CAAhB;AACA,iBAAKL,QAAL,CAAcyK,WAAd,CAA2BxE,MAAD,IAAY;AACpC,mBAAKyE,WAAL,CAAiBzE,MAAjB;AACD,aAFD;AAGD;AACF;;AAEMyE,QAAAA,WAAW,CAACzE,MAAD,EAAS;AACzB,cAAI,KAAK7H,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,gBAAI8I,GAAG,GAAG;AAAEC,cAAAA,MAAM,EAAE3E;AAAV,aAAV;AACA,iBAAK9I,YAAL,CAAkBwN,GAAlB;AACD;AACF;;AAEMrD,QAAAA,eAAe,GAAG;AACvB,cAAMuD,MAAM,GAAG,KAAKnL,MAAL,CAAYiD,cAAZ,CAA2B,SAA3B,CAAf;;AACA,cAAI,KAAKvE,SAAL,CAAeiE,cAAnB,EAAmC;AACjC,gBAAIwI,MAAM,CAACnH,MAAP,KAAkB,KAAtB,EAA6B;AAC3BmH,cAAAA,MAAM,CAACnH,MAAP,GAAgB,IAAhB;AACA,kBAAIoH,MAAM,GAAG,KAAKlO,aAAL,CAAmB,KAAKC,YAAL,CAAkBkO,WAArC,CAAb;AAEA,kBAAMC,EAAE,GAAG;AAAA;AAAA,gDAAaH,MAAb,CAAX;;AACA,kBAAIG,EAAJ,EAAQ;AACNA,gBAAAA,EAAE,CAAC3C,IAAH;AACD,eAFD,MAEO;AACL;AAAA;AAAA,kDAAa,KAAKnI,aAAlB,EAAiC2K,MAAjC,EAAyCC,MAAzC,EAAiD,IAAjD,EAAuD,IAAvD;AACD,eAT0B,CAW3B;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AACF,WAxBD,MAwBO;AACL;AACAD,YAAAA,MAAM,CAACnH,MAAP,GAAgB,KAAhB;AACD;AACF;AAED;;;AACOuH,QAAAA,gBAAgB,GAAG;AACxB,cAAIC,KAAK,GAAI,KAAKnN,SAAL;AAAA;AAAA,yBAAD;AAAA;AAAA,uBAAZ,CADwB,CAExB;;AAEA,eAAKa,aAAL,CAAmByG,CAAnB,GAAuB,KAAKpH,SAAL,CAAeoH,CAAf,GAAmB,KAAKzH,aAAL,CAAmBuN,UAAnB,GAAgCtF,IAAI,CAACuF,GAAL,CAASF,KAAT,CAA1E;AACA,eAAKtM,aAAL,CAAmB0G,CAAnB,GAAuB,KAAKrH,SAAL,CAAeqH,CAAf,GAAmB,KAAK1H,aAAL,CAAmBuN,UAAnB,GAAgCtF,IAAI,CAACwF,GAAL,CAASH,KAAT,CAA1E;AAEA,iBAAO,KAAKtM,aAAZ;AACD;AAED;;;AACO0M,QAAAA,oBAAoB,GAAG;AAC5B,iBAAO,KAAKrN,SAAZ;AACD;;AAESsN,QAAAA,MAAM,CAACC,EAAD,EAAK;AACnB,cAAI,KAAK7N,eAAL,KAAyB,IAA7B,EAAmC;AACjC;AACD;;AACD,cAAI,KAAKS,SAAL,CAAesD,SAAf,KAA6B,EAAjC,EAAqC;AACnC;AACD;;AAED,cAAI,KAAK1B,QAAT,EAAmB;AACjB,iBAAKA,QAAL,CAAcuL,MAAd,CAAqBC,EAArB;AACD,WAVkB,CAYnB;;;AACA,cAAI,KAAKtG,UAAL,EAAJ,EAAuB;AACrB,iBAAKnH,SAAL,GAAiB,KAAKiC,QAAL,CAAc6I,mBAAd,EAAjB;AAEA,gBAAIvC,YAAY,GAAG,KAAKC,uBAAL,CAA6B,KAAKxI,SAAlC,CAAnB,CAHqB,CAIrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAK2E,UAAL,GAAkBkB,KAAlB,GAA0B0C,YAA1B;AACD;;AAED,eAAKmF,UAAL,CAAgBD,EAAhB;;AAEA,cAAI,KAAKpN,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,gBAAI,KAAKpD,kBAAL,GAA0B,KAAKD,cAAnC,EAAmD;AACjD,mBAAKC,kBAAL,GAA0B,KAAKA,kBAAL,GAA0B+M,EAApD;AACD;;AACD,gBAAI,KAAKtG,UAAL,OAAsB,IAA1B,EAAgC;AAC9B,mBAAKc,WAAL,CAAiB,IAAjB;AACD,aAFD,MAEO;AACL,mBAAKA,WAAL,CAAiB,KAAjB;AACD;AACF;AACF;;AAEM0F,QAAAA,QAAQ,CAAC9H,KAAD,EAAQ;AACrB,eAAK7F,SAAL,GAAiB6F,KAAjB;AACD;;AAEO6H,QAAAA,UAAU,CAACD,EAAD,EAAK;AACrB,cAAI,KAAKrN,oBAAL,GAA4B,KAAKP,aAAL,CAAmB8H,MAAnD,EAA2D;AACzD,iBAAKvH,oBAAL,GAA4B,CAA5B;;AACA,gBAAI,KAAKwN,eAAL,OAA2B,IAA/B,EAAqC;AACnC;AACA,kBAAIhB,GAAG,GAAG;AAAE/G,gBAAAA,KAAK,EAAE,KAAK7F,SAAd;AAAyB6N,gBAAAA,QAAQ,EAAE,KAAKvL,cAAL,CAAoBwL,WAApB;AAAnC,eAAV;AACA,mBAAKzO,YAAL,IAAqB,KAAKA,YAAL,CAAkBuN,GAAlB,CAArB;AACA,mBAAKmB,aAAL,CAAmB,KAAK/N,SAAxB,EAAmC,KAAnC,EAA0C4M,GAAG,CAACiB,QAA9C;;AACA,kBAAI,KAAKpO,WAAL,CAAiB+J,WAAjB,OAAmC5K,kBAAvC,EAA2D;AAAE;AAC3D,qBAAKyB,SAAL,CAAe0D,IAAf,GAAsB;AAAA;AAAA,wCAAQ,KAAK1D,SAAL,CAAe0D,IAAvB,EAA6B,KAAK1D,SAAL,CAAegE,aAA5C,CAAtB;;AACA,oBAAI;AAAA;AAAA,4CAAU,KAAKhE,SAAL,CAAe0D,IAAzB,EAA+B,CAA/B,KAAqC,CAAzC,EAA4C;AAC1C,uBAAK1D,SAAL,CAAe0D,IAAf,GAAsB,CAAtB;AACD;;AACD,qBAAKpC,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,QAAwE,KAAK5F,SAAL,CAAe0D,IAAvF;AACD;;AACD,mBAAKrC,aAAL,GAAqB,KAAKA,aAAL,GAAqB,CAA1C;AACD;AACF,WAhBD,MAgBO;AACL,iBAAKtB,oBAAL,GAA4B,KAAKA,oBAAL,GAA4BqN,EAAxD;AACD;AACF,SAnhCoC,CAshCrC;;;AACQG,QAAAA,eAAe,GAAG;AACxB,cAAII,kBAAkB,GAAG,KAAzB;AACA,cAAIC,SAAS,GAAG,KAAK1L,sBAAL,CAA4B2L,aAA5B,EAAhB;;AACA,cAAI,CAAC,KAAK/N,WAAL,KAAqB,IAArB,IAA8B,KAAKI,YAAL,KAAsB,IAAtB,IAA8B,KAAKF,SAAL,CAAeyD,QAAf,KAA4B,IAAzF,KACEmK,SAAS,KAAK,CADhB,IACsB,KAAKvM,aAAL,GAAqB,KAAKvC,aADpD,EACmE;AACjE,gBAAI,KAAKgP,iBAAL,OAA6B,IAAjC,EAAuC;AACrC,kBAAI,KAAK1O,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAAE;AAC7D,oBAAI,KAAKc,WAAL,CAAiBsK,KAAjB,KAA2B,CAA/B,EAAkC;AAAE;AAClCiE,kBAAAA,kBAAkB,GAAG,IAArB;AACD;AACF,eAJD,MAIO;AACLA,gBAAAA,kBAAkB,GAAG,IAArB;AACD;AACF,aARD,MAQO;AACL,mBAAKzN,YAAL,GAAoB,KAApB;AACD;AACF;;AAED,iBAAOyN,kBAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;AACSD,QAAAA,aAAa,CAAClI,KAAD,EAAQuI,OAAR,EAAiBxK,SAAjB,EAA4B;AAC9C,cAAIwK,OAAO,KAAK,IAAZ,IAAoB,KAAK/N,SAAL,CAAeyD,QAAf,KAA4B,IAApD,EAA0D;AACxD;AACD;;AAED,cAAI,KAAKzD,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAKtB,iBAAL,CAAuB8H,IAAvB,CAA4B,KAAKzK,aAAL,CAAmBwO,WAAnB,CAA+B,CAA/B,CAA5B;AACD;;AAED,cAAIC,QAAQ,GAAG,KAAKzO,aAAL,CAAmB6E,MAAnB,CAA0B,CAA1B,CAAf;;AACA,cAAI,KAAKrE,SAAL,CAAeyD,QAAf,KAA4B,KAAhC,EAAuC;AACrCwK,YAAAA,QAAQ,GAAG,KAAKzO,aAAL,CAAmB6E,MAAnB,CAA0B,CAA1B,CAAX;AACD;;AAED,cAAI,KAAKrE,SAAL,CAAeyD,QAAf,KAA4B,IAA5B,IAAoC,KAAKqD,UAAL,OAAsB,IAA9D,EAAoE;AAClEtB,YAAAA,KAAK,GAAG,KAAK7F,SAAb;AACD;;AAED,eAAKqC,aAAL,CAAmBqL,UAAnB,CAA8BY,QAA9B,EACE,KAAKpB,gBAAL,EADF,EAEErH,KAFF,EAGE,KAAK9F,IAHP,EAIE,KAAKM,SAAL,CAAesD,SAJjB,EAKEC,SALF,EAME,KAAKsG,aAAL,EANF,EAOE,KAAK7J,SAAL,CAAeyD,QAPjB;AAUA,eAAKyG,iBAAL;AACA,eAAKgE,gBAAL;;AAEA,cAAI,KAAKlO,SAAL,CAAeyD,QAAf,KAA4B,KAA5B,IAAqC,KAAKqD,UAAL,OAAsB,KAA/D,EAAsE;AACpE,iBAAKnH,SAAL,GAAiB6F,KAAjB;AACA,gBAAI0C,YAAY,GAAG,KAAKC,uBAAL,CAA6B,KAAKxI,SAAlC,CAAnB;AACA,iBAAK2E,UAAL,GAAkBkB,KAAlB,GAA0B0C,YAA1B;AACD;;AAED,cAAI,KAAKlI,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAKpD,kBAAL,GAA0B,CAA1B;AACD;AACF;AAED;AACF;AACA;;;AACU6J,QAAAA,iBAAiB,GAAG;AAC1B,cAAIgB,KAAK,GAAG,KAAKzL,UAAjB;;AACA,cAAI,KAAKmB,OAAT,EAAkB;AAChB,gBAAMgM,EAAE,GAAG,KAAKhM,OAAL,CAAa+E,YAAb,CAA0B5I,SAA1B,CAAX,CADgB,CAEhB;;AACA6P,YAAAA,EAAE,CAAC3C,IAAH;AACD;;AAED,cAAI,KAAKtJ,YAAL,IAAqB,KAAKK,YAAL,KAAsB,KAA/C,EAAsD;AACpD,iBAAKA,YAAL,GAAoB,IAApB;AACA,gBAAMuK,EAAE,GAAG,KAAK5K,YAAL,CAAkBgF,YAAlB,CAA+BnI,EAAE,CAACgO,QAAlC,CAAX;AACAD,YAAAA,EAAE,CAACE,YAAH,CAAgB,CAAhB,EAAmBP,KAAK,CAACiD,IAAzB,EAA+B,KAA/B;AACA5C,YAAAA,EAAE,CAACI,SAAH,GAAeT,KAAK,CAACkD,UAArB;AACD;AACF;;AAEOF,QAAAA,gBAAgB,GAAG;AACzB,cAAI,KAAKjN,WAAL,KAAqB,KAAzB,EAAgC;AAC9B,iBAAKJ,UAAL,CAAgByE,MAAhB,GAAyB,IAAzB;AACA,iBAAKzE,UAAL,CAAgB8E,YAAhB,CAA6B5I,SAA7B,EAAwCkN,IAAxC;AACA,iBAAKhJ,WAAL,GAAmB,IAAnB;AACD;AACF;;AAEO6M,QAAAA,iBAAiB,GAAG;AAC1B,cAAI,KAAK9N,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,gBAAI,KAAKrE,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAAE;AAC7D,kBAAI;AAAA;AAAA,0CAAU,KAAK0B,SAAL,CAAeqE,MAAzB,EAAiC,CAAjC,KAAuC,CAA3C,EAA8C;AAC5C,qBAAKnE,YAAL,GAAoB,KAApB;AACA,qBAAKmO,yBAAL,GAF4C,CAG5C;AACA;;AACA,uBAAO,KAAP;AACD;;AACD,qBAAO,IAAP;AACD,aATD,MASO;AACL,kBAAI9E,SAAS,GAAG,KAAKnK,WAAL,CAAiBoK,WAAjB,CAA6B,KAAKxJ,SAAL,CAAekE,OAA5C,CAAhB;;AACA,kBAAK;AAAA;AAAA,0CAAU,KAAKlE,SAAL,CAAe0D,IAAzB,EAA+B,KAAK1D,SAAL,CAAegE,aAA9C,IAA+D,CAAhE,IAAuE;AAAA;AAAA,0CAAU,KAAKhE,SAAL,CAAe0D,IAAzB,EAA+B6F,SAAS,CAAC+E,KAAzC,IAAkD,CAAzH,IAAgI;AAAA;AAAA,0CAAU,KAAKtO,SAAL,CAAe0D,IAAzB,EAA+B,CAA/B,MAAsC,CAA1K,EAA8K;AAC5K,oBAAI,KAAKpC,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,KAAqD,KAAzD,EAAgE;AAC9D,uBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,IAAnD;AACA,uBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCe,MAAvC,GAAgD,KAAhD;AACD;;AACD,qBAAKpF,YAAL,GAAoB,KAApB;AACA,qBAAKmO,yBAAL;AACA,qBAAKhP,OAAL,CAAagH,IAAb;AACA,uBAAO,KAAP;AACD,eATD,MASO;AACL,qBAAK/E,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,KAAnD;AACA,uBAAO,IAAP;AACD;AACF;AACF;;AAED,iBAAO,IAAP;AACD;;AAEM+I,QAAAA,yBAAyB,GAAG;AACjC,eAAKE,eAAL,CAAqB,KAArB;AACA,eAAKC,YAAL,CAAkB,KAAlB;AACA,eAAKvM,cAAL,CAAoBwM,WAApB;AACD;;AAEMF,QAAAA,eAAe,CAACG,KAAD,EAAiB;AACrC,cAAI,KAAK1O,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAKvC,eAAL,GAAuBwN,KAAvB;;AACA,gBAAI,KAAKxN,eAAL,KAAyB,IAA7B,EAAmC;AACjC,mBAAKH,YAAL,CAAkBuE,MAAlB,GAA2B,IAA3B;AACA;AAAA;AAAA,gDAAa,KAAKvE,YAAlB,EAAgCkJ,IAAhC;AACA,mBAAKlJ,YAAL,CAAkB4D,eAAlB,CAAkC,KAAK5D,YAAL,CAAkBwJ,MAAlB,CAAyB3F,QAAzB,CAAkCC,MAApE;AACD,aAJD,MAIO;AACL;AAAA;AAAA,gDAAa,KAAK9D,YAAlB,EAAgCiK,IAAhC;AACA,mBAAKjK,YAAL,CAAkBuE,MAAlB,GAA2B,KAA3B;AACA,mBAAKqJ,UAAL;AACD;AACF;AACF;;AAEMH,QAAAA,YAAY,CAACE,KAAD,EAAQ;AACzB,eAAKvO,aAAL,GAAqBuO,KAArB;;AACA,cAAI,KAAK5H,UAAL,OAAsB,KAA1B,EAAiC;AAC/B,iBAAKc,WAAL,CAAiB8G,KAAjB;AACD;AACF;;AAEME,QAAAA,QAAQ,GAAG;AAChB,cAAI,KAAKhN,QAAL,IAAiB,KAAKM,sBAAL,CAA4B2L,aAA5B,OAAgD,CAArE,EAAwE;AACtE,iBAAKjM,QAAL,CAAcmB,IAAd;AACD;AACF;;AAEM4L,QAAAA,UAAU,GAAG;AAClB,cAAI,KAAK/M,QAAT,EAAmB;AACjB,iBAAKA,QAAL,CAAciN,MAAd;AACD;;AACD,cAAI,KAAK7O,SAAL,CAAeyD,QAAf,KAA4B,IAAhC,EAAsC;AACpC,iBAAKxE,kBAAL,CAAwB,EAAxB;AACD;AACF;;AAEM6P,QAAAA,aAAa,GAAG;AACrB,cAAI,KAAKlN,QAAL,IAAiB,KAAK5B,SAAL,CAAeyD,QAAf,KAA4B,KAAjD,EAAwD;AACtD,iBAAK7B,QAAL,CAAciN,MAAd,GADsD,CAEtD;;AACA;AAAA;AAAA,8CAAa,KAAK9N,YAAlB,EAAgCiK,IAAhC;AACA,iBAAKjK,YAAL,CAAkBuE,MAAlB,GAA2B,KAA3B,CAJsD,CAKtD;AACA;AACD;AACF;;AAEMyJ,QAAAA,WAAW,GAAG;AACnB,iBAAO,KAAK/O,SAAZ;AACD;;AAEMgP,QAAAA,aAAa,GAAG;AACrB,iBAAO,KAAKnP,SAAZ;AACD;;AAEMoP,QAAAA,WAAW,CAACC,GAAD,EAAM;AACtB,cAAI,KAAK9P,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3D,gBAAI6Q,QAAQ,GAAG;AAAA;AAAA,oCAAQD,GAAR,EAAa,KAAKlP,SAAL,CAAe0D,IAA5B,CAAf;AACA,iBAAK1D,SAAL,CAAe0D,IAAf,GAAsBwL,GAAtB;AACA,iBAAKE,WAAL,CAAiBD,QAAjB;AACA,iBAAK7N,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,QAAwEsJ,GAAxE;AACD,WALD,MAKO;AACL/I,YAAAA,OAAO,CAACC,GAAR,CAAY,2EAA2E8I,GAAvF,EADK,CAEL;;AACA,iBAAK,IAAI3G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKpH,aAAL,CAAmB0D,MAAvC,EAA+C0D,CAAC,EAAhD,EAAoD;AAClD,kBAAM8G,CAAC,GAAG,KAAKlO,aAAL,CAAmBoH,CAAnB,CAAV;AACA2G,cAAAA,GAAG,GAAG;AAAA;AAAA,sCAAQA,GAAR,EAAaG,CAAb,CAAN;AACD;;AACD,iBAAKrP,SAAL,CAAe0D,IAAf,GAAsBwL,GAAtB;AAEA,gBAAIC,SAAQ,GAAG,KAAKnP,SAAL,CAAe0D,IAA9B;;AACA,gBAAI;AAAA;AAAA,wCAAUyL,SAAV,EAAoB,CAApB,IAAyB,CAA7B,EAAgC;AAC9BA,cAAAA,SAAQ,GAAG,CAAX;AACD;;AACD,iBAAK7N,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,QAAwEuJ,SAAxE;AAEA,gBAAI5F,SAAS,GAAG,KAAKnK,WAAL,CAAiBoK,WAAjB,CAA6B,KAAKxJ,SAAL,CAAekE,OAA5C,CAAhB,CAfK,CAgBL;;AACA,gBAAK;AAAA;AAAA,wCAAU,KAAKlE,SAAL,CAAe0D,IAAzB,EAA+B6F,SAAS,CAAC+E,KAAzC,IAAkD,CAAnD,IAA0D;AAAA;AAAA,wCAAU,KAAKtO,SAAL,CAAe0D,IAAzB,EAA+B,CAA/B,MAAsC,CAApG,EAAwG;AACtG,mBAAKpC,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,IAAnD;AACD,aAFD,MAEO;AACL,mBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,KAAnD;AACD,aArBI,CAsBL;;AACD;AACF;;AAEM8J,QAAAA,WAAW,CAACE,KAAD,EAAQ;AACxB,cAAMC,YAAY,GAAG,KAAKjO,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,CAArB;AACAgL,UAAAA,YAAY,CAAC5K,eAAb,CAA6B4K,YAAY,CAAChF,MAAb,CAAoB3F,QAApB,CAA6BC,MAA1D;AACA,cAAImC,GAAG,GAAGuI,YAAY,CAAC7K,gBAAb,EAAV;AACA,cAAI8K,KAAK,GAAGD,YAAY,CAAC/J,KAAzB;AACA,cAAImD,EAAE,GAAG,KAAK3I,SAAL,CAAeyD,QAAf,GAA0B,CAA1B,GAA8B,CAAvC;;AACA,cAAI,KAAKrE,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3DqK,YAAAA,EAAE,GAAG;AAAA;AAAA,wCAAU2G,KAAV,EAAiB,CAAjB,KAAuB,CAAvB,GAA2B,CAA3B,GAA+B,CAApC;AACD;;AAEDnJ,UAAAA,OAAO,CAACC,GAAR,CAAY,6FAA6FkJ,KAAzG;AACA,eAAKnO,aAAL,CAAmBsO,IAAnB,CAAwBH,KAAxB;AACA,eAAKzN,aAAL,CAAmBwE,IAAnB,CAAwBW,GAAG,CAACoF,KAAJ,EAAxB,EAAqCoD,KAArC,EAA4CF,KAA5C,EAAmD3G,EAAnD,EAAuD,MAAM;AAC3D,gBAAK,KAAKxH,aAAL,CAAmB0D,MAAnB,GAA4B,CAA7B,IAAoC,KAAKzF,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAA3E,EAAkG;AAChG,kBAAMoR,QAAQ,GAAG,KAAKvO,aAAL,CAAmBwO,KAAnB,EAAjB;AACA,mBAAK3P,SAAL,CAAe0D,IAAf,GAAsB;AAAA;AAAA,oCAAO,KAAK1D,SAAL,CAAe0D,IAAtB,EAA4BgM,QAA5B,CAAtB;AACA,mBAAKpO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqD1I,KAArD,EAA4D2I,MAA5D,QAAwE,KAAK5F,SAAL,CAAe0D,IAAvF;AAEA,kBAAI6F,SAAS,GAAG,KAAKnK,WAAL,CAAiBoK,WAAjB,CAA6B,KAAKxJ,SAAL,CAAekE,OAA5C,CAAhB;;AACA,kBAAK;AAAA;AAAA,0CAAU,KAAKlE,SAAL,CAAe0D,IAAzB,EAA+B6F,SAAS,CAAC+E,KAAzC,IAAkD,CAAnD,IAA0D;AAAA;AAAA,0CAAU,KAAKtO,SAAL,CAAe0D,IAAzB,EAA+B,CAA/B,MAAsC,CAApG,EAAwG;AACtG,qBAAKpC,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,IAAnD;AACD,eAFD,MAEO;AACL,qBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0Ce,MAA1C,GAAmD,KAAnD;AACD;AACF;AACF,WAbD;AAcD,SAhxCoC,CAkxCrC;;;AACOsK,QAAAA,mBAAmB,CAACpM,MAAD,EAAS;AACjCA,UAAAA,MAAM,GAAGqM,QAAQ,CAACrM,MAAD,CAAjB;;AACA,cAAIA,MAAM,KAAK,CAAX,IAAgBA,MAAM,KAAK,CAA/B,EAAkC;AAChC,iBAAKlC,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,CAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCiB,KAAzC,GAAiD,CAAjD;AACA,gBAAIsK,QAAc,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCwL,WAAzC,EAArB;AACA,iBAAKzO,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCgB,WAAzC,CAAqD,IAAIjI,IAAJ,CAASwS,QAAQ,CAAC7I,CAAlB,EAAqB6I,QAAQ,CAAC5I,CAAT,GAAa,EAAlC,CAArD;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,CAAhD;;AACA,gBAAIhC,MAAM,KAAK,CAAf,EAAkB;AAChB,mBAAKlC,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqDvI,WAArD,EAAkEkO,cAAlE,CAAiF,IAAIjO,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAAjF;AACD,aAFD,MAEO;AACL,mBAAKiE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqDvI,WAArD,EAAkEkO,cAAlE,CAAiF,IAAIjO,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAAjF;AACD;;AACDyS,YAAAA,QAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCwL,WAAxC,EAAX;AACA,iBAAKzO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCgB,WAAxC,CAAoD,IAAIjI,IAAJ,CAASwS,QAAQ,CAAC7I,CAAlB,EAAqB6I,QAAQ,CAAC5I,CAAT,GAAa,EAAlC,CAApD;AAEA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,CAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,CAAhD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0CiB,KAA1C,GAAkD,CAAlD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,CAAnD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,GAAnD;AAEA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDiB,KAAhD,GAAwD,CAAxD,CApBgC,CAqBhC;AACA;;AAEA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,CAA/C,CAxBgC,CAyBhC;;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,CAAnD;AAEA,gBAAIwK,OAAO,GAAG,KAAK1O,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDoB,YAAhD,CAA6DvI,WAA7D,CAAd;AACA0S,YAAAA,QAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCwL,WAAvC,EAAX;AACA,gBAAIE,OAAO,GAAG;AAAEhJ,cAAAA,CAAC,EAAE+I,OAAO,CAACtJ,KAAR,GAAgBoJ,QAAQ,CAAC7I,CAA9B;AAAiCC,cAAAA,CAAC,EAAE8I,OAAO,CAACpJ,MAAR,GAAiBkJ,QAAQ,CAAC5I,CAA1B,GAA8B;AAAlE,aAAd;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCgB,WAAvC,CAAmD0K,OAAO,CAAChJ,CAA3D,EAA8DgJ,OAAO,CAAC/I,CAAtE;AAEA8I,YAAAA,OAAO,GAAG,KAAK1O,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDoB,YAAhD,CAA6DvI,WAA7D,CAAV,CAjCgC,CAkChC;AACA;AACA;;AAEA0S,YAAAA,QAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CwL,WAA3C,EAAX;AACAE,YAAAA,OAAO,GAAG;AAAEhJ,cAAAA,CAAC,EAAE+I,OAAO,CAACtJ,KAAR,GAAgBoJ,QAAQ,CAAC7I,CAA9B;AAAiCC,cAAAA,CAAC,EAAE8I,OAAO,CAACpJ,MAAR,GAAiBkJ,QAAQ,CAAC5I,CAA1B,GAA8B;AAAlE,aAAV;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CgB,WAA3C,CAAuD0K,OAAO,CAAChJ,CAA/D,EAAkEgJ,OAAO,CAAC/I,CAA1E;AACD,WAzCD,MAyCO,IAAI1D,MAAM,KAAK,CAAX,IAAgBA,MAAM,KAAK,CAA/B,EAAkC;AACvC,iBAAKlC,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCiB,KAAzC,GAAiD,GAAjD;;AACA,gBAAIsK,SAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCwL,WAAzC,EAAf;;AACA,iBAAKzO,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCgB,WAAzC,CAAqD,IAAIjI,IAAJ,CAASwS,SAAQ,CAAC7I,CAAlB,EAAqB6I,SAAQ,CAAC5I,CAAT,GAAa,EAAlC,CAArD;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,GAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,GAAhD;;AACA,gBAAIhC,MAAM,KAAK,CAAf,EAAkB;AAChB,mBAAKlC,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqDvI,WAArD,EAAkEkO,cAAlE,CAAiF,IAAIjO,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAAjF;AACD,aAFD,MAEO;AACL,mBAAKiE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqDvI,WAArD,EAAkEkO,cAAlE,CAAiF,IAAIjO,IAAJ,CAAS,CAAT,EAAY,GAAZ,CAAjF;AACD;;AACDyS,YAAAA,SAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCwL,WAAxC,EAAX;AACA,iBAAKzO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCgB,WAAxC,CAAoD,IAAIjI,IAAJ,CAASwS,SAAQ,CAAC7I,CAAlB,EAAqB6I,SAAQ,CAAC5I,CAAT,GAAa,EAAlC,CAApD;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,GAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,GAAhD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0CiB,KAA1C,GAAkD,GAAlD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,GAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,GAAnD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,GAAnD;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,GAA/C;AACA,iBAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,GAAnD;;AAEA,gBAAIwK,QAAO,GAAG,KAAK1O,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDoB,YAAhD,CAA6DvI,WAA7D,CAAd;;AACA0S,YAAAA,SAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCwL,WAAvC,EAAX;AACA,gBAAIE,QAAO,GAAG;AAAEhJ,cAAAA,CAAC,EAAE+I,QAAO,CAACtJ,KAAR,GAAgBoJ,SAAQ,CAAC7I,CAA9B;AAAiCC,cAAAA,CAAC,EAAE8I,QAAO,CAACpJ,MAAR,GAAiBkJ,SAAQ,CAAC5I,CAA1B,GAA8B;AAAlE,aAAd;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCgB,WAAvC,CAAmD0K,QAAO,CAAChJ,CAA3D,EAA8DgJ,QAAO,CAAC/I,CAAtE;AAEA8I,YAAAA,QAAO,GAAG,KAAK1O,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDoB,YAAhD,CAA6DvI,WAA7D,CAAV,CA3BuC,CA4BvC;AACA;AACA;;AAEA0S,YAAAA,SAAQ,GAAG,KAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CwL,WAA3C,EAAX;AACAE,YAAAA,QAAO,GAAG;AAAEhJ,cAAAA,CAAC,EAAE+I,QAAO,CAACtJ,KAAR,GAAgBoJ,SAAQ,CAAC7I,CAA9B;AAAiCC,cAAAA,CAAC,EAAE8I,QAAO,CAACpJ,MAAR,GAAiBkJ,SAAQ,CAAC5I,CAA1B,GAA8B;AAAlE,aAAV;AACA,iBAAK5F,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CgB,WAA3C,CAAuD0K,QAAO,CAAChJ,CAA/D,EAAkEgJ,QAAO,CAAC/I,CAA1E;AACD;AACF;;AAEMgJ,QAAAA,aAAa,GAAG;AACrB,eAAK5O,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,UAA/B,EAA2CiB,KAA1F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCiB,KAAzC,GAAiD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,YAA/B,EAA6CiB,KAA9F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,YAA3B,EAAyCgB,WAAzC,CAAqD,KAAKhE,UAAL,CAAgBgD,cAAhB,CAA+B,YAA/B,EAA6CuL,QAAlG;AACA,eAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,WAA/B,EAA4CiB,KAA5F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCoB,YAAxC,CAAqDvI,WAArD,EACGkO,cADH,CACkB,KAAK/J,UAAL,CAAgBgD,cAAhB,CAA+B,WAA/B,EAA4CoB,YAA5C,CAAyDvI,WAAzD,EAAsE+S,WADxF;AAEA,eAAK7O,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCgB,WAAxC,CAAoD,KAAKhE,UAAL,CAAgBgD,cAAhB,CAA+B,WAA/B,EAA4CuL,QAAhG;AAEA,eAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,UAA/B,EAA2CiB,KAA1F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCiB,KAAxC,GAAgD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,WAA/B,EAA4CiB,KAA5F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,aAA3B,EAA0CiB,KAA1C,GAAkD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,aAA/B,EAA8CiB,KAAhG;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,cAA/B,EAA+CiB,KAAlG;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,cAA/B,EAA+CiB,KAAlG;AAEA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,mBAA3B,EAAgDiB,KAAhD,GAAwD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,mBAA/B,EAAoDiB,KAA5G;AAEA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCiB,KAAvC,GAA+C,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,UAA/B,EAA2CiB,KAA1F;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CiB,KAA3C,GAAmD,KAAKjE,UAAL,CAAgBgD,cAAhB,CAA+B,cAA/B,EAA+CiB,KAAlG;AACA,eAAKlE,MAAL,CAAYiD,cAAZ,CAA2B,UAA3B,EAAuCgB,WAAvC,CAAmD,KAAKhE,UAAL,CAAgBgD,cAAhB,CAA+B,UAA/B,EAA2CuL,QAA9F;AACA,eAAKxO,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2CgB,WAA3C,CAAuD,KAAKhE,UAAL,CAAgBgD,cAAhB,CAA+B,cAA/B,EAA+CuL,QAAtG;AACD;;AAEMM,QAAAA,YAAY,GAAG;AACpB,cAAIC,MAAM,CAAC,KAAKrQ,SAAL,CAAesD,SAAhB,CAAN,KAAqC,CAAzC,EAA4C;AAC1C,gBAAI,KAAKlE,WAAL,CAAiB+J,WAAjB,OAAmC7K,oBAAvC,EAA6D;AAC3D,mBAAKgD,MAAL,CAAYiD,cAAZ,CAA2B,cAA3B,EAA2Ce,MAA3C,GAAoD,KAApD;AACD;AACF,WAJD,MAIO;AACL,iBAAKhE,MAAL,CAAYiD,cAAZ,CAA2B,WAA3B,EAAwCe,MAAxC,GAAiD,KAAjD;AACD;AACF;;AAEMgL,QAAAA,cAAc,GAAG;AACtB,cAAI,KAAK9Q,aAAT,EAAwB;AACtB,mBAAO,KAAKA,aAAL,CAAmB+Q,KAA1B;AACD;AACF;;AAEMC,QAAAA,cAAc,GAAG;AACtB,eAAKnP,aAAL,GAAqB,KAAKA,aAAL,GAAqB,CAA1C;;AACA,cAAI,KAAKA,aAAL,GAAqB,CAAzB,EAA4B;AAC1B,iBAAKA,aAAL,GAAqB,CAArB;AACD;AACF;;AAEM4C,QAAAA,cAAc,GAAG;AACtB,iBAAO,KAAKjE,SAAL,CAAeiE,cAAtB;AACD;;AAEMwM,QAAAA,eAAe,CAACC,OAAD,EAAU;AAC9B,eAAK1Q,SAAL,CAAeiE,cAAf,GAAgCyM,OAAhC;AACA,eAAKxH,eAAL;AACD;;AAESyH,QAAAA,SAAS,GAAS;AAC1B,eAAK9O,aAAL,GAAqB,IAArB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACA,eAAKC,WAAL,GAAmB,IAAnB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACA,eAAKC,cAAL,GAAsB,IAAtB;AACA,eAAKC,sBAAL,GAA8B,IAA9B;AACA,eAAKC,iBAAL,GAAyB,IAAzB;AACA,eAAKC,UAAL,GAAkB,IAAlB;AACD;;AAp6CoC,O","sourcesContent":["import { Animation, AnimationClip, Component, EventTouch, Label, Node, Prefab, Sprite, SpriteAtlas, UITransform, Vec2, Vec3, Widget, instantiate, sp, view } from \"cc\"\r\nimport { BatteryManager } from \"./BatteryManager\"\r\nimport SourceManage from \"../../base/SourceManage\";\r\nimport { addAnimation, createAnimationNode, createSkeleton, createSpriteAtlasNode, createSpriteNode, getAnimation, llcompare, llminus, llplus, setSpriteAtlasNode, toNodeSpaceAR } from \"./FishTool\";\r\nimport { pi, pia } from \"./CalculteRule\";\r\nimport { FishManager } from \"./FishManager\";\r\nimport { BulletManager } from \"./BulletManager\";\r\nimport { LockFish } from \"./LockFish\";\r\nimport { BatteryHitScoreMgr } from \"./BatteryHitScoreMgr\";\r\nimport { BackgroundSceneManager } from \"./BackgroundSceneManager\";\r\nimport { MusicEffectPlayer } from \"./MusicEffectPlayer\";\r\nimport { global } from \"../../hall\";\r\n\r\nconst GAME_TYPE_FRIENDROOM = 2;\r\nconst GAME_TYPE_GOLDROOM = 1;\r\n\r\nexport type UserInfo = {\r\n  player_id: string,//玩家id\r\n  server_id: number,//玩家id\r\n  set_id: number,//玩家id\r\n  is_local: boolean,//是否为本地，区别自己与别人的炮台\r\n  gold: number,//金币\r\n  head_id: number,//头像\r\n  level: number,//等级\r\n  vip_level: number,//vip等级\r\n  nick_name: string,//昵称\r\n  battery_id: number,//炮id\r\n  battery_score: number,//炮分数\r\n  isPowerBattery: boolean, //是否能量炮\r\n  room_id: string,//房间号\r\n  ready: number, //0:准备,1未准备\r\n  offline: number, //0:没有离线,非0:离线\r\n  bullet: number, //剩余子弹  \r\n}\r\n\r\nexport class Battery extends Component {\r\n\r\n  public textureConfig\r\n  public commonConfig\r\n  public batteryAllConfig\r\n  public batterySkinConfig\r\n  public batScoreConfig\r\n  public fntScoreConfig\r\n\r\n  public sendBulletMax = 20;\r\n\r\n  public send_ReqLock\r\n  public send_ReqFire\r\n  public send_ReqCancelLock\r\n  public send_ReqSwitchBattery\r\n  public wepShow\r\n  public dataManager\r\n  public noMoney\r\n  public uiCreater: Prefab\r\n\r\n  public stop_all_action;\r\n  public batteryConfig;\r\n  public skinConfig;\r\n  public side: number;\r\n  public cur_angle: number;\r\n  public cur_move_pos: Vec3;\r\n  /**炮口的位置 */\r\n  public local_pos: Vec3;\r\n  public key_is_down: boolean;\r\n  public send_bullet_add_time;\r\n  public user_info: UserInfo;\r\n  public front_fish_data_id;\r\n  public is_auto_send;\r\n  public use_auto_send;\r\n  public auto_exit_time;\r\n  public auto_exit_time_add;\r\n  public begin_pos: Vec3;\r\n  public move_pos: Vec3;\r\n  public bulletSartPos: Vec3;\r\n  public show_persion_ui;\r\n  public show_change_battery_ui = false//显示看换炮页\r\n  public skeleton_obj: Node = null//炮管骨骼动画\r\n  public spr_obj: Node = null//炮管帧动画\r\n  public paohuo_obj: Node = null//炮火\r\n  public pao_am_obj: Node = null//加减炮效果\r\n  public pao_lock_obj: Node = null//锁定时效果\r\n\r\n  public is_play_over = false//发炮动画是否播放完成\r\n  public is_pao_over = false//炮火动画是否播放完成\r\n  public is_can_use_lock = false//是否启动锁定\r\n  public add_fish_gold = []//加钱列表\r\n  public sken_scale_org = 0\r\n  public sendBulletNum = 0\r\n\r\n  public ui_lst: Node;\r\n  public ui_lstInit: Node;\r\n  public node_pao_position;\r\n  public paohuo_src;\r\n  public pao_am_src;\r\n  public pao_lock_src;\r\n\r\n  public lock_obj: LockFish;\r\n\r\n  public hit_score_obj: BatteryHitScoreMgr;\r\n  private sourceManager: SourceManage;\r\n  private fishManager: FishManager;\r\n  private bulletManager: BulletManager;\r\n  private batteryManager: BatteryManager;\r\n  private backgroundSceneManager: BackgroundSceneManager;\r\n  private musicEffectPlayer: MusicEffectPlayer;\r\n  private parentNode: Node;\r\n\r\n  public create(ui: Prefab, ttConfig, cConfig, bbConfig, skConfig, scoreConfig, fntConfig, sendFuncs, sceneParam,\r\n    sourceManager: SourceManage, fishManager: FishManager, bulletManager: BulletManager, batteryManager: BatteryManager,\r\n    backgroundSceneManager: BackgroundSceneManager, musicEffectPlayer: MusicEffectPlayer) {\r\n    this.textureConfig = ttConfig\r\n    this.commonConfig = cConfig\r\n    this.batteryAllConfig = bbConfig\r\n    this.batterySkinConfig = skConfig\r\n    this.batScoreConfig = scoreConfig\r\n    this.fntScoreConfig = fntConfig\r\n    this.uiCreater = ui\r\n\r\n    this.send_ReqLock = sendFuncs.lock\r\n    this.send_ReqFire = sendFuncs.fire\r\n    this.send_ReqCancelLock = sendFuncs.cancelLock\r\n    this.send_ReqSwitchBattery = sendFuncs.switchBattery\r\n\r\n    this.wepShow = sceneParam.wepShow\r\n    this.dataManager = sceneParam.dataManager\r\n    this.noMoney = sceneParam.noMoney\r\n\r\n    this.sourceManager = sourceManager\r\n    this.fishManager = fishManager\r\n    this.bulletManager = bulletManager\r\n    this.batteryManager = batteryManager\r\n    this.backgroundSceneManager = backgroundSceneManager\r\n    this.musicEffectPlayer = musicEffectPlayer\r\n\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    this.initData()\r\n    this.initUI()\r\n  }\r\n\r\n  private initData() {\r\n    this.stop_all_action = false\r\n    this.batteryConfig = null\r\n    this.skinConfig = null\r\n    this.side = 0\r\n    this.cur_angle = 0\r\n    this.cur_move_pos = new Vec3()\r\n    this.local_pos = new Vec3()\r\n\r\n    this.key_is_down = false\r\n    this.send_bullet_add_time = 0\r\n\r\n    this.user_info = {//用户数据\r\n      player_id: '',//玩家id\r\n      server_id: 0,//玩家id\r\n      set_id: 0,\r\n      is_local: false,//是否为本地，区别自己与别人的炮台\r\n      gold: 0,//金币\r\n      head_id: 0,//头像\r\n      level: 0,//等级\r\n      vip_level: 0,//vip等级\r\n      nick_name: \"\",//昵称\r\n      battery_id: 0,//炮id\r\n      battery_score: 0,//炮分数\r\n      isPowerBattery: false, //是否能量炮\r\n      room_id: '',//房间号\r\n      ready: 1, //0:准备,1未准备\r\n      offline: 0, //0:没有离线,非0:离线\r\n      bullet: 0, //剩余子弹  \r\n    }\r\n\r\n    this.front_fish_data_id = -1//上一次锁定的鱼类型id\r\n    this.is_auto_send = false//是否自动开炮\r\n    this.use_auto_send = false//是否使用自动开炮\r\n    this.auto_exit_time = 60//自动退出时间\r\n    this.auto_exit_time_add = 0//退出计时器\r\n    this.begin_pos = new Vec3(0, 0)//开始点击位置\r\n    this.move_pos = new Vec3(0, 0)//移动位置\r\n    this.bulletSartPos = new Vec3(0, 0)//子弹发射位置\r\n\r\n    this.show_persion_ui = false//显示个人信息页\r\n    this.show_change_battery_ui = false//显示看换炮页\r\n    this.skeleton_obj = null//炮管骨骼动画\r\n    this.spr_obj = null//炮管帧动画\r\n    this.paohuo_obj = null//炮火\r\n    this.pao_am_obj = null//加减炮效果\r\n    this.pao_lock_obj = null//锁定时效果\r\n\r\n    this.is_play_over = false//发炮动画是否播放完成\r\n    this.is_pao_over = false//炮火动画是否播放完成\r\n    this.is_can_use_lock = false//是否启动锁定\r\n    this.add_fish_gold = []//加钱列表\r\n    this.sken_scale_org = 0\r\n    this.sendBulletNum = 0\r\n  }\r\n\r\n  private getNodePao() {\r\n    return this.ui_lst.getChildByName('node_pao');\r\n  }\r\n\r\n  private initUI() {\r\n    this.ui_lst = instantiate(this.uiCreater);\r\n    this.ui_lstInit = instantiate(this.uiCreater);\r\n    this.node.addChild(this.ui_lst)\r\n\r\n    this.node_pao_position = this.getNodePao().getWorldPosition()\r\n\r\n    this.node.setSiblingIndex(this.node.children.length);\r\n\r\n    this.registerEvent()\r\n    this.setUIstate()\r\n    this.resetCheckUI()\r\n    this.setReady()\r\n    this.showOffline()\r\n\r\n    this.newAnimationsAndobject()\r\n\r\n    this.hit_score_obj = new BatteryHitScoreMgr(this.sourceManager, this.ui_lst, this.batScoreConfig, this.fntScoreConfig, this.batteryManager.getRootNode())\r\n  }\r\n  private newAnimationsAndobject() {\r\n    this.paohuo_src = this.textureConfig[this.commonConfig.battery_paohuo_src_id]\r\n    if (this.paohuo_src) {\r\n      if (!this.paohuo_obj) {\r\n        this.paohuo_obj = createAnimationNode(this.sourceManager, this.getNodePao(), this.paohuo_src, false, false, () => {\r\n          this.is_pao_over = false;\r\n          this.paohuo_obj.active = false;\r\n        })\r\n        this.paohuo_obj.setPosition(125, 0)\r\n        this.paohuo_obj.active = false\r\n        this.paohuo_obj.angle = 90\r\n      }\r\n    }\r\n\r\n    this.pao_am_src = this.textureConfig[this.commonConfig.battery_am_src_id]\r\n    if (this.pao_am_src) {\r\n      if (!this.pao_am_obj) {\r\n        this.pao_am_obj = createAnimationNode(this.sourceManager, this.getNodePao(), this.pao_am_src, false, false, () => {\r\n          this.is_pao_over = false;\r\n          this.paohuo_obj.active = false;\r\n        })\r\n        this.pao_am_obj.setPosition(0, 0)\r\n        this.pao_am_obj.active = false\r\n        this.pao_am_obj.setSiblingIndex(10000);\r\n      }\r\n    }\r\n\r\n    this.pao_lock_src = this.textureConfig[this.commonConfig.battery_lock_src_id]\r\n    if (this.pao_lock_src) {\r\n      if (!this.pao_lock_obj) {\r\n        this.pao_lock_obj = createAnimationNode(this.sourceManager, this.getNodePao(), this.pao_lock_src, false, true)\r\n        // getAnimation(this.pao_lock_obj).stop();\r\n        this.pao_lock_obj.setPosition(0, 10)\r\n        this.pao_lock_obj.active = false\r\n      }\r\n    }\r\n  }\r\n\r\n  private setUIstate() {\r\n    this.ui_lst.getChildByName('img_wait_add').active = true\r\n    this.ui_lst.getChildByName('img_battery_bk').active = false\r\n\r\n    this.ui_lst.getChildByName('img_nomoney').active = false\r\n    this.ui_lst.getChildByName('img_lock').active = false\r\n    this.ui_lst.getChildByName('img_ctrlbk').active = false\r\n    this.ui_lst.getChildByName('btn_change_battery').active = false\r\n    this.ui_lst.getChildByName('spr_yourthis').active = false\r\n    this.ui_lst.getChildByName('img_informationbk').active = false\r\n    this.ui_lst.getChildByName('fnt_addscore').active = false\r\n    this.ui_lst.getChildByName('spr_egr').active = false\r\n    // this.ui_lst.getChildByName('spr_egr').stopAllActions()\r\n\r\n\r\n    this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = \"0\"\r\n    this.ui_lst.getChildByName('fnt_beishu').getComponent(Label).string = \"11\"\r\n    this.ui_lst.getChildByName('txt_nick').getComponent(Label).string = \"default\"\r\n    // this.ui_lst.txt_level.getComponent(cc.Label).string = (\"default\")\r\n    this.ui_lst.getChildByName('txt_viplevel').getComponent(Label).string = \"default\"\r\n  }\r\n  private registerTouch(parentNode: Node) {\r\n    // parentNode.on(Node.EventType.TOUCH_START, this.onTouchBegan.bind(this));\r\n    // parentNode.on(Node.EventType.TOUCH_MOVE, this.onTouchMoved.bind(this));\r\n    // parentNode.on(Node.EventType.TOUCH_END, this.onTouchEnded.bind(this));\r\n  }\r\n\r\n  private unRegisterTouch(parentNode: Node) {\r\n    // parentNode.off(Node.EventType.TOUCH_START);\r\n    // parentNode.off(Node.EventType.TOUCH_MOVE);\r\n    // parentNode.off(Node.EventType.TOUCH_END);\r\n  }\r\n\r\n  private resetCheckUI() {\r\n    // todo\r\n    // if (VersionManager.isResourceInvalide()) {\r\n    //   this.ui_lst.getChildByName('btn_head').setEnabled(false)\r\n    // }\r\n  }\r\n\r\n  private registerEvent() {\r\n    this.ui_lst.getChildByName('btn_head').on(Node.EventType.TOUCH_END, (e) => {\r\n      this.show_persion_ui = !this.show_persion_ui\r\n      this.ui_lst.getChildByName('img_informationbk').active = this.show_persion_ui\r\n    })\r\n\r\n\r\n    this.ui_lst.getChildByName('btn_change_battery').on(Node.EventType.TOUCH_END, (e) => {\r\n      if (this.user_info.is_local === true) {\r\n        console.log(\"show change battery dlg >>>>>>>\")\r\n        this.show_change_battery_ui = !this.show_change_battery_ui\r\n        this.ui_lst.getChildByName('img_ctrlbk').active = (this.show_change_battery_ui)\r\n        this.ui_lst.getChildByName('btn_change_battery').active = (this.show_change_battery_ui)\r\n        this.wepShow.show(this.textureConfig, this.batterySkinConfig)\r\n      }\r\n    })\r\n\r\n    this.ui_lst.getChildByName('btn_minus').on(Node.EventType.TOUCH_END, (e) => {\r\n      if (this.user_info.is_local === true) {\r\n        this.onMinusBarrelIndex()\r\n      }\r\n    })\r\n\r\n    this.ui_lst.getChildByName('btn_plus').on(Node.EventType.TOUCH_END, (e) => {\r\n      if (this.user_info.is_local === true) {\r\n        this.onAddBarrelIndex()\r\n      }\r\n    })\r\n\r\n    this.ui_lst.getChildByName('img_battery_bk').on(Node.EventType.TOUCH_END, (e) => {\r\n      if (this.user_info.is_local === true) {\r\n        this.show_change_battery_ui = !this.show_change_battery_ui\r\n        this.ui_lst.getChildByName('img_ctrlbk').active = this.show_change_battery_ui\r\n        this.ui_lst.getChildByName('btn_change_battery').active = this.show_change_battery_ui\r\n      }\r\n    })\r\n  }\r\n\r\n  private getSceneWidth() {\r\n    return this.commonConfig.scene_size.width\r\n  }\r\n\r\n  private getSceneHeight() {\r\n    return this.commonConfig.scene_size.height\r\n  }\r\n\r\n  public onTouchBegan(e: EventTouch) {\r\n    if (this.user_info.is_local === true) {\r\n      this.key_is_down = true\r\n      if (this.isLockFish() === true) {\r\n        return true\r\n      }\r\n\r\n      let local_pos = e.getUILocation()\r\n      let pos = new Vec3(local_pos.x, local_pos.y)\r\n      if (this.isMyBattery() === true && this.side === 3) {\r\n        pos = new Vec3(view.getVisibleSize().x - local_pos.x, view.getVisibleSize().y - local_pos.y)\r\n      }\r\n\r\n      this.rotationBatteryByPos(pos)\r\n      this.begin_pos = pos\r\n\r\n      this.send_bullet_add_time = this.batteryConfig.send_v\r\n\r\n      if (this.isMyBattery() === true) {\r\n        this.ui_lst.getChildByName('btn_change_battery').active = false\r\n        this.ui_lst.getChildByName('img_ctrlbk').active = false\r\n        this.show_change_battery_ui = false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  public onTouchMoved(e) {\r\n    if (this.user_info.is_local === true) {\r\n      this.key_is_down = true\r\n      if (this.isLockFish() === true) {\r\n        return true\r\n      }\r\n      let local_pos = e.getUILocation()\r\n      let pos = local_pos\r\n      if (this.isMyBattery() === true && this.side === 3) {\r\n        pos = new Vec3(view.getVisibleSize().x - local_pos.x, view.getVisibleSize().y - local_pos.y)\r\n      }\r\n      this.rotationBatteryByPos(pos)\r\n      this.move_pos = pos\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  public onTouchEnded(e) {\r\n    if (this.user_info.is_local === true) {\r\n      this.key_is_down = false\r\n      if (this.is_can_use_lock === true) {\r\n        if ((Math.abs(this.begin_pos.x - this.move_pos.x) < 20 && Math.abs(this.begin_pos.y - this.move_pos.y) < 20) ||\r\n          (this.move_pos.x === 0 && this.move_pos.y === 0)) {\r\n          let local_pos = e.getUILocation()\r\n          let pos = local_pos\r\n          if (this.isMyBattery() === true && this.side === 3) {\r\n            pos = new Vec3(view.getVisibleSize().x - local_pos.x, view.getVisibleSize().y - local_pos.y)\r\n          }\r\n          this.lockFishByPoint(pos)\r\n\r\n          if (this.isLockFish() === true) {\r\n            // console.log(\"lock fish pos(\"..pos.x.. \",\"..pos.y.. \")\")\r\n            this.setAutoFire(true)\r\n          }\r\n        }\r\n      }\r\n      this.begin_pos = new Vec3()\r\n      this.move_pos = new Vec3()\r\n\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  private lockFishByPoint(pos) {\r\n    let fsh_id = this.fishManager.getFishIdByPoint(pos)\r\n    this.lock_obj.forceToLockFish(fsh_id)\r\n  }\r\n\r\n  private setAutoFire(bauto) {\r\n    if (bauto !== null && this.user_info.is_local === true) {\r\n      this.is_auto_send = bauto\r\n      if (this.use_auto_send === true) {\r\n        this.is_auto_send = true\r\n      }\r\n    }\r\n  }\r\n\r\n  public isMyBattery() {\r\n    return this.user_info.is_local\r\n  }\r\n\r\n  private rotationBatteryByPos(pos) {\r\n    this.cur_angle = this.getRotationAngle(pos, this.local_pos, this.side)\r\n    let rotate_angle = this.getBatteryRotationAngle(this.cur_angle)\r\n\r\n    // console.log(pos, this.local_pos, rotate_angle);\r\n    this.getNodePao().angle = rotate_angle;\r\n  }\r\n\r\n  // private getBatteryRotationAngle(bangle) {\r\n  //   let rotate_angle = 0\r\n\r\n  //   if (this.side === 1) {\r\n  //     rotate_angle = 2 * pia - bangle - pia / 2\r\n  //   } else if (this.side === 2) {\r\n  //     rotate_angle = 2 * pia - bangle - pia * 3 / 2\r\n  //   } else if (this.side === 3) {\r\n  //     rotate_angle = bangle;\r\n  //   } else if (this.side === 4) {\r\n  //     rotate_angle = bangle\r\n  //   }\r\n\r\n  //   return rotate_angle\r\n  // }\r\n\r\n  private getBatteryRotationAngle(bangle) {\r\n    let rotate_angle = 0\r\n    if (this.side == 1) {\r\n      rotate_angle = 2 * pia - bangle - pia / 2\r\n    } else if (this.side == 2) {\r\n      rotate_angle = 2 * pia - bangle - pia * 3 / 2\r\n    } else if (this.side == 3) {\r\n      rotate_angle = pia + bangle\r\n    } else if (this.side == 4) {\r\n      rotate_angle = bangle\r\n    }\r\n\r\n    return rotate_angle\r\n  }\r\n\r\n  //获取到为逆时针角度\r\n  private getRotationAngle(pos1, pos2, side) {\r\n\r\n    let angle = 0\r\n    if (pos1.x === pos2.x) {\r\n      if (side === 1 && pos1.y >= pos2.y) {\r\n        angle = 90\r\n      } else if (side === 1 && pos1.y < pos2.y) {\r\n        angle = 270\r\n      } else if (side === 2 && pos1.y >= pos2.y) {\r\n        angle = 90\r\n      } else if (side === 2 && pos1.y < pos2.y) {\r\n        angle = 270\r\n      } else if (side === 3) {\r\n        angle = 270\r\n      } else if (side === 4) {\r\n        angle = 90\r\n      }\r\n    } else {\r\n      let k = (pos1.y - pos2.y) / (pos1.x - pos2.x)\r\n\r\n      // angle =  Math.atan2(pos1.y - pos2.y, pos1.x - pos2.x) * 180 / Math.PI\r\n      angle = Math.atan(k) * pia / pi\r\n\r\n      if (side === 1 && angle <= 0) {\r\n        angle = 2 * pia + angle\r\n      } else if (side === 2) {\r\n        angle = pia + angle\r\n      } else if (side === 3 && angle > 0) {\r\n        angle = pia + angle\r\n      } else if (side === 3 && angle <= 0) {\r\n        angle = 2 * pia + angle\r\n      } else if (side === 4 && angle <= 0) {\r\n        angle = pia + angle\r\n      }\r\n    }\r\n\r\n    return angle\r\n  }\r\n\r\n\r\n  /**\r\n    info = {\r\n      user_info = {\r\n        player_id \t = 0,//玩家id\r\n        is_let \t = false,//是否为本地，区别自己与别人的炮台\r\n        gold \t\t = 0,//金币\r\n        head_id \t = 0,//头像\r\n        level \t\t = 0,//等级\r\n        vip_level \t = 0,//vip等级\r\n        nick_name \t = \"1234\",//昵称\r\n        battery_id   = 0 炮台id\r\n        isPowerBattery = false //是否能量炮\r\n        battery_score= 0\r\n        room_id      = 0,\r\n        bullet       = 0, //剩余子弹  \r\n      },\r\n      side,\r\n      local_pos,\r\n    }\r\n   */\r\n  public setBatteryInfo(info, parentNode: Node) {\r\n    this.parentNode = parentNode;\r\n    this.user_info = info.user_info\r\n    this.sendBulletNum = 0\r\n\r\n    this.ui_lst.getChildByName('img_battery_bk').active = true\r\n    this.ui_lst.getChildByName('img_wait_add').active = false\r\n\r\n    this.batteryConfig = this.batteryAllConfig[this.user_info.battery_id]\r\n    this.skinConfig = this.batterySkinConfig[this.batteryConfig.id]\r\n\r\n    this.side = info.side\r\n    this.local_pos = info.local_pos\r\n\r\n    let paoPos = this.getNodePao().getWorldPosition();\r\n    this.local_pos = paoPos\r\n    if (parentNode.angle === 180) { //getVisibleSize\r\n      this.local_pos = new Vec3(view.getVisibleSize().x - paoPos.x, view.getVisibleSize().y - paoPos.y);\r\n    }\r\n    // const pos = this.node.getWorldPosition();\r\n    if (this.side === 3) {\r\n      this.cur_angle = 270\r\n      // this.local_pos = { x: info.local_pos.x, y: info.local_pos.y - this.node_pao_position.y }\r\n      // this.local_pos = new Vec3(info.local_pos.x, pos.y - this.getNodePao().position.y);\r\n    } else if (this.side === 4) {\r\n      // this.local_pos = { x: info.local_pos.x, y: info.local_pos.y + this.node_pao_position.y }\r\n      // this.local_pos = new Vec3(info.local_pos.x, pos.y + this.getNodePao().position.y);\r\n      this.cur_angle = 90\r\n    }\r\n\r\n    this.showEnterAnimation()\r\n    this.setUIinfo()\r\n\r\n    this.setReady()\r\n    this.showOffline()\r\n\r\n    //do change src\r\n    this.setBatterySrcByConfig()\r\n    this.createLockObj()\r\n\r\n    this.hit_score_obj.newSomeObject()\r\n\r\n    if (this.user_info.is_local === true) {\r\n      this.registerTouch(parentNode)\r\n    }\r\n\r\n    this.updateEgrAction()\r\n  }\r\n\r\n  public showEnterAnimation() {\r\n    //todo\r\n    // if (this.user_info.is_local === true) {\r\n    //   let move0 = cc.MoveBy.create(0.3, cc.v2(0, -70))\r\n    //   let move1 = move0.reverse()\r\n\r\n    //   let move2 = cc.MoveBy.create(0.3, cc.v2(0, -70))\r\n    //   let move3 = move2.reverse()\r\n\r\n    //   let move4 = cc.MoveBy.create(0.3, cc.v2(0, -70))\r\n    //   let move5 = move4.reverse()\r\n\r\n    //   let call_cmp = cc.callFunc(() => {\r\n    //     this.ui_lst.spr_yourthis.active = false\r\n    //   })\r\n\r\n    //   let seq = cc.sequence([move0, move1, move2, move3, move4, move5, call_cmp])\r\n\r\n    //   this.ui_lst.spr_yourthis.active = true\r\n    //   this.ui_lst.spr_yourthis.runAction(seq)\r\n    // }\r\n  }\r\n\r\n  private setUIinfo() {\r\n    //todo\r\n    // this.ui_lst.txt_nick.getComponent(Label).string = (\"昵称：\" + string.substr2(this.user_info.nick_name, 8))\r\n    // this.ui_lst.txt_level.getComponent(cc.Label).string = (\"等级：\"  +  this.user_info.level)\r\n    this.ui_lst.getChildByName('txt_viplevel').getComponent(Label).string = \"VIP等级：\" + this.user_info.vip_level\r\n    this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = `${this.user_info.gold}`\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n      this.ui_lst.getChildByName('fnt_beishu').getComponent(Label).string = this.user_info.bullet + ''\r\n    } else {\r\n      this.ui_lst.getChildByName('fnt_beishu').getComponent(Label).string = this.user_info.battery_score + ''\r\n    }\r\n\r\n    this.ui_lst.getChildByName('btn_change_battery').active = false\r\n    this.ui_lst.getChildByName('img_ctrlbk').active = false\r\n\r\n    if ((this.isMyBattery() === true) && (this.dataManager.getRoomType() !== GAME_TYPE_FRIENDROOM)) {\r\n      this.ui_lst.getChildByName('img_ctrlbk').active = true\r\n      this.ui_lst.getChildByName('btn_change_battery').active = true\r\n      this.show_change_battery_ui = true\r\n    } else {\r\n      this.ui_lst.getChildByName('btn_minus').active = false\r\n      this.ui_lst.getChildByName('btn_plus').active = false\r\n    }\r\n\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_GOLDROOM) {\r\n      if (llcompare(this.user_info.gold, this.user_info.battery_score) < 0) {\r\n        this.ui_lst.getChildByName('img_nomoney').active = true\r\n      } else {\r\n        this.ui_lst.getChildByName('img_nomoney').active = false\r\n      }\r\n    }\r\n\r\n    this.ui_lst.getChildByName('img_informationbk').active = false\r\n\r\n    // 显示头像\r\n    const headSprite = this.ui_lst.getChildByName('btn_head').getComponent(Sprite)\r\n    global.loadHeadSprite(this.user_info.head_id, headSprite);\r\n\r\n    // 设置vip等级\r\n    // let vip_frame = PlayerManager.getVipIcon(this.user_info.vip_level)\r\n    // res.load({ bundle: R.imgs.NAME, url: vip_frame,1, type: cc.SpriteFrame }).then(v => {\r\n    //                 if (this.isValid) {\r\n    //                     this.ui_lst.img_vip.getComponent(cc.Sprite).spriteFrame = v.resource;\r\n    //                 }\r\n    //             });\r\n  }\r\n\r\n  public setUserUIHidden() {\r\n    this.show_persion_ui = false\r\n    this.ui_lst.getChildByName('img_informationbk').active = false\r\n  }\r\n\r\n  //minus battery score\r\n  private onMinusBarrelIndex() {\r\n    let room_info = this.dataManager.getRoomInfo(this.user_info.room_id)\r\n    if (room_info && !this.user_info.isPowerBattery) {\r\n      this.send_ReqSwitchBattery({ type: 1 })\r\n    }\r\n  }\r\n\r\n  //add battery score\r\n  private onAddBarrelIndex() {\r\n    let room_info = this.dataManager.getRoomInfo(this.user_info.room_id)\r\n    if (room_info && !this.user_info.isPowerBattery) {\r\n      this.send_ReqSwitchBattery({ type: 0 })\r\n    }\r\n  }\r\n\r\n  private setReady() {\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n      this.ui_lst.getChildByName('img_ready').active = ((this.user_info.ready === 0) && (this.dataManager.stage === 0))\r\n    } else {\r\n      this.ui_lst.getChildByName('img_ready').active = false\r\n    }\r\n  }\r\n\r\n  private showOffline() {\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n      this.ui_lst.getChildByName('img_diaoxian').active = ((this.user_info.offline !== 0))\r\n    } else {\r\n      this.ui_lst.getChildByName('img_diaoxian').active = false\r\n    }\r\n  }\r\n\r\n  public isLockFish() {\r\n    if (this.lock_obj) {\r\n      if (this.lock_obj.getLockState() && this.lock_obj.getCurrentLockFishId() !== -1) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  public getLockFishId() {\r\n    if (this.lock_obj) {\r\n      return this.lock_obj.getCurrentLockFishId()\r\n    }\r\n\r\n    return -1\r\n  }\r\n\r\n  public setBatteryBeishu(beishu: number, is_eff: boolean) {\r\n\r\n    if (llcompare(this.user_info.gold, beishu) < 0) {\r\n      this.ui_lst.getChildByName('img_lock').active = true\r\n      if (this.ui_lst.getChildByName('img_nomoney').active === true) {\r\n        this.ui_lst.getChildByName('img_lock').active = false\r\n      }\r\n    } else {\r\n      this.ui_lst.getChildByName('img_lock').active = false\r\n    }\r\n    this.user_info.battery_score = beishu\r\n    this.ui_lst.getChildByName('fnt_beishu').getComponent(Label).string = this.user_info.battery_score + ''\r\n\r\n    if (is_eff === true) {\r\n      this.pao_am_obj.active = true\r\n      this.pao_am_obj.getComponent(Animation).play();\r\n\r\n      this.runBatteryFireAni()\r\n      this.musicEffectPlayer.play(this.commonConfig.battery_am_mus_id)\r\n    }\r\n  }\r\n\r\n  public cutBattery(id) {\r\n    this.user_info.battery_id = id\r\n    this.batteryConfig = this.batteryAllConfig[id]\r\n    this.skinConfig = this.batterySkinConfig[this.batteryConfig.id]\r\n\r\n    // this.paohuo_obj.stopAllActions()\r\n    this.paohuo_obj.active = false\r\n\r\n\r\n    this.is_play_over = false\r\n    this.is_pao_over = false\r\n    this.musicEffectPlayer.play(this.commonConfig.battery_change_mus_id)\r\n\r\n    this.setBatterySrcByConfig()\r\n  }\r\n\r\n  public setLockFish(fsh_id) {\r\n    if (this.lock_obj) {\r\n      this.lock_obj.setLockFish(fsh_id)\r\n\r\n      if (this.pao_lock_obj.active === false) {\r\n        this.pao_lock_obj.active = true\r\n        getAnimation(this.pao_lock_obj).play();\r\n        this.pao_lock_obj.setSiblingIndex(this.pao_lock_obj.parent.children.length);\r\n      }\r\n    }\r\n  }\r\n\r\n  public getLockAngle() {\r\n    if (this.lock_obj) {\r\n      return this.lock_obj.getCurrentLockAngle()\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  public isLockObjChange() {\r\n    if (this.lock_obj) {\r\n      return this.lock_obj.isLockObjChange()\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  public getSide() {\r\n    return this.side\r\n  }\r\n\r\n  public isLongTimeNoSendBullet() {\r\n    let is_no_send = false\r\n    if (this.user_info.is_local === true) {\r\n      if (this.auto_exit_time_add > this.auto_exit_time) {\r\n        is_no_send = true\r\n      } else {\r\n        is_no_send = false\r\n      }\r\n    }\r\n\r\n    return is_no_send\r\n  }\r\n\r\n\r\n  public resumeBatteryState() {\r\n    this.stop_all_action = false\r\n    this.batteryConfig = null\r\n    this.skinConfig = null\r\n    this.side = 0\r\n    this.cur_move_pos = new Vec3()\r\n    this.cur_angle = 0\r\n    this.local_pos = new Vec3()\r\n    this.key_is_down = false\r\n    this.send_bullet_add_time = 0\r\n    this.user_info = {\r\n      player_id: '',\r\n      set_id: 0,\r\n      server_id: 0,\r\n      is_local: false,\r\n      gold: 0,\r\n      head_id: 0,\r\n      level: 0,\r\n      vip_level: 0,\r\n      nick_name: \"\",\r\n      battery_id: 0,\r\n      battery_score: 0,\r\n      isPowerBattery: false,\r\n      room_id: '',\r\n      ready: 0,\r\n      offline: 0,\r\n      bullet: 0\r\n    }\r\n    this.front_fish_data_id = -1\r\n    this.is_auto_send = false\r\n    this.use_auto_send = false\r\n    this.auto_exit_time_add = 0\r\n    this.begin_pos = new Vec3()\r\n    this.move_pos = new Vec3()\r\n\r\n    this.show_persion_ui = false//显示个人信息页\r\n    this.show_change_battery_ui = false//显示看换炮页\r\n    this.is_play_over = false//发炮动画是否播放完成\r\n    this.is_pao_over = false//炮火动画是否播放完成\r\n    this.is_can_use_lock = false//是否启动锁定\r\n    this.sendBulletNum = 0\r\n\r\n    if (this.spr_obj) {\r\n      this.spr_obj.destroy()\r\n      this.spr_obj = null\r\n    }\r\n\r\n    if (this.skeleton_obj) {\r\n      // this.skeleton_obj.getComponent(sp.Skeleton).clearTracks()\r\n      this.skeleton_obj.destroy()\r\n      this.skeleton_obj = null\r\n    }\r\n\r\n    // setSpriteAtlasNode(this.sourceManager, this.pao_lock_obj, this.pao_lock_src, String(this.pao_lock_src.pattern).format(1))\r\n    getAnimation(this.pao_lock_obj).stop();\r\n    this.pao_lock_obj.active = false\r\n\r\n    // setSpriteAtlasNode(this.sourceManager, this.pao_am_obj, this.pao_am_src, String(this.pao_am_src.pattern).format(1))\r\n    getAnimation(this.pao_am_obj).stop();\r\n    this.pao_am_obj.active = false\r\n\r\n    // setSpriteAtlasNode(this.sourceManager, this.paohuo_obj, this.paohuo_src, String(this.paohuo_src.pattern).format(1))\r\n    getAnimation(this.paohuo_obj).stop();\r\n    this.paohuo_obj.active = false\r\n\r\n    this.getNodePao().angle = 90\r\n\r\n    this.setUIstate()\r\n\r\n    if (this.lock_obj !== null) {\r\n      this.lock_obj.destroy()\r\n      this.lock_obj = null\r\n    }\r\n\r\n    this.hit_score_obj.clear()\r\n    this.add_fish_gold = []\r\n    this.unRegisterTouch(this.parentNode);\r\n  }\r\n\r\n  private setBatterySrcByConfig() {\r\n    let skins = this.skinConfig\r\n    this.paohuo_obj.setPosition(this.batteryConfig.paohuo_offset, 0)\r\n\r\n    if (this.spr_obj) {\r\n      this.spr_obj.destroy()\r\n      this.spr_obj = null\r\n    }\r\n\r\n    if (this.skeleton_obj) {\r\n      // this.skeleton_obj.getComponent(sp.Skeleton).clearTracks()\r\n      this.skeleton_obj.destroy()\r\n      this.skeleton_obj = null\r\n    }\r\n\r\n    if (skins) {\r\n      if (skins.id === 0) {//sprite\r\n        let anis = this.textureConfig[skins.src]\r\n        this.spr_obj = createAnimationNode(this.sourceManager, this.getNodePao(), anis, false, false);\r\n        this.spr_obj.getComponent(UITransform).setAnchorPoint(new Vec2(0.35, 0.5))\r\n        this.spr_obj.setPosition(0, 0)\r\n\r\n        // console.log(\"spr_obj\", this.spr_obj);\r\n      } else {\r\n        // let js_file = skins.src + \".json\"\r\n        // let as_file = skins.src + \".atlas\"\r\n        // this.skeleton_obj = sp.SkeletonAnimation.create(js_file, as_file)\r\n        this.skeleton_obj = createSkeleton(this.sourceManager, this.getNodePao(), skins.src);\r\n        const sk = this.skeleton_obj.getComponent(sp.Skeleton);\r\n        sk.setAnimation(0, skins.ani1, true)\r\n        this.sken_scale_org = sk.timeScale;\r\n        this.skeleton_obj.addComponent(UITransform).setAnchorPoint(new Vec2(0.35, 0.5))\r\n        this.skeleton_obj.setPosition(30, 0)\r\n        sk.setCompleteListener(() => {\r\n          this.is_play_over = false\r\n          sk.timeScale = this.sken_scale_org;\r\n          sk.setAnimation(0, skins.ani1, true)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  public setRotationAndPosBySide(side) {\r\n    if (side === 1) {\r\n      this.ui_lst.angle = 90\r\n      this.cur_angle = 0\r\n    } else if (side === 2) {\r\n      this.ui_lst.angle = 270\r\n      this.cur_angle = 180\r\n    } else if (side === 3) {\r\n      this.ui_lst.angle = 180\r\n      this.cur_angle = 270\r\n    } else if (side === 4) {\r\n      this.ui_lst.angle = 0\r\n      this.cur_angle = 90\r\n    }\r\n  }\r\n\r\n  public createLockObj() {\r\n    if (!this.lock_obj) {\r\n      let pos = this.node.getWorldPosition();\r\n      if (this.parentNode.angle === 180) {\r\n        pos = new Vec3(view.getVisibleSize().x - pos.x, view.getVisibleSize().y - pos.y);\r\n      }\r\n\r\n      let info = {\r\n        parent: this.parentNode,\r\n        side: this.side,\r\n        is_local: this.user_info.is_local,\r\n        lkey: this.batteryConfig.lock_line_key,\r\n        lockTexturesInfo: this.textureConfig[this.commonConfig.lock_src_id],\r\n        offset_pos: pos.clone(),\r\n        player_id: this.user_info.player_id,\r\n      }\r\n\r\n      this.lock_obj = new LockFish(info, this.commonConfig, this.sourceManager, this.fishManager, this.batteryManager)\r\n      this.lock_obj.setLockCall((fsh_id) => {\r\n        this.sendLockMsg(fsh_id)\r\n      })\r\n    }\r\n  }\r\n\r\n  public sendLockMsg(fsh_id) {\r\n    if (this.user_info.is_local === true) {\r\n      let msg = { fishId: fsh_id, }\r\n      this.send_ReqLock(msg)\r\n    }\r\n  }\r\n\r\n  public updateEgrAction() {\r\n    const sprEgr = this.ui_lst.getChildByName('spr_egr');\r\n    if (this.user_info.isPowerBattery) {\r\n      if (sprEgr.active === false) {\r\n        sprEgr.active = true\r\n        let config = this.textureConfig[this.commonConfig.battyer_egr]\r\n\r\n        const an = getAnimation(sprEgr)\r\n        if (an) {\r\n          an.play();\r\n        } else {\r\n          addAnimation(this.sourceManager, sprEgr, config, true, true)\r\n        }\r\n\r\n        // todo\r\n        // let animation = cc.AnimationCache.getInstance().getAnimation(config.key)\r\n\r\n        // if( animation === null ){\r\n        //   animation = g_CreateAnimation(config, false)\r\n        //   cc.AnimationCache.getInstance().addAnimation(animation, config.key)\r\n        // }\r\n        // animation.retain()\r\n        // let animate = cc.Animate.create(animation)\r\n        // animation.release()\r\n        // this.ui_lst.spr_egr.runAction(cc.RepeatForever.create(animate))\r\n      }\r\n    } else {\r\n      // this.ui_lst.getChildByName('spr_egr').stopAllActions()\r\n      sprEgr.active = false\r\n    }\r\n  }\r\n\r\n  /**获得子弹的发射位置 */\r\n  public getSendBulletPos() {\r\n    let ranti = (this.cur_angle / pia) * pi\r\n    // const localPos = toNodeSpaceAR(this.batteryManager.getRootNode(), this.local_pos);\r\n\r\n    this.bulletSartPos.x = this.local_pos.x + this.batteryConfig.offset_dis * Math.cos(ranti)\r\n    this.bulletSartPos.y = this.local_pos.y + this.batteryConfig.offset_dis * Math.sin(ranti)\r\n\r\n    return this.bulletSartPos;\r\n  }\r\n\r\n  /**没有偏移的子弹发射位置 */\r\n  public getNoOffsetBulletPos() {\r\n    return this.local_pos\r\n  }\r\n\r\n  protected update(dt) {\r\n    if (this.stop_all_action === true) {\r\n      return\r\n    }\r\n    if (this.user_info.player_id === '') {\r\n      return\r\n    }\r\n\r\n    if (this.lock_obj) {\r\n      this.lock_obj.update(dt)\r\n    }\r\n\r\n    //run lock\r\n    if (this.isLockFish()) {\r\n      this.cur_angle = this.lock_obj.getCurrentLockAngle()\r\n\r\n      let rotate_angle = this.getBatteryRotationAngle(this.cur_angle);\r\n      // if (this.side === 1) {\r\n      //   rotate_angle = 2 * pia - this.cur_angle - pia / 2\r\n      // } else if (this.side === 2) {\r\n      //   rotate_angle = 2 * pia - this.cur_angle - pia * 3 / 2\r\n      // } else if (this.side === 3) {\r\n      //   rotate_angle = this.cur_angle\r\n      // } else if (this.side === 4) {\r\n      //   rotate_angle = this.cur_angle\r\n      // }\r\n\r\n      this.getNodePao().angle = rotate_angle\r\n    }\r\n\r\n    this.sendBullet(dt)\r\n\r\n    if (this.user_info.is_local === true) {\r\n      if (this.auto_exit_time_add < this.auto_exit_time) {\r\n        this.auto_exit_time_add = this.auto_exit_time_add + dt\r\n      }\r\n      if (this.isLockFish() === true) {\r\n        this.setAutoFire(true)\r\n      } else {\r\n        this.setAutoFire(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  public setAngle(angle) {\r\n    this.cur_angle = angle\r\n  }\r\n\r\n  private sendBullet(dt) {\r\n    if (this.send_bullet_add_time > this.batteryConfig.send_v) {\r\n      this.send_bullet_add_time = 0\r\n      if (this.isCanSendBullet() === true) {\r\n        //todo\r\n        let msg = { angle: this.cur_angle, bulletId: this.batteryManager.getBulletID(), }\r\n        this.send_ReqFire && this.send_ReqFire(msg)\r\n        this.runSendBullet(this.cur_angle, false, msg.bulletId)\r\n        if (this.dataManager.getRoomType() === GAME_TYPE_GOLDROOM) { //金币房\r\n          this.user_info.gold = llminus(this.user_info.gold, this.user_info.battery_score)\r\n          if (llcompare(this.user_info.gold, 0) <= 0) {\r\n            this.user_info.gold = 0\r\n          }\r\n          this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = `${this.user_info.gold}`\r\n        }\r\n        this.sendBulletNum = this.sendBulletNum + 1\r\n      }\r\n    } else {\r\n      this.send_bullet_add_time = this.send_bullet_add_time + dt\r\n    }\r\n  }\r\n\r\n\r\n  //是否定时发射子弹\r\n  private isCanSendBullet() {\r\n    let is_can_send_bullet = false\r\n    let cut_state = this.backgroundSceneManager.getSceneState()\r\n    if ((this.key_is_down === true || (this.is_auto_send === true && this.user_info.is_local === true))\r\n      && (cut_state === 1) && this.sendBulletNum < this.sendBulletMax) {\r\n      if (this.isHaveEnoughScore() === true) {\r\n        if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) { //好友房\r\n          if (this.dataManager.stage === 1) { //只有在游戏开始后才能发子弹\r\n            is_can_send_bullet = true\r\n          }\r\n        } else {\r\n          is_can_send_bullet = true\r\n        }\r\n      } else {\r\n        this.is_auto_send = false\r\n      }\r\n    }\r\n\r\n    return is_can_send_bullet\r\n  }\r\n\r\n  /**\r\n   * 发射子弹\r\n   * @param angle \r\n   * @param bserver \r\n   * @param server_id \r\n   * @returns \r\n   */\r\n  public runSendBullet(angle, bserver, server_id) {\r\n    if (bserver === true && this.user_info.is_local === true) {\r\n      return\r\n    }\r\n\r\n    if (this.user_info.is_local === true) {\r\n      this.musicEffectPlayer.play(this.batteryConfig.mus_eff_lst[0])\r\n    }\r\n\r\n    let bulletID = this.batteryConfig.bullet[0]\r\n    if (this.user_info.is_local === false) {\r\n      bulletID = this.batteryConfig.bullet[1]\r\n    }\r\n\r\n    if (this.user_info.is_local === true || this.isLockFish() === true) {\r\n      angle = this.cur_angle\r\n    }\r\n\r\n    this.bulletManager.sendBullet(bulletID,\r\n      this.getSendBulletPos(),\r\n      angle,\r\n      this.side,\r\n      this.user_info.player_id,\r\n      server_id,\r\n      this.getLockFishId(),\r\n      this.user_info.is_local\r\n    )\r\n\r\n    this.runBatteryFireAni()\r\n    this.runFirePaohuoAni()\r\n\r\n    if (this.user_info.is_local === false && this.isLockFish() === false) {\r\n      this.cur_angle = angle\r\n      let rotate_angle = this.getBatteryRotationAngle(this.cur_angle)\r\n      this.getNodePao().angle = rotate_angle\r\n    }\r\n\r\n    if (this.user_info.is_local === true) {\r\n      this.auto_exit_time_add = 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 开炮动画\r\n   */\r\n  private runBatteryFireAni() {\r\n    let skins = this.skinConfig\r\n    if (this.spr_obj) {\r\n      const an = this.spr_obj.getComponent(Animation)\r\n      // an.stop();\r\n      an.play();\r\n    }\r\n\r\n    if (this.skeleton_obj && this.is_play_over === false) {\r\n      this.is_play_over = true\r\n      const sk = this.skeleton_obj.getComponent(sp.Skeleton)\r\n      sk.setAnimation(0, skins.ani2, false)\r\n      sk.timeScale = skins.time_scale;\r\n    }\r\n  }\r\n\r\n  private runFirePaohuoAni() {\r\n    if (this.is_pao_over === false) {\r\n      this.paohuo_obj.active = true\r\n      this.paohuo_obj.getComponent(Animation).play();\r\n      this.is_pao_over = true;\r\n    }\r\n  }\r\n\r\n  private isHaveEnoughScore() {\r\n    if (this.user_info.is_local === true) {\r\n      if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) { //好友房\r\n        if (llcompare(this.user_info.bullet, 0) <= 0) {\r\n          this.is_auto_send = false\r\n          this.resetLockandAutoFireState()\r\n          //todo\r\n          // TipsManager.showOkOnce(330011)\r\n          return false\r\n        }\r\n        return true\r\n      } else {\r\n        let room_info = this.dataManager.getRoomInfo(this.user_info.room_id)\r\n        if ((llcompare(this.user_info.gold, this.user_info.battery_score) < 0) || (llcompare(this.user_info.gold, room_info.lower) < 0) || (llcompare(this.user_info.gold, 0) === 0)) {\r\n          if (this.ui_lst.getChildByName('img_nomoney').active === false) {\r\n            this.ui_lst.getChildByName('img_nomoney').active = true\r\n            this.ui_lst.getChildByName('img_lock').active = false\r\n          }\r\n          this.is_auto_send = false\r\n          this.resetLockandAutoFireState()\r\n          this.noMoney.show()\r\n          return false\r\n        } else {\r\n          this.ui_lst.getChildByName('img_nomoney').active = false\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  public resetLockandAutoFireState() {\r\n    this.setLockFisState(false)\r\n    this.setFireState(false)\r\n    this.batteryManager.callControl()\r\n  }\r\n\r\n  public setLockFisState(state: boolean) {\r\n    if (this.user_info.is_local === true) {\r\n      this.is_can_use_lock = state\r\n      if (this.is_can_use_lock === true) {\r\n        this.pao_lock_obj.active = true\r\n        getAnimation(this.pao_lock_obj).play();\r\n        this.pao_lock_obj.setSiblingIndex(this.pao_lock_obj.parent.children.length);\r\n      } else {\r\n        getAnimation(this.pao_lock_obj).stop();\r\n        this.pao_lock_obj.active = false\r\n        this.unLockFish()\r\n      }\r\n    }\r\n  }\r\n\r\n  public setFireState(state) {\r\n    this.use_auto_send = state\r\n    if (this.isLockFish() === false) {\r\n      this.setAutoFire(state)\r\n    }\r\n  }\r\n\r\n  public lockFish() {\r\n    if (this.lock_obj && this.backgroundSceneManager.getSceneState() === 1) {\r\n      this.lock_obj.lock()\r\n    }\r\n  }\r\n\r\n  public unLockFish() {\r\n    if (this.lock_obj) {\r\n      this.lock_obj.unlock()\r\n    }\r\n    if (this.user_info.is_local === true) {\r\n      this.send_ReqCancelLock({})\r\n    }\r\n  }\r\n\r\n  public setUnlockFish() {\r\n    if (this.lock_obj && this.user_info.is_local === false) {\r\n      this.lock_obj.unlock()\r\n      // this.pao_lock_obj.stopAllActions()\r\n      getAnimation(this.pao_lock_obj).stop();\r\n      this.pao_lock_obj.active = false\r\n      //todo\r\n      // this.pao_lock_obj.setSpriteFrame(string.format(this.pao_lock_src.pattern, 1))\r\n    }\r\n  }\r\n\r\n  public getUserInfo() {\r\n    return this.user_info\r\n  }\r\n\r\n  public getBatteryPos() {\r\n    return this.local_pos\r\n  }\r\n\r\n  public setScoreVal(val) {\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n      let show_val = llminus(val, this.user_info.gold)\r\n      this.user_info.gold = val\r\n      this.setHitScore(show_val)\r\n      this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = `${val}`\r\n    } else {\r\n      console.log(\"set score value  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  = \" + val)\r\n      // if(CC_DEBUG) console.log(this.add_fish_gold)\r\n      for (let k = 0; k < this.add_fish_gold.length; k++) {\r\n        const v = this.add_fish_gold[k];\r\n        val = llminus(val, v)\r\n      }\r\n      this.user_info.gold = val\r\n\r\n      let show_val = this.user_info.gold\r\n      if (llcompare(show_val, 0) < 0) {\r\n        show_val = 0\r\n      }\r\n      this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = `${show_val}`\r\n\r\n      let room_info = this.dataManager.getRoomInfo(this.user_info.room_id)\r\n      // if (this.user_info.is_local === false) {\r\n      if ((llcompare(this.user_info.gold, room_info.lower) < 0) || (llcompare(this.user_info.gold, 0) === 0)) {\r\n        this.ui_lst.getChildByName('img_nomoney').active = true\r\n      } else {\r\n        this.ui_lst.getChildByName('img_nomoney').active = false\r\n      }\r\n      // }\r\n    }\r\n  }\r\n\r\n  public setHitScore(score) {\r\n    const addScoreNode = this.ui_lst.getChildByName('fnt_addscore')\r\n    addScoreNode.setSiblingIndex(addScoreNode.parent.children.length);\r\n    let pos = addScoreNode.getWorldPosition()\r\n    let rotat = addScoreNode.angle\r\n    let id = this.user_info.is_local ? 1 : 2\r\n    if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n      id = llcompare(score, 0) >= 0 ? 3 : 4\r\n    }\r\n\r\n    console.log(\"battery set setHitScore  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  +  \" + score)\r\n    this.add_fish_gold.push(score)\r\n    this.hit_score_obj.show(pos.clone(), rotat, score, id, () => {\r\n      if ((this.add_fish_gold.length > 0) && (this.dataManager.getRoomType() !== GAME_TYPE_FRIENDROOM)) {\r\n        const fishGold = this.add_fish_gold.shift()\r\n        this.user_info.gold = llplus(this.user_info.gold, fishGold)\r\n        this.ui_lst.getChildByName('fnt_score').getComponent(Label).string = `${this.user_info.gold}`\r\n\r\n        let room_info = this.dataManager.getRoomInfo(this.user_info.room_id)\r\n        if ((llcompare(this.user_info.gold, room_info.lower) < 0) || (llcompare(this.user_info.gold, 0) === 0)) {\r\n          this.ui_lst.getChildByName('img_nomoney').active = true\r\n        } else {\r\n          this.ui_lst.getChildByName('img_nomoney').active = false\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //就是界面控制，没意思 ==============\r\n  public rotationInformation(set_id) {\r\n    set_id = parseInt(set_id);\r\n    if (set_id === 4 || set_id === 3) {\r\n      this.ui_lst.getChildByName('img_gold').angle = 0\r\n      this.ui_lst.getChildByName('fnt_beishu').angle = 0\r\n      let position: Vec3 = this.ui_lst.getChildByName('fnt_beishu').getPosition()\r\n      this.ui_lst.getChildByName('fnt_beishu').setPosition(new Vec3(position.x, position.y + 10))\r\n      this.ui_lst.getChildByName('fnt_score').angle = 0\r\n      if (set_id === 4) {\r\n        this.ui_lst.getChildByName('fnt_score').getComponent(UITransform).setAnchorPoint(new Vec2(1, 0.5))\r\n      } else {\r\n        this.ui_lst.getChildByName('fnt_score').getComponent(UITransform).setAnchorPoint(new Vec2(0, 0.5))\r\n      }\r\n      position = this.ui_lst.getChildByName('fnt_score').getPosition()\r\n      this.ui_lst.getChildByName('fnt_score').setPosition(new Vec3(position.x, position.y - 10))\r\n\r\n      this.ui_lst.getChildByName('btn_head').angle = 0\r\n      this.ui_lst.getChildByName('img_vipbk').angle = 0\r\n      this.ui_lst.getChildByName('img_nomoney').angle = 0\r\n      this.ui_lst.getChildByName('fnt_addscore').angle = 0\r\n      this.ui_lst.getChildByName('img_wait_add').angle = 180\r\n\r\n      this.ui_lst.getChildByName(\"img_informationbk\").angle = 0\r\n      // this.ui_lst.getChildByName(\"img_informationbk\").setRotationSkewX(0)\r\n      // this.ui_lst.getChildByName(\"img_informationbk\").setRotationSkewY(0)\r\n\r\n      this.ui_lst.getChildByName('txt_nick').angle = 0\r\n      // this.ui_lst.txt_level.setRotation(0)\r\n      this.ui_lst.getChildByName('txt_viplevel').angle = 0\r\n\r\n      let bk_size = this.ui_lst.getChildByName('img_informationbk').getComponent(UITransform)\r\n      position = this.ui_lst.getChildByName('txt_nick').getPosition()\r\n      let new_pos = { x: bk_size.width - position.x, y: bk_size.height - position.y + 26 }\r\n      this.ui_lst.getChildByName('txt_nick').setPosition(new_pos.x, new_pos.y)\r\n\r\n      bk_size = this.ui_lst.getChildByName('img_informationbk').getComponent(UITransform)\r\n      // x,y     = this.ui_lst.txt_level.getPosition()\r\n      // new_pos = {x = bk_size.width - x,y = bk_size.height - y + 26}\r\n      // this.ui_lst.txt_level.setPosition(new_pos.x,new_pos.y)\r\n\r\n      position = this.ui_lst.getChildByName('txt_viplevel').getPosition()\r\n      new_pos = { x: bk_size.width - position.x, y: bk_size.height - position.y + 26 }\r\n      this.ui_lst.getChildByName('txt_viplevel').setPosition(new_pos.x, new_pos.y)\r\n    } else if (set_id === 2 || set_id === 1) {\r\n      this.ui_lst.getChildByName('fnt_beishu').angle = 180\r\n      let position = this.ui_lst.getChildByName('fnt_beishu').getPosition()\r\n      this.ui_lst.getChildByName('fnt_beishu').setPosition(new Vec3(position.x, position.y - 10))\r\n      this.ui_lst.getChildByName('img_gold').angle = 180\r\n      this.ui_lst.getChildByName('fnt_score').angle = 180\r\n      if (set_id === 2) {\r\n        this.ui_lst.getChildByName('fnt_score').getComponent(UITransform).setAnchorPoint(new Vec2(0, 0.5))\r\n      } else {\r\n        this.ui_lst.getChildByName('fnt_score').getComponent(UITransform).setAnchorPoint(new Vec2(1, 0.5))\r\n      }\r\n      position = this.ui_lst.getChildByName('fnt_score').getPosition()\r\n      this.ui_lst.getChildByName('fnt_score').setPosition(new Vec3(position.x, position.y + 10))\r\n      this.ui_lst.getChildByName('btn_head').angle = 180\r\n      this.ui_lst.getChildByName('img_vipbk').angle = 180\r\n      this.ui_lst.getChildByName('img_nomoney').angle = 180\r\n      this.ui_lst.getChildByName('img_lock').angle = 180\r\n      this.ui_lst.getChildByName('fnt_addscore').angle = 180\r\n      this.ui_lst.getChildByName('img_wait_add').angle = 180\r\n      this.ui_lst.getChildByName('txt_nick').angle = 180\r\n      this.ui_lst.getChildByName('txt_viplevel').angle = 180\r\n\r\n      let bk_size = this.ui_lst.getChildByName('img_informationbk').getComponent(UITransform)\r\n      position = this.ui_lst.getChildByName('txt_nick').getPosition()\r\n      let new_pos = { x: bk_size.width - position.x, y: bk_size.height - position.y + 26 }\r\n      this.ui_lst.getChildByName('txt_nick').setPosition(new_pos.x, new_pos.y)\r\n\r\n      bk_size = this.ui_lst.getChildByName('img_informationbk').getComponent(UITransform)\r\n      // x,y     = this.ui_lst.txt_level.getPosition()\r\n      // new_pos = {x = bk_size.width - x,y = bk_size.height - y + 26}\r\n      // this.ui_lst.txt_level.setPosition(new_pos.x,new_pos.y)\r\n\r\n      position = this.ui_lst.getChildByName('txt_viplevel').getPosition()\r\n      new_pos = { x: bk_size.width - position.x, y: bk_size.height - position.y + 26 }\r\n      this.ui_lst.getChildByName('txt_viplevel').setPosition(new_pos.x, new_pos.y)\r\n    }\r\n  }\r\n\r\n  public resetRotation() {\r\n    this.ui_lst.getChildByName('img_gold').angle = this.ui_lstInit.getChildByName('img_gold').angle\r\n    this.ui_lst.getChildByName('fnt_beishu').angle = this.ui_lstInit.getChildByName('fnt_beishu').angle\r\n    this.ui_lst.getChildByName('fnt_beishu').setPosition(this.ui_lstInit.getChildByName('fnt_beishu').position)\r\n    this.ui_lst.getChildByName('fnt_score').angle = this.ui_lstInit.getChildByName('fnt_score').angle;\r\n    this.ui_lst.getChildByName('fnt_score').getComponent(UITransform)\r\n      .setAnchorPoint(this.ui_lstInit.getChildByName('fnt_score').getComponent(UITransform).anchorPoint)\r\n    this.ui_lst.getChildByName('fnt_score').setPosition(this.ui_lstInit.getChildByName('fnt_score').position)\r\n\r\n    this.ui_lst.getChildByName('btn_head').angle = this.ui_lstInit.getChildByName('btn_head').angle\r\n    this.ui_lst.getChildByName('img_vipbk').angle = this.ui_lstInit.getChildByName('img_vipbk').angle\r\n    this.ui_lst.getChildByName('img_nomoney').angle = this.ui_lstInit.getChildByName('img_nomoney').angle\r\n    this.ui_lst.getChildByName('fnt_addscore').angle = this.ui_lstInit.getChildByName('fnt_addscore').angle\r\n    this.ui_lst.getChildByName('img_wait_add').angle = this.ui_lstInit.getChildByName('img_wait_add').angle\r\n\r\n    this.ui_lst.getChildByName(\"img_informationbk\").angle = this.ui_lstInit.getChildByName(\"img_informationbk\").angle\r\n\r\n    this.ui_lst.getChildByName('txt_nick').angle = this.ui_lstInit.getChildByName('txt_nick').angle\r\n    this.ui_lst.getChildByName('txt_viplevel').angle = this.ui_lstInit.getChildByName('txt_viplevel').angle\r\n    this.ui_lst.getChildByName('txt_nick').setPosition(this.ui_lstInit.getChildByName('txt_nick').position)\r\n    this.ui_lst.getChildByName('txt_viplevel').setPosition(this.ui_lstInit.getChildByName('txt_viplevel').position)\r\n  }\r\n\r\n  public setStartGame() {\r\n    if (Number(this.user_info.player_id) === 0) {\r\n      if (this.dataManager.getRoomType() === GAME_TYPE_FRIENDROOM) {\r\n        this.ui_lst.getChildByName('img_wait_add').active = false\r\n      }\r\n    } else {\r\n      this.ui_lst.getChildByName('img_ready').active = false\r\n    }\r\n  }\r\n\r\n  public getDEfntConfig() {\r\n    if (this.batteryConfig) {\r\n      return this.batteryConfig.defnt\r\n    }\r\n  }\r\n\r\n  public minusBulletNum() {\r\n    this.sendBulletNum = this.sendBulletNum - 1\r\n    if (this.sendBulletNum < 0) {\r\n      this.sendBulletNum = 0\r\n    }\r\n  }\r\n\r\n  public isPowerBattery() {\r\n    return this.user_info.isPowerBattery\r\n  }\r\n\r\n  public setPowerBattery(isPower) {\r\n    this.user_info.isPowerBattery = isPower\r\n    this.updateEgrAction()\r\n  }\r\n\r\n  protected onDestroy(): void {\r\n    this.hit_score_obj = null;\r\n    this.sourceManager = null;\r\n    this.fishManager = null;\r\n    this.bulletManager = null;\r\n    this.batteryManager = null;\r\n    this.backgroundSceneManager = null;\r\n    this.musicEffectPlayer = null;\r\n    this.parentNode = null;\r\n  }\r\n}"]}