{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragon/Framework/care/Model.ts"],"names":["Model","constructor","proxyMap","_instance","Error","initializeModel","Instance","registerProxy","proxy","getProxyName","onRegister","removeProxy","proxyName","onRemove","retrieveProxy","hasProxy"],"mappings":";;;8BAMqBA,K;;;;;;;;;;;;;;;;;;;;;;;AAHrB;AACA;AACA;yBACqBA,K,GAAN,MAAMA,KAAN,CAA8B;AAKzCC,QAAAA,WAAW,GAAG;AAAA,eAFJC,QAEI,GAFuC,IAEvC;AACV,cAAIF,KAAK,CAACG,SAAV,EAAqB,MAAMC,KAAK,CAAC,sCAAD,CAAX;AACrBJ,UAAAA,KAAK,CAACG,SAAN,GAAkB,IAAlB;AACA,eAAKD,QAAL,GAAgB,EAAhB;AACA,eAAKG,eAAL;AACH;;AAEyB,mBAARC,QAAQ,GAAW;AACjC,cAAI,CAACN,KAAK,CAACG,SAAX,EAAsB;AAClBH,YAAAA,KAAK,CAACG,SAAN,GAAkB,IAAIH,KAAJ,EAAlB;AACH;;AACD,iBAAOA,KAAK,CAACG,SAAb;AACH;AAED;AACJ;AACA;;;AACcE,QAAAA,eAAe,GAAG,CAE3B;;AAEME,QAAAA,aAAa,CAACC,KAAD,EAAsB;AACtC,eAAKN,QAAL,CAAcM,KAAK,CAACC,YAAN,EAAd,IAAsCD,KAAtC;AACAA,UAAAA,KAAK,CAACE,UAAN;AACH;;AAEMC,QAAAA,WAAW,CAACC,SAAD,EAA4B;AAC1C,cAAIJ,KAAa,GAAG,KAAKN,QAAL,CAAcU,SAAd,CAApB;;AACA,cAAIJ,KAAK,IAAI,IAAb,EAAmB;AACf,mBAAO,KAAKN,QAAL,CAAcU,SAAd,CAAP;AACAJ,YAAAA,KAAK,CAACK,QAAN;AACH;;AACD,iBAAOL,KAAP;AACH;;AAEMM,QAAAA,aAAa,CAACF,SAAD,EAA4B;AAC5C,iBAAO,KAAKV,QAAL,CAAcU,SAAd,KAA4B,IAAnC;AACH;;AAEMG,QAAAA,QAAQ,CAACH,SAAD,EAA6B;AACxC,iBAAO,KAAKV,QAAL,CAAcU,SAAd,KAA4B,IAAnC;AACH;;AA9CwC,O;;AAAxBZ,MAAAA,K,CAEAG,S","sourcesContent":["import { IModel } from \"../interfaces/IModel\";\r\nimport { IProxy } from \"../interfaces/IProxy\";\r\n\r\n/**\r\n * PureMVC Model 接口定义\r\n */\r\nexport default class Model implements IModel {\r\n\r\n    protected static _instance: IModel;\r\n    protected proxyMap: { [propName: string]: IProxy } = null;\r\n\r\n    constructor() {\r\n        if (Model._instance) throw Error(\"Model singleton already constructed!\");\r\n        Model._instance = this;\r\n        this.proxyMap = {};\r\n        this.initializeModel();\r\n    }\r\n\r\n    public static get Instance(): IModel {\r\n        if (!Model._instance) {\r\n            Model._instance = new Model();\r\n        }\r\n        return Model._instance;\r\n    }\r\n\r\n    /**\r\n     * @description 初始化单例Model\r\n     */\r\n    protected initializeModel() {\r\n\r\n    }\r\n\r\n    public registerProxy(proxy: IProxy): void {\r\n        this.proxyMap[proxy.getProxyName()] = proxy;\r\n        proxy.onRegister();\r\n    }\r\n\r\n    public removeProxy(proxyName: string): IProxy {\r\n        let proxy: IProxy = this.proxyMap[proxyName];\r\n        if (proxy != null) {\r\n            delete this.proxyMap[proxyName];\r\n            proxy.onRemove();\r\n        }\r\n        return proxy;\r\n    }\r\n\r\n    public retrieveProxy(proxyName: string): IProxy {\r\n        return this.proxyMap[proxyName] || null;\r\n    }\r\n\r\n    public hasProxy(proxyName: string): boolean {\r\n        return this.proxyMap[proxyName] != null;\r\n    }\r\n\r\n}"]}