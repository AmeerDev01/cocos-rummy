{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/qiuqiu/components/Qiuqiu_Test.ts"],"names":["_decorator","Node","BaseComponent","convertPoker","genCardItem","OperationType","SKT_MAG_TYPE","sktMsgListener","addGoldAnime","playerBet","playerChangeOpType","saveBalanceInfo","roomChooseViewModel","config","ccclass","property","Qiuqiu_Test","rooms","propertyNode","props_btn_joinRoom","props_btn_quitRoom","props_btn_deal","props_btn_bet","props_btn_balance","props_btn_add_gold","props_btn_countdown","props_btn_seond_deal","props_btn_give_up","props_btn_show_result","props_btn_begin_game_countdown","props","events","myId","players","cards","start","initState","bindEvent","on","EventType","TOUCH_END","joinRoom","deal","index","Math","floor","random","length","dispatch","memberId","CALL","mainBoardViewModel","comp","recycleChip","randomIndex","startCountdown","dispath","SECOND_PUSH_DEAL","randomCard","GIVE_UP","beginGameCountdownHandle","useProps","key","value","bindUI","window","setTimeout","initRoom","Array","fill","map","v","i","roomInfo","roomId","Date","now","toString","roomName","afee","maxNum","lower","upper","testConfig","uid","AUTH","gold","dominoRoomInfoVos","vv","nickName","icon","isBanker","cacheChairId","tableId","status","betAmount","memberStatus","pokers","enterGameVo","list","JOIN_ROOM","forEach","READY","dealer","bankerId","chairId","countdown","PUSH_DEALER","dealData","stage","PUSH_DEAL","isReconnect","num","values","push","splice","indexs","playerMap","filter","seatIndex","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,I,OAAAA,I;;AACpBC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;AAA2BC,MAAAA,W,iBAAAA,W;AAA2BC,MAAAA,a,iBAAAA,a;;AACtDC,MAAAA,Y,iBAAAA,Y;AAA2BC,MAAAA,c,iBAAAA,c;;AAC3BC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,kB,iBAAAA,kB;AAAoBC,MAAAA,e,iBAAAA,e;;AAC7CC,MAAAA,mB,iBAAAA,mB;;AACFC,MAAAA,M;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;;6BAYjBgB,W,WADZF,OAAO,CAAC,aAAD,C,gBAAR,MACaE,WADb;AAAA;AAAA,0CACuE;AAAA;AAAA;AAAA,eAG9DC,KAH8D;AAAA,eAK5DC,YAL4D,GAK7C;AACxBC,YAAAA,kBAAkB,EAAE,IAAIlB,IAAJ,EADI;AAExBmB,YAAAA,kBAAkB,EAAE,IAAInB,IAAJ,EAFI;AAGxBoB,YAAAA,cAAc,EAAE,IAAIpB,IAAJ,EAHQ;AAIxBqB,YAAAA,aAAa,EAAE,IAAIrB,IAAJ,EAJS;AAKxBsB,YAAAA,iBAAiB,EAAE,IAAItB,IAAJ,EALK;AAMxBuB,YAAAA,kBAAkB,EAAE,IAAIvB,IAAJ,EANI;AAOxBwB,YAAAA,mBAAmB,EAAE,IAAIxB,IAAJ,EAPG;AAQxByB,YAAAA,oBAAoB,EAAE,IAAIzB,IAAJ,EARE;AASxB0B,YAAAA,iBAAiB,EAAE,IAAI1B,IAAJ,EATK;AAUxB2B,YAAAA,qBAAqB,EAAE,IAAI3B,IAAJ,EAVC;AAWxB4B,YAAAA,8BAA8B,EAAE,IAAI5B,IAAJ;AAXR,WAL6C;AAAA,eAmB/D6B,KAnB+D,GAmB/C,EAnB+C;AAAA,eAsB/DC,MAtB+D,GAsB9C,EAtB8C;;AA8EtE;AA9EsE,eA+E9DC,IA/E8D,GA+EvD,QA/EuD;AAAA,eAsG9DC,OAtG8D,GAsGpC,EAtGoC;AAAA,eAoK9DC,KApK8D,GAoKtD,EApKsD;AAAA;;AACtEC,QAAAA,KAAK,GAAG,CAAG;;AAwBDC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AAGA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKnB,YAAL,CAAkBC,kBAAlB,CAAqCmB,EAArC,CAAwCrC,IAAI,CAACsC,SAAL,CAAeC,SAAvD,EAAkE,MAAM;AACvE,iBAAKC,QAAL;AACA,WAFD;AAGA,eAAKvB,YAAL,CAAkBE,kBAAlB,CAAqCkB,EAArC,CAAwCrC,IAAI,CAACsC,SAAL,CAAeC,SAAvD,EAAkE,MAAM,CAEvE,CAFD;AAGA,eAAKtB,YAAL,CAAkBG,cAAlB,CAAiCiB,EAAjC,CAAoCrC,IAAI,CAACsC,SAAL,CAAeC,SAAnD,EAA8D,MAAM;AACnE,iBAAKE,IAAL;AACA,WAFD;AAGA,eAAKxB,YAAL,CAAkBI,aAAlB,CAAgCgB,EAAhC,CAAmCrC,IAAI,CAACsC,SAAL,CAAeC,SAAlD,EAA6D,MAAM;AAClE,gBAAMG,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKb,OAAL,CAAac,MAAxC,CAAd;AACA,iBAAKC,QAAL,CAAc;AAAA;AAAA,wCAAU,KAAKf,OAAL,CAAaU,KAAb,EAAoBM,QAA9B,EAAwC,IAAxC,EAA8C;AAAA;AAAA,gDAAcC,IAA5D,EAAkE,CAAlE,CAAd;AACA,WAHD;AAIA,eAAKhC,YAAL,CAAkBK,iBAAlB,CAAoCe,EAApC,CAAuCrC,IAAI,CAACsC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE;AAAA;AAAA,4DAAoBW,kBAApB,CAAuCC,IAAvC,CAA4CC,WAA5C;AACA,WAFD;AAGA,eAAKnC,YAAL,CAAkBM,kBAAlB,CAAqCc,EAArC,CAAwCrC,IAAI,CAACsC,SAAL,CAAeC,SAAvD,EAAkE,MAAM;AACvE,iBAAKQ,QAAL,CAAc;AAAA;AAAA,8CAAa,KAAKM,WAAL,EAAb,EAAiC,IAAjC,CAAd;AACA,WAFD;AAGA,eAAKpC,YAAL,CAAkBO,mBAAlB,CAAsCa,EAAtC,CAAyCrC,IAAI,CAACsC,SAAL,CAAeC,SAAxD,EAAmE,MAAM;AACxE;AAAA;AAAA,4DAAoBW,kBAApB,CAAuCI,cAAvC,CAAsD,EAAtD;AACA,WAFD;AAGA,eAAKrC,YAAL,CAAkBQ,oBAAlB,CAAuCY,EAAvC,CAA0CrC,IAAI,CAACsC,SAAL,CAAeC,SAAzD,EAAoE,MAAM;AACzE;AAAA;AAAA,kDAAegB,OAAf,CAAuB;AAAA;AAAA,8CAAaC,gBAApC,EAAsD,KAAKC,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAtD;AACA,WAFD;AAGA,eAAKxC,YAAL,CAAkBS,iBAAlB,CAAoCW,EAApC,CAAuCrC,IAAI,CAACsC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE,iBAAKQ,QAAL,CAAc;AAAA;AAAA,0DAAmB,KAAKf,OAAL,CAAa,CAAb,EAAgBgB,QAAnC,EAA6C;AAAA;AAAA,gDAAcU,OAA3D,EAAoE,CAApE,CAAd;AACA,WAFD;AAGA,eAAKzC,YAAL,CAAkBU,qBAAlB,CAAwCU,EAAxC,CAA2CrC,IAAI,CAACsC,SAAL,CAAeC,SAA1D,EAAqE,MAAM;AAC1E,gBAAMG,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKb,OAAL,CAAac,MAAxC,CAAd;AACA,iBAAKC,QAAL,CAAc;AAAA;AAAA,oDAAgB,KAAKf,OAAL,CAAaU,KAAb,EAAoBM,QAApC,EAA8C,IAA9C,EAAoD,IAApD,EAA0D,KAAKS,UAAL,CAAgB,CAAhB,CAA1D,CAAd;AACA,WAHD;AAIA,eAAKxC,YAAL,CAAkBW,8BAAlB,CAAiDS,EAAjD,CAAoDrC,IAAI,CAACsC,SAAL,CAAeC,SAAnE,EAA8E,MAAM;AACnF;AAAA;AAAA,4DAAoBW,kBAApB,CAAuCS,wBAAvC,CAAgE,EAAhE;AACA,WAFD;AAGA;;AAESC,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD,CACpE;;AAESC,QAAAA,MAAM,GAAS;AACxBC,UAAAA,MAAM,CAACC,UAAP,CAAkB,MAAM;AACvB,iBAAKC,QAAL;AACA,WAFD,EAEG,GAFH;AAGA;;AAIOA,QAAAA,QAAQ,GAAG;AAClB,eAAKlD,KAAL,GAAa,IAAImD,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,EAAwBC,GAAxB,CAA4B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClD,gBAAMC,QAAkB,GAAG;AAC1BC,cAAAA,MAAM,EAAEC,IAAI,CAACC,GAAL,GAAWC,QAAX,EADkB;AAE1BC,cAAAA,QAAQ,EAAE,MAFgB;AAG1BC,cAAAA,IAAI,EAAE,EAHoB;AAI1BC,cAAAA,MAAM,EAAE,EAJkB;AAK1BC,cAAAA,KAAK,EAAE,QAAQT,CAAC,GAAG,CAAZ,CALmB;AAM1BU,cAAAA,KAAK,EAAE,QAAQV,CAAC,GAAG,CAAZ;AANmB,aAA3B;AAQA,mBAAOC,QAAP;AACA,WAVY,CAAb;AAYA;AAAA;AAAA,gCAAOM,IAAP,GAAc,EAAd;AACA;AAAA;AAAA,gCAAOI,UAAP,CAAkBC,GAAlB,GAAwB,KAAKpD,IAA7B;AACA;AAAA;AAAA,gDAAewB,OAAf,CAAuB;AAAA;AAAA,4CAAa6B,IAApC,EAA0C;AACzCpC,YAAAA,QAAQ,EAAE,KAAKjB,IAD0B;AAEzCsD,YAAAA,IAAI,EAAE,IAFmC;AAGzCC,YAAAA,iBAAiB,EAAE,KAAKtE;AAHiB,WAA1C;AAKA;;AAGOwB,QAAAA,QAAQ,GAAG;AAClB,eAAKR,OAAL,GAAe,IAAImC,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,IAAlB,EAAwBC,GAAxB,CAA4B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACpD,gBAAMgB,EAAgB,GAAG;AACxBvC,cAAAA,QAAQ,EAAEuB,CAAC,KAAK,CAAN,GAAU,KAAKxC,IAAf,GAAsB2C,IAAI,CAACC,GAAL,GAAWC,QAAX,KAAwBL,CADhC;AAExBiB,cAAAA,QAAQ,EAAE,YAAYjB,CAFE;AAGxBc,cAAAA,IAAI,EAAE,MAHkB;AAIxBI,cAAAA,IAAI,EAAE,CAJkB;AAKxBC,cAAAA,QAAQ,EAAE,CALc;AAMxBC,cAAAA,YAAY,EAAEpB,CAAC,GAAG,CANM;AAOxBqB,cAAAA,OAAO,EAAElB,IAAI,CAACC,GAAL,GAAWC,QAAX,EAPe;AAQxBiB,cAAAA,MAAM,EAAE,CARgB;AASxBC,cAAAA,SAAS,EAAE,CATa;AAUxBC,cAAAA,YAAY,EAAE,CAVU;AAWxBC,cAAAA,MAAM,EAAE;AAXgB,aAAzB;AAaA,mBAAOT,EAAP;AACA,WAfc,CAAf,CADkB,CAkBlB;AACA;;AAEA,cAAMU,WAAwB,GAAG;AAChCL,YAAAA,OAAO,EAAE,QADuB;AAEhCM,YAAAA,IAAI,EAAE,KAAKlE;AAFqB,WAAjC,CArBkB,CA0BlB;AACA;AACA;;AAEA;AAAA;AAAA,gDAAeuB,OAAf,CAAuB;AAAA;AAAA,4CAAa4C,SAApC,EAA+CF,WAA/C;AAEA;;AAEOxD,QAAAA,IAAI,GAAG;AACd,eAAKT,OAAL,CAAaoE,OAAb,CAAqB9B,CAAC,IAAI;AACzB;AAAA;AAAA,kDAAef,OAAf,CAAuB;AAAA;AAAA,8CAAa8C,KAApC,EAA2C;AAC1CrD,cAAAA,QAAQ,EAAEsB,CAAC,CAACtB;AAD8B,aAA3C;AAGA,WAJD;AAMA,cAAMsD,MAAoB,GAAG;AAC5BC,YAAAA,QAAQ,EAAE,KAAKvE,OAAL,CAAa,CAAb,EAAgBgB,QADE;AAE5BwD,YAAAA,OAAO,EAAE,CAFmB;AAG5BC,YAAAA,SAAS,EAAE;AAHiB,WAA7B;AAKA;AAAA;AAAA,gDAAelD,OAAf,CAAuB;AAAA;AAAA,4CAAamD,WAApC,EAAiDJ,MAAjD;AAEA,cAAMN,MAAM,GAAG,KAAKvC,UAAL,CAAgB,CAAhB,EAAmBY,GAAnB,CAAuBC,CAAC,IAAI;AAAA;AAAA,0CAAYA,CAAZ,CAA5B,EAA4CD,GAA5C,CAAgDC,CAAC,IAAI;AAAA;AAAA,4CAAaA,CAAb,CAArD,CAAf;AAEA,cAAMqC,QAAsB,GAAG;AAC9BC,YAAAA,KAAK,EAAE,CADuB;AAE9BZ,YAAAA,MAAM,EAAEA;AAFsB,WAA/B;AAIA;AAAA;AAAA,gDAAezC,OAAf,CAAuB;AAAA;AAAA,4CAAasD,SAApC,EAA+CF,QAA/C;AAEA3C,UAAAA,MAAM,CAACC,UAAP,CAAkB,MAAM;AACvB;AAAA;AAAA,kCAAO6C,WAAP,GAAqB,KAArB;AACA,WAFD,EAEG,GAFH;AAGA;;AAGOrD,QAAAA,UAAU,CAACsD,GAAD,EAAc;AAC/B,cAAMC,MAAM,GAAG,EAAf;AACA,eAAK/E,KAAL,GAAa,IAAIkC,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,IAAnB,EAAyBC,GAAzB,CAA6B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAvC,CAAb;;AACA,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwC,GAApB,EAAyBxC,CAAC,EAA1B,EAA8B;AAC7B,gBAAM7B,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAKZ,KAAL,CAAWa,MAAtC,CAAd;AACAkE,YAAAA,MAAM,CAACC,IAAP,CAAY,KAAKhF,KAAL,CAAWS,KAAX,CAAZ;AACA,iBAAKT,KAAL,CAAWiF,MAAX,CAAkBxE,KAAlB,EAAyB,CAAzB;AACA;;AACD,iBAAOsE,MAAP;AACA;;AAEO3D,QAAAA,WAAW,GAAG;AACrB,cAAM8D,MAAM,GAAG;AAAA;AAAA,0DAAoBjE,kBAApB,CAAuCC,IAAvC,CAA4CtB,KAA5C,CAAkDuF,SAAlD,CAA4DC,MAA5D,CAAmE/C,CAAC,IAAIA,CAAxE,EAA2ED,GAA3E,CAA+EC,CAAC,IAAIA,CAAC,CAACgD,SAAtF,CAAf;AACA,iBAAOH,MAAM,CAACxE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBsE,MAAM,CAACrE,MAAlC,CAAD,CAAb;AACA;;AAEDyE,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvLqE,O","sourcesContent":["import { _decorator, Button, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { convertPoker, EnterGameVo, genCardItem, MemberInfoVo, OperationType, PushDealerVo, QiuQiuCardVo, RoomInfo } from '../type';\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from '../socketConnect';\r\nimport { addGoldAnime, playerBet, playerChangeOpType, saveBalanceInfo } from '../store/action/game';\r\nimport { roomChooseViewModel } from '../index';\r\nimport config from '../config';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n}\r\nexport interface IEvent {\r\n}\r\n\r\n@ccclass('Qiuqiu_Test')\r\nexport class Qiuqiu_Test extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\r\n\tprivate rooms: RoomInfo[];\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_joinRoom: new Node(),\r\n\t\tprops_btn_quitRoom: new Node(),\r\n\t\tprops_btn_deal: new Node(),\r\n\t\tprops_btn_bet: new Node(),\r\n\t\tprops_btn_balance: new Node(),\r\n\t\tprops_btn_add_gold: new Node(),\r\n\t\tprops_btn_countdown: new Node(),\r\n\t\tprops_btn_seond_deal: new Node(),\r\n\t\tprops_btn_give_up: new Node(),\r\n\t\tprops_btn_show_result: new Node(),\r\n\t\tprops_btn_begin_game_countdown: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_joinRoom.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.joinRoom();\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_quitRoom.on(Node.EventType.TOUCH_END, () => {\r\n\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_deal.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.deal();\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_bet.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst index = Math.floor(Math.random() * this.players.length);\r\n\t\t\tthis.dispatch(playerBet(this.players[index].memberId, 8000, OperationType.CALL, 0));\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_balance.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\troomChooseViewModel.mainBoardViewModel.comp.recycleChip();\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_add_gold.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(addGoldAnime(this.randomIndex(), 1000));\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_countdown.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\troomChooseViewModel.mainBoardViewModel.startCountdown(15);\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_seond_deal.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tsktMsgListener.dispath(SKT_MAG_TYPE.SECOND_PUSH_DEAL, this.randomCard(1)[0])\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_give_up.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(playerChangeOpType(this.players[0].memberId, OperationType.GIVE_UP, 0));\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_show_result.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst index = Math.floor(Math.random() * this.players.length)\r\n\t\t\tthis.dispatch(saveBalanceInfo(this.players[index].memberId, 1000, 1000, this.randomCard(4)));\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_begin_game_countdown.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\troomChooseViewModel.mainBoardViewModel.beginGameCountdownHandle(15);\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\twindow.setTimeout(() => {\r\n\t\t\tthis.initRoom();\r\n\t\t}, 100)\r\n\t}\r\n\r\n\t/**初始化房间 */\r\n\tprivate myId = '000000'\r\n\tprivate initRoom() {\r\n\t\tthis.rooms = new Array(4).fill(null).map((v, i) => {\r\n\t\t\tconst roomInfo: RoomInfo = {\r\n\t\t\t\troomId: Date.now().toString(),\r\n\t\t\t\troomName: '1231',\r\n\t\t\t\tafee: 20,\r\n\t\t\t\tmaxNum: 20,\r\n\t\t\t\tlower: 1000 * (i + 2),\r\n\t\t\t\tupper: 5000 * (i + 2),\r\n\t\t\t}\r\n\t\t\treturn roomInfo;\r\n\t\t})\r\n\r\n\t\tconfig.afee = 20;\r\n\t\tconfig.testConfig.uid = this.myId;\r\n\t\tsktMsgListener.dispath(SKT_MAG_TYPE.AUTH, {\r\n\t\t\tmemberId: this.myId,\r\n\t\t\tgold: 5000,\r\n\t\t\tdominoRoomInfoVos: this.rooms\r\n\t\t})\r\n\t}\r\n\r\n\tprivate players: MemberInfoVo[] = [];\r\n\tprivate joinRoom() {\r\n\t\tthis.players = new Array(7).fill(null).map((v, i) => {\r\n\t\t\tconst vv: MemberInfoVo = {\r\n\t\t\t\tmemberId: i === 0 ? this.myId : Date.now().toString() + i,\r\n\t\t\t\tnickName: 'test是用户' + i,\r\n\t\t\t\tgold: 100000,\r\n\t\t\t\ticon: 1,\r\n\t\t\t\tisBanker: 0,\r\n\t\t\t\tcacheChairId: i + 1,\r\n\t\t\t\ttableId: Date.now().toString(),\r\n\t\t\t\tstatus: 3,\r\n\t\t\t\tbetAmount: 0,\r\n\t\t\t\tmemberStatus: 0,\r\n\t\t\t\tpokers: []\r\n\t\t\t}\r\n\t\t\treturn vv;\r\n\t\t})\r\n\r\n\t\t// this.players[0].chairId = 6;\r\n\t\t// this.players[0].status = 1;\r\n\r\n\t\tconst enterGameVo: EnterGameVo = {\r\n\t\t\ttableId: '123123',\r\n\t\t\tlist: this.players\r\n\t\t}\r\n\r\n\t\t// this.players[1].chairId = 1;\r\n\t\t// this.players[2].chairId = 2;\r\n\t\t// this.players[3].chairId = 4;\r\n\r\n\t\tsktMsgListener.dispath(SKT_MAG_TYPE.JOIN_ROOM, enterGameVo)\r\n\r\n\t}\r\n\r\n\tprivate deal() {\r\n\t\tthis.players.forEach(v => {\r\n\t\t\tsktMsgListener.dispath(SKT_MAG_TYPE.READY, {\r\n\t\t\t\tmemberId: v.memberId\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tconst dealer: PushDealerVo = {\r\n\t\t\tbankerId: this.players[0].memberId,\r\n\t\t\tchairId: 1,\r\n\t\t\tcountdown: 10\r\n\t\t}\r\n\t\tsktMsgListener.dispath(SKT_MAG_TYPE.PUSH_DEALER, dealer)\r\n\r\n\t\tconst pokers = this.randomCard(3).map(v => genCardItem(v)).map(v => convertPoker(v));\r\n\t\t\r\n\t\tconst dealData: QiuQiuCardVo = {\r\n\t\t\tstage: 1,\r\n\t\t\tpokers: pokers,\r\n\t\t}\r\n\t\tsktMsgListener.dispath(SKT_MAG_TYPE.PUSH_DEAL, dealData)\r\n\r\n\t\twindow.setTimeout(() => {\r\n\t\t\tconfig.isReconnect = false;\r\n\t\t}, 100)\r\n\t}\r\n\r\n\tprivate cards = [];\r\n\tprivate randomCard(num: number) {\r\n\t\tconst values = [];\r\n\t\tthis.cards = new Array(28).fill(null).map((v, i) => i);\r\n\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\tconst index = Math.floor(Math.random() * this.cards.length)\r\n\t\t\tvalues.push(this.cards[index]);\r\n\t\t\tthis.cards.splice(index, 1)\r\n\t\t}\r\n\t\treturn values;\r\n\t}\r\n\r\n\tprivate randomIndex() {\r\n\t\tconst indexs = roomChooseViewModel.mainBoardViewModel.comp.props.playerMap.filter(v => v).map(v => v.seatIndex);\r\n\t\treturn indexs[Math.floor(Math.random() * indexs.length)];\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}