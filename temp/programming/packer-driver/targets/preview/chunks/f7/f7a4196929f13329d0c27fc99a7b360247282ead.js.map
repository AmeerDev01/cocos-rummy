{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egypt/Slot/Proxy/SlotProxy.ts"],"names":["SlotProxy","instantiate","log","BaseProxy","SlotRepository","roller","config","RollerType","constructor","proxyName","data","repository","initRoller","rollerList","iconRollerQueue","forEach","rollerData","i","Object","assign","setStopIndex","rollerIndex","stopIndex","showResult","setResult","resultData","result","getRollerList"],"mappings":";;;4IAWaA,S;;;;;;;;;;;;;;;;;;;;;;;;;;;AATJC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,G,OAAAA,G;;AAFfC,MAAAA,S;;AACEC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,M,iBAAAA,M;;AAElBC,MAAAA,M;;;;;;;;;4BAEKC,U,0BAAAA,U;AAAAA,QAAAA,U;AAAAA,QAAAA,U;eAAAA,U;;;2BAMCP,S,GAAN,MAAMA,SAAN;AAAA;AAAA,kCAAkD;AACjDQ,QAAAA,WAAW,CAACC,SAAD,EAA2BC,IAA3B,EAA6C;AAAA,cAA5CD,SAA4C;AAA5CA,YAAAA,SAA4C,GAAxB,IAAwB;AAAA;;AAAA,cAAlBC,IAAkB;AAAlBA,YAAAA,IAAkB,GAAN,IAAM;AAAA;;AAC9D,gBAAMD,SAAN,EAAiBC,IAAjB;AACA,eAAKC,UAAL,GAAkB;AAAA;AAAA,iDAAlB;AACA,SAJuD,CAKxD;;AACA;AACD;AACA;AACA;;;AACQC,QAAAA,UAAU,GAAG;AACnB;AACA;AACA,eAAKD,UAAL,CAAgBE,UAAhB,GAA6B,EAA7B;AACA;AAAA;AAAA,gCAAOC,eAAP,CAAuBC,OAAvB,CAA+B,CAACC,UAAD,EAAaC,CAAb,KAAmB;AACjD;AACA;AACA,gBAAMP,IAAI,GAAGQ,MAAM,CAACC,MAAP,CAAc,EAAd;AAAA;AAAA,kCAA0B;AAAET,cAAAA,IAAI,EAAEM;AAAR,aAA1B,CAAb;AACA,iBAAKL,UAAL,CAAgBE,UAAhB,CAA2BI,CAA3B,IAAgChB,WAAW,CAACS,IAAD,CAA3C;AACA,WALD;AAMA;AAED;AACD;AACA;AACA;AACA;;;AACQU,QAAAA,YAAY,CAACC,WAAD,EAAsBC,SAAtB,EAAyC;AAC3D,cAAMC,UAAU,GAAG,KAAKZ,UAAL,CAAgBE,UAAhB,CAA2BQ,WAA3B,EAAwCE,UAA3D;AACAA,UAAAA,UAAU,CAACD,SAAX,GAAuBA,SAAvB;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;AACQE,QAAAA,SAAS,CAACH,WAAD,EAAsBC,SAAtB,EAAyCG,UAAzC,EAA+D;AAC9E,cAAMT,UAAU,GAAG,KAAKL,UAAL,CAAgBE,UAAhB,CAA2BQ,WAA3B,CAAnB;;AACA,cAAIL,UAAJ,EAAgB;AACfA,YAAAA,UAAU,CAACO,UAAX,CAAsBD,SAAtB,GAAkCA,SAAlC;AACAN,YAAAA,UAAU,CAACO,UAAX,CAAsBG,MAAtB,GAA+BD,UAA/B;AACA,WAHD,MAGO;AACNvB,YAAAA,GAAG,CAAC,cAAD,CAAH;AACA;AACD;;AAEMyB,QAAAA,aAAa,GAAG;AACtB,iBAAO,KAAKhB,UAAL,CAAgBE,UAAvB;AACA;;AAlDuD,O","sourcesContent":["import BaseProxy from \"./BaseProxy\"\r\nimport { SlotRepository, roller } from \"../Repositories/SlotRepository\"\r\nimport { instantiate, log } from \"cc\";\r\nimport config from \"../config\"\r\n\r\nexport enum RollerType {\r\n\t/**普通的5列小滑槽 */\r\n\tNORMAL = \"iconRollerQueue\",\r\n\t/**3列滑槽，中间为大滑槽 */\r\n\tLARGE = \"largeIconRollerQueue\"\r\n}\r\nexport class SlotProxy extends BaseProxy<SlotRepository> {\r\n\tpublic constructor(proxyName: string = null, data: any = null) {\r\n\t\tsuper(proxyName, data);\r\n\t\tthis.repository = new SlotRepository()\r\n\t}\r\n\t// private repository: FruitsSlotRepository\r\n\t/**\r\n\t * 初始化滑槽数据\r\n\t * @param rollerType NORMAL展示5列, LARGE展示3列且中间为大滑槽\r\n\t */\r\n\tpublic initRoller() {\r\n\t\t// 首先重置\r\n\t\t// console.log(\"rollerType\", rollerType)\r\n\t\tthis.repository.rollerList = []\r\n\t\tconfig.iconRollerQueue.forEach((rollerData, i) => {\r\n\t\t\t//如果只有3列数据，那需要将将第二排设置为大滑槽数据\r\n\t\t\t// const data = Object.assign({}, (rollerType === RollerType.LARGE && i === 1) ? bigRoller : roller, { data: rollerData })\r\n\t\t\tconst data = Object.assign({}, roller, { data: rollerData })\r\n\t\t\tthis.repository.rollerList[i] = instantiate(data)\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * 设置停止序号（控制停止） \r\n\t * @param rollerIndex 滑槽序号\r\n\t * @param stopIndex 停止的序号（规则从1开始，默认为-1：停止）\r\n\t */\r\n\tpublic setStopIndex(rollerIndex: number, stopIndex: number) {\r\n\t\tconst showResult = this.repository.rollerList[rollerIndex].showResult\r\n\t\tshowResult.stopIndex = stopIndex\r\n\t}\r\n\r\n\t/**\r\n\t * 赋值结果数据\r\n\t * @param rollerIndex 滑槽序号\r\n\t * @param stopIndex 数据开始截取结果的序号（从1开始的）\r\n\t * @param resultData 结果数据（其实可以不用，但是可以看得出获取了多少个元素）\r\n\t */\r\n\tpublic setResult(rollerIndex: number, stopIndex: number, resultData: number[]) {\r\n\t\tconst rollerData = this.repository.rollerList[rollerIndex]\r\n\t\tif (rollerData) {\r\n\t\t\trollerData.showResult.stopIndex = stopIndex\r\n\t\t\trollerData.showResult.result = resultData\r\n\t\t} else {\r\n\t\t\tlog(\"未找到对应的滚槽数据载体\")\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getRollerList() {\r\n\t\treturn this.repository.rollerList\r\n\t}\r\n}"]}