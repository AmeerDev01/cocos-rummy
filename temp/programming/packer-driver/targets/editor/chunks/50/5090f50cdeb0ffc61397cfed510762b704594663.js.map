{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_ChangeNickName.ts"],"names":["_decorator","EditBox","Node","BaseComponent","InputValidator","ccclass","property","Hall_ChangeNickName","propertyNode","props_EditBox_changeName","props_btn_set_batal","props_btn_tentu","props","nickName","events","onCloseHandler","onModifyHandler","newNickName","Promise","resolve","start","initState","bindEvent","on","EventType","TOUCH_END","begin","isChartLength","string","done","then","useProps","key","value","cur","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,O,OAAAA,O;AAASC,MAAAA,I,OAAAA,I;;AAChCC,MAAAA,a,iBAAAA,a;;AACFC,MAAAA,c;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAejBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb;AAAA;AAAA,0CAC+E;AAAA;AAAA;AAAA,eAKpEC,YALoE,GAKrD;AACxBC,YAAAA,wBAAwB,EAAE,IAAIR,OAAJ,EADF;;AAExB;AACAS,YAAAA,mBAAmB,EAAE,IAAIR,IAAJ,EAHG;;AAIxB;AACAS,YAAAA,eAAe,EAAE,IAAIT,IAAJ;AALO,WALqD;AAAA,eAavEU,KAbuE,GAavD;AACtBC,YAAAA,QAAQ,EAAE;AADY,WAbuD;AAAA,eAiBvEC,MAjBuE,GAiBtD;AACvBC,YAAAA,cAAc,EAAE,MAAM,CAAG,CADF;AAEvBC,YAAAA,eAAe,EAAGC,WAAD,IAAyB,IAAIC,OAAJ,CAAaC,OAAD,IAAaA,OAAO,CAAC,KAAD,CAAhC;AAFnB,WAjBsD;AAAA;;AAC9EC,QAAAA,KAAK,GAAG,CAEP;;AAmBSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AAGA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKd,YAAL,CAAkBE,mBAAlB,CAAsCa,EAAtC,CAAyCrB,IAAI,CAACsB,SAAL,CAAeC,SAAxD,EAAmE,MAAM;AACxE,iBAAKX,MAAL,CAAYC,cAAZ;AACA,WAFD;AAGA,eAAKP,YAAL,CAAkBG,eAAlB,CAAkCY,EAAlC,CAAqCrB,IAAI,CAACsB,SAAL,CAAeC,SAApD,EAA+D,MAAM;AACpE;AAAA;AAAA,oDAAqBC,KAArB,GAA6BC,aAA7B,CAA2C,CAAC,CAAD,EAAI,EAAJ,CAA3C,EAAoD,KAAKnB,YAAL,CAAkBC,wBAAlB,CAA2CmB,MAA/F,EAAuGC,IAAvG,CAA4G,MAAM;AACjH,mBAAKf,MAAL,CAAYE,eAAZ,CAA4B,KAAKR,YAAL,CAAkBC,wBAAlB,CAA2CmB,MAAvE,EAA+EE,IAA/E,CAAoF,MAAM;AACzF,qBAAKhB,MAAL,CAAYC,cAAZ;AACA,eAFD;AAGA,aAJD;AAKA,WAND;AAOA;;AAESgB,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAID,GAAG,KAAK,UAAZ,EAAwB,KAAKxB,YAAL,CAAkBC,wBAAlB,CAA2CmB,MAA3C,GAAoDK,KAAK,CAACC,GAA1D;AACxB;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAnD6E,O","sourcesContent":["import { _decorator, Component, EditBox, Node } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport InputValidator from '../../utils/InputValidator';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tnickName: string\r\n}\r\nexport interface IEvent {\r\n\tonCloseHandler: () => void\r\n\tonModifyHandler: (newNickName: string) => Promise<boolean>\r\n}\r\n\r\n@ccclass('Hall_ChangeNickName')\r\nexport class Hall_ChangeNickName extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_EditBox_changeName: new EditBox(),\r\n\t\t/**取消 */\r\n\t\tprops_btn_set_batal: new Node(),\r\n\t\t/**确认 */\r\n\t\tprops_btn_tentu: new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tnickName: \"\"\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonCloseHandler: () => { },\r\n\t\tonModifyHandler: (newNickName: string) => new Promise((resolve) => resolve(false))\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_set_batal.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onCloseHandler()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_tentu.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tnew InputValidator().begin().isChartLength([2, 16], this.propertyNode.props_EditBox_changeName.string).done(() => {\r\n\t\t\t\tthis.events.onModifyHandler(this.propertyNode.props_EditBox_changeName.string).then(() => {\r\n\t\t\t\t\tthis.events.onCloseHandler()\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"nickName\") this.propertyNode.props_EditBox_changeName.string = value.cur\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}