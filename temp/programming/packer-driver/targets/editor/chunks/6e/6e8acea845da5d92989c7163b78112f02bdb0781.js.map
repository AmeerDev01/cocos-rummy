{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/starlight/components/Starlight_RollerIcon.ts"],"names":["_decorator","instantiate","Label","Node","sp","Sprite","tween","UITransform","Vec3","BaseComponent","IconEffectType","sourceManageSeletor","winShowViewModel","SkeletonAnimationPlayer","ccclass","property","Starlight_RollerIcon","propertyNode","props_iconWrap","props_iconId","props_label_rate_num","props_focusBorder","props_skeleton_bomb","props","iconData","iconEffect","NONE","events","start","initState","bindEvent","playAni","isActive","getChildByName","active","getComponent","Skeleton","setSkin","uiData","skin","animation","animationArr","useProps","key","value","uiTrasform","node","width","height","iconNodeSkeleton","iconNodeSprite","iconNode","skeletonData","getFile","fileName","source","spriteFrame","iconName","iconId","string","multiple","setScale","scale","x","y","z","getPosition","setPosition","distance","cur","NORMAIL","timeScale","scheduleOnce","palyScatter","callBack","i","ani","playAnimation","playallPurpose","startWorldPos","worldPosition","targetWorldPos","comp","addChild","uiTransform","startLocalPos","convertToNodeSpaceAR","targetLocalPos","to","position","easing","call","destroy","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, debug, instantiate, Label, Node, sp, Sprite, tween, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { IconEffectType, IconType } from '../type';\r\nimport { sourceManageSeletor, winShowViewModel } from '../index';\r\nimport { SkeletalPathDefine } from '../sourceDefine/skeletalDefine';\r\nimport { getNodePositionInCanvas } from '../../../utils/tool';\r\nimport SkeletonAnimationPlayer from '../SkeletonPlay';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\ticonData?: IconType\r\n\t/**将这个属性单拎出来，节约性能，不然每次都要重新初始化icon的界面 */\r\n\ticonEffect?: IconEffectType,\r\n\tplayAni?: 0,\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\n\r\n@ccclass('Starlight_RollerIcon')\r\nexport class Starlight_RollerIcon extends BaseComponent<IState, IProps, IEvent> {\r\n\t\r\n\tstart() { }\r\n\tprotected propertyNode = {\r\n\t\tprops_iconWrap: new Node(),\r\n\t\tprops_iconId: new Label(),\r\n\t\tprops_label_rate_num: new Node(),\r\n\t\tprops_focusBorder: new Node(),\r\n\t\tprops_skeleton_bomb: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\ticonData: null,\r\n\t\ticonEffect: IconEffectType.NONE,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\tprivate playAni(isActive) {\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = true\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").active = false\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton).setSkin(this.props.iconData.uiData.skin ? this.props.iconData.uiData.skin : 'default')\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton).animation = this.props.iconData.uiData.animationArr[isActive ? 1 : 0]\r\n\t}\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"iconData\") {\r\n\t\t\tif (this.props.iconData) {\r\n\t\t\t\tconst uiTrasform = this.node.getComponent(UITransform)\r\n\t\t\t\tuiTrasform.width = this.props.iconData.width\r\n\t\t\t\tuiTrasform.height = this.props.iconData.height\r\n\t\t\t\tconst iconNodeSkeleton = this.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\")\r\n\t\t\t\tconst iconNodeSprite = this.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\")\r\n\t\t\t\ticonNodeSkeleton.active = false\r\n\t\t\t\ticonNodeSprite.active = false\r\n\t\t\t\tlet iconNode: Node\r\n\t\t\t\t// if (this.props.iconData.LargeIcon) {\r\n\t\t\t\t// \ticonNode = iconNodeSprite\r\n\t\t\t\t// \ticonNodeSprite.active = false\r\n\t\t\t\t// \ticonNodeSprite.getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(this.props.iconData.uiData.fileName).source\r\n\t\t\t\t// } else {\r\n\r\n\t\t\t\t// }\r\n\t\t\t\ticonNode = iconNodeSkeleton\r\n\t\t\t\ticonNodeSkeleton.active = true\r\n\t\t\t\ticonNodeSkeleton.getComponent(sp.Skeleton).skeletonData = sourceManageSeletor().getFile(this.props.iconData.uiData.fileName).source\r\n\t\t\t\ticonNodeSkeleton.getComponent(sp.Skeleton).setSkin(this.props.iconData.uiData.skin ? this.props.iconData.uiData.skin : 'default')\r\n\t\t\t\ticonNodeSkeleton.getComponent(sp.Skeleton).animation = this.props.iconData.uiData.animationArr[0]\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = false\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").active = true\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(this.props.iconData.uiData.iconName).source\r\n\t\t\t\tif (this.props.iconData.iconId > 10) {\r\n\t\t\t\t\tthis.propertyNode.props_label_rate_num.active = true\r\n\t\t\t\t\tthis.propertyNode.props_label_rate_num.getComponent(Label).string = this.props.iconData.multiple + \"X\"\r\n\t\t\t\t}\r\n\t\t\t\ticonNode.setScale(new Vec3(...this.props.iconData.uiData.scale))\r\n\t\t\t\tconst { x, y, z } = iconNode.getPosition()\r\n\t\t\t\ticonNode.setPosition(new Vec3(x + this.props.iconData.uiData.distance[0], y + this.props.iconData.uiData.distance[1], x))\r\n\t\t\t\t// this.propertyNode.props_iconId.string = this.props.iconData.iconId + \"\"\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"iconEffect\") {\r\n\t\t\t//闪动框\r\n\t\t\tconst isActive = (value.cur === IconEffectType.NORMAIL)\r\n\t\t\tthis.propertyNode.props_focusBorder.active = isActive\r\n\t\t\tthis.playAni(isActive)\r\n\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton).timeScale = 1.8\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = false\r\n\t\t\t\tthis.propertyNode.props_skeleton_bomb.active = true\r\n\t\t\t}, 1)\r\n\t\t}\r\n\t}\r\n\tprivate palyScatter(isActive, callBack) { // Scatter闪动\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = true\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").active = false\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton).setSkin(this.props.iconData.uiData.skin ? this.props.iconData.uiData.skin : 'default')\r\n\t\tlet i = 0\r\n\t\tlet ani=new SkeletonAnimationPlayer(this.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton), this.props.iconData.uiData.animationArr[isActive ? 1 : 0], true, () => {\r\n\t\t\ti++\r\n\t\t\tif (i == 2) {\r\n\t\t\t\tcallBack()\r\n\t\t\t}\r\n\t\t});\r\n\t\tani.playAnimation()\r\n\t}\r\n\tprivate playallPurpose(callBack) {\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = true\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").active = false\r\n\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton).setSkin(this.props.iconData.uiData.skin ? this.props.iconData.uiData.skin : 'default')\r\n\t\tlet ani = new SkeletonAnimationPlayer(this.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").getComponent(sp.Skeleton), this.props.iconData.uiData.animationArr[1], false, () => {\r\n\t\t\t// 获取起始和目标的世界坐标\r\n\t\t\tlet startWorldPos = this.propertyNode.props_label_rate_num.worldPosition;\r\n\t\t\tlet targetWorldPos = winShowViewModel.comp.node.getChildByName('props_spr_win_box').worldPosition;\r\n\t\t\t// 创建节点的实例\r\n\t\t\tlet node = instantiate(this.propertyNode.props_label_rate_num);\r\n\t\t\t// 将节点添加到目标节点所在的父节点\r\n\t\t\twinShowViewModel.comp.node.addChild(node);\r\n\t\t\t// 获取父节点的 UITransform 组件\r\n\t\t\tlet uiTransform = winShowViewModel.comp.node.getComponent(UITransform);\r\n\t\t\t// 将世界坐标转换为新父节点的局部坐标\r\n\t\t\tlet startLocalPos = uiTransform.convertToNodeSpaceAR(startWorldPos);\r\n\t\t\tlet targetLocalPos = uiTransform.convertToNodeSpaceAR(targetWorldPos);\r\n\t\t\ttargetLocalPos.x = targetLocalPos.x + 60\r\n\t\t\t// 设置节点的初始位置\r\n\t\t\tnode.setPosition(startLocalPos);\r\n\t\t\tthis.propertyNode.props_label_rate_num.active = false\r\n\t\t\t// 执行缓动动画\r\n\t\t\ttween(node)\r\n\t\t\t\t.to(1, { position: targetLocalPos }, { easing: 'sineInOut' })\r\n\t\t\t\t.call(() => {\r\n\t\t\t\t\tcallBack()\r\n\t\t\t\t\tnode.destroy()\r\n\t\t\t\t})\r\n\t\t\t\t.start();\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_skeleton\").active = false\r\n\t\t\t\tthis.propertyNode.props_iconWrap.getChildByName(\"iconNode_sprite\").active = true\r\n\t\t});\r\n\t\tani.playAnimation()\r\n\t}\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}