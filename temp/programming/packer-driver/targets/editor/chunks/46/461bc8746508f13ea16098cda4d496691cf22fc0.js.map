{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dfdc/components/BlessedWealthy_header.ts"],"names":["_decorator","Label","Node","BaseComponent","global","TaskScheduler","StepNumber","playBtnClick","ccclass","property","BlessedWealthy_header","taskScheduler","stepNumber","propertyNode","props_btn_up_home","props_btn_up_set","props_Label_up_goldNum","props_btn_up_addGold","props_beli","props_SPECIAL","props","balance","events","start","initState","bindEvent","on","EventType","TOUCH_END","closeSubGame","openPersonCenter","openShop","useProps","key","value","console","log","pre","cur","stop","num","string","toFixed","formatAmountWithCommas","destroyCallBack","destoryQueue","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global, lang } from '../../../hall';\r\nimport TaskScheduler, { Task } from '../../../utils/TaskScheduler';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { playBtnClick } from '../index';\r\n// import { chooseSmallGame } from '../viewModel/RollerPanelViewModel';\r\nimport { addToastAction } from '../../../hall/store/actions/baseBoard';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tbalance: number\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\n\r\n@ccclass('BlessedWealthy_header')\r\nexport class BlessedWealthy_header extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\tprivate taskScheduler: TaskScheduler = new TaskScheduler()\r\n\tprivate stepNumber: StepNumber\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_up_home: new Node(),\r\n\t\tprops_btn_up_set: new Node(),\r\n\t\tprops_Label_up_goldNum: new Label(),\r\n\t\tprops_btn_up_addGold: new Node(),\r\n\t\tprops_beli: new Node(),\r\n\t\tprops_SPECIAL: new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tbalance: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_up_home.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\t// if (!chooseSmallGame.isUnMount) {\r\n\t\t\t// \tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.GameExit, {}, { placeStr: \"您正在游戏中，退出失败，请游戏结束后重试。\" })  }));\r\n\t\t\t// } else {\r\n\t\t\t\tglobal.closeSubGame()\r\n\t\t\t// }\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_set.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openPersonCenter(2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_addGold.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_beli.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_SPECIAL.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick()\r\n\t\t\tglobal.openPersonCenter(5)\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"balance\") {\r\n\t\t\tconsole.log(\"value.pre, value.cur\",value.pre, value.cur);\r\n\t\t\tthis.stepNumber && this.stepNumber.stop()\r\n\t\t\tthis.stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\tthis.propertyNode && this.propertyNode.props_Label_up_goldNum && (this.propertyNode.props_Label_up_goldNum.string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t}, () => { })\r\n\t\t\tthis.stepNumber.start()\r\n\t\t\t// this.taskScheduler.joinqQueue(new Task((done) => {\r\n\t\t\t// \tthis.stepNumber && this.stepNumber.stop()\r\n\t\t\t// \tthis.stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t// \t\tthis.propertyNode && this.propertyNode.props_Label_up_goldNum && (this.propertyNode.props_Label_up_goldNum.string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t// \t}, () => done())\r\n\t\t\t// \tthis.stepNumber.start()\r\n\t\t\t// }), true)\r\n\t\t}\r\n\t}\r\n\r\n\tprotected destroyCallBack() {\r\n\t\tthis.taskScheduler.destoryQueue()\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}