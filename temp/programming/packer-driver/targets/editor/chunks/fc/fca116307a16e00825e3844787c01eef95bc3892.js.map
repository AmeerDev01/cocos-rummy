{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/utils/copyToClipboard.ts"],"names":["str","cb","input","el","document","createElement","value","setAttribute","style","position","left","fontSize","selection","getSelection","originalRange","rangeCount","getRangeAt","body","appendChild","select","selectionStart","selectionEnd","length","success","execCommand","err","removeChild","removeAllRanges","addRange","console","log"],"mappings":";;;;;;;;;;;;;;yBAAe,CAACA,GAAD,EAAcC,EAAd,KAAgC;AAE7C,YAAIC,KAAK,GAAGF,GAAG,GAAG,EAAlB;AACA,cAAMG,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAX;AACAF,QAAAA,EAAE,CAACG,KAAH,GAAWJ,KAAX;AACAC,QAAAA,EAAE,CAACI,YAAH,CAAgB,UAAhB,EAA4B,EAA5B;AACAJ,QAAAA,EAAE,CAACK,KAAH,CAASC,QAAT,GAAoB,UAApB;AACAN,QAAAA,EAAE,CAACK,KAAH,CAASE,IAAT,GAAgB,SAAhB;AACAP,QAAAA,EAAE,CAACK,KAAH,CAASG,QAAT,GAAoB,MAApB,CAR6C,CAQjB;;AAE5B,cAAMC,SAAS,GAAGC,YAAY,EAA9B;AACA,YAAIC,aAAa,GAAG,IAApB;;AACA,YAAIF,SAAS,CAACG,UAAV,GAAuB,CAA3B,EAA8B;AAC5BD,UAAAA,aAAa,GAAGF,SAAS,CAACI,UAAV,CAAqB,CAArB,CAAhB;AACD;;AACDZ,QAAAA,QAAQ,CAACa,IAAT,CAAcC,WAAd,CAA0Bf,EAA1B;AACAA,QAAAA,EAAE,CAACgB,MAAH;AACAhB,QAAAA,EAAE,CAACiB,cAAH,GAAoB,CAApB;AACAjB,QAAAA,EAAE,CAACkB,YAAH,GAAkBnB,KAAK,CAACoB,MAAxB;AAEA,YAAIC,OAAO,GAAG,KAAd;;AACA,YAAI;AACFA,UAAAA,OAAO,GAAGnB,QAAQ,CAACoB,WAAT,CAAqB,MAArB,CAAV;AACD,SAFD,CAGA,OAAOC,GAAP,EAAY,CAEX;;AAEDrB,QAAAA,QAAQ,CAACa,IAAT,CAAcS,WAAd,CAA0BvB,EAA1B;;AAEA,YAAIW,aAAJ,EAAmB;AACjBF,UAAAA,SAAS,CAACe,eAAV;AACAf,UAAAA,SAAS,CAACgB,QAAV,CAAmBd,aAAnB;AACD;;AAEDb,QAAAA,EAAE,IAAIA,EAAE,CAACsB,OAAD,CAAR;;AACA,YAAIA,OAAJ,EAAa;AACXM,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD,SAFD,MAGK;AACHD,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD;;AACD,eAAOP,OAAP;AACD,O","sourcesContent":["export default (str: string, cb?: Function) => {\r\n\r\n  var input = str + '';\r\n  const el = document.createElement('textarea');\r\n  el.value = input;\r\n  el.setAttribute('readonly', '');\r\n  el.style.position = 'absolute';\r\n  el.style.left = '-9999px';\r\n  el.style.fontSize = '12pt'; // Prevent zooming on iOS\r\n\r\n  const selection = getSelection()!;\r\n  var originalRange = null;\r\n  if (selection.rangeCount > 0) {\r\n    originalRange = selection.getRangeAt(0);\r\n  }\r\n  document.body.appendChild(el);\r\n  el.select();\r\n  el.selectionStart = 0;\r\n  el.selectionEnd = input.length;\r\n\r\n  var success = false;\r\n  try {\r\n    success = document.execCommand('copy');\r\n  }\r\n  catch (err) {\r\n\r\n  }\r\n\r\n  document.body.removeChild(el);\r\n\r\n  if (originalRange) {\r\n    selection.removeAllRanges();\r\n    selection.addRange(originalRange);\r\n  }\r\n\r\n  cb && cb(success);\r\n  if (success) {\r\n    console.log(\"复制成功\");\r\n  }\r\n  else {\r\n    console.log(\"复制失败\");\r\n  }\r\n  return success;\r\n}"]}