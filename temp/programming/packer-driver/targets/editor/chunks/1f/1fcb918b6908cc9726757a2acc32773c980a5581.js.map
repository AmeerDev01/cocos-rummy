{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenixV2/components/PhoenixV2_Main.ts"],"names":["_decorator","instantiate","Node","sp","Animation","tween","Vec3","Toggle","BaseComponent","changeGame","setAutoLauncherInfo","setBetDropDownList","updateWinloss","AutoLauncherType","GameType","getAutoCount","isAuto","isLimit","RollerStatus","updateRollerStatus","mainViewModel","phoenixV2_Audio","sourceManageSeletor","SoundPathDefine","config","StepNumberV2","PrefabPathDefine","SkeletonAnimationPlayer","ccclass","property","PhoenixV2_Main","portraitSkLeft","portraitSkRight","gateSk","stepNumberV2","props_aiji_kaiguanmenOrigonPos","baseNodeOffectNode","baseNodeOrigonScale","baseNodeScale","propertyNode","props_main_bg","props_mini_game_bg","props_main_slot_bg","props_Up_Feature","props_buttomBar","props_roller","props_bet_dropdownlist","props_autoLauncher","props_spr_phoenix_Bluebg","props_spr_phoenix_Redbg","props_spr_smallGame_multipleBg","props_Label_smallGame_multiple","props_phoenix_upBg","props_speed_border_node","props_slot","props_btn_off","props_btn_confirm","props_sg_free","selectedNode","props","betDropDownlist","positionId","gold","gameTypeInfo","lastGameType","NONE","currGameType","viewGameType","leftCount","subGameAnimationPlayInfo","jackpotDatas","jackpotTotalAmount","autoLauncherInfo","events","onSendBet","start","getHeader","getFooter","getRoller","getFreeNumNode","initState","bindEvent","on","EventType","TOUCH_END","dispatch","listenerBetDropDownListEvent","children","forEach","toggle","getComponent","node","onToggleClick","openAoutoPanl","autoLauncherType","name","count","totalCount","playOneShot","BIU","active","getAutoState","clearAuto","event","clickedToggle","target","isChecked","useProps","key","value","isValid","showOrHideBetDropDownlist","cur","createFlyBg","changeGameType","gameType","isMainGame","MAIN","isSubGame1","SUBGAME1","status","pos","position","play","bindUI","updateKaiGuanMen","isSubGame","SUBGAME2","isNextMainGame","playSubGameAnimation","param","setAnimation","paused","setScale","setPosition","show","to","normalRollOption","zoomingTime","scale","call","timeScale","flyBgNode","getFile","FLY_BG","source","addChild","titleSkeleton","getChildByName","Skeleton","destroy","subGameAnimationEndHandle","scheduleOnce","playAnimation","type","playBgMusic","END","getSlotNode","getSmallMultipleNode","getupBgNode","getBorderNode","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, instantiate, Label, Node, sp, Sprite, Animation, tween, UIOpacity, Vec3, AnimationState, Toggle } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { changeGame, setAutoLauncherInfo, setBetDropDownList, updateWinloss } from '../store/actions/game';\r\nimport { AutoLauncherInfo, AutoLauncherType, calBetAmount, GameType, GameTypeInfo, getAutoCount, isAuto, isLimit, JackpotData, RollerStatus, SubGameAnimationPlayInfo } from '../type';\r\nimport { updateRollerStatus } from '../store/actions/roller';\r\nimport { mainViewModel, phoenixV2_Audio, sourceManageSeletor } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { global } from '../../../hall';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport config from '../config';\r\nimport { Shake } from '../../../utils/Shake';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport SkeletonAnimationPlayer from '../../../utils/SkeletonPlay';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tbetDropDownlist: boolean,\r\n\t/** 选择的线id */\r\n\tpositionId: number,\r\n\t/** 余额 */\r\n\tgold: number,\r\n\t/**游戏类型信息 */\r\n\tgameTypeInfo: GameTypeInfo,\r\n\t/** 子游戏过场动画播放信息 */\r\n\tsubGameAnimationPlayInfo: SubGameAnimationPlayInfo,\r\n\t/** jackpot数据 */\r\n\tjackpotDatas: JackpotData[],\r\n\t/** jackpot总金额 */\r\n\tjackpotTotalAmount: number,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo: AutoLauncherInfo\r\n\r\n}\r\nexport interface IEvent {\r\n\tonSendBet: () => void\r\n}\r\n\r\n@ccclass('PhoenixV2_Main')\r\nexport class PhoenixV2_Main extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate portraitSkLeft: sp.Skeleton;\r\n\tprivate portraitSkRight: sp.Skeleton;\r\n\tprivate gateSk: sp.Skeleton;\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprivate props_aiji_kaiguanmenOrigonPos: Vec3\r\n\tprivate baseNodeOffectNode: Vec3;\r\n\t/** 原始缩放大小 */\r\n\tprivate baseNodeOrigonScale: Vec3 = new Vec3(1, 1, 1);\r\n\t/** 缩放大小 */\r\n\tprivate baseNodeScale: Vec3 = new Vec3(3, 3, 3);\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_main_bg: new Node(),\r\n\t\tprops_mini_game_bg: new Node(),\r\n\t\tprops_main_slot_bg: new Node(),\r\n\r\n\t\tprops_Up_Feature: new Node(),\r\n\t\tprops_buttomBar: new Node(),\r\n\t\tprops_roller: new Node(),\r\n\t\tprops_bet_dropdownlist: new Node(),\r\n\t\tprops_autoLauncher: new Node(),\r\n\t\tprops_spr_phoenix_Bluebg: new Node(),\r\n\t\tprops_spr_phoenix_Redbg: new Node(),\r\n\t\tprops_spr_smallGame_multipleBg: new Node(),\r\n\t\tprops_Label_smallGame_multiple: new Node(),\r\n\t\tprops_phoenix_upBg: new Node(),\r\n\t\tprops_speed_border_node:new Node(),\r\n\t\tprops_slot: new Node(),\r\n\t\tprops_btn_off: new Node(),\r\n\t\tprops_btn_confirm: new Node(),\r\n\t\tprops_sg_free:new Node(),\r\n\t\t\r\n\t}\r\n\tprivate selectedNode: Node\r\n\tpublic props: IProps = {\r\n\t\tbetDropDownlist: false,\r\n\t\tpositionId: 0,\r\n\t\tgold: 0,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.NONE,\r\n\t\t\tcurrGameType: GameType.NONE,\r\n\t\t\tviewGameType: GameType.NONE,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tsubGameAnimationPlayInfo: null,\r\n\t\tjackpotDatas: [],\r\n\t\tjackpotTotalAmount: 0,\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonSendBet: () => { }\r\n\t}\r\n\r\n\tpublic getHeader() {\r\n\t\treturn this.propertyNode.props_Up_Feature;\r\n\t}\r\n\r\n\tpublic getFooter() {\r\n\t\treturn this.propertyNode.props_buttomBar;\r\n\t}\r\n\r\n\tpublic getRoller() {\r\n\t\treturn this.propertyNode.props_roller;\r\n\t}\r\n\r\n\tpublic getFreeNumNode() {\r\n\t\treturn this.propertyNode.props_sg_free\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\t// this.propertyNode.props_autoLauncher.getComponent(Animation).on(Animation.EventType.FINISHED, (e, state: AnimationState) => {\r\n\t\t// \tif (state.name === 'animation_autoLauncher_down') {\r\n\t\t// \t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\t\t// \t}\r\n\t\t// });\r\n\t\tthis.propertyNode.props_bet_dropdownlist.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t})\r\n\r\n\t\r\n\r\n\t\tthis.listenerBetDropDownListEvent();\r\n\r\n\t}\r\n\r\n\tprivate listenerBetDropDownListEvent() {\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\ttoggle.getComponent(Toggle).node.on(Node.EventType.TOUCH_END, this.onToggleClick, this);\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.openAoutoPanl()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_confirm.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tconst autoLauncherType = (this.selectedNode ? this.selectedNode.name:'t10') as AutoLauncherType; // 默认T10\r\n\t\t\t\tconst count = getAutoCount(autoLauncherType);\r\n\t\t\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\t\t\tautoLauncherType: autoLauncherType,\r\n\t\t\t\t\ttotalCount: count,\r\n\t\t\t\t\tleftCount: isLimit(autoLauncherType) ? 1 : count - 1,\r\n\t\t\t\t}))\r\n\t\t\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.BIU)\r\n\t\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t\t\tthis.events.onSendBet();\r\n\t\t\t\tthis.openAoutoPanl()\r\n\t\t})\r\n\t\t// this.propertyNode.props_autoLauncher.children.forEach(v => {\r\n\t\t// \tv.on(Node.EventType.TOUCH_END, () => {\r\n\t\t// \t\tconst autoLauncherType = v.name as AutoLauncherType;\r\n\t\t// \t\tconst count = getAutoCount(autoLauncherType);\r\n\t\t// \t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t// \t\t\tautoLauncherType: autoLauncherType,\r\n\t\t// \t\t\ttotalCount: count,\r\n\t\t// \t\t\tleftCount: isLimit(autoLauncherType) ? 1 : count - 1,\r\n\t\t// \t\t}))\r\n\t\t// \t\tconsole.log(count);\r\n\t\t// \t\tDragonv2_Audio.playOneShot(SoundPathDefine.biu)\r\n\t\t// \t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t// \t\tthis.events.onSendBet();\r\n\t\t// \t})\r\n\t\t// })\r\n\t\t\r\n\t}\r\n\tpublic openAoutoPanl(){\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active=!this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic getAutoState(){\r\n\t\treturn this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic clearAuto(){\r\n\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\tautoLauncherType: AutoLauncherType.NONE,\r\n\t\t\ttotalCount: 0,\r\n\t\t\tleftCount: 0\r\n\t\t}))\r\n\t}\r\n\tprivate onToggleClick(event) {\r\n\t\t// 获取点击的 Toggle 按钮\r\n\t\tconst clickedToggle = event.target.getComponent(Toggle);\r\n\t\tif (!clickedToggle.isChecked) {\r\n\t\t\tclickedToggle.isChecked = true;\r\n\t\t\tthis.selectedNode = event.target\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 取消其他 Toggle 按钮的选中状态\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\tif (toggle !== clickedToggle) {\r\n\t\t\t\ttoggle.getComponent(Toggle).isChecked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\t// console.log(\"key\", key, \"value\", value);\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'betDropDownlist') {\r\n\t\t\t\tthis.showOrHideBetDropDownlist(value.cur)\r\n\t\t\t} else if (key === 'subGameAnimationPlayInfo') {\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.createFlyBg();\r\n\t\t\t\t}\r\n\t\t\t} else if (key === 'gameTypeInfo') {\r\n\t\t\t\tthis.changeGameType(this.props.gameTypeInfo.viewGameType);\r\n\t\t\t} else if (key === 'jackpotDatas') {\r\n\t\t\t\t// this.updateJackpotContent();\r\n\t\t\t} else if (key === 'jackpotTotalAmount') {\r\n\t\t\t\t// this.updateJackpotAmount(false, value);\r\n\t\t\t} else if (key === 'positionId') {\r\n\t\t\t\t// this.updateJackpotAmount(true, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate changeGameType(gameType: GameType) {\r\n\t\tconst isMainGame = gameType === GameType.MAIN;\r\n\t\tconst isSubGame1 = gameType === GameType.SUBGAME1;\r\n\t\t// 主游戏要显示的界面\r\n\t\tthis.propertyNode.props_main_bg.active = isMainGame;\r\n\t\tthis.propertyNode.props_main_slot_bg.active = isMainGame || isSubGame1;\r\n\t\tthis.propertyNode.props_spr_phoenix_Redbg.active = isMainGame;\r\n\r\n\t\t// 子游戏要显示的界面\r\n\t\tthis.propertyNode.props_mini_game_bg.active = !isMainGame && isSubGame1;\r\n\t\tthis.propertyNode.props_spr_phoenix_Bluebg.active = !isMainGame && isSubGame1;\r\n\t\tthis.propertyNode.props_spr_smallGame_multipleBg.active = !isMainGame && isSubGame1;\r\n\t\t// this.propertyNode.props_phoenix_upBg.active = isMainGame && !isSubGame1;\r\n\t\tthis.propertyNode.props_sg_free.active = !isMainGame && isSubGame1;\r\n\r\n\t}\r\n\r\n\tprivate showOrHideBetDropDownlist(status: boolean) {\r\n\t\tconst pos = this.propertyNode.props_autoLauncher.position;\r\n\t\tif (status) {\r\n\t\t\tthis.propertyNode.props_bet_dropdownlist.active = true;\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_up\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 255 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -160) }).start();\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_down\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 0 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -500) }).call(() => {\r\n\t\t\t// \tthis.node.isValid && (this.propertyNode.props_bet_dropdownlist.active = false);\r\n\t\t\t// }).start();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\t// this.props_aiji_kaiguanmenOrigonPos = this.propertyNode.props_aiji_kaiguanmen.position.clone();\r\n\t\tthis.props_aiji_kaiguanmenOrigonPos = new Vec3();\r\n\t\tthis.baseNodeOffectNode = new Vec3(-100, -200);\r\n\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\r\n\t\r\n\t\tthis.updateKaiGuanMen();\r\n\t}\r\n\r\n\tprivate updateKaiGuanMen() {\r\n\r\n\t}\r\n\r\n\tprivate isSubGame(gameType: GameType) {\r\n\t\treturn gameType === GameType.SUBGAME1 || gameType === GameType.SUBGAME2\r\n\t}\r\n\r\n\tprivate isNextMainGame() {\r\n\t\treturn this.props.gameTypeInfo.currGameType === GameType.MAIN;\r\n\t}\r\n\r\n\tprivate playSubGameAnimation() {\r\n\t\tif (this.isSubGame(this.props.subGameAnimationPlayInfo.gameType)) {\r\n\t\t\t// param 0表示从主游戏切到子游戏,param 1表示从子游戏切到主游戏\r\n\t\t\tif (this.props.subGameAnimationPlayInfo.param === 0) {\r\n\r\n\t\t\t\t// 如果左右两边神像显示了就走动画，否则直接开门动画\r\n\t\t\t\t// if (this.propertyNode.props_skeletonLeft.active) {\r\n\t\t\t\t// \tthis.portraitSkLeft.setAnimation(0, 'dynamic', false)\r\n\t\t\t\t// \tthis.portraitSkRight.setAnimation(0, 'dynamic', false)\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tthis.changeGateAnimation()\r\n\t\t\t\t// }\r\n\r\n\t\t\t\t// phoenixV2_Audio.playOneShot(SoundPathDefine.sgbegin1);\r\n\t\t\t} else {\r\n\t\t\t\t// 先切到关门的效果然后暂停，这样动画就停在了门是打开的效果\r\n\t\t\t\tthis.gateSk.setAnimation(0, 'shimen_guangmen', false)\r\n\t\t\t\tthis.gateSk.paused = true;\r\n\r\n\t\t\t\t// this.propertyNode.props_aiji_kaiguanmen.active = true;\r\n\t\t\t\t// this.propertyNode.props_aiji_zhuanquanding.active = true;\r\n\t\t\t\tthis.node.setScale(this.baseNodeScale)\r\n\t\t\t\tthis.node.setPosition(this.baseNodeOffectNode);\r\n\t\t\t\tthis.changeGameType(GameType.MAIN);\r\n\t\t\t\ttween(this.node).show()\r\n\t\t\t\t\t.to(config.normalRollOption.zoomingTime, { scale: this.baseNodeOrigonScale, position: this.props_aiji_kaiguanmenOrigonPos })\r\n\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\tif (this.node.isValid) {\r\n\t\t\t\t\t\t\tthis.gateSk.paused = false;\r\n\t\t\t\t\t\t\tthis.gateSk.timeScale = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.start()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**转场动画 */\r\n\tpublic createFlyBg() {\r\n\t//转场\r\n\tlet flyBgNode = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.FLY_BG).source)//动画转场背景\r\n\tthis.node.addChild(flyBgNode);\r\n\tconst titleSkeleton = flyBgNode.getChildByName(\"caishenguochang\").getComponent(sp.Skeleton)\r\n\r\n\tnew SkeletonAnimationPlayer(titleSkeleton, 'animation', false, () => {\r\n\t\tflyBgNode && flyBgNode.destroy();\r\n\t\tthis.node && this.node.isValid && this.subGameAnimationEndHandle(0);\r\n\t\tthis.propertyNode.props_slot.active = true;\r\n\t\tthis.propertyNode.props_roller.active = true;\r\n\t\tthis.propertyNode.props_phoenix_upBg.active = true;\r\n\t\tif (this.props.gameTypeInfo.currGameType === GameType.SUBGAME1) {\r\n\t\t\tthis.propertyNode.props_sg_free.active = true;\r\n\t\t\tthis.dispatch(updateWinloss(0))  \r\n\t\t} else if(this.props.gameTypeInfo.currGameType === GameType.SUBGAME2){\r\n\t\t// let amount = cacheData.rollerLaunchResult.dl.si[0].freeGameAmount\r\n\t\t// this.dispatch(updateWinloss(amount))  \r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t// 进入游戏之后如果是自动游戏，就发送下注\r\n\t\tif (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.events.onSendBet();\r\n\t\t\t}, 1)\r\n\t\t}\r\n\t\t//切换游戏 初始化盈利\r\n\t}).playAnimation()\r\n}\r\n\r\n\t/**动画结束处理 */\r\n\tprivate subGameAnimationEndHandle(type: number) {\r\n\r\n\t\tconst gameTypeInfo = { ...this.props.gameTypeInfo }\r\n\t\tgameTypeInfo.lastGameType = gameTypeInfo.viewGameType;\r\n\t\tgameTypeInfo.viewGameType = gameTypeInfo.currGameType;\r\n\t\t// gameTypeInfo.viewGameType = GameType.SUBGAME1;\r\n\t\t// gameTypeInfo.currGameType = GameType.SUBGAME1;\r\n\t\t// gameTypeInfo.leftCount = 10;\r\n\t\tmainViewModel.playBgMusic()\r\n\t\tthis.dispatch(changeGame(gameTypeInfo))\r\n\t\t// 开门动画结束，准备切换到小游戏后，结束游戏\r\n\t\tif (type === 0) {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t\t},1)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tpublic getSlotNode() {\r\n\t\treturn this.propertyNode.props_slot\r\n\t}\r\n\r\n\tpublic getSmallMultipleNode() {\r\n\t\treturn this.propertyNode.props_Label_smallGame_multiple\r\n\t}\r\n\r\n\tpublic getupBgNode() {\r\n\t\treturn this.propertyNode.props_phoenix_upBg\r\n\t}\r\n\r\n\tpublic getBorderNode() {\r\n\t\treturn this.propertyNode.props_speed_border_node\r\n\t}\r\n\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}