{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egyptV2/components/EgyptV2_DialogWin.ts"],"names":["_decorator","Label","Node","sp","BaseComponent","StepNumber","AutoLauncherType","DialogType","GameType","isAuto","getNodeByNameDeep","config","StepNumberV2","egyptv2_Audio","SoundPathDefine","ccclass","property","EgyptV2_DialogWin","stepNumberV2","propertyNode","props_freeEntry","props_freeSettlement","props_bigWin","props_jackpot","props_megaWin","props_superWin","props_In_Free_Spins","props_in_beetle","props","dialogInfo","gameTypeInfo","lastGameType","NONE","currGameType","viewGameType","leftCount","autoLauncherInfo","events","onWindowCloseHandler","dialogType","start","initState","bindEvent","node","on","EventType","TOUCH_END","isFreeGameEntry","destroy","buttonNode","FREE_GAME_ENTRY","useProps","key","value","isValid","hideAll","active","showFreeEntry","BIG_WIN","showBigWin","JACKPOT","showJackpot","MEGA_WIN","showMegaWin","SUPER_WIN","showSuperWin","FREE_GAME_SETTLEMENT","showFreeSettlement","labelNode","getComponent","string","params","SUBGAME1","SUBGAME2","detryCloseWindow","playOneShot","get_coin","numberLabel","startStepNumber","getChildByName","Skeleton","setCompleteListener","MAIN","autoLauncherType","totalCount","label","end","done","num","Number","toFixed","formatAmountWithCommas","set","normalRollOption","numberRollerTime","scheduleOnce","dialogWinShowTime","onDestroy","longStop","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Label, Node, sp } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { AutoLauncherInfo, AutoLauncherType, DialogInfo, DialogType, GameType, GameTypeInfo, isAuto } from '../type';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { updateSubGameAnimationPlayInfo } from '../store/actions/game';\r\nimport config from '../config';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { egyptv2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tdialogInfo?: DialogInfo,\r\n\tgameTypeInfo?: GameTypeInfo,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo?: AutoLauncherInfo\r\n}\r\nexport interface IEvent {\r\n\tonWindowCloseHandler: (dialogType: DialogType) => void\r\n}\r\n\r\n@ccclass('EgyptV2_DialogWin')\r\nexport class EgyptV2_DialogWin extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_freeEntry: new Node(),\r\n\t\tprops_freeSettlement: new Node(),\r\n\t\tprops_bigWin: new Node(),\r\n\t\tprops_jackpot: new Node(),\r\n\t\tprops_megaWin: new Node(),\r\n\t\tprops_superWin: new Node(),\r\n\t\tprops_In_Free_Spins: new Node(),\r\n\t\tprops_in_beetle: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdialogInfo: null,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.NONE,\r\n\t\t\tcurrGameType: GameType.NONE,\r\n\t\t\tviewGameType: GameType.NONE,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonWindowCloseHandler: (dialogType: DialogType) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.isFreeGameEntry()) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t\tconst buttonNode = getNodeByNameDeep(\"Ok_Botton\", this.propertyNode.props_freeSettlement)\r\n\t\tbuttonNode.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\tthis.node.destroy();\r\n\t\t})\r\n\t}\r\n\r\n\tprivate isFreeGameEntry() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY;\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === '_setDone') {\r\n\t\t\t\tthis.hideAll();\r\n\t\t\t\tif (this.props.dialogInfo) {\r\n\t\t\t\t\tthis.node.active = true;\r\n\t\t\t\t\tif (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY) {\r\n\t\t\t\t\t\tthis.showFreeEntry();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.BIG_WIN) {\r\n\t\t\t\t\t\tthis.showBigWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.JACKPOT) {\r\n\t\t\t\t\t\tthis.showJackpot();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.MEGA_WIN) {\r\n\t\t\t\t\t\tthis.showMegaWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.SUPER_WIN) {\r\n\t\t\t\t\t\tthis.showSuperWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT) {\r\n\t\t\t\t\t\tthis.showFreeSettlement();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.node.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate hideAll() {\r\n\t\tfor (const key in this.propertyNode) {\r\n\t\t\tthis.propertyNode[key].active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showFreeEntry() {\r\n\t\tthis.propertyNode.props_freeEntry.active = true;\r\n\t\tconst labelNode = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeEntry)\r\n\t\tlabelNode.getComponent(Label).string = this.props.dialogInfo.params[0];\r\n\r\n\t\tlabelNode.active = this.props.gameTypeInfo.currGameType === GameType.SUBGAME1;\r\n\t\tgetNodeByNameDeep(\"props_entry_In_Free_Spins\", this.propertyNode.props_freeEntry).active = this.props.gameTypeInfo.currGameType === GameType.SUBGAME1;\r\n\r\n\t\tgetNodeByNameDeep(\"props_beetle\", this.propertyNode.props_freeEntry).active = this.props.gameTypeInfo.currGameType === GameType.SUBGAME2;\r\n\t\tgetNodeByNameDeep(\"props_hasbeen\", this.propertyNode.props_freeEntry).active = this.props.gameTypeInfo.currGameType === GameType.SUBGAME2;\r\n\r\n\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\tif (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showBigWin() {\r\n\t\tegyptv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_bigWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_bigWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_bigWin.getChildByName(\"sk_aj_win\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showJackpot() {\r\n\t\tegyptv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_jackpot.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_jackpot)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate showMegaWin() {\r\n\t\tegyptv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_megaWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_megaWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// this.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_megaWin.getChildByName(\"sk_aj_win\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showSuperWin() {\r\n\t\tegyptv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_superWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_superWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_superWin.getChildByName(\"sk_aj_win\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showFreeSettlement() {\r\n\t\tthis.propertyNode.props_freeSettlement.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeSettlement)\r\n\t\t// new StepNumber(0, this.props.dialogInfo.params[0], (num) => {\r\n\t\t// \tnumberLabel.getComponent(Label).string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// }).start();\r\n\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\t\tif (this.node && this.node.isValid && isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\t\tthis.detryCloseWindow();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_In_Free_Spins.active = this.props.gameTypeInfo.viewGameType === GameType.SUBGAME1;\r\n\t\tthis.propertyNode.props_in_beetle.active = this.props.gameTypeInfo.viewGameType === GameType.SUBGAME2;\r\n\r\n\t}\r\n\r\n\tprivate isAuto() {\r\n\t\t// 小游戏中都是自动\r\n\t\tif (this.props.gameTypeInfo.viewGameType !== GameType.MAIN && this.props.gameTypeInfo.viewGameType === this.props.gameTypeInfo.currGameType) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tconst autoLauncherInfo = this.props.autoLauncherInfo;\r\n\t\tif (autoLauncherInfo) {\r\n\t\t\tif (autoLauncherInfo.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tif (autoLauncherInfo.totalCount === -99) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn autoLauncherInfo.leftCount > 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate startStepNumber(label: Label, start, end, done) {\r\n\t\tnew StepNumber(start, end, (num) => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t}\r\n\t\t}, () => this.node && this.node.isValid && done()).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t// this.stepNumberV2.start(start, end, (num) => {\r\n\t\t// \tif (this.node && this.node.isValid) {\r\n\t\t// \t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// \t}\r\n\t\t// }, () => this.node && this.node.isValid && done(), config.normalRollOption.numberRollerTime);\r\n\t}\r\n\r\n\tprivate detryCloseWindow() {\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t}, config.normalRollOption.dialogWinShowTime)\r\n\t}\r\n\r\n\tprotected onDestroy(): void {\r\n\t\tegyptv2_Audio.longStop();\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}