{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_MainPanel.ts"],"names":["_decorator","assetManager","Button","game","instantiate","Label","Node","PageView","ScrollView","Sprite","SpriteFrame","sys","Toggle","tween","UITransform","Vec3","BaseComponent","subGameGateQueue","SubGameType","bundleCommon","fetcher","global","hallAudio","lang","sourceManageSeletor","PrefabPathDefine","EffectType","arrowDisplay","initToggle","setByScreenScale","SoundPathDefine","SubGameGateViewModel","MarqueeViewModel","PrefabPathDefineCommon","sktInstance","sktMsgListener","equal","addToastAction","setSocketConnectStatus","ToastType","Throttler","BuyType","ApiUrl","ModalBox","DEV","getPackageName","ccclass","property","ToggleTabName","Hall_MainPanel","props","memberAssetGoldPieces","nickName","avatarIndex","level","vipLevel","subGameInfo","tourist","memberId","memberName","isConnect","retryConnectTimes","isUnreadActivity","gateViewModelList","totalGateQueue","queue","timerBg","connectRetryDone","swiperDatas","events","onToggleGameTypeHandler","gameType","gameGateViewModelList","onTouchIntoHandler","gameInfo","onOpenPersonCenter","index","onOpenBankPanel","onOpenMailPanel","onOpenShopPanel","onOpenWithdrawalPanel","onOpenBindPhonePanel","onOpenUpgradePanel","onOpenAwardPanel","onOpenGiftBoxanel","onOpenSignInPanel","onOpenVipMainPanel","onOpenService","propertyNode","props_hall_background_day","props_hall_background_night","props_ToggleGroup_type","props_ScrollView_game_icon","props_btn_head_choose","props_btn_down_bank","props_btn_down_inbox","props_btn_down_shop","props_btn_down_withdrawal","props_btn_down_phone","props_btn_down_gift","props_Label_name","props_Label_gold","props_btn_gold_add","props_spr_head","props_spr_vip","props_btn_down_signIn","props_btn_down_vip","props_btn_down_rabat","props_btn_down_referral","props_btn_down_bag","props_btn_down_hadiah","props_btn_down_task","props_btn_down_service","props_btn_down_shopGift","props_Marquee_node","props_btn_left","props_btn_right","props_disconnect_panel","props_connect_tip","props_user_opa","props_sokt_close","props_sokt_retry","props_PageView","props_indicator","props_indicator_toggle","props_page_template","props_winningBox","swipeTime","start","callback","event","customEventData","playOneShot","BTU_CLICK","All","target","ALL","DOMINO","Domino","SLOTS","Slot","OTHER","Other","getGetSubGameGateQueue","scheduleOnce","getComponent","update","deltaTime","initState","currGateQueue","chooseTabName","INIT","subGameType","bindEvent","node","EventHandler","on","EventType","TOUCH_END","isDebouncerAsync","openShop","TAS","SCROLLING","e","end","console","log","dispatch","reConnectTimes","reconnect","then","catch","scrollView","content","to","position","call","wrapWodth","width","useProps","key","value","string","cur","formatAmountWithCommas","split","load","err","sp","spriteFrame","active","localStorage","setItem","maxReConnectTimes","write","k","WebSocketModule","socketRetryTimes","times","placeStr","bindUI","useState","scrollViewContent","ratio","isInit","length","forEach","item","viewNode","state","gamesIds","find","comp","gateModelView","mountView","getFile","SUB_GAME_GATE","source","appendTo","effectType","EFFECT1","setProps","setEvent","onTouchInto","connect","push","setState","send","GAME_SWIPE","data","loadRemote","swiperUrl","asset","createWithImage","hallDispatch","HallModule","LoadFaild","type","ERROR","addPageViewNode","v","i","createIndicatorToggle","swipeTimeScoll","scrollPageViewListener","updateBackground","MARQUEE_INSERT","SCROLL_ENDED","pageView","curPageIdx","scrollToPage","getPages","page","name","toggle","isChecked","scrollPageView","pageIndex","getCurrentPageIndex","swipeData","toggleNode","addChild","unschedule","insertIndex","isValid","insertPage","addPage","jump","Instance","show","url","detailUrl","hours","Date","getHours","isNight","schedule","tabName","typeName","subGameQueue","toggleName","setGiftButtonDisplay","onDestroy","removeById","setSubGameGate","gameId","progress","isShow","gateViewModel","indexOf","isH5","window","setLoadingState","done","isPass"],"mappings":"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","sourcesContent":["import { _decorator, assetManager, Button, EventHandler, game, ImageAsset, instantiate, Label, log, Node, PageView, ScrollView, Sprite, SpriteFrame, sys, Toggle, ToggleContainer, Tween, tween, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport { config, GateQueueType, HallGameGateType, subGameGateQueue, SubGameType } from '../config';\r\nimport { bundleCommon, fetcher, global, hallAudio, lang, sourceManageSeletor } from '../index';\r\nimport { PrefabPathDefine } from '../../hall/sourceDefine/prefabDefine';\r\nimport { EffectType } from '../../utils/NodeIOEffect';\r\nimport { arrowDisplay, initToggle, setByScreenScale } from '../../utils/tool';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport SubGameGateViewModel from '../viewModel/SubGameGateViewModel';\r\nimport MarqueeViewModel from '../viewModel/MarqueeViewModel';\r\nimport { PrefabPathDefine as PrefabPathDefineCommon } from '../../../script/common/sourceDefine/prefabDefine';\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from '../socketConnect';\r\nimport equal from 'fast-deep-equal';\r\nimport { addToastAction, setAppDownLoadGuide, setSocketConnectStatus, ToastType } from '../store/actions/baseBoard';\r\nimport Throttler from '../../utils/Throttler';\r\nimport { BuyType } from './Hall_ShopPanel';\r\nimport { ApiUrl } from '../apiUrl';\r\nimport ModalBox from '../../common/ModalBox';\r\nimport { DEV } from 'cc/env';\r\nimport { getPackageName } from '../../common/bridge';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype SwipeData = {\r\n\tname: string,\r\n\tswiperUrl: string,\r\n\tdetailUrl: string,\r\n\tjump: boolean,\r\n\tsp: SpriteFrame,\r\n\ttoggle: Toggle,\r\n}\r\n\r\nexport interface IState {\r\n\tcurrGateQueue: GateQueueType,\r\n\tchooseTabName: ToggleTabName,\r\n\tsubGameType: SubGameType\r\n}\r\n\r\nexport interface IProps {\r\n\t/**用户金币 */\r\n\tmemberAssetGoldPieces: number,\r\n\t/**用户昵称 */\r\n\tnickName: string\r\n\t/**用户头像序号 */\r\n\tavatarIndex: number,\r\n\t/**VIP等级 */\r\n\tvipLevel: number,\r\n\t/**用户等级 */\r\n\tlevel: number,\r\n\t/**子游戏状态 */\r\n\tsubGameInfo: HallGameGateType,\r\n\t/**是否是游客 */\r\n\ttourist: number,\r\n\t/**账户ID */\r\n\tmemberId: string,\r\n\t/**登录号 */\r\n\tmemberName: string,\r\n\t/**是否连接有效 */\r\n\tisConnect: boolean,\r\n\t/**第几次重连 */\r\n\tretryConnectTimes: number,\r\n\t/**是否有未读活动 */\r\n\tisUnreadActivity: boolean,\r\n}\r\n\r\nexport interface IEvent {\r\n\t// onToggleGameTypeHandler?: (gameType: SubGameType, gameGateViewModelList: BaseViewModel<Hall_SubGameGate, GateState, GateProps, GateEvent>[]) => void\r\n\tonToggleGameTypeHandler?: (gameType: SubGameType, gameGateViewModelList: SubGameGateViewModel[]) => void\r\n\t/**点击游戏触发 */\r\n\tonTouchIntoHandler?: (gameInfo: HallGameGateType) => void,\r\n\t/**点击用户头像 */\r\n\tonOpenPersonCenter?: (index: number) => void,\r\n\tonOpenBankPanel?: () => void,\r\n\tonOpenMailPanel?: () => void,\r\n\tonOpenShopPanel?: () => void,\r\n\tonOpenAwardPanel?: () => void,\r\n\t/**打开礼包窗口 */\r\n\tonOpenGiftBoxanel?: () => void,\r\n\tonOpenWithdrawalPanel?: () => void,\r\n\t/**打开手机绑定，暂已弃用 */\r\n\tonOpenBindPhonePanel?: () => void,\r\n\tonOpenUpgradePanel?: () => void,\r\n\tonOpenSignInPanel?: () => void,\r\n\tonOpenVipMainPanel?: () => void,\r\n\tonOpenService?: () => void\r\n}\r\n\r\nexport enum ToggleTabName {\r\n\tALL = \"Toggle_all\",\r\n\tDOMINO = \"Toggle_domino\",\r\n\tSLOTS = \"Toggle_slots\",\r\n\tOTHER = \"Toggle_other\",\r\n\tINIT = \"\"\r\n}\r\n\r\n@ccclass('Hall_MainPanel')\r\nexport class Hall_MainPanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tpublic props: IProps = {\r\n\t\tmemberAssetGoldPieces: 0,\r\n\t\tnickName: 'noName',\r\n\t\tavatarIndex: 0,\r\n\t\tlevel: 0,\r\n\t\tvipLevel: 0,\r\n\t\tsubGameInfo: null,\r\n\t\ttourist: 1,\r\n\t\tmemberId: '',\r\n\t\tmemberName: '',\r\n\t\tisConnect: true,\r\n\t\tretryConnectTimes: 1,\r\n\t\tisUnreadActivity: false\r\n\t}\r\n\t// public gateViewModelList: BaseViewModel<Hall_SubGameGate, GateState, GateProps, GateEvent>[] = []\r\n\tpublic gateViewModelList: SubGameGateViewModel[] = []\r\n\tprivate totalGateQueue: number[][] = subGameGateQueue[0].queue\r\n\tprivate timerBg: number = 0\r\n\tprivate connectRetryDone: boolean = true\r\n\tprivate swiperDatas: SwipeData[] = [];\r\n\tpublic events: IEvent = {\r\n\t\t// onToggleGameTypeHandler: (gameType: SubGameType, gameGateViewModelList: BaseViewModel<Hall_SubGameGate, GateState, GateProps, GateEvent>[]) => {},\r\n\t\tonToggleGameTypeHandler: (gameType: SubGameType, gameGateViewModelList: SubGameGateViewModel[]) => { },\r\n\t\tonTouchIntoHandler: (gameInfo: HallGameGateType) => { },\r\n\t\tonOpenPersonCenter: (index: number) => { },\r\n\t\tonOpenBankPanel: () => { },\r\n\t\tonOpenMailPanel: () => { },\r\n\t\tonOpenShopPanel: () => { },\r\n\t\tonOpenWithdrawalPanel: () => { },\r\n\t\tonOpenBindPhonePanel: () => { },\r\n\t\tonOpenUpgradePanel: () => { },\r\n\t\tonOpenAwardPanel: () => { },\r\n\t\tonOpenGiftBoxanel: () => { },\r\n\t\tonOpenSignInPanel: () => { },\r\n\t\tonOpenVipMainPanel: () => { },\r\n\t\tonOpenService: () => { }\r\n\t}\r\n\tprotected propertyNode = {\r\n\t\t/**白天 */\r\n\t\tprops_hall_background_day: new Node(),\r\n\t\t/**黑夜 */\r\n\t\tprops_hall_background_night: new Node(),\r\n\t\t/**tab头 */\r\n\t\tprops_ToggleGroup_type: new Node(),\r\n\t\t/**游戏入口主scrollView */\r\n\t\tprops_ScrollView_game_icon: new Node(),\r\n\t\t/**用户选择头像 */\r\n\t\tprops_btn_head_choose: new Node(),\r\n\t\tprops_btn_down_bank: new Node(),\r\n\t\tprops_btn_down_inbox: new Node(),\r\n\t\tprops_btn_down_shop: new Node(),\r\n\t\tprops_btn_down_withdrawal: new Node(),\r\n\t\tprops_btn_down_phone: new Node(),\r\n\t\tprops_btn_down_gift: new Node(),\r\n\t\t/**用户昵称 */\r\n\t\tprops_Label_name: new Label(),\r\n\t\t/**用户金币 */\r\n\t\tprops_Label_gold: new Node(),\r\n\t\t/**用户头像边的加号 */\r\n\t\tprops_btn_gold_add: new Node(),\r\n\t\t/**用户头像图片 */\r\n\t\tprops_spr_head: new Node(),\r\n\t\t/**vip级别 */\r\n\t\tprops_spr_vip: new Node(),\r\n\t\t/**签到按钮 */\r\n\t\tprops_btn_down_signIn: new Node(),\r\n\t\t/**vip按钮 */\r\n\t\tprops_btn_down_vip: new Node(),\r\n\t\t/**返佣按钮 */\r\n\t\tprops_btn_down_rabat: new Node(),\r\n\t\t/**分佣按钮 */\r\n\t\tprops_btn_down_referral: new Node(),\r\n\t\t/**背包按钮 */\r\n\t\tprops_btn_down_bag: new Node(),\r\n\t\t/** */\r\n\t\tprops_btn_down_hadiah: new Node(),\r\n\t\t/**任务按钮 */\r\n\t\tprops_btn_down_task: new Node(),\r\n\t\t/**客户按钮 */\r\n\t\tprops_btn_down_service: new Node(),\r\n\t\t/**礼包入口按钮 */\r\n\t\tprops_btn_down_shopGift: new Node(),\r\n\t\t/**跑马灯位置 */\r\n\t\tprops_Marquee_node: new Node(),\r\n\t\t/**左箭头 */\r\n\t\tprops_btn_left: new Node(),\r\n\t\t/**右箭头 */\r\n\t\tprops_btn_right: new Node(),\r\n\t\t/**断链提示面板 */\r\n\t\tprops_disconnect_panel: new Node(),\r\n\t\tprops_connect_tip: new Label(),\r\n\t\t/**关闭和重试连接外框 */\r\n\t\tprops_user_opa: new Node(),\r\n\t\t/**连接关闭，退出 */\r\n\t\tprops_sokt_close: new Button(),\r\n\t\t/**连接重试 */\r\n\t\tprops_sokt_retry: new Button(),\r\n\t\t/**宣传画册 */\r\n\t\tprops_PageView: new PageView(),\r\n\t\t/**宣传画册-轮播灯 */\r\n\t\tprops_indicator: new Node(),\r\n\t\t/**宣传画册-轮播灯 */\r\n\t\tprops_indicator_toggle: new Node(),\r\n\t\t/**游戏轮播广告 */\r\n\t\tprops_page_template: new Node(),\r\n\t\t/**大厅的爆奖公告 */\r\n\t\tprops_winningBox: new Node(),\r\n\t}\r\n\r\n\tstart() { }\r\n\r\n\tcallback(event: Event, customEventData: string) {\r\n\t\thallAudio.playOneShot(SoundPathDefine.BTU_CLICK)\r\n\t\tlet gameType: SubGameType = SubGameType.All\r\n\t\tswitch (event.target[\"name\"]) {\r\n\t\t\tcase ToggleTabName.ALL:\r\n\t\t\t\t//全部游戏\r\n\t\t\t\tgameType = SubGameType.All\r\n\t\t\t\tbreak;\r\n\t\t\tcase ToggleTabName.DOMINO:\r\n\t\t\t\t//多米诺\r\n\t\t\t\tgameType = SubGameType.Domino\r\n\t\t\t\tbreak;\r\n\t\t\tcase ToggleTabName.SLOTS:\r\n\t\t\t\t//slot游戏\r\n\t\t\t\tgameType = SubGameType.Slot\r\n\t\t\t\tbreak;\r\n\t\t\tcase ToggleTabName.OTHER:\r\n\t\t\t\t//其他\r\n\t\t\t\tgameType = SubGameType.Other\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.getGetSubGameGateQueue(event.target[\"name\"], gameType)\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tarrowDisplay(this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView), this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40)\r\n\t\t}, 0.1)\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\tcurrGateQueue: subGameGateQueue[0],\r\n\t\t\tchooseTabName: ToggleTabName.INIT,\r\n\t\t\tsubGameType: SubGameType.All\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t\tinitToggle(this.propertyNode.props_ToggleGroup_type, this.node, new Hall_MainPanel.EventHandler(), \"Hall_MainPanel\", \"callback\")\r\n\r\n\t\tthis.propertyNode.props_btn_head_choose.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenPersonCenter(1)\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_bag.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenPersonCenter(5)\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_hadiah.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tglobal.openShop(BuyType.TAS);\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_rabat.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenPersonCenter(6)\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_referral.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenPersonCenter(4)\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_down_bank.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenBankPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_inbox.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenMailPanel()\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_down_shop.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenShopPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_gold_add.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenShopPanel()\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_down_withdrawal.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenWithdrawalPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_phone.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenUpgradePanel()\r\n\t\t\t})\r\n\t\t\t// this.events.onOpenBindPhonePanel()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_gift.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenAwardPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_shopGift.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenGiftBoxanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_signIn.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenSignInPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_task.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenSignInPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_vip.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenVipMainPanel()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_down_service.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\tthis.events.onOpenService()\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_ScrollView_game_icon.on(ScrollView.EventType.SCROLLING, (e) => {\r\n\t\t\tarrowDisplay(e, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40)\r\n\t\t})\r\n\t\tthis.propertyNode.props_sokt_close.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tgame.end()\r\n\t\t})\r\n\t\tthis.propertyNode.props_sokt_retry.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (!this.connectRetryDone) {\r\n\t\t\t\tconsole.log('wait please')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.dispatch(setSocketConnectStatus({ isConnect: false, retryConnectTimes: 1 }))\r\n\t\t\tsktInstance.reConnectTimes = 0\r\n\t\t\tthis.connectRetryDone = false\r\n\t\t\tsktInstance.reconnect().then(() => {\r\n\t\t\t\tthis.connectRetryDone = true\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.connectRetryDone = true\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_left.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst scrollView = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView)\r\n\t\t\ttween(scrollView.content).to(0.1, { position: new Vec3(0, 0, 0) }).call(() => {\r\n\t\t\t\tarrowDisplay(scrollView, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40)\r\n\t\t\t}).start()\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_right.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst scrollView = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView)\r\n\t\t\tconst wrapWodth = this.propertyNode.props_ScrollView_game_icon.getComponent(UITransform).width\r\n\t\t\ttween(scrollView.content).to(0.1, { position: new Vec3(-scrollView.content.getComponent(UITransform).width + wrapWodth, 0, 0) }).call(() => {\r\n\t\t\t\tarrowDisplay(scrollView, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40)\r\n\t\t\t}).start()\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t\tkey === \"nickName\" && (this.propertyNode.props_Label_name.string = value.cur + \"\")\r\n\t\tkey === \"memberAssetGoldPieces\" && value.cur && (this.propertyNode.props_Label_gold.getComponent(Label).string = value.cur.formatAmountWithCommas(0).split('.')[0])\r\n\t\tif (key === \"avatarIndex\") {\r\n\t\t\tbundleCommon.load(`resource/head/head_circle_${value.cur}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tthis.propertyNode.props_spr_head.getComponent(Sprite).spriteFrame = sp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (key === \"vipLevel\") {\r\n\t\t\tbundleCommon.load(`resource/vip/VIP${value.cur}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\t!err && (this.propertyNode.props_spr_vip.getComponent(Sprite).spriteFrame = sp)\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (key === \"tourist\") {\r\n\t\t\tthis.propertyNode.props_btn_down_phone.active = this.props.tourist !== 0\r\n\t\t}\r\n\t\tif (key === \"memberName\") {\r\n\t\t\tif (this.props.memberName) {\r\n\t\t\t\tsys.localStorage.setItem('loginName', this.props.memberName)\r\n\t\t\t} else {\r\n\t\t\t\t// sys.localStorage.removeItem('loginName')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (key === \"isConnect\") {\r\n\t\t\tthis.propertyNode.props_disconnect_panel.active = !this.props.isConnect\r\n\t\t}\r\n\t\tif (key === \"retryConnectTimes\") {\r\n\t\t\tif (!sktInstance) return\r\n\t\t\tthis.propertyNode.props_user_opa.active = this.props.retryConnectTimes >= sktInstance.maxReConnectTimes\r\n\t\t\tthis.propertyNode.props_connect_tip.node.active = this.props.retryConnectTimes < sktInstance.maxReConnectTimes\r\n\t\t\tthis.propertyNode.props_connect_tip.string = lang.write(k => k.WebSocketModule.socketRetryTimes, { times: this.props.retryConnectTimes }, { placeStr: \"连接断开，正在进行第{times}次重连...\" })\r\n\t\t}\r\n\r\n\t\tif (key === 'isUnreadActivity') {\r\n\t\t\t// this.propertyNode.props_btn_down_gift.getChildByName(\"props_gift_red_dot\").active = this.props.isUnreadActivity ? true : false;\r\n\t\t}\r\n\r\n\t\t// if (key === \"_setDone\") {\r\n\t\t// \tconsole.log(this.props)\r\n\t\t// \tif (!this.props.tourist) {\r\n\t\t// \t\t// 如果不是游客，先把登录名缓存下来，用于登录页显示\r\n\t\t// \t\tsys.localStorage.setItem('loginName', this.props.memberName)\r\n\t\t// \t} else {\r\n\t\t// \t\tsys.localStorage.removeItem('loginName')\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.useState(() => {\r\n\t\t\t// 实例化图标对象，先清空\r\n\t\t\tconst scrollViewContent = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView).content\r\n\t\t\t// scrollViewContent.removeAllChildren()\r\n\t\t\t// const gateViewModelList: BaseViewModel<Hall_SubGameGate, GateState, GateProps, GateEvent>[] = []\r\n\t\t\tconst ratio = setByScreenScale()\r\n\t\t\t// this.gateViewModelList = []\r\n\t\t\tconst isInit = this.gateViewModelList.length === 0 ? true : false\r\n\t\t\tif (!isInit) {\r\n\t\t\t\tthis.gateViewModelList.forEach(item => item.viewNode.active = false)\r\n\t\t\t}\r\n\t\t\tthis.state.currGateQueue.queue.forEach(gamesIds => {\r\n\t\t\t\t// const gateModelView = new BaseViewModel<Hall_SubGameGate, GateState, GateProps, GateEvent>(\"Hall_SubGameGate\")\r\n\t\t\t\t// const target = this.gateViewModelList.find(item => equal(item.comp.props.gamesIds, gamesIds))\r\n\t\t\t\tif (!isInit) {\r\n\t\t\t\t\tconst target = this.gateViewModelList.find(item => equal(item.comp.props.gamesIds, gamesIds))\r\n\t\t\t\t\ttarget && (target.viewNode.active = true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst gateModelView = new SubGameGateViewModel()\r\n\t\t\t\t\t\t.mountView(sourceManageSeletor().getFile(PrefabPathDefine.SUB_GAME_GATE).source)\r\n\t\t\t\t\t\t.appendTo(scrollViewContent, {\r\n\t\t\t\t\t\t\teffectType: EffectType.EFFECT1,\r\n\t\t\t\t\t\t\t// effectOption: {\r\n\t\t\t\t\t\t\t// \tscaleOrigin: {\r\n\t\t\t\t\t\t\t// \t\tx: ratio,\r\n\t\t\t\t\t\t\t// \t\ty: ratio\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t}).setProps({\r\n\t\t\t\t\t\t\tgamesIds\r\n\t\t\t\t\t\t}).setEvent({\r\n\t\t\t\t\t\t\tonTouchInto: (gameInfo: HallGameGateType) => {\r\n\t\t\t\t\t\t\t\tthis.isDebouncerAsync(() => {\r\n\t\t\t\t\t\t\t\t\tthis.events.onTouchIntoHandler(gameInfo)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).connect()\r\n\t\t\t\t\tthis.gateViewModelList.push(gateModelView)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.events.onToggleGameTypeHandler(this.state.subGameType, this.gateViewModelList)\r\n\t\t}, [\"chooseTabName\"])\r\n\t\tthis.setState({\r\n\t\t\tchooseTabName: ToggleTabName.ALL\r\n\t\t})\r\n\t\tthis.propertyNode.props_indicator_toggle.active = false;\r\n\t\tfetcher.send(ApiUrl.GAME_SWIPE, {}, \"get\").then((data: Array<SwipeData>) => {\r\n\t\t\tdata.forEach((item, index) => {\r\n\t\t\t\tassetManager.loadRemote(item.swiperUrl, (err, asset: ImageAsset) => {\r\n\t\t\t\t\tif (this.propertyNode && !err) {\r\n\t\t\t\t\t\tconst sp = SpriteFrame.createWithImage(asset);\r\n\t\t\t\t\t\titem.sp = sp;\r\n\t\t\t\t\t\tthis.swiperDatas.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.HallModule.LoadFaild, {}, { placeStr: \"加载资源失败\" }), type: ToastType.ERROR }))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.propertyNode && index + 1 === data.length) {\r\n\t\t\t\t\t\tthis.propertyNode.props_page_template.active = false\r\n\t\t\t\t\t\t// this.scrollPageView()\r\n\r\n\t\t\t\t\t\tif (this.swiperDatas.length > 0) {\r\n\t\t\t\t\t\t\tthis.addPageViewNode(this.swiperDatas.length - 1);\r\n\t\t\t\t\t\t\tif (this.swiperDatas.length > 1) {\r\n\t\t\t\t\t\t\t\tthis.swiperDatas.forEach((v, i) => {\r\n\t\t\t\t\t\t\t\t\tthis.addPageViewNode(i);\r\n\t\t\t\t\t\t\t\t\tthis.createIndicatorToggle(v);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.addPageViewNode(0);\r\n\t\t\t\t\t\t\t\tthis.swipeTimeScoll();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tthis.scrollPageViewListener()\r\n\t\tthis.updateBackground()\r\n\t\tnew MarqueeViewModel().mountView(sourceManageSeletor(\"common\").getFile(PrefabPathDefineCommon.MARQUEE_INSERT).source).appendTo(this.propertyNode.props_Marquee_node).connect()\r\n\t\t// new MarqueeViewModel().mountView(sourceManageSeletor(\"common\").getFile(CommonPrefabPathDefine.MARQUEE).source, \"Common_Marquee\").appendTo(this.propertyNode.props_marquee)\r\n\t}\r\n\r\n\tprivate scrollPageViewListener() {\r\n\t\tthis.propertyNode.props_PageView.node.on(PageView.EventType.SCROLL_ENDED, (pageView: PageView) => {\r\n\t\t\tif (pageView.curPageIdx === 0) {\r\n\t\t\t\tpageView.scrollToPage(pageView.getPages().length - 2, 0)\r\n\t\t\t} else if (pageView.curPageIdx + 1 === pageView.getPages().length) {\r\n\t\t\t\tpageView.scrollToPage(1, 0)\r\n\t\t\t}\r\n\t\t\tconst page = pageView.getPages()[pageView.curPageIdx];\r\n\t\t\tthis.swiperDatas.find(v => v.name === page.name).toggle.isChecked = true;\r\n\t\t\tthis.swipeTimeScoll();\r\n\t\t})\r\n\t}\r\n\r\n\tprivate scrollPageView() {\r\n\t\tif (!this.propertyNode) return\r\n\t\tlet pageIndex = this.propertyNode.props_PageView.getCurrentPageIndex()\r\n\t\tconst length = this.propertyNode.props_PageView.getPages().length\r\n\t\tthis.propertyNode.props_PageView.scrollToPage(pageIndex === length - 1 ? 1 : ++pageIndex)\r\n\t}\r\n\r\n\tprivate createIndicatorToggle(swipeData: SwipeData) {\r\n\t\tconst toggleNode = instantiate(this.propertyNode.props_indicator_toggle);\r\n\t\ttoggleNode.active = true;\r\n\t\tthis.propertyNode.props_indicator.addChild(toggleNode);\r\n\t\tswipeData.toggle = toggleNode.getComponent(Toggle);\r\n\t\tswipeData.toggle.isChecked = true;\r\n\t}\r\n\r\n\tprivate swipeTime = 0;\r\n\tprivate swipeTimeScoll() {\r\n\t\tthis.unschedule(this.scrollPageView)\r\n\t\tthis.scheduleOnce(this.scrollPageView, 5)\r\n\r\n\t\t// this.swipeTime && window.clearTimeout(this.swipeTime);\r\n\t\t// this.swipeTime = window.setTimeout(() => {\r\n\t\t// \tthis.scrollPageView()\r\n\t\t// }, 5000)\r\n\t}\r\n\r\n\tprivate addPageViewNode(index: number, insertIndex: number = -1) {\r\n\t\tif (!this.node.isValid) return;\r\n\t\tconst item = this.swiperDatas[index];\r\n\t\titem.name = \"swpier_\" + index;\r\n\t\tconst node = instantiate(this.propertyNode.props_page_template)\r\n\t\tnode.getComponent(Sprite).spriteFrame = item.sp;\r\n\t\tnode.name = item.name;\r\n\t\tnode.active = true\r\n\t\tinsertIndex >= 0 ? this.propertyNode.props_PageView.insertPage(node, insertIndex) : this.propertyNode.props_PageView.addPage(node);\r\n\t\tnode.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\titem.jump && ModalBox.Instance().show({ url: item.detailUrl })\r\n\t\t})\r\n\t}\r\n\r\n\tprivate updateBackground() {\r\n\t\tconst hours = (new Date()).getHours()\r\n\t\tconst isNight = (hours > 18 || hours <= 6)\r\n\t\tif (this.propertyNode) {\r\n\t\t\tthis.propertyNode.props_hall_background_day.active = !isNight\r\n\t\t\tthis.propertyNode.props_hall_background_night.active = isNight\r\n\t\t}\r\n\t\tthis.unschedule(this.updateBackground)\r\n\t\tthis.schedule(this.updateBackground, 60)\r\n\t}\r\n\r\n\tprivate getGetSubGameGateQueue(tabName: ToggleTabName, typeName: SubGameType) {\r\n\t\t// 获取当前要显示的图标数据\r\n\t\tconst subGameQueue = subGameGateQueue.find(item => `Toggle_${item.toggleName}` === tabName).queue\r\n\t\tthis.setState({\r\n\t\t\tcurrGateQueue: {\r\n\t\t\t\ttypeName,\r\n\t\t\t\ttoggleName: tabName,\r\n\t\t\t\tqueue: subGameQueue\r\n\t\t\t},\r\n\t\t\tchooseTabName: tabName,\r\n\t\t\tsubGameType: typeName\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tpublic setGiftButtonDisplay(active: boolean) {\r\n\t\tthis.propertyNode.props_btn_down_shopGift.active = active\r\n\t}\r\n\r\n\tprotected onDestroy() {\r\n\t\tsktMsgListener.removeById(\"mainboard\")\r\n\t}\r\n\r\n\t/**设置子游戏图标入口的加载状态 */\r\n\tpublic setSubGameGate(gameId: number, progress: number, isShow?: boolean) {\r\n\t\tconst gateViewModel = this.gateViewModelList.find(item => item.comp.props.gamesIds.indexOf(gameId) !== -1)\r\n\t\tconst isH5 = !DEV && getPackageName() === 'web' && window['installBundle']\r\n\t\tgateViewModel.comp.setLoadingState(gameId, progress, isShow, isH5 ? 0.5 : 1)\r\n\t}\r\n\r\n\t/**\r\n\t * 大厅功能入口防抖\r\n\t * @param done \r\n\t */\r\n\tprivate isDebouncerAsync(done) {\r\n\t\tThrottler.isDebouncerAsync('hall_entry', 200, true, () => {\r\n\t\t}).then(isPass => {\r\n\t\t\tdone && done();\r\n\t\t})\r\n\t}\r\n}\r\n\r\n"]}