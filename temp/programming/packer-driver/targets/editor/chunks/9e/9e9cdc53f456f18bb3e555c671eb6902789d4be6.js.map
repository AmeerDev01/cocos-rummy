{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/qiuqiu/store/reducer/game.ts"],"names":["instantiate","reduxAct","default","ActionTypes","initState","CardType","DeskStatus","OperationType","config","getPlayer","createReducer","QIUQIU_JOIN_SEAT","state","payload","_state","playerMap","player","seatIndex","QIUQIU_QUIT_SEAT","memberId","QIUQIU_UPDATE_GOLD","gold","QIUQIU_CLEAR_DATA","deskStatus","WAITING","Array","seatNumber","fill","lastActiveSeatIndex","currActiveSeatIndex","operationCountdown","betAmount","maxAmount","totalBetAmount","newBetInfo","balanceInfo","balanceInfos","beginGameCountdown","dealCount","QIUQIU_CHANGE_DESK_STATUS","COUNTDOWNING","filter","v","forEach","gameData","isMaster","winloss","dealCardCount","opType","WAIT","cards","cardType","DISERSE","isReady","isGame","SECOND_DISTRIBUTE","QIUQIU_BET","glodAmount","GIVE_UP","PASS","amount","time","Date","now","Math","random","QIUQIU_READY","QIUQIU_DEAL_ACTION","dealIndex","QIUQIU_DEAL_HAND_CARD","QIUQIU_CHANGE_DEALER","QIUQIU_ADD_GOLD_ANMIE","QIUQIU_SAVE_BALANCE_INFO","balanceGoldAmount","QIUQIU_SYNC_BALANCE_GOLD_TO_GOLD","QIUQIU_OPERATION_COUNTDOWN","countdown","QIUQIU_CHANGE_OPERATION_PLAYER","QIUQIU_PLAYER_CHANGE_OP_TYPE","QIUQIU_BEGIN_GAME_COUNTDOWN","QIUQIU_UPDATE_CALL_AMOUNT","callAmount","QIUQIU_SAVE_WIN_BALANCE_INFO","QIUQIU_RECONNECT_RECOVER_BET","QIUQIU_SET_PLAYER_GAME_STATUS","QIUQIU_RECONNECT_GAME_DATA"],"mappings":"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","sourcesContent":["import { instantiate } from \"cc\";\r\nimport { default as reduxAct } from 'redux-act';\r\nimport { ActionPayLoad, ActionTypes, InitStateType, initState } from \"../action/game\";\r\nimport { BalanceInfo, CardType, DeskStatus, OperationType } from \"../../type\";\r\nimport config from \"../../config\";\r\nimport { getPlayer } from \"../../qiuqiu_tool\";\r\n\r\nexport default reduxAct.createReducer<InitStateType>({\r\n\t[ActionTypes.QIUQIU_JOIN_SEAT]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_JOIN_SEAT>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\t_state.playerMap[payload.player.seatIndex] = payload.player\r\n\t\treturn {\r\n\t\t\t..._state\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_QUIT_SEAT]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_QUIT_SEAT>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\tplayer && (_state.playerMap[player.seatIndex] = null);\r\n\t\treturn {\r\n\t\t\t..._state\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_UPDATE_GOLD]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_UPDATE_GOLD>): InitStateType => {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tgold: payload.gold\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_CLEAR_DATA]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_CLEAR_DATA>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\t_state.deskStatus = DeskStatus.WAITING;\r\n\t\t_state.playerMap = new Array(config.seatNumber).fill(null);\r\n\t\t_state.lastActiveSeatIndex = -1;\r\n\t\t_state.currActiveSeatIndex = -1;\r\n\t\t_state.operationCountdown = null;\r\n\t\t_state.betAmount = 0;\r\n\t\t_state.maxAmount = 0;\r\n\t\t_state.totalBetAmount = 0;\r\n\t\t_state.newBetInfo = null;\r\n\t\t_state.balanceInfo = null;\r\n\t\t_state.balanceInfos = null;\r\n\t\t_state.beginGameCountdown = null;\r\n\t\t_state.dealCount = 0;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_CHANGE_DESK_STATUS]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_CHANGE_DESK_STATUS>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\t_state.deskStatus = payload.deskStatus;\r\n\t\tswitch (payload.deskStatus) {\r\n\t\t\tcase DeskStatus.WAITING:\r\n\t\t\tcase DeskStatus.COUNTDOWNING:\r\n\t\t\t\t_state.operationCountdown = null;\r\n\t\t\t\t_state.beginGameCountdown = null;\r\n\t\t\t\t_state.newBetInfo = null;\r\n\t\t\t\t_state.balanceInfo = null;\r\n\t\t\t\t_state.betAmount = 0;\r\n\t\t\t\t_state.maxAmount = 0;\r\n\t\t\t\t_state.totalBetAmount = 0;\r\n\t\t\t\t_state.dealCount = 0;\r\n\t\t\t\t_state.balanceInfos = [];\r\n\r\n\t\t\t\t_state.lastActiveSeatIndex = -1;\r\n\t\t\t\t_state.currActiveSeatIndex = -1;\r\n\t\t\t\t_state.playerMap.filter(v => v).forEach(v => {\r\n\t\t\t\t\tv.gameData.isMaster = false;\r\n\t\t\t\t\tv.gameData.winloss = 0;\r\n\t\t\t\t\tv.gameData.dealCardCount = 0;\r\n\t\t\t\t\tv.gameData.totalBetAmount = 0;\r\n\t\t\t\t\tv.gameData.betAmount = 0;\r\n\t\t\t\t\tv.gameData.opType = OperationType.WAIT;\r\n\t\t\t\t\tv.gameData.cards = [];\r\n\t\t\t\t\tv.gameData.cardType = CardType.DISERSE;\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (DeskStatus.WAITING === payload.deskStatus) {\r\n\t\t\t_state.playerMap.filter(v => v).forEach(v => {\r\n\t\t\t\tv.gameData.isReady = false;\r\n\t\t\t\tv.gameData.isGame = false;\r\n\t\t\t})\r\n\t\t} else if (DeskStatus.SECOND_DISTRIBUTE === payload.deskStatus) { // 第二次发牌，清楚当前下注\r\n\t\t\t_state.betAmount = 0;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_BET]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_BET>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId);\r\n\t\tplayer.gameData.opType = payload.opType;\r\n\t\tif (OperationType.WAIT !== payload.opType && payload.betAmount > _state.betAmount) {\r\n\t\t\t_state.betAmount = payload.betAmount;\r\n\t\t}\r\n\t\tif (payload.betAmount > _state.maxAmount) {\r\n\t\t\t_state.maxAmount = payload.betAmount;\r\n\t\t}\r\n\t\tplayer.gameData.betAmount += payload.betAmount;\r\n\t\tplayer.glodAmount = payload.gold;\r\n\t\t_state.totalBetAmount += payload.betAmount;\r\n\t\tif (payload.opType !== OperationType.GIVE_UP && payload.opType !== OperationType.PASS) {\r\n\t\t\t_state.newBetInfo = {\r\n\t\t\t\tseatIndex: player.seatIndex,\r\n\t\t\t\tamount: payload.betAmount,\r\n\t\t\t\ttime: Date.now() + Math.random(),\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_READY]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_READY>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId);\r\n\t\tplayer.gameData.isReady = true;\r\n\t\t// player.gameData.isGame = true;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_DEAL_ACTION]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_DEAL_ACTION>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = _state.playerMap[payload.seatIndex];\r\n\t\tplayer && (player.gameData.dealCardCount = payload.dealIndex);\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_DEAL_HAND_CARD]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_DEAL_HAND_CARD>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\t_state.playerMap[0].gameData.cards = payload.cards;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_CHANGE_DEALER]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_CHANGE_DEALER>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId);\r\n\t\tplayer.gameData.isMaster = true;\r\n\t\t// _state.playerMap[player.seatIndex].gameData.isMaster = true;\r\n\t\t_state.lastActiveSeatIndex = -1;\r\n\t\t_state.currActiveSeatIndex = player.seatIndex;\r\n\r\n\t\t// 设置当前列表中的玩家状态为游戏状态\r\n\t\t_state.playerMap.forEach(v => v && v.gameData.isReady && (v.gameData.isGame = true))\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_ADD_GOLD_ANMIE]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_ADD_GOLD_ANMIE>): InitStateType => {\r\n\t\tconst balanceInfo: BalanceInfo = {\r\n\t\t\tseatIndex: payload.seatIndex,\r\n\t\t\twinloss: payload.winloss,\r\n\t\t\ttime: Date.now()\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tbalanceInfo\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_SAVE_BALANCE_INFO]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_SAVE_BALANCE_INFO>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\tplayer.balanceGoldAmount = payload.gold;\r\n\t\tplayer.gameData.winloss = payload.winloss;\r\n\t\tplayer.gameData.cards = payload.cards;\r\n\t\tplayer.seatIndex > 0 && (player.gameData.dealCardCount = 0);\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_SYNC_BALANCE_GOLD_TO_GOLD]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_SYNC_BALANCE_GOLD_TO_GOLD>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tif (payload.memberId) {\r\n\t\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\t\tplayer.glodAmount = player.balanceGoldAmount;\r\n\t\t} else {\r\n\t\t\t_state.playerMap.filter(v => v).forEach(v => v.glodAmount = v.balanceGoldAmount);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_OPERATION_COUNTDOWN]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_OPERATION_COUNTDOWN>): InitStateType => {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\toperationCountdown: payload.countdown\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_CHANGE_OPERATION_PLAYER]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_CHANGE_OPERATION_PLAYER>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\tplayer.gameData.opType = OperationType.WAIT;\r\n\t\t_state.lastActiveSeatIndex = _state.currActiveSeatIndex;\r\n\t\t_state.currActiveSeatIndex = player.seatIndex;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_PLAYER_CHANGE_OP_TYPE]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_PLAYER_CHANGE_OP_TYPE>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\tplayer.gameData.opType = payload.opType;\r\n\t\tplayer.glodAmount = payload.gold;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_BEGIN_GAME_COUNTDOWN]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_BEGIN_GAME_COUNTDOWN>): InitStateType => {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tbeginGameCountdown: payload.countdown\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_UPDATE_CALL_AMOUNT]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_UPDATE_CALL_AMOUNT>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId)\r\n\t\tplayer.gameData.callAmount = payload.callAmount;\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_SAVE_WIN_BALANCE_INFO]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_SAVE_WIN_BALANCE_INFO>): InitStateType => {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tbalanceInfos: payload.balanceInfos\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_RECONNECT_RECOVER_BET]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_RECONNECT_RECOVER_BET>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\tconst player = getPlayer(_state.playerMap, payload.memberId);\r\n\t\tif (payload.betAmount > _state.betAmount) {\r\n\t\t\t// _state.betAmount = payload.betAmount;\r\n\t\t}\r\n\t\tif (payload.betAmount > _state.maxAmount) {\r\n\t\t\t_state.maxAmount = payload.betAmount;\r\n\t\t}\r\n\t\t_state.totalBetAmount += payload.betAmount;\r\n\t\t_state.newBetInfo = {\r\n\t\t\tseatIndex: player.seatIndex,\r\n\t\t\tamount: payload.betAmount,\r\n\t\t\ttime: Date.now() + Math.random(),\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_SET_PLAYER_GAME_STATUS]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_SET_PLAYER_GAME_STATUS>): InitStateType => {\r\n\t\tconst _state = instantiate(state)\r\n\t\t_state.playerMap.forEach(v => v && v.gameData.isReady && (v.gameData.isGame = payload.isGame))\r\n\t\treturn {\r\n\t\t\t..._state,\r\n\t\t}\r\n\t},\r\n\t[ActionTypes.QIUQIU_RECONNECT_GAME_DATA]: (state, payload: ActionPayLoad<ActionTypes.QIUQIU_RECONNECT_GAME_DATA>): InitStateType => {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tbetAmount: payload.betAmount,\r\n\t\t\tdealCount: payload.dealCount,\r\n\t\t}\r\n\t}\r\n}, initState);"]}