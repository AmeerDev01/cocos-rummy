{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egypt/Slot/Component/Egypt_SlotBg.ts"],"names":["_decorator","Button","Label","Node","Prefab","find","Sprite","SpriteFrame","tween","UIOpacity","sp","Vec3","AudioSource","instantiate","Animation","BaseComponent","global","AudioManager","SoundList","SceneBgMusic","NumberRoller","MW_Shake","getBgProxy","getSocketProxy","BuyType","ccclass","property","Egypt_SlotBg","GoldNumberRoller","timeAccumulator","jackTotalNumberRoller","listState","autoLaunchState","animationType","start","setTimeout","_nodes","setSiblingIndex","on","EventType","TOUCH_END","set_JACKPOT_list","setScale","to","height","easing","updateBetAmount","baseBetAmount","lineCount","betAmount","numberStr","formatAmountWithCommas","getComponent","string","setBtnLabel","str","setGold","label","startNumberMini","parseInt","replace","Number","active","labelStr","Math","abs","String","toFixed","animation","play","startRolling","updateScore","score","setBtnState","state","type","num","setJACKPOT","jackPotData","sprList","getSpriteFrames","JackPotContent","destroyAllChildren","forEach","item","headImgUrl","avatarIndex","spr","name","node","JackPotItem","getChildByName","nickName","winningAmount","spriteFrame","addChild","Balance_tips","bl","spr_nomoney","setBg","bgName","triggeAutoLaunch","autoLaunch","setActiveButton","autoLaunchType","children","child","index","opacity","set_jack_total","startNumberMajor","initSlot","getTransferGameInfo","gameType","slotSwitching","switchAnimations","done","reverseAnimation","animationMethods","kaiguanmen","Skeleton","setAnimation","count","scale","monitorAnimations","entry","shake","skeletonLeft","skeletonRight","scheduleOnce","onEndCall","setCompleteListener","setDis_btn","disable","grayscale","setGreyOut","setDisable","button","startButton","sprite","update","deltaTime","getInstance","updateTheMusicStatus","bindUI","topButton","playSound","buttonClick","openShop","beliButton","speclalButton","TAS","settingButton","openPersonCenter","audio","addComponent","setAudioSource","playMusic","mainBg","bindEvent"],"mappings":"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","sourcesContent":["import { _decorator, Button, Label, Node, Prefab, find, Sprite, SpriteFrame, tween, UIOpacity, sp, Vec3, AudioSource, instantiate, Animation, log } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nimport { AutoLaunchType } from '../Repositories/BgRepository';\r\nimport { global } from '../../../../hall';\r\nimport { AudioManager, SoundList, SceneBgMusic } from '../Managr/AudioManager';\r\nimport { NumberRoller } from \"../utils/NumberRoller\";\r\nimport { MW_Shake } from \"../utils/MW_Shake\";\r\nimport { getBgProxy, getSocketProxy } from '../utils';\r\nimport { BuyType } from '../../../../hall/components/Hall_ShopPanel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Egypt_SlotBg')\r\nexport class Egypt_SlotBg extends BaseComponent {\r\n    //返回首页\r\n    @property(Node)\r\n    homeButton: Node = null\r\n\r\n    //充值按钮\r\n    @property(Node)\r\n    topButton: Node = null\r\n\r\n    //商城\r\n    @property(Node)\r\n    beliButton: Node = null\r\n\r\n    //礼包\r\n    @property(Node)\r\n    speclalButton: Node = null\r\n\r\n    //设置\r\n    @property(Node)\r\n    settingButton: Node = null\r\n    @property(Node)\r\n    startButton: Node = null\r\n\r\n    @property(Node)\r\n    baseBet: Node = null\r\n\r\n    @property(Node)\r\n    betAmount: Node = null\r\n\r\n    @property(Node)\r\n    lineCount: Node = null\r\n\r\n    @property(Node)\r\n    score: Node = null\r\n\r\n    @property(Node)\r\n    addShift: Node = null\r\n\r\n    @property(Node)\r\n\r\n    spr_nomoney: Node = null\r\n\r\n    @property(Node)\r\n    subtractShift: Node = null\r\n\r\n    @property(Node)\r\n    autoLaunch: Node = null\r\n\r\n    @property(Node)\r\n    ruleButton: Node = null\r\n\r\n    @property(SpriteFrame)\r\n    bg_1: SpriteFrame = null\r\n    @property(Node)\r\n    gameArea: Node = null\r\n\r\n    @property(Node)\r\n    addBet: Node = null\r\n\r\n    @property(Node)\r\n    subtractBet: Node = null\r\n\r\n    @property(Node)\r\n    maxBet: Node = null\r\n\r\n    @property(Prefab)\r\n    toast: Prefab = null\r\n    @property(Node)\r\n    JackPotContent: Node = null\r\n    @property(Node)\r\n    JackPotItem: Node = null\r\n    @property(Node)\r\n    propsToggleFast: Node = null\r\n    private GoldNumberRoller: NumberRoller = new NumberRoller();\r\n    private timeAccumulator: number = 0\r\n    private jackTotalNumberRoller: NumberRoller = new NumberRoller();\r\n    private listState = true\r\n    autoLaunchState=false\r\n    start() {\r\n        setTimeout(() => {\r\n            this._nodes['Up_Feature'].setSiblingIndex(9999)\r\n            this._nodes['bg1'].setSiblingIndex(0)\r\n            this._nodes['spr_egyptSg_bg'].setSiblingIndex(0)\r\n        }, 100)\r\n        this._nodes['btn_jackPot'].on(Node.EventType.TOUCH_END, () => {\r\n            this.listState = !this.listState\r\n            this.set_JACKPOT_list()\r\n        })\r\n        // this._nodes['ScrollView'].on(Button.EventType.CLICK, () => {\r\n        //     this.listState = !this.listState\r\n        //     this.set_JACKPOT_list()\r\n        // })\r\n    }\r\n    set_JACKPOT_list() {\r\n        this._nodes['btn_scrollView'].setScale(1, this.listState ? -1 : 1)\r\n        // tween(this._nodes['ScrollView']).to(tweenDuration, {  position: new Vec3(this.listState?-588:-1000, 162, 0)}, { easing: \"linear\",}).start();\r\n        tween(this._nodes['ScrollView']).to(0.2, { height: this.listState ? 345 : 0, }, { easing: \"sineIn\", }).start();\r\n        tween(this._nodes['view']).to(0.1, { height: this.listState ? 310 : 0, }, { easing: \"sineIn\", }).start();\r\n    }\r\n    /**更新下注金额 */\r\n    public updateBetAmount(baseBetAmount: number, lineCount: number): void {\r\n        const betAmount = baseBetAmount * lineCount\r\n        let numberStr: string = betAmount.formatAmountWithCommas()\r\n        // if (betAmount > 1000 * 100) {\r\n        // \t//显示K\r\n        // } else if (betAmount > 10000 * 100) {\r\n        // \t//显示M\r\n        // } else {\r\n        // \t//转为科学计数法\r\n        // \tnumberStr = betAmount.formatAmountWithCommas()\r\n        // }\r\n        this.lineCount.getComponent(Label).string = `${lineCount} × ${baseBetAmount}`;\r\n        this.betAmount.getComponent(Label).string = betAmount + ''//numberStr\r\n    }\r\n    public setBtnLabel(str) {\r\n        this._nodes['START'].getComponent(Label).string = str + \"\"\r\n        this.listState = false\r\n        // this.set_JACKPOT_list()\r\n    }\r\n    // 更新金币数量\r\n    public setGold(str) {\r\n        let label = this._nodes['Moeny_Label'].getComponent(Label)\r\n        let startNumberMini = parseInt(label.string.replace(/,/g, \"\"));\r\n        if (startNumberMini - Number(str) == 0) {\r\n            return false\r\n        } else {\r\n            // 漂浮效果\r\n            this._nodes['number2'].active = true\r\n            let labelStr = ''\r\n            if (startNumberMini - Number(str) < 0) {\r\n                labelStr = '+' + Math.abs(startNumberMini - Number(str))\r\n            } else {\r\n                labelStr = '-' + (startNumberMini - Number(str))\r\n            }\r\n            this._nodes['number2'].getComponent(Label).string = String(Number(labelStr).toFixed(0))\r\n            let animation: Animation = this._nodes['number2'].getComponent(Animation)\r\n            animation.play();\r\n            // 动画播放\r\n            this.GoldNumberRoller.startRolling(startNumberMini, str.toFixed(0), 500, label)\r\n        }\r\n\r\n    }\r\n    /**更新积分 */\r\n    public updateScore(score: number): void {\r\n        if (score == 0) {\r\n            this._nodes['goodluck'].active = true\r\n            this._nodes['bottom_score'].active = false\r\n        } else {\r\n            this._nodes['goodluck'].active = false\r\n            this._nodes['bottom_score'].active = true\r\n            this.score.getComponent(Label).string = score + \"\"\r\n        }\r\n    }\r\n    /**更新按钮状态 */\r\n    public setBtnState(state, type = 0, num?) {\r\n        if (type == 0) { // 主游戏按钮\r\n            this._nodes['STARTBG'].active = state\r\n            this._nodes['scrollingThePicture'].active = !state\r\n            this._nodes['START'].active = false\r\n            this._nodes['AUTO'].active = false\r\n        } else if (type == 1) { // 小游戏按钮\r\n            this._nodes['STARTBG'].active = false\r\n            this._nodes['scrollingThePicture'].active = false\r\n            this._nodes['START'].active = true\r\n            this._nodes['AUTO'].active = false\r\n        } else { // 自动按钮\r\n            this._nodes['scrollingThePicture'].active = false\r\n            this._nodes['START'].active = false\r\n            this._nodes['STARTBG'].active = false\r\n            this._nodes['AUTO'].active = true\r\n            this._nodes['AUTO'].getComponent(Label).string = num\r\n        }\r\n    }\r\n    /**set jackPOT */\r\n    public setJACKPOT(jackPotData) {\r\n        let sprList = getBgProxy().getSpriteFrames()\r\n        this.JackPotContent.destroyAllChildren()\r\n        jackPotData.forEach(item => {\r\n            let headImgUrl = `head_circle_${item.avatarIndex}`\r\n            let spr = sprList.find(item => {\r\n                return item.name == headImgUrl\r\n            })\r\n            let node = instantiate(this.JackPotItem)\r\n            node.getChildByName('One_Right').getComponent(Label).string = item.nickName + ''\r\n            find('One_Left/One_Label', node).getComponent(Label).string = item.winningAmount.formatAmountWithCommas()\r\n            find('One_Left/One_head', node).getComponent(Sprite).spriteFrame = spr\r\n            node.active = true\r\n            this.JackPotContent.addChild(node)\r\n        })\r\n    }\r\n    public Balance_tips(bl) {\r\n        this.spr_nomoney.active = bl\r\n    }\r\n    /**设置背景图片 */\r\n    public setBg(bgName: 'bg_1' | 'bg_2') {\r\n        this.node.getComponent(Sprite).spriteFrame = this[bgName]\r\n    }\r\n    /**展示自动启动按钮组面板 */\r\n    public triggeAutoLaunch(state?) {\r\n        if(state===false){\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t\tthis.autoLaunchState=false\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.autoLaunchState=!this.autoLaunchState\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_up')\r\n\t\t\t}else{\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\n    /**自动按钮设置为激活状态 */\r\n    public setActiveButton(autoLaunchType: AutoLaunchType) {\r\n        this.autoLaunch.children.forEach((child, index) => {\r\n            if (index === autoLaunchType) {\r\n                child.getComponent(UIOpacity).opacity = 60\r\n            } else {\r\n                child.getComponent(UIOpacity).opacity = 255\r\n            }\r\n        })\r\n        if(this.autoLaunchState){\r\n\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\tthis.autoLaunchState=false\r\n\t\t}\r\n    }\r\n    public set_jack_total(num) {\r\n        let label: Label = this._nodes['Label_jackpot'].getComponent(Label)\r\n        let startNumberMajor = parseInt(label.string.replace(/,/g, \"\"));\r\n        this.jackTotalNumberRoller.startRolling(startNumberMajor, num, 500, label)\r\n    }\r\n    // 初始化插槽\r\n    public initSlot() {\r\n        let type = getSocketProxy().getTransferGameInfo().gameType()\r\n        if (type == 0) {\r\n            this.slotSwitching(true)\r\n            this._nodes['spr_egyptSg_bg'].active = false\r\n        } else {\r\n            this.slotSwitching(false)\r\n            this._nodes['spr_egyptSg_bg'].active = true\r\n        }\r\n    }\r\n    private animationType: number;\r\n    public switchAnimations(type, done) {\r\n        this.animationType = type;\r\n        // console.log('++++++++++++++++++++++switchAnimations +++++++++++++++++ ', type);\r\n        this._nodes['aiji_kaiguanmen'].active = true\r\n        if (type === 0) {\r\n            this.reverseAnimation(done, type)\r\n        }\r\n        else if (type === 1) {\r\n            this.animationMethods(done, type)\r\n        }\r\n        else if (type === 2) {\r\n            this.animationMethods(done, type)\r\n        }\r\n    }\r\n    // 游戏播放倒序\r\n    reverseAnimation(done, type) {\r\n        let kaiguanmen = this._nodes['aiji_kaiguanmen'].getComponent(sp.Skeleton)\r\n        kaiguanmen.setAnimation(0, 'shimen_kaimen', false)\r\n        let count = 0\r\n        tween(this._nodes['aiji_kaiguanmen'])\r\n            .to(3, { scale: new Vec3(1, 1, 1) }).start()\r\n        this.monitorAnimations(kaiguanmen, type, (entry) => {\r\n            count++\r\n            if (count === 1) {\r\n                kaiguanmen.setAnimation(0, 'shimen_guangmen', false)\r\n                this.node.getComponent(MW_Shake).shake(this.node, 0.2, 0, 20)\r\n            }\r\n            else {\r\n                this.slotSwitching(true)\r\n                kaiguanmen.setAnimation(0, 'shimen_guanmenhuocheng', false)\r\n                this._nodes['aiji_kaiguanmen'].active = false\r\n                this._nodes['spr_egyptSg_bg'].active = false\r\n                // console.log('reverseAnimation ++++++++++++++++++++++++++++++++++ done');\r\n                done && done();\r\n            }\r\n        })\r\n    }\r\n    animationMethods(done, type) {\r\n        let skeletonLeft = this._nodes['skeletonLeft'].getComponent(sp.Skeleton)\r\n        skeletonLeft.setAnimation(0, 'dynamic', false)\r\n        let skeletonRight = this._nodes['skeletonRight'].getComponent(sp.Skeleton)\r\n        skeletonRight.setAnimation(0, 'dynamic', false)\r\n        this.monitorAnimations(skeletonRight, type, () => {\r\n            this._nodes['aiji_kaiguanmen'].active = true\r\n            this.scheduleOnce(() => {\r\n                tween(this._nodes['aiji_kaiguanmen'])\r\n                    .to(2, { scale: new Vec3(3, 3, 3) }).start()\r\n            }, 4)\r\n            let kaiguanmen = this._nodes['aiji_kaiguanmen'].getComponent(sp.Skeleton)\r\n            kaiguanmen.setAnimation(0, 'shimen_guangmen', false)\r\n            let count = 0\r\n            this.monitorAnimations(kaiguanmen, type, (entry) => {\r\n                count++\r\n                if (count === 1) {\r\n                    kaiguanmen.setAnimation(0, 'shimen_kaimen', false)\r\n                    this._nodes['spr_egyptSg_bg'].active = true\r\n                    this.node.getComponent(MW_Shake).shake(this.node, 0.2, 0, 20)\r\n                } else {\r\n                    this.slotSwitching(false)\r\n                    kaiguanmen.setAnimation(0, 'shimen_guanmenhuocheng', false)\r\n                    this._nodes['aiji_kaiguanmen'].active = false\r\n                    count = 0\r\n                    // console.log('animationMethods ------------------------------------- done');\r\n                    done && done();\r\n                }\r\n            })\r\n        })\r\n    }\r\n    // 动画播放一次\r\n    public monitorAnimations(Skeleton: sp.Skeleton, type: number, onEndCall?: (entry: sp.spine.TrackEntry) => void) {\r\n        Skeleton.setCompleteListener((entry: sp.spine.TrackEntry) => {\r\n            // console.log('monitorAnimations =========================== ', type);\r\n            if (this.animationType === type) {\r\n                onEndCall(entry)\r\n            }\r\n        })\r\n    }\r\n    //滚槽切换\r\n    slotSwitching(bl) {// true 游戏主游戏 false 其他游戏\r\n        this._nodes['bg1'].active = bl\r\n        this._nodes['skeletonLeft'].active = bl\r\n        this._nodes['skeletonRight'].active = bl\r\n    }\r\n    // 设置小游戏按钮置灰\r\n    setDis_btn(disable: boolean) {\r\n        this._nodes['SZX_-'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['SZX_+'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['maxBet'].getComponent(Sprite).grayscale = disable\r\n    }\r\n    setGreyOut(str,disable){\r\n        this._nodes[str].getComponent(Sprite).grayscale = disable\r\n    }\r\n    /**设置面板按钮可用性 */\r\n    setDisable(disable: boolean) {\r\n        // const op = this.startButton.getComponent(UIOpacity)\r\n        // op.opacity = disable ? 100 : 255\r\n        const button = this.startButton.getComponent(Button); // 获取节点的 Sprite 组件\r\n        // button.interactable = disable\r\n        const sprite = this.startButton.getComponent(Sprite);\r\n        sprite.grayscale = disable\r\n        // const material = Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE); // 获取置灰材质\r\n        // const material = Material.getInstantiatedBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE);\r\n        // node.setMaterial(material, 0);\r\n\r\n        // const mat = new Material();\r\n        // mat.initialize({\r\n        // \t// 通过 effect 名指定材质使用的着色器资源\r\n        // \teffectAsset: 'pipeline/skybox',\r\n        // \tdefines: {\r\n        // \t\tUSE_RGBE_CUBEMAP: true\r\n        // \t}\r\n        // })\r\n        // this.node.getComponent(Sprite).setMaterial(Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE + ''), 0);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this.timeAccumulator += deltaTime;\r\n        if (this.timeAccumulator >= 3) {\r\n            this.timeAccumulator = 0;\r\n            AudioManager.getInstance().updateTheMusicStatus()\r\n        }\r\n        this.GoldNumberRoller.update(deltaTime); // 手动触发滚动逻辑\r\n        this.jackTotalNumberRoller.update(deltaTime); // 手动触发滚动逻辑\r\n    }\r\n    protected bindUI(): void {\r\n        // const flyCrane = this.startFlyingCrane()\r\n        // flyCrane.setScale(new Vec3(-1, 1, 1))\r\n        // this.scheduleOnce(() => {\r\n        // \tthis.startFlyingCrane()\r\n        // }, 3)\r\n        // 点击首页按钮\r\n        // this.homeButton.on(Node.EventType.TOUCH_END, () => {\r\n        //     AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n        //     AudioManager.getInstance().closeMusic(()=>{\r\n        //         global.closeSubGame()\r\n        //     });\r\n        // })\r\n        // 点击充值按钮\r\n        this.topButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击商城按钮\r\n        this.beliButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击礼包按钮\r\n        this.speclalButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop(BuyType.TAS)\r\n        })\r\n        // 点击设置按钮\r\n        this.settingButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openPersonCenter(2)\r\n        })\r\n        let audio: any = this.node.addComponent(AudioSource);\r\n        AudioManager.getInstance().setAudioSource(audio);\r\n        AudioManager.getInstance().playMusic(SceneBgMusic.mainBg, true);\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n        // bindClickEvent(this.startButton, () => { })\r\n    }\r\n}\r\n\r\n"]}