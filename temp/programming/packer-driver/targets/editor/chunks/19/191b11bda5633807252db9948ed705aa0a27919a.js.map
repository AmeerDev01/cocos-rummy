{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_BankPanel.ts"],"names":["_decorator","Button","EditBox","Label","Node","sys","Toggle","BaseComponent","InputValidator","getCookie","setCookie","ModalBox","config","getStore","ccclass","property","ShowModelType","TrasferDirectionType","Hall_BankPanel","propertyNode","props_btn_close_verify","props_btn_set","props_bank_goin","props_main_panel","props_bank_set","props_btn_close_set","props_btn_sure_verify","props_btn_main_close","props_set_btn_sure","props_intput_phone_phoneNum","props_Toggle_bank_goin","props_intput_sandi_pwd","props_intput_bank_set_pwd","props_EditBox_meng_goldNum","props_btn_bank_setor","props_btn_bank_meng","props_Label_akun_num","props_Label_saldo_num","props_btn_history","props","memberAssetGoldPieces","memberAssetSafeGoldPieces","events","onClosePanel","isMustSetPwd","Promise","resolve","verifyPwd","pwd","isToadyAutoLogin","transferCapital","amount","direction","setBankPassword","loginPassword","safePassword","start","initState","showModel","VERIFY","bindEvent","on","EventType","TOUCH_END","str","getComponent","string","isChecked","begin","isNotEmpty","done","then","setState","MAIN_PANEL","SET_PWD","str2","isAllNumber","isChartLength","trasfer","SETOR","MENGAMBILF","node","Instance","show","url","goldRecordUrl","localStorage","getItem","getState","memberInfo","memberId","type","isDecimal","useProps","key","value","cur","formatAmountWithCommas","bindUI","useState","active","result","update","deltaTime"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Button, Component, EditBox, Label, Node, sys, Toggle } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport InputValidator from '../../utils/InputValidator';\r\nimport { getCookie, setCookie } from '../../utils/tool';\r\nimport { hallAudio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport ModalBox from '../../common/ModalBox';\r\nimport { config } from '../config';\r\nimport { getStore } from '../store';\r\nconst { ccclass, property } = _decorator;\r\n\r\nenum ShowModelType {\r\n\tVERIFY,\r\n\tMAIN_PANEL,\r\n\tSET_PWD\r\n}\r\n\r\nexport enum TrasferDirectionType {\r\n\tSETOR = 1,\r\n\tMENGAMBILF = 2\r\n}\r\nexport interface IState {\r\n\tshowModel: ShowModelType\r\n}\r\n\r\nexport interface IProps {\r\n\tmemberAssetGoldPieces: number\r\n\tmemberAssetSafeGoldPieces: number\r\n}\r\nexport interface IEvent {\r\n\tonClosePanel?: () => void\r\n\t/**是否需要强制设置保险箱银行密码 */\r\n\tisMustSetPwd?: () => Promise<boolean>\r\n\t/**验证密码 */\r\n\tverifyPwd?: (pwd: string, isToadyAutoLogin: boolean) => Promise<boolean>\r\n\t/**存、取 */\r\n\ttransferCapital?: (amount: number, direction: TrasferDirectionType) => Promise<boolean>,\r\n\t/**设置银行密码 */\r\n\tsetBankPassword?: (loginPassword: string, safePassword: string) => Promise<boolean>\r\n}\r\n\r\n@ccclass('Hall_BankPanel')\r\nexport class Hall_BankPanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\t/**关闭验证框按钮 */\r\n\t\tprops_btn_close_verify: new Node(),\r\n\t\t/**设置密码按钮 */\r\n\t\tprops_btn_set: new Node(),\r\n\t\tprops_bank_goin: new Node(),\r\n\t\tprops_main_panel: new Node(),\r\n\t\tprops_bank_set: new Node(),\r\n\t\t/**关闭设置密码按钮 */\r\n\t\tprops_btn_close_set: new Node(),\r\n\t\t/**验证确认 */\r\n\t\tprops_btn_sure_verify: new Node(),\r\n\t\t/**关闭主窗体 */\r\n\t\tprops_btn_main_close: new Node(),\r\n\t\t/**确认重设密码按钮 */\r\n\t\tprops_set_btn_sure: new Node(),\r\n\t\t/**密码输入框 */\r\n\t\tprops_intput_phone_phoneNum: new Node(),\r\n\t\t/**是否今日免登录 */\r\n\t\tprops_Toggle_bank_goin: new Node(),\r\n\t\t/**设置密码，填入登录密码 */\r\n\t\tprops_intput_sandi_pwd: new Node(),\r\n\t\t/**设置银行密码 */\r\n\t\tprops_intput_bank_set_pwd: new Node(),\r\n\t\t/**存取额度 */\r\n\t\tprops_EditBox_meng_goldNum: new Node(),\r\n\t\t/**存按钮 */\r\n\t\tprops_btn_bank_setor: new Node(),\r\n\t\t/**取 */\r\n\t\tprops_btn_bank_meng: new Node(),\r\n\t\t/**保险箱余额 */\r\n\t\tprops_Label_akun_num: new Node(),\r\n\t\t/**银行余额 */\r\n\t\tprops_Label_saldo_num: new Node(),\r\n\t\t/**打开记录按钮 */\r\n\t\tprops_btn_history: new Button()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tmemberAssetGoldPieces: 0,\r\n\t\tmemberAssetSafeGoldPieces: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClosePanel: () => { },\r\n\t\tisMustSetPwd: () => new Promise((resolve) => resolve(false)),\r\n\t\tverifyPwd: (pwd: string, isToadyAutoLogin: boolean) => new Promise((resolve) => resolve(false)),\r\n\t\ttransferCapital: (amount: number, direction: TrasferDirectionType) => new Promise((resolve) => resolve(false)),\r\n\t\tsetBankPassword: (loginPassword: string, safePassword: string) => new Promise((resolve) => resolve(false))\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\tshowModel: ShowModelType.VERIFY\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\t/**关闭验证界面 */\r\n\t\tthis.propertyNode.props_btn_close_verify.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onClosePanel()\r\n\t\t})\r\n\t\t/**验证确认 */\r\n\t\tthis.propertyNode.props_btn_sure_verify.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst str = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string\r\n\t\t\tconst isToadyAutoLogin = this.propertyNode.props_Toggle_bank_goin.getComponent(Toggle).isChecked\r\n\t\t\tnew InputValidator().begin().isNotEmpty(str).done(() => {\r\n\t\t\t\tthis.events.verifyPwd(str, isToadyAutoLogin).then(() => {\r\n\t\t\t\t\tthis.setState({ showModel: ShowModelType.MAIN_PANEL })\r\n\t\t\t\t\tif (isToadyAutoLogin) {\r\n\t\t\t\t\t\tsetCookie('autoSafeLogin', 'true', 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\t/**关闭主界面 */\r\n\t\tthis.propertyNode.props_btn_main_close.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onClosePanel()\r\n\t\t})\r\n\t\t/**打开设置密码 */\r\n\t\tthis.propertyNode.props_btn_set.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.setState({ showModel: ShowModelType.SET_PWD })\r\n\t\t})\r\n\t\t/**关闭修改密码框 */\r\n\t\tthis.propertyNode.props_btn_close_set.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.setState({ showModel: ShowModelType.VERIFY })\r\n\t\t})\r\n\t\t/**确认修改密码 */\r\n\t\tthis.propertyNode.props_set_btn_sure.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst str = this.propertyNode.props_intput_sandi_pwd.getComponent(EditBox).string\r\n\t\t\tconst str2 = this.propertyNode.props_intput_bank_set_pwd.getComponent(EditBox).string\r\n\t\t\tnew InputValidator().begin().isNotEmpty(str).isAllNumber(str2).isChartLength([6, 12], str2).done(() => {\r\n\t\t\t\tthis.events.setBankPassword(str, str2).then(() => {\r\n\t\t\t\t\tthis.setState({ showModel: ShowModelType.VERIFY })\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_bank_setor.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.trasfer(this.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string, TrasferDirectionType.SETOR)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_bank_meng.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.trasfer(this.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string, TrasferDirectionType.MENGAMBILF)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_history.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t//打开记录\r\n\t\t\tModalBox.Instance().show({ url: config.goldRecordUrl + `?token=${sys.localStorage.getItem('token')}&memberId=${getStore().getState().memberInfo.memberId}`, type: \"Prompt\" })\r\n\t\t})\r\n\t}\r\n\tprivate trasfer(amount: string, direction: TrasferDirectionType) {\r\n\t\tnew InputValidator().begin().isNotEmpty(amount).isDecimal(amount).done(() => {\r\n\t\t\tthis.events.transferCapital(+amount, direction).then(() => {\r\n\t\t\t\tthis.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string = \"\"\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tkey === \"memberAssetGoldPieces\" && (this.propertyNode.props_Label_saldo_num.getComponent(Label).string = value.cur.formatAmountWithCommas())\r\n\t\tkey === \"memberAssetSafeGoldPieces\" && (this.propertyNode.props_Label_akun_num.getComponent(Label).string = value.cur.formatAmountWithCommas())\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tthis.propertyNode.props_bank_goin.active = false\r\n\t\t\tthis.propertyNode.props_main_panel.active = false\r\n\t\t\tthis.propertyNode.props_bank_set.active = false\r\n\t\t\tvalue.cur === ShowModelType.VERIFY && (this.propertyNode.props_bank_goin.active = true)\r\n\t\t\tvalue.cur === ShowModelType.MAIN_PANEL && (this.propertyNode.props_main_panel.active = true)\r\n\t\t\tvalue.cur === ShowModelType.SET_PWD && (this.propertyNode.props_bank_set.active = true)\r\n\t\t}, [\"showModel\"])\r\n\t\tthis.events.isMustSetPwd().then((result) => {\r\n\t\t\tif (!this) return\r\n\t\t\tif (result) {\r\n\t\t\t\tthis.setState({ showModel: ShowModelType.SET_PWD })\r\n\t\t\t} else {\r\n\t\t\t\tif (getCookie(\"autoSafeLogin\")) {\r\n\t\t\t\t\tthis.setState({ showModel: ShowModelType.MAIN_PANEL })\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}