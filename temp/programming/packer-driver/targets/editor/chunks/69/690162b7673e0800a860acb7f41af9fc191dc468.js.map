{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfc/Slot/Component/gxfc_Loader.ts"],"names":["_decorator","Component","Label","ProgressBar","Node","global","lang","ccclass","property","gxfc_Loader","loaderState","onLoad","getCloseBtn","active","node","getChildByName","start","on","EventType","TOUCH_END","closeSubGame","getLoaderState","setLoadingProgress","fileName","total","remain","isValid","progressBar","getComponent","str","progress","loaderTxt","string","toFixed","write","k","WebSocketModule","GameInit","placeStr","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,I,OAAAA,I;;AAC3CC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,I,iBAAAA,I;;;;;;;;;OACV;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;6BAGjBS,W,WADZF,OAAO,CAAC,aAAD,C,UAENC,QAAQ,CAACN,KAAD,C,2BAFV,MACaO,WADb,SACiCR,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA,eAGhCS,WAHgC,GAGpB,IAHoB;AAAA;;AAI7BC,QAAAA,MAAM,GAAS;AACrB,eAAKC,WAAL,GAAmBC,MAAnB,GAA4B,KAA5B;AACH;;AACOD,QAAAA,WAAW,GAAE;AACjB,iBAAO,KAAKE,IAAL,CAAUC,cAAV,CAAyB,kBAAzB,CAAP;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKJ,WAAL,GAAmBK,EAAnB,CAAsBb,IAAI,CAACc,SAAL,CAAeC,SAArC,EAA+C,MAAI;AAC/C,iBAAKT,WAAL,GAAiB,KAAjB;AACA;AAAA;AAAA,kCAAOU,YAAP;AACH,WAHD;AAIH;;AACDC,QAAAA,cAAc,GAAE;AACZ,iBAAO,KAAKX,WAAZ;AACH;AACJ;AACD;AACA;AACA;AACA;AACA;;;AACCY,QAAAA,kBAAkB,CAACC,QAAD,EAAmBC,KAAnB,EAAkCC,MAAlC,EAAkD;AAC7D,cAAG,CAAC,KAAKX,IAAN,IAAc,CAAC,KAAKA,IAAL,CAAUY,OAA5B,EAAqC;AACrC,cAAIC,WAAW,GAAC,KAAKb,IAAL,CAAUC,cAAV,CAAyB,mBAAzB,EAA8Ca,YAA9C,CAA2DzB,WAA3D,CAAhB;AACA,cAAI0B,GAAG,GAACJ,MAAM,GAACD,KAAf;AACAG,UAAAA,WAAW,CAACG,QAAZ,GAAsBD,GAAtB;AACN,eAAKE,SAAL,CAAeC,MAAf,GAAyB,GAAE,CAAC,CAAC,IAAGP,MAAM,GAACD,KAAX,IAAsB,GAAvB,EAA4BS,OAA5B,CAAoC,CAApC,CAAuC,GAAlE,CALmE,CAM7D;;AACA,cAAGJ,GAAG,IAAE,CAAR,EAAU;AACN,iBAAKE,SAAL,CAAeC,MAAf,GAAsB;AAAA;AAAA,8BAAKE,KAAL,CAAWC,CAAC,IAAIA,CAAC,CAACC,eAAF,CAAkBC,QAAlC,EAA4C,EAA5C,EAAgD;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAAhD,CAAtB;AACA;AACV;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvCyC,O;;;;;iBAEvB,I","sourcesContent":["import { _decorator, Component, Label, ProgressBar,Node } from 'cc';\r\nimport {global, lang} from \"../../../../hall\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('gxfc_Loader')\r\nexport class gxfc_Loader extends Component {\r\n\t@property(Label)\r\n\tloaderTxt: Label = null\r\n    public loaderState=true;\r\n    protected onLoad(): void {\r\n        this.getCloseBtn().active = false;\r\n    }\r\n    private getCloseBtn(){\r\n        return this.node.getChildByName('props_btn_return');\r\n    }\r\n    start() {\r\n        this.getCloseBtn().on(Node.EventType.TOUCH_END,()=>{\r\n            this.loaderState=false\r\n            global.closeSubGame()\r\n        })\r\n    }\r\n    getLoaderState(){\r\n        return this.loaderState\r\n    }\r\n\t/**\r\n\t *\r\n\t * @param fileName 资源名称\r\n\t * @param total 全部文件数量\r\n\t * @param remain 剩余的数量\r\n\t */\r\n\tsetLoadingProgress(fileName: string, total: number, remain: number) {\r\n        if(!this.node || !this.node.isValid) return;\r\n        let progressBar=this.node.getChildByName('props_progressBar').getComponent(ProgressBar)\r\n        let str=remain/total\r\n        progressBar.progress =str;\r\n\t\tthis.loaderTxt.string = `${((1-(remain/total) ) * 100).toFixed(0)}%`\r\n        //this.node.getChildByName('props_btn_return').active = remain !== 0;\r\n        if(str<=0){\r\n            this.loaderTxt.string=lang.write(k => k.WebSocketModule.GameInit, {}, { placeStr: \"Game init...\" })\r\n           }\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}