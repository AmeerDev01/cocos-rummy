{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragon/Slot/Component/dragon_Icon.ts"],"names":["_decorator","Node","Label","sp","UITransform","Widget","BaseComponent","iconConfig","ccclass","property","dragon_Icon","SkeletonData","iconId","iconDir","iconSize","bindUI","rootUi","root","getComponent","anchorY","setFace","icon","find","item","id","node","getChildByName","active","face","Skeleton","skeletonData","name","premultipliedAlpha","animation","animationArr","left","distance","top","destroy","setScale","scale","hiddenAmounts","amountNum","amount","string","setEffect","animationIndex","length","iseff","effectBorder","bindEvent","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, Label, Skeleton, sp, Sprite, SpriteAtlas, SpriteFrame, UITransform, Vec3, Widget } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nimport iconConfig from '../config'\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype ConfigType = {\r\n\tid: number\r\n\tname: string\r\n\tfileName: string\r\n\tanimationArr?: string[]\r\n\tdistance: number[],\r\n\tscale: number[],\r\n}\r\n\r\n@ccclass('dragon_Icon')\r\nexport class dragon_Icon extends BaseComponent {\r\n\t@property(Node)\r\n\tface: Node = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticon10: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonJ: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonQ: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonK: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ticonA: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\ttongqian: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tyuanbao: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tyaoqianshu: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tbaicai: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\twild: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tscatter: sp.SkeletonData = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tbaohe: sp.SkeletonData = null\r\n\r\n\t@property(Node)\r\n\teffectBorder: Node = null\r\n\r\n\t// private iconDir = {\r\n\t// \ticon_1: this.apple,\r\n\t// \ticon_2: this.banana,\r\n\t// \ticon_3: this.strawberry,\r\n\t// \ticon_4: this.watermelon,\r\n\t// \ticon_5: this.grape,\r\n\t// \ticon_6: this.bell,\r\n\t// \ticon_7: this.wild,\r\n\t// \ticon_8: this.icon777,\r\n\t// \ticon_9: this.bar1,\r\n\t// \ticon_10: this.bar2,\r\n\t// \ticon_11: this.bar3\r\n\t// }\r\n\r\n\tpublic iconId: number = 0\r\n\r\n\tprivate iconDir: ConfigType[]\r\n\tprivate iconSize: 'normal' | 'large' = 'normal'\r\n\tprivate iconConfig: ConfigType\r\n\r\n\tprotected bindUI(): void {\r\n\t\tconst rootUi = this.root.getComponent(UITransform) as UITransform\r\n\t\trootUi.anchorY = 1\r\n\r\n\t\t// rootUi.anchorX = 0\r\n\t}\r\n\t/**传入图标的ID */\r\n\tpublic setFace(iconId: number) {\r\n\t\tthis.iconId = iconId\r\n\t\tthis.iconDir = iconConfig.icon\r\n\t\tthis.iconConfig = this.iconDir.find(item => item.id === iconId)\r\n\t\tthis.node.getChildByName(\"face\").active = true\r\n\t\tthis.face.getComponent(sp.Skeleton).skeletonData = this[this.iconConfig.name]\r\n\t\tthis.face.getComponent(sp.Skeleton).premultipliedAlpha = false\r\n\t\tthis.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[0]\r\n\t\tthis.node.getChildByName(\"face\").getComponent(Widget).left = this.iconConfig.distance[0]\r\n\t\tthis.node.getChildByName(\"face\").getComponent(Widget).top = this.iconConfig.distance[1]\r\n\t\tif (this.iconConfig.name === 'scatter') {\r\n\t\t\tthis.node.getChildByName('focusBorder').destroy()\r\n\t\t}\r\n\t\tthis.face.setScale(this.iconConfig.scale[0], this.iconConfig.scale[1])\r\n\t\t// this.effectBorder.active = true\r\n\t}\r\n\tpublic hiddenAmounts(amountNum) {\r\n\t\tlet amount = this.node.getChildByName('amount')\r\n\t\tamount.getComponent(Label).string = amountNum + ''\r\n\t}\r\n\t/**启动或停止效果\r\n\t * animationIndex设置为0，或不设置的话，就停止效果\r\n\t */\r\n\tpublic setEffect(animationIndex: number = 0) {\r\n\t\t// this.face.getComponent(sp.Skeleton).setAnimation(1, this.iconConfig.animationArr[animationIndex], true)\r\n\t\tif (this.iconSize === 'large') return\r\n\t\tif (animationIndex > this.iconConfig.animationArr.length - 1) {\r\n\t\t\tanimationIndex = this.iconConfig.animationArr.length - 1\r\n\t\t}\r\n\t\tthis.node.getChildByName(\"face\").getComponent(sp.Skeleton).animation = this.iconConfig.animationArr[animationIndex]\r\n\t\tconst iseff = animationIndex === 0 ? false : true\r\n\t\tthis.effectBorder.active = iseff\r\n\t}\r\n\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}