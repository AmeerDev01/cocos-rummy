{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/game/Crash_Game_teenLayer.ts"],"names":["_decorator","Prefab","Node","instantiate","Label","Crash_ViewBase","RoomDrawingRecords","Crash_NetMsgDispatcher","Crash_DataManager","ProtocolCode","Crash_RecordItem","ccclass","property","Crash_Game_teenLayer","timeAccumulator","timer","start","_nodes","on","EventType","TOUCH_END","clearInterval","node","destroy","data","tableId","getInstance","getUserInfo","getTableId","regCallBack","RES_ROOM_DRAWING_RECORDS","sendChatRsp","setParams","send","window","setInterval","remNetCallBacks","removeAllProtocolByObj","bl","args","destroyAllChildren","teenList","forEach","item","index","recordItem","style","width","height","color","fontSize","getChildByName","active","getComponent","init","addChild","string","extraSmall","small","centre","big","max","onDestroy"],"mappings":"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","sourcesContent":["import { _decorator, Prefab, Node,instantiate,Label } from 'cc';\r\nimport {Crash_ViewBase} from \"../BaseView/Crash_ViewBase\";\r\nimport {RoomDrawingRecords} from \"../net/protocol/WsProtocol\";\r\nimport Crash_NetMsgDispatcher from \"../net/Crash_NetMsgDispatcher\";\r\nimport {Crash_DataManager} from \"../manager/Crash_DataManager\";\r\nimport {ProtocolCode} from \"../net/protocol/ProtocolDef\";\r\nimport { Crash_RecordItem } from './Crash_RecordItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Game_teenLayer')\r\nexport class Crash_Game_teenLayer extends Crash_ViewBase {\r\n    @property(Prefab)\r\n    recordItem:Prefab=null\r\n    timeAccumulator=0\r\n    timer\r\n    start() {\r\n        this._nodes['close'].on(Node.EventType.TOUCH_END, () => {\r\n            clearInterval(this.timer)\r\n            this.node.destroy()\r\n        })\r\n        let data={\r\n            tableId:Crash_DataManager.getInstance().getUserInfo().getTableId()\r\n        }\r\n        Crash_NetMsgDispatcher.getInstance().regCallBack(ProtocolCode.RES_ROOM_DRAWING_RECORDS, this, this.sendChatRsp);\r\n        new RoomDrawingRecords().setParams(data).send();\r\n        this.timer=window.setInterval(()=>{\r\n            new RoomDrawingRecords().setParams(data).send();\r\n        },4000)\r\n    }\r\n    private remNetCallBacks() {\r\n        Crash_NetMsgDispatcher.getInstance().removeAllProtocolByObj(this);\r\n    }\r\n    sendChatRsp(bl, data, args){\r\n        this._nodes['list1'].destroyAllChildren()\r\n        this._nodes['list2'].destroyAllChildren()\r\n        this._nodes['list3'].destroyAllChildren()\r\n        this._nodes['list4'].destroyAllChildren()\r\n        this._nodes['list5'].destroyAllChildren()\r\n        this._nodes['list6'].destroyAllChildren()\r\n        this._nodes['list7'].destroyAllChildren()\r\n        if(bl){\r\n            let teenList=data.data\r\n            teenList.data.forEach((item,index)=>{\r\n                let node:Node=instantiate(this.recordItem)\r\n                let  style={\r\n                    width:65,\r\n                    height:35,\r\n                    color:1,\r\n                    fontSize:18,\r\n                }\r\n                node.getChildByName('record_new').active=false\r\n                node.getComponent(Crash_RecordItem).init(item,style)\r\n                if(index<15){\r\n                    this._nodes['list1'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<30){\r\n                    this._nodes['list2'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<45){\r\n                    this._nodes['list3'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<60){\r\n                    this._nodes['list4'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<75){\r\n                    this._nodes['list5'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<90){\r\n                    this._nodes['list6'].addChild(node)\r\n                    return\r\n                }\r\n                if(index<100){\r\n                    if(index===99){\r\n                        node.getChildByName('record_new').active=true\r\n                    }\r\n                    this._nodes['list7'].addChild(node)\r\n                }\r\n            })\r\n            this._nodes['Label_One'].getComponent(Label).string=teenList.extraSmall\r\n            this._nodes['Label_Two'].getComponent(Label).string=teenList.small\r\n            this._nodes['Label_Three'].getComponent(Label).string=teenList.centre\r\n            this._nodes['Label_Four'].getComponent(Label).string=teenList.big\r\n            this._nodes['Label_Five'].getComponent(Label).string=teenList.max\r\n        }\r\n    }\r\n    protected onDestroy() {\r\n        this.remNetCallBacks()\r\n    }\r\n}\r\n\r\n\r\n"]}