{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfc/Slot/Component/gxfc_SlotBg.ts"],"names":["_decorator","Button","Animation","Label","Layers","AudioSource","Node","Prefab","sp","Sprite","SpriteFrame","UIOpacity","Vec3","BaseComponent","global","NumberRoller","AudioManager","SceneBgMusic","SoundList","BuyType","ccclass","property","gxfc_SlotBg","type","displayName","SkeletonData","GoldNumberRoller","timeAccumulator","autoLaunchState","start","bindUI","topButton","on","EventType","TOUCH_END","getInstance","playSound","buttonClick","openShop","beliButton","speclalButton","TAS","settingButton","openPersonCenter","audio","node","addComponent","setAudioSource","playMusic","mainBg","bindEvent","Balance_tips","bl","spr_nomoney","active","updateBetAmount","baseBetAmount","lineCount","betAmount","numberStr","formatAmountWithCommas","getComponent","string","updateScore","score","_nodes","setBtnState","state","num","setBtnLabel","str","setBg","bgNameIndex","gameBg","miniGameRingtones","spriteFrame","bg_1","setGold","label","startNumberMini","parseInt","replace","Number","startRolling","toFixed","labelStr","Math","abs","String","animation","play","triggeAutoLaunch","autoLaunch","undefined","setActiveButton","autoLaunchType","children","forEach","child","index","opacity","startFlyingCrane","ske","Skeleton","skeletonData","flyingCrane","addChild","setSiblingIndex","setPosition","layer","Enum","UI_2D","setDis_btn","disable","grayscale","setGreyOut","setDisable","button","startButton","sprite","update","deltaTime","updateTheMusicStatus"],"mappings":"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","sourcesContent":["import { _decorator, Button, Color, color, Component, Animation, Label, Layers, Material, AudioSource, Node, Prefab, sp, Sprite, SpriteFrame, SpriteRenderer, tween, UIOpacity, UITransform, Vec3 } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nimport { CommandDefine } from '../Const/CommandDefine';\r\nimport { RollerMediatorConst } from '../Mediator/RollerMediator';\r\nimport { bindClickEvent } from '../utils';\r\nimport { AutoLaunchType } from '../Repositories/BgRepository';\r\nimport {global} from \"db://assets/script/hall\";\r\nimport {NumberRoller} from \"../utils/NumberRoller\";\r\nimport {AudioManager, SceneBgMusic, SoundList} from \"../Managr/AudioManager\";\r\nimport {getBgProxy} from \"db://assets/script/subGame/godWealth/Slot/GodWealth_utils\";\r\nimport { BuyType } from '../../../../hall/components/Hall_ShopPanel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('gxfc_SlotBg')\r\nexport class gxfc_SlotBg extends BaseComponent {\r\n\r\n\t//返回首页\r\n\t@property(Node)\r\n\thomeButton: Node = null\r\n\r\n\t//充值按钮\r\n\t@property(Node)\r\n\ttopButton: Node = null\r\n\r\n\t//商城\r\n\t@property(Node)\r\n\tbeliButton: Node = null\r\n\r\n\t//礼包\r\n\t@property(Node)\r\n\tspeclalButton: Node = null\r\n\r\n\t//设置\r\n\t@property(Node)\r\n\tsettingButton: Node = null\r\n\r\n\t@property(Node)\r\n\tstartButton: Node = null\r\n\r\n\t@property(Node)\r\n\tbaseBet: Node = null\r\n\r\n\t@property(Node)\r\n\tbetAmount: Node = null\r\n\r\n\t@property(Node)\r\n\tlineCount: Node = null\r\n\r\n\t@property(Node)\r\n\tscore: Node = null\r\n\r\n\t@property(Node)\r\n\taddShift: Node = null\r\n\r\n\t@property(Node)\r\n\tsubtractShift: Node = null\r\n\t\r\n\t@property(Node)\r\n\tspr_nomoney: Node = null\r\n\r\n\t@property(Node)\r\n\tautoLaunch: Node = null\r\n\r\n\t@property(Node)\r\n\truleButton: Node = null\r\n\r\n    @property({ type: [SpriteFrame], displayName: 'BG' })\r\n    bg_1: Array<SpriteFrame> = [];\r\n\r\n\t@property(Node)\r\n\tgameArea: Node = null\r\n\r\n\t@property(Node)\r\n\taddBet: Node = null\r\n\r\n\t@property(Node)\r\n\tsubtractBet: Node = null\r\n\r\n\t@property(Node)\r\n\tmaxBet: Node = null\r\n\t@property(Prefab)\r\n\ttoast: Prefab = null\r\n\t@property(Node)\r\n\tpropsToggleFast: Node = null\r\n\t\r\n\t@property(sp.SkeletonData)\r\n\tflyingCrane: sp.SkeletonData = null\r\n\tprivate GoldNumberRoller: NumberRoller = new NumberRoller();\r\n\tprivate timeAccumulator:number=0\r\n\tautoLaunchState=false\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\r\n\r\n\tprotected bindUI(): void {\r\n\t\t// this.autoLaunch.children.forEach(child => {\r\n\t\t// \tchild.on(Node.EventType.TOUCH_START, ({ target }) => {\r\n\t\t// \t\t(target as Node).getComponent(UIOpacity).opacity = 0\r\n\t\t// \t})\r\n\t\t// \tchild.on(Node.EventType.TOUCH_END, ({ target }) => {\r\n\t\t// \t\ttween(target.getComponent(UIOpacity)).to(0.2, { opacity: 255 }).start();\r\n\t\t// \t})\r\n\t\t// })\r\n\t\t// const flyCrane = this.startFlyingCrane()\r\n\t\t// flyCrane.setScale(new Vec3(-1, 1, 1))\r\n\t\t// this.scheduleOnce(() => {\r\n\t\t// \tthis.startFlyingCrane()\r\n\t\t// }, 3)\r\n\r\n        // 点击首页按钮\r\n        // this.homeButton.on(Node.EventType.TOUCH_END, () => {\r\n        //     AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n        //     AudioManager.getInstance().closeMusic(()=>{\r\n        //         global.closeSubGame()\r\n        //     });\r\n        // })\r\n        // 点击充值按钮\r\n        this.topButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击商城按钮\r\n        this.beliButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        // 点击礼包按钮\r\n        this.speclalButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop(BuyType.TAS)\r\n        })\r\n        // 点击设置按钮\r\n        this.settingButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openPersonCenter(2)\r\n        })\r\n        let audio: any = this.node.addComponent(AudioSource);\r\n        AudioManager.getInstance().setAudioSource(audio);\r\n        AudioManager.getInstance().playMusic(SceneBgMusic.mainBg, true);\r\n    }\r\n\r\n\tprotected bindEvent(): void {\r\n\t\t// bindClickEvent(this.startButton, () => { })\r\n\t}\r\n\tpublic Balance_tips(bl){\r\n\t\tthis.spr_nomoney.active=bl\r\n\t}\r\n\r\n\t/**更新下注金额 */\r\n\tpublic updateBetAmount(baseBetAmount: number, lineCount: number): void {\r\n\t\tconst betAmount = baseBetAmount * lineCount\r\n\t\tlet numberStr: string = betAmount.formatAmountWithCommas()\r\n\t\t// if (betAmount > 1000 * 100) {\r\n\t\t// \t//显示K\r\n\t\t// } else if (betAmount > 10000 * 100) {\r\n\t\t// \t//显示M\r\n\t\t// } else {\r\n\t\t// \t//转为科学计数法\r\n\t\t// \tnumberStr = betAmount.formatAmountWithCommas()\r\n\t\t// }\r\n\t\tthis.lineCount.getComponent(Label).string = `${lineCount/2} × ${baseBetAmount}`;\r\n\t\tthis.betAmount.getComponent(Label).string = betAmount  / 2 + ''//numberStr\r\n\t}\r\n\r\n    /**更新积分 */\r\n    public updateScore(score: number): void {\r\n        if(score==0){\r\n            this._nodes['goodluck'].active=true\r\n            this._nodes['bottom_score'].active=false\r\n        }else {\r\n            this._nodes['goodluck'].active = false\r\n            this._nodes['bottom_score'].active = true\r\n            this.score.getComponent(Label).string = score + \"\"\r\n        }\r\n    }\r\n    /**更新按钮状态 */\r\n    public setBtnState(state,type=0,num?){\r\n        if(type==0){ // 主游戏按钮\r\n            this._nodes['STARTBG'].active=state\r\n            this._nodes['scrollingThePicture'].active=!state\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else if(type==1){ // 小游戏按钮\r\n            this._nodes['STARTBG'].active=false\r\n            this._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=true\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else{ // 自动按钮\r\n\t\t\tthis._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['STARTBG'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=true\r\n\t\t\tthis._nodes['AUTO'].getComponent(Label).string=num\r\n\t\t}\r\n    }\r\n    public setBtnLabel(str){\r\n       this._nodes['START'].getComponent(Label).string=str+\"\"\r\n    }\r\n\t/**设置背景图片 */\r\n\tpublic setBg(bgNameIndex:number) {\r\n        if(bgNameIndex===3){\r\n            AudioManager.getInstance().playMusic(SceneBgMusic.gameBg, true);\r\n            AudioManager.getInstance().playSound(SoundList.miniGameRingtones);\r\n        }else {\r\n            AudioManager.getInstance().playMusic(SceneBgMusic.mainBg, true);\r\n        }\r\n        this.node.getComponent(Sprite).spriteFrame = this.bg_1[bgNameIndex]\r\n\t}\r\n    // 更新金币数量\r\n    public setGold(str){\r\n        let label=  this._nodes['Moeny_Label'].getComponent(Label)\r\n        let startNumberMini =parseInt(label.string.replace(/,/g, \"\"));\r\n        if(startNumberMini - Number(str) == 0){\r\n            return false\r\n        }else{\r\n\t\t\tthis.GoldNumberRoller.startRolling(startNumberMini, str.toFixed(0), 500,label)\r\n\t\t\t// 漂浮效果\r\n\t\t\tthis._nodes['number2'].active=true\r\n\t\t\tlet labelStr=''\r\n\t\t\tif(startNumberMini - Number(str)<0){\r\n\t\t\t\tlabelStr='+'+ Math.abs(startNumberMini - Number(str))\r\n\t\t\t}else {\r\n\t\t\t\tlabelStr='-'+ (startNumberMini - Number(str))\r\n\t\t\t}\r\n\t\t\tthis._nodes['number2'].getComponent(Label).string= String(Number(labelStr).toFixed(0))\r\n\t\t\tlet animation:Animation =this._nodes['number2'].getComponent(Animation)\r\n\t\t\tanimation.play();\r\n\t\t}\r\n    }\r\n\t/**展示自动启动按钮组面板 */\r\n\tpublic triggeAutoLaunch(state?) {\r\n\t\tthis.autoLaunch.active=true\r\n\t\tif(state!==undefined&&state===false){\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t\tthis.autoLaunchState=false\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.autoLaunchState=!this.autoLaunchState\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_up')\r\n\t\t\t}else{\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**自动按钮设置为激活状态 */\r\n\tpublic setActiveButton(autoLaunchType: AutoLaunchType) {\r\n\t\tthis.autoLaunch.children.forEach((child, index) => {\r\n\t\t\tif (index === autoLaunchType) {\r\n\t\t\t\tchild.getComponent(UIOpacity).opacity = 60\r\n\t\t\t} else {\r\n\t\t\t\tchild.getComponent(UIOpacity).opacity = 255\r\n\t\t\t}\r\n\t\t})\r\n\t\tif(this.autoLaunchState){\r\n\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\tthis.autoLaunchState=false\r\n\t\t}\r\n\t}\r\n\r\n\t/**启动飞鹤 */\r\n\tpublic startFlyingCrane() {\r\n\t\tconst node = new Node(\"flyingCrane\")\r\n\t\tconst ske = node.addComponent(sp.Skeleton)\r\n\t\tske.skeletonData = this.flyingCrane\r\n\t\tske.animation = 'animation'\r\n\t\tthis.node.addChild(node)\r\n\t\tnode.setSiblingIndex(1)\r\n\t\tnode.setPosition(new Vec3(0, 0))\r\n\t\tnode.layer = Layers.Enum.UI_2D\r\n\t\treturn node\r\n\t\t// node.setPosition(new Vec3(640, -250))\r\n\t\t// tween(node).to(3, { position: new Vec3(-640, 250) }).call(() => {\r\n\t\t// \tthis.startFlyingCrane()\r\n\t\t// }).start()\r\n\t}\r\n    // 设置小游戏按钮置灰\r\n    setDis_btn(disable:boolean){\r\n        this._nodes['SZX_-'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['SZX_+'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['maxBet'].getComponent(Sprite).grayscale = disable\r\n    }\r\n\tsetGreyOut(str,disable){\r\n        this._nodes[str].getComponent(Sprite).grayscale = disable\r\n    }\r\n\t/**设置面板按钮可用性 */\r\n\tsetDisable(disable: boolean) {\r\n\t\t// const op = this.startButton.getComponent(UIOpacity)\r\n\t\t// op.opacity = disable ? 100 : 255\r\n\t\tconst button = this.startButton.getComponent(Button); // 获取节点的 Sprite 组件\r\n\t\t// button.interactable = disable\r\n\t\tconst sprite = this.startButton.getComponent(Sprite);\r\n\t\tsprite.grayscale = disable\r\n\r\n\t\t// const material = Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE); // 获取置灰材质\r\n\t\t// const material = Material.getInstantiatedBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE);\r\n\t\t// node.setMaterial(material, 0);\r\n\r\n\t\t// const mat = new Material();\r\n\t\t// mat.initialize({\r\n\t\t// \t// 通过 effect 名指定材质使用的着色器资源\r\n\t\t// \teffectAsset: 'pipeline/skybox',\r\n\t\t// \tdefines: {\r\n\t\t// \t\tUSE_RGBE_CUBEMAP: true\r\n\t\t// \t}\r\n\t\t// })\r\n\t\t// this.node.getComponent(Sprite).setMaterial(Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE + ''), 0);\r\n\t}\r\n\tupdate(deltaTime: number) {\r\n        this.timeAccumulator += deltaTime;\r\n        if (this.timeAccumulator >= 3) {\r\n            this.timeAccumulator = 0;\r\n            AudioManager.getInstance().updateTheMusicStatus()\r\n        }\r\n        this.GoldNumberRoller.update(deltaTime); // 手动触发滚动逻辑\r\n\t}\r\n}\r\n\r\n"]}