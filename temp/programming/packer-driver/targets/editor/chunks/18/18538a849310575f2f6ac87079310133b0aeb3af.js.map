{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/egypt/Slot/Repositories/SocketRepository.ts"],"names":["SocketRepository","sys","BaseRepository","initConfig","wsEnv","isTest","online","socketIp","localStorage","getItem","local1","local2","configUrl","constructor","userSwitch","userServerData","memberAssetGoldPieces","memberId","tableId","gameType","lv","rollerLaunchResult","socketConfig","env","Promise","reslove","reject","then","response","item","gameConfig","find","id","gameId","Object","assign","ws","token"],"mappings":"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","sourcesContent":["import { sys } from \"cc\"\r\nimport { BaseRepository } from \"./BaseRepository\"\r\nimport {initConfig} from \"../../../../hall/config\"\r\n\r\nconst wsEnv = {\r\n    isTest:false,\r\n\tonline: {\r\n\t\tsocketIp: \"ws://54.251.66.82:15004/ws\",\r\n\t\t\"token\": sys.localStorage.getItem(\"token\") || \"eyJhbGciOiJIUzI1NiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAE2OQQ4CIQwA_9IzJAVaCvsDz74AsBsxQTeGg4nx7-568jqZTOYNvUxYXEySPXmJBvS1_UBin_EAt9lhgeATNUGxmKlZklpszYUto1vbKkmJFQwMHVWfp8uRkJDRJY6JgwvORzawXR933WuIbpdnH3qeZWz_B5nw8wWs-uValwAAAA.KoZBDxO_R5t83CylHrZezG1sR041kiXFAhAtRqm0U1Q\",\r\n\t\t\"gameId\": 8,\r\n\t\t\"roomId\": \"1674025871406534658\"\r\n\t},\r\n\tlocal1: {\r\n\t\tsocketIp: \"ws://192.168.110.180:15003/ws\",\r\n\t\t\"token\": \"eyJhbGciOiJIUzI1NiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAE3OSwoCMRBF0b3UOIH8q9I7cOwKKqbECNEgGTSIezftyOnlcXhvaDxhs4mQQnKYFcg-foFCtOYI99lgA19cJI5Fh2txOlhjdUnitKVLYZYaKyMo6NKLvE71INA5JL9goow5RFQwbs-HLM0Yu8azdTlP7uP_QfL58wW0590YlwAAAA.9BQAUrc0Nx-O8_g6jMcCtlCiWmzId9zaxOJoEy6slTs\",\r\n\t\t\"gameId\": 8,\r\n\t\t\"roomId\": \"1673666642699055106\"\r\n\t},\r\n\tlocal2: {\r\n\t\tsocketIp: \"ws://192.168.110.218:15004/ws\",\r\n\t\t\"token\": \"eyJhbGciOiJIUzI1NiIsInppcCI6IkdaSVAifQ.H4sIAAAAAAAAAE2NQQoDIQwA_5KzQjQxmv1Bz32BuypYEJbioVD69630UuY2h5k39Dxhc5KUyKXoDdTX-RNKIks8ZocNOJSm6VDbqqhlZG_zEclKcw33oFyQwcCoY6_PW1mJqAlDpC-MK04GZh_1PvM4_58ew-cCIHa_h4kAAAA.T8633CWVFeRPedw7EOOzL5tA3fMs-jFcJE_gBwzwG5Q\",\r\n\t\t\"gameId\": 8,\r\n\t\t\"roomId\": \"1674785272564289538\"\r\n\t}\r\n}\r\nconst configUrl = \"http://54.251.66.82:10001/hall/api/game/wsList\"\r\nexport class SocketRepository extends BaseRepository {\r\n    constructor() {\r\n        super()\r\n    }\r\n    public socketConfig(): Promise<{ socketIp: string, token: string, gameId: number, roomId: string }> {\r\n        const env = wsEnv.online\r\n        if(wsEnv.isTest){\r\n            return new Promise((reslove, reject) => {\r\n                reslove(wsEnv.local2)\r\n            })\r\n        }else {\r\n            return new Promise((reslove, reject) => {\r\n                initConfig().then((response) => {\r\n                    const item = response.gameConfig.find(item => item.id === env.gameId)\r\n                    if (item) {\r\n                        reslove(Object.assign(env, {\r\n                            socketIp: item.ws,\r\n                            token: sys.localStorage.getItem(\"token\")\r\n                        }))\r\n                    } else {\r\n                        reject(\"gameID未找到\")\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n\t/**用户下注的档位序号 */\r\n\tpublic userSwitch: number = 1\r\n\r\n\tpublic userServerData = {\r\n\t\tmemberAssetGoldPieces: 0,//10300000,\r\n\t\tmemberId: \"\",//\"1668156680288485378\",\r\n\t\ttableId: \"\",//\"1660486324357214210\"\r\n\t\tgameType: 0, //初始的游戏\r\n\t\tlv: 0\r\n\t}\r\n\t/**下注之后获取的最后一次结果数据 */\r\n\tpublic rollerLaunchResult = {\r\n\t\t\"dl\": {\r\n\t\t\t\"si\": [{\r\n                /**本轮结算之后的余额 */\r\n                \"bl\": 13360000,\r\n                /**扣除下注金额之后的余额 */\r\n                \"blab\": 13210000,\r\n                /**转之前的余额 */\r\n                \"blb\": 13300000,\r\n                /**气泡奖励 */\r\n                \"bubble\": 0,\r\n                // /**投注金额 */\r\n                // \"cs\": 0,\r\n                \"iconStay\": 0,\r\n                /**要定住的图标 */\r\n                \"fixedChessboardIcon\": [],\r\n                /**这一此转动获得的奖励 */\r\n                \"ctw\": 0,\r\n                /**免费游戏的图标和位置 */\r\n                \"freegame\": { \"1\": 150000 },\r\n                /**剩余小游戏次数 */\r\n                \"freeCount\": 20,\r\n                /**免费游戏（小游戏）的得分奖励 */\r\n                \"freeGameAmount\": 0,\r\n                \"gameType\": 0,\r\n                /**本轮中奖的道具及该道具对应的奖励金额 */\r\n                \"lw\": { \"6\": 0 },\r\n                /**获得的奖励倍数 */\r\n                \"magnification\": 10,\r\n                /**盈亏情况 */\r\n                \"np\": 0,\r\n                /**\t5条滚轴对应的道具ID【上升或下降前】 */\r\n                \"rl\": [[9, 10, 11], [6, 7, 8], [6, 7, 8], [2, 3, 4], [7, 8, 9]],\r\n                /**滚轴Id */\r\n                \"rollerId\": [9, 39, 39, 24, 29],\r\n                /**页面出现\"上升/下降\"图标的个数 */\r\n                \"sc\": 0,\r\n                /**进入的小游戏ID，0不进入，1对应小游戏1,2对应小游戏2。 */\r\n                \"sgb\": 0,\r\n                /**每条线的投注额 */\r\n                \"tb\": 10000,\r\n                /**本轮投注总额 */\r\n                \"tbb\": 90000,\r\n                /**总奖励 */\r\n                \"tw\": 0,\r\n                /**中奖的道具ID以及位置，格式为：“中奖图标ID”[[滚轴id,滚轴上的图标ID]] */\r\n                \"wp\": { \"2\": [[0, 0], [1, 0], [2, 0]] }\r\n            }]\r\n\t\t}\r\n\t}\r\n}\r\n"]}