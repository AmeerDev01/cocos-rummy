{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/yxx/store/reducer/gameFlow.ts"],"names":["reduxAct","default","config","AnimationStatus","GameStatus","ActionTypes","initState","copy","createReducer","YXX_COUNTDOWN","state","payload","countdown","YXX_CHANGE_GAME_STATUS","gameStatus","results","newResult","animationStatus","STOP_BET","result","length","gameOption","resultArrayMax","shift","push","BET","IDLE","second","QUIT_GAME","YXX_INIT_RESULT","YXX_CHNAGE_ANIMATION_STATUS","YXX_TIP_TYPE","tipType"],"mappings":"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","sourcesContent":["import { instantiate, log } from 'cc';\r\nimport { default as reduxAct } from 'redux-act';\r\nimport config from '../../config';\r\nimport { AnimationStatus, GameStatus } from '../../type';\r\nimport { ActionPayLoad, ActionTypes, InitStateType, initState } from \"../actions/gameFlow\";\r\nimport { copy } from '../../../../utils/tool';\r\n\r\nexport default reduxAct.createReducer<InitStateType>({\r\n  [ActionTypes.YXX_COUNTDOWN]: (state, payload: ActionPayLoad<ActionTypes.YXX_COUNTDOWN>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      countdown: payload.countdown\r\n    }\r\n  },\r\n  [ActionTypes.YXX_CHANGE_GAME_STATUS]: (state, payload: ActionPayLoad<ActionTypes.YXX_CHANGE_GAME_STATUS>): InitStateType => {\r\n    if (state.gameStatus === payload.gameStatus) {\r\n      return { ...state };\r\n    }\r\n\r\n    // const _state = instantiate(state);\r\n\r\n    let results = copy(state.results);\r\n    const gameStatus = payload.gameStatus;\r\n    let newResult = null;\r\n    let countdown = 0;\r\n    let animationStatus = null;\r\n\r\n    if (payload.gameStatus === GameStatus.STOP_BET && payload.result) {\r\n      // log(\"YXX_CHANGE_GAME_STATUS: \", payload.result);\r\n      newResult = payload.result;\r\n      // 数组操作了最大值就删除\r\n      if (results.length >= config.gameOption.resultArrayMax) {\r\n        results.shift();\r\n      }\r\n      results.push(payload.result);\r\n    } else if (payload.gameStatus === GameStatus.BET) {\r\n      animationStatus = AnimationStatus.IDLE;\r\n      countdown = payload.second;\r\n    } else if (payload.gameStatus === GameStatus.QUIT_GAME) {\r\n      animationStatus = AnimationStatus.IDLE;\r\n      results = [];\r\n      newResult = null;\r\n    }\r\n\r\n    // log(\"YXX_CHANGE_GAME_STATUS\", payload.gameStatus, payload.result);\r\n    return {\r\n      ...state,\r\n      gameStatus: gameStatus,\r\n      results: results,\r\n      newResult: newResult,\r\n      countdown: countdown,\r\n      animationStatus: animationStatus,\r\n    }\r\n  },\r\n  [ActionTypes.YXX_INIT_RESULT]: (state, payload: ActionPayLoad<ActionTypes.YXX_INIT_RESULT>): InitStateType => {\r\n    // log(\"YXX_INIT_RESULT\", payload.results);\r\n    return {\r\n      ...state,\r\n      results: payload.results\r\n    }\r\n  },\r\n  [ActionTypes.YXX_CHNAGE_ANIMATION_STATUS]: (state, payload: ActionPayLoad<ActionTypes.YXX_CHNAGE_ANIMATION_STATUS>): InitStateType => {\r\n    // log(\"YXX_CHNAGE_ANIMATION_STATUS == \", payload.animationStatus);\r\n    return {\r\n      ...state,\r\n      animationStatus: payload.animationStatus\r\n    }\r\n  },\r\n  [ActionTypes.YXX_TIP_TYPE]: (state, payload: ActionPayLoad<ActionTypes.YXX_TIP_TYPE>): InitStateType => {\r\n    return {\r\n      ...state,\r\n      tipType: payload.tipType\r\n    }\r\n  },\r\n}, initState);"]}