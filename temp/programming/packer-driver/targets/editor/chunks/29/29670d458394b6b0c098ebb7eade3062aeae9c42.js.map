{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandar/components/Bandar_users.ts"],"names":["_decorator","instantiate","Label","Node","Sprite","SpriteFrame","tween","Vec3","Animation","BaseComponent","getNodeByNameDeep","omitStr","config","gameCacheData","global","bundleBanDar","mainGameViewModel","TaskScheduler","GameType","ccclass","property","Bandar_users","taskScheduler","propertyNode","props_btn_users1","props_spr_icon","props_skeleton","props_skeleton_win1","props","newBetData","usersInfo","allWinUsers","events","giveGift","value","memberId","num","start","initState","bindEvent","useProps","key","cur","playFlyChipWinAnimation","isUnMount","initUsers","forEach","item","index","initBSUsers","copyWinAnimation","seatNum","removeAllChildren","headLocations","winAnimation","active","setPosition","x","y","addChild","number","node","usersNode","children","find","name","startsWith","userHead","loadHeadSprite","icon","getComponent","string","gold","formatAmountWithLetter","memberName","playAddGold","betInfo","winGold","u","startPosition","position","by","call","scheduleOnce","users","play","i","load","err","sp","spriteFrame","bindUI","initHeadClick","filter","v","userIndex","getHeadNodeIndex","on","EventType","TOUCH_END","userInfo","showGiftWindow","BANDAR","head","userNode","parseInt","replace","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator,instantiate,Label,Node, Sprite, SpriteFrame, tween, Vec3, Animation, sp } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { getNodeByNameDeep, getNodePositionInCanvas, initToggle, omitStr } from '../../../utils/tool';\r\nimport config from '../config';\r\nimport BetAreaViewModel from '../../yxx/viewModel/BetAreaViewModel';\r\nimport { BetData, gameCacheData, MemberInfoVo } from '../type';\r\nimport { global } from '../../../hall';\r\nimport { setUsersInfoAction } from '../store/actions/game';\r\nimport { bundleBanDar, mainGameViewModel } from '../index';\r\nimport { WinUser } from '../store/actions/bet';\r\nimport { footerViewModel, onlineViewModel } from '../viewModel/BandarGameBoardViewModel';\r\nimport TaskScheduler, { Task } from '../../../utils/TaskScheduler';\r\nimport { GameType } from '../../../common/viewModel/GiftUserViewModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tnewBetData:BetData,\r\n\tusersInfo:MemberInfoVo[],\r\n\tallWinUsers:WinUser[],\r\n}\r\nexport interface IEvent {\r\n\tgiveGift: (value: number, memberId: string, num: number) => void\r\n}\r\n\r\n\r\n@ccclass('Bandar_users')\r\nexport class Bandar_users extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate taskScheduler:TaskScheduler=new TaskScheduler()\r\n\tstart() {\r\n\t\t \r\n\t }\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_users1:new Node(),\r\n\t\tprops_spr_icon:new Node(),\r\n\t\tprops_skeleton:new Node(),\r\n\t\tprops_skeleton_win1:new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tnewBetData:null,\r\n\t\tusersInfo:null,\r\n\t\tallWinUsers:null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tgiveGift: (value: number, memberId: string, num: number) => {}\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\r\n\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif(key===\"newBetData\"){\r\n\t\t\tif(!value.cur){ return }\r\n\t\t\tthis.playFlyChipWinAnimation(value.cur);\r\n \r\n\t\t }\r\n\r\n\t\t if(key===\"allWinUsers\"){\r\n\r\n\t\t }\r\n\r\n\t\t if(key===\"usersInfo\"){\r\n\t\t\t//  window.setTimeout(() => {\r\n\t\t\t\tif(mainGameViewModel.isUnMount || !value.cur){ return }\r\n\t\t\t\tthis.initUsers()\r\n\t\t\t\tvalue.cur.forEach((item,index)=>{\r\n\t\t\t\t\tthis.initBSUsers(item,item.index)\r\n\t\t\t\t})\r\n\t\t\t// },5000)\r\n\t\t\t\r\n\t\t }\r\n\t\t \r\n\t}\r\n\r\n\t/**\r\n\t * 添加win动画效果\r\n\t * @param seatNum 榜上座位号\r\n\t */\r\n\tpublic copyWinAnimation(seatNum:number){\r\n\t\t//    console.log(\"copyWinAnimation\");\r\n\t\tthis.propertyNode.props_skeleton.removeAllChildren()\r\n\t\tlet item = config.headLocations[seatNum]\r\n\t\tlet winAnimation = instantiate(this.propertyNode.props_skeleton_win1);\r\n\t\twinAnimation.active = true;\r\n\t\twinAnimation.setPosition(item.x,item.y);\r\n\t\t//    winAnimation.getComponent(sp.Skeleton).animation=\"animation\"\r\n\t\t//    console.log(\"winAnimation\",winAnimation);\r\n\t   \r\n\t   this.propertyNode.props_skeleton.addChild(winAnimation);\r\n\t}\r\n\r\n\t/** 初始化榜上用户信息 */\r\n\tpublic initBSUsers(usersInfo:MemberInfoVo,number){\r\n\t\tif (!this.node) { return };\r\n\t\tlet num = number + 1;\r\n        const usersNode=this.node.children.find( item => item.name.startsWith(\"props_btn_users\"+num));\r\n\t\tconst userHead=this.node.children.find( item => item.name.startsWith(\"spr_user\"+num));\r\n\t\tuserHead.active = true;\r\n\t\tglobal.loadHeadSprite(usersInfo.icon,userHead.getComponent(Sprite));//加载头像\r\n\t\tgetNodeByNameDeep(\"Label_gold\",usersNode).getComponent(Label).string=usersInfo.gold.formatAmountWithLetter();\r\n\t\tgetNodeByNameDeep(\"Label_name\",usersNode).getComponent(Label).string=omitStr(usersInfo.memberName,12);\r\n\t}\r\n\r\n\t/** 赢钱的动画 +1K */\r\n\tpublic playAddGold(betInfo, winGold:number){\r\n\r\n\t\tlet num = betInfo.index + 1;\r\n\t\tconst usersNode = this.node.children.find( u => u.name.startsWith(\"props_btn_users\"+num) )\r\n\t\tconst node = getNodeByNameDeep(\"Label_gold_up\", usersNode);\r\n\t\tnode.getComponent(Label).string=\"+\" + betInfo.gold.formatAmountWithLetter()\r\n\t\tif(winGold <= 0) return;\r\n\t\tconst startPosition = new Vec3(node.position.x, node.position.y);\r\n\t\tnode.active = true;\r\n\r\n\t\ttween(node).by(1, { position: new Vec3(0, 30) }).call(() => {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tnode.active = false;\r\n\t\t\t\tnode.setPosition(startPosition);\r\n\t\t\t}, 0.5);\r\n\t\t}).start();\r\n    }\r\n\r\n\t/**飞金币的动画 */\r\n\tprivate playFlyChipWinAnimation(betInfo){\r\n\r\n\t\tif(betInfo.index > 6 || betInfo.memberId === gameCacheData.memberId){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet num = betInfo.index+1;\r\n\t\tconst usersNode = this.node.children.find( u => u.name.startsWith(\"props_btn_users\"+num) );\r\n\t\tconst users = this.node.children.find( u => u.name.startsWith(\"spr_user\"+num) );\r\n\t\tusersNode.getComponent(Animation).play();\r\n\t\tusers.getComponent(Animation).play();\r\n\t}\r\n\t\r\n\t/**初始用户头像 */\r\n\tprivate initUsers() {\r\n\t\tfor (let i = 0; i < 6; i++){\r\n\t\t\tif (this.node) {\r\n\t\t\t   let num=i+1\r\n\t\t\t   const usersNode=this.node.children.find( item => item.name.startsWith(\"props_btn_users\"+num));\r\n\t\t\t\tconst userHead = this.node.children.find(item => item.name.startsWith(\"spr_user\" + num));\r\n\t\t\t\tuserHead.active = false;\r\n\t\t\t   // global.loadHeadSprite(usersInfo.icon,userHead.getComponent(Sprite));//加载头像\r\n\t\t\t   getNodeByNameDeep(\"Label_gold\",usersNode).getComponent(Label).string=\"\";\r\n\t\t\t   getNodeByNameDeep(\"Label_name\",usersNode).getComponent(Label).string=\"\";\r\n\t\t\t   bundleBanDar.load(`img/head1/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\t   if (!err) {\r\n\t\t\t\t\t   userHead.getComponent(Sprite).spriteFrame = sp;\r\n\t\t\t\t   }\r\n\t\t\t   })\r\n\t\t   }\r\n\t\t   \r\n\t   }\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.initUsers()\r\n\t\tthis.propertyNode.props_skeleton_win1.active = false;\r\n\t\tthis.initHeadClick();\r\n    }\r\n\r\n\t\r\n\tprivate initHeadClick(){\r\n\t\tthis.node.children.filter(v=>v.name.startsWith(\"props_btn_users\")).forEach(v=>{\r\n\t\t\tconst userIndex = this.getHeadNodeIndex(v);\r\n\t\t\tv.on(Node.EventType.TOUCH_END, ()=>{\r\n\t\t\t\tconst userInfo = this.props.usersInfo.find(v=>v.index === userIndex - 1);\r\n\t\t\t\tuserInfo && userInfo.memberId !== gameCacheData.memberId && global.showGiftWindow(GameType.BANDAR, {\r\n\t\t\t\t\tmemberId: userInfo.memberId,\r\n\t\t\t\t\thead: userInfo.icon,\r\n\t\t\t\t\tgold: userInfo.gold,\r\n\t\t\t\t\tname: userInfo.memberName,\r\n\t\t\t\t}, (value: number, memberId: string) => {\r\n\t\t\t\t\tthis.events.giveGift(value, memberId, 0);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getHeadNodeIndex(userNode:Node){\r\n\t\treturn parseInt(userNode.name.replace(\"props_btn_users\", \"\"));\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n"]}