{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealth/Slot/Component/GodWealth_SlotBg.ts"],"names":["_decorator","Button","Animation","AudioSource","find","instantiate","Label","Layers","Node","Prefab","sp","Sprite","SpriteFrame","UIOpacity","Vec3","GodWealth_BaseComponent","getBgProxy","global","NumberRoller","AudioManager","SceneBgMusic","SoundList","BuyType","ccclass","property","GodWealth_SlotBg","SkeletonData","GoldNumberRoller","timeAccumulator","autoLaunchState","startPos","start","setTimeout","_nodes","setSiblingIndex","bindUI","flyCrane","startFlyingCrane","setScale","scheduleOnce","topButton","on","EventType","TOUCH_END","getInstance","playSound","buttonClick","openShop","beliButton","speclalButton","TAS","settingButton","openPersonCenter","audio","node","addComponent","setAudioSource","playMusic","mainBg","bindEvent","updateBetAmount","baseBetAmount","lineCount","betAmount","numberStr","formatAmountWithCommas","getComponent","string","setBtnState","state","type","num","active","console","log","updateScore","score","setBtnLabel","str","toString","Balance_tips","bl","spr_nomoney","setBg","bgName","spriteFrame","setGold","label","getChildByName","startNumberMini","parseInt","replace","Number","labelStr","Math","abs","String","toFixed","animation","play","startRolling","triggeAutoLaunch","undefined","autoLaunch","setActiveButton","autoLaunchType","children","forEach","child","index","opacity","setJACKPOT","jackPotData","sprList","getSpriteFrames","JackPotContent","destroyAllChildren","item","headImgUrl","avatarIndex","spr","name","JackPotItem","nickName","winningAmount","addChild","handoffJACKPOT","ske","Skeleton","skeletonData","flyingCrane","setPosition","layer","Enum","UI_2D","setDis_btn","disable","grayscale","setGreyOut","setDisable","button","startButton","sprite","update","deltaTime","updateTheMusicStatus"],"mappings":"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","sourcesContent":["import { _decorator, Button, Animation , AudioSource, find, instantiate, Label, Layers, Material, Node, Prefab, sp, Sprite, SpriteFrame, SpriteRenderer, tween, UIOpacity, UITransform, Vec3, log } from 'cc';\r\nimport GodWealth_BaseComponent from './GodWealth_BaseComponent';\r\nimport { CommandDefine } from '../Const/CommandDefine';\r\nimport { RollerMediatorConst } from '../Mediator/RollerMediator';\r\nimport {bindClickEvent, getBgProxy} from '../GodWealth_utils';\r\nimport { AutoLaunchType } from '../Repositories/BgRepository';\r\nimport { global } from '../../../../hall';\r\nimport {NumberRoller} from \"../utils/NumberRoller\";\r\nimport {AudioManager, SceneBgMusic, SoundList} from \"../Managr/AudioManager\";\r\nimport { BuyType } from '../../../../hall/components/Hall_ShopPanel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GodWealth_SlotBg')\r\nexport class GodWealth_SlotBg extends GodWealth_BaseComponent {\r\n\r\n\t//返回首页\r\n\t@property(Node)\r\n\thomeButton: Node = null\r\n\r\n\t//充值按钮\r\n\t@property(Node)\r\n\ttopButton: Node = null\r\n\r\n\t//商城\r\n\t@property(Node)\r\n\tbeliButton: Node = null\r\n\r\n\t//礼包\r\n\t@property(Node)\r\n\tspeclalButton: Node = null\r\n\r\n\t//设置\r\n\t@property(Node)\r\n\tsettingButton: Node = null\r\n\r\n\t@property(Node)\r\n\tstartButton: Node = null\r\n\r\n\t@property(Node)\r\n\tbaseBet: Node = null\r\n\r\n\t@property(Node)\r\n\tbetAmount: Node = null\r\n\r\n\t@property(Node)\r\n\tlineCount: Node = null\r\n\r\n\t@property(Node)\r\n\tscore: Node = null\r\n\r\n\t@property(Node)\r\n\taddShift: Node = null\r\n\r\n\t@property(Node)\r\n\tsubtractShift: Node = null\r\n\r\n\t@property(Node)\r\n\tautoLaunch: Node = null\r\n\r\n\t@property(Node)\r\n\truleButton: Node = null\r\n\r\n\t@property(Node)\r\n\t\r\n\tspr_nomoney: Node = null\r\n\r\n\t@property(SpriteFrame)\r\n\tbg_1: SpriteFrame = null\r\n\r\n\t@property(Node)\r\n\tgameArea: Node = null\r\n\r\n\t@property(Node)\r\n\taddBet: Node = null\r\n\r\n\t@property(Node)\r\n\tsubtractBet: Node = null\r\n\r\n\t@property(Node)\r\n\tmaxBet: Node = null\r\n\t@property(Prefab)\r\n\ttoast: Prefab = null\r\n\t@property(Node)\r\n\tpropsToggleFast: Node = null\r\n\r\n\t@property(sp.SkeletonData)\r\n\tflyingCrane: sp.SkeletonData = null\r\n\r\n    @property(Node)\r\n    JackPotContent:Node=null\r\n\r\n    @property(Node)\r\n    JackPotItem:Node=null\r\n    private GoldNumberRoller: NumberRoller = new NumberRoller();\r\n    private timeAccumulator:number=0\r\n\tautoLaunchState=false\r\n\tstartPos = null; // 初始触摸位置\r\n\tstart() {\r\n        setTimeout(()=>{\r\n            this._nodes['Up_Feature'].setSiblingIndex(9999)\r\n        },100)\r\n\t}\r\n\tprotected bindUI(): void {\r\n\t\t// this.autoLaunch.children.forEach(child => {\r\n\t\t// \tchild.on(Node.EventType.TOUCH_START, ({ target }) => {\r\n\t\t// \t\t(target as Node).getComponent(UIOpacity).opacity = 0\r\n\t\t// \t})\r\n\t\t// \tchild.on(Node.EventType.TOUCH_END, ({ target }) => {\r\n\t\t// \t\ttween(target.getComponent(UIOpacity)).to(0.2, { opacity: 255 }).start();\r\n\t\t// \t})\r\n\t\t// })\r\n\t\tconst flyCrane = this.startFlyingCrane()\r\n\t\tflyCrane.setScale(new Vec3(-1, 1, 1))\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tthis.startFlyingCrane()\r\n\t\t}, 3)\r\n\r\n\t\t// 点击充值按钮\r\n\t\tthis.topButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n\r\n\t\t})\r\n\t\t// 点击商城按钮\r\n\t\tthis.beliButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n\t\t})\r\n\t\t// 点击礼包按钮\r\n\t\tthis.speclalButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop(BuyType.TAS)\r\n\t\t})\r\n\t\t// 点击设置按钮\r\n\t\tthis.settingButton.on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openPersonCenter(2)\r\n\t\t})\r\n        let audio: any = this.node.addComponent(AudioSource);\r\n        AudioManager.getInstance().setAudioSource(audio);\r\n        AudioManager.getInstance().playMusic(SceneBgMusic.mainBg, true);\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\t// bindClickEvent(this.startButton, () => { })\r\n\t}\r\n\r\n\t/**更新下注金额 */\r\n\tpublic updateBetAmount(baseBetAmount: number, lineCount: number): void {\r\n\t\tconst betAmount = baseBetAmount * lineCount\r\n\t\tlet numberStr: string = betAmount.formatAmountWithCommas()\r\n\t\tthis.lineCount.getComponent(Label).string = `${lineCount} × ${baseBetAmount}`;\r\n\t\tthis.betAmount.getComponent(Label).string = betAmount + ''//numberStr\r\n\t}\r\n    /**更新按钮状态 */\r\n\tpublic setBtnState(state,type=0,num?){\r\n        if(type==0){ // 主游戏按钮\r\n            this._nodes['STARTBG'].active=state\r\n            this._nodes['scrollingThePicture'].active=!state\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else if(type==1){ // 小游戏按钮\r\n            this._nodes['STARTBG'].active=false\r\n            this._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=true\r\n\t\t\tthis._nodes['AUTO'].active=false\r\n        }else{ // 自动按钮\r\n\t\t\tthis._nodes['scrollingThePicture'].active=false\r\n            this._nodes['START'].active=false\r\n\t\t\tthis._nodes['STARTBG'].active=false\r\n\t\t\tthis._nodes['AUTO'].active=true\r\n\t\t\tconsole.log(num);\r\n\t\t\tthis._nodes['AUTO'].getComponent(Label).string=num\r\n\t\t}\r\n    }\r\n\t/**更新积分 */\r\n\tpublic updateScore(score: number): void {\r\n        if(score==0){\r\n            this._nodes['goodluck'].active=true\r\n            this._nodes['bottom_score'].active=false\r\n        }else {\r\n            this._nodes['goodluck'].active = false\r\n            this._nodes['bottom_score'].active = true\r\n            this.score.getComponent(Label).string = score + \"\"\r\n        }\r\n\t}\r\n    public setBtnLabel(str){\r\n        this._nodes['START'].getComponent(Label).string=str>0?str.toString():'0'\r\n    }\r\n\tpublic Balance_tips(bl){\r\n\t\tthis.spr_nomoney.active=bl\r\n\t}\r\n\t/**设置背景图片 */\r\n\tpublic setBg(bgName: 'bg_1' | 'bg_2') {\r\n\t\tthis.node.getComponent(Sprite).spriteFrame = this[bgName]\r\n\t}\r\n    // 更新金币数量\r\n    public setGold(str){\r\n        // 漂浮效果\r\n        let label= this._nodes['Moeny_Bg'].getChildByName('number').getComponent(Label)\r\n        let startNumberMini =parseInt(label.string.replace(/,/g, \"\"));\r\n        if(startNumberMini - Number(str) == 0){\r\n            return false\r\n        }else{\r\n\t\t\tthis._nodes['number2'].active=true\r\n\t\t\tlet labelStr=''\r\n\t\t\tif(startNumberMini - Number(str)<0){\r\n\t\t\t\tlabelStr='+'+ Math.abs(startNumberMini - Number(str))\r\n\t\t\t}else {\r\n\t\t\t\tlabelStr='-'+ (startNumberMini - Number(str))\r\n\t\t\t}\r\n\t\t\tthis._nodes['number2'].getComponent(Label).string= String(Number(labelStr).toFixed(0))\r\n\t\t\tlet animation:Animation =this._nodes['number2'].getComponent(Animation)\r\n\t\t\tanimation.play();\r\n\t\t\t// 动画播放\r\n\t\t\tthis.GoldNumberRoller.startRolling(startNumberMini, str.toFixed(0), 500,label)\r\n\t\t}\r\n        //this._nodes['Moeny_Bg'].getChildByName('number').getComponent(Label).string=Number(str).formatAmountWithCommas()\r\n    }\r\n\t/**展示自动启动按钮组面板 */\r\n\tpublic triggeAutoLaunch(state?) {\r\n\t\tif(state!==undefined&&state===false){\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t\tthis.autoLaunchState=false\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.autoLaunchState=!this.autoLaunchState\r\n\t\t\tif(this.autoLaunchState){\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_up')\r\n\t\t\t}else{\r\n\t\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**自动按钮设置为激活状态 */\r\n\tpublic setActiveButton(autoLaunchType: AutoLaunchType) {\r\n\t\tthis.autoLaunch.children.forEach((child, index) => {\r\n\t\t\tif (index === autoLaunchType) {\r\n\t\t\t\tchild.getComponent(UIOpacity).opacity = 60\r\n\t\t\t} else {\r\n\t\t\t\tchild.getComponent(UIOpacity).opacity = 255\r\n\t\t\t}\r\n\t\t})\r\n\t\tif(this.autoLaunchState){\r\n\t\t\tthis.autoLaunch.getComponent(Animation).play('animation_autoLauncher_down')\r\n\t\t\tthis.autoLaunchState=false\r\n\t\t}\r\n\t}\r\n    /**set jackPOT */\r\n    public setJACKPOT(jackPotData){\r\n        let sprList=getBgProxy().getSpriteFrames()\r\n        this.JackPotContent.destroyAllChildren()\r\n        jackPotData.forEach(item=>{\r\n          let headImgUrl=`head_circle_${item.avatarIndex}`\r\n           let spr= sprList.find(item=>{\r\n                return item.name==headImgUrl\r\n            })\r\n           let node=instantiate(this.JackPotItem)\r\n            node.getChildByName('One_Right').getComponent(Label).string=item.nickName+''\r\n            find('One_Left/One_Label',node).getComponent(Label).string=item.winningAmount.formatAmountWithCommas()\r\n            find('One_Left/One_head',node).getComponent(Sprite).spriteFrame =spr\r\n            node.active=true\r\n            this.JackPotContent.addChild(node)\r\n        })\r\n    }\r\n    handoffJACKPOT(){\r\n        this._nodes['ScrollView'].active=!this._nodes['ScrollView'].active\r\n    }\r\n\t/**启动飞鹤 */\r\n\tpublic startFlyingCrane() {\r\n\t\tconst node = new Node(\"flyingCrane\")\r\n\t\tconst ske = node.addComponent(sp.Skeleton)\r\n\t\tske.skeletonData = this.flyingCrane\r\n\t\tske.animation = 'animation'\r\n\t\tthis.node.addChild(node)\r\n\t\tnode.setSiblingIndex(1)\r\n\t\tnode.setPosition(new Vec3(0, 0))\r\n\t\tnode.layer = Layers.Enum.UI_2D\r\n\t\treturn node\r\n\t\t// node.setPosition(new Vec3(640, -250))\r\n\t\t// tween(node).to(3, { position: new Vec3(-640, 250) }).call(() => {\r\n\t\t// \tthis.startFlyingCrane()\r\n\t\t// }).start()\r\n\t}\r\n    // 设置小游戏按钮置灰\r\n    setDis_btn(disable:boolean){\r\n        this._nodes['SZX_-'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['SZX_+'].getComponent(Sprite).grayscale = disable\r\n        this._nodes['maxBet'].getComponent(Sprite).grayscale = disable\r\n    }\r\n\tsetGreyOut(str,disable){\r\n        this._nodes[str].getComponent(Sprite).grayscale = disable\r\n    }\r\n\t// setjian(disable){\r\n\t// \tthis._nodes['SZX_-'].getComponent(Sprite).grayscale = disable\r\n\t// }\r\n\t// setjia(disable){\r\n\t// \tthis._nodes['SZX_+'].getComponent(Sprite).grayscale = disable\r\n    //     this._nodes['maxBet'].getComponent(Sprite).grayscale = disable\r\n\t// }\r\n\t/**设置面板按钮可用性 */\r\n\tsetDisable(disable: boolean) {\r\n\t\t// const op = this.startButton.getComponent(UIOpacity)\r\n\t\t// op.opacity = disable ? 100 : 255\r\n\t\tconst button = this.startButton.getComponent(Button); // 获取节点的 Sprite 组件\r\n\t\t// button.interactable = disable\r\n\t\tconst sprite = this.startButton.getComponent(Sprite);\r\n\t\tsprite.grayscale = disable\r\n\t\t// const material = Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE); // 获取置灰材质\r\n\t\t// const material = Material.getInstantiatedBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE);\r\n\t\t// node.setMaterial(material, 0);\r\n\r\n\t\t// const mat = new Material();\r\n\t\t// mat.initialize({\r\n\t\t// \t// 通过 effect 名指定材质使用的着色器资源\r\n\t\t// \teffectAsset: 'pipeline/skybox',\r\n\t\t// \tdefines: {\r\n\t\t// \t\tUSE_RGBE_CUBEMAP: true\r\n\t\t// \t}\r\n\t\t// })\r\n\t\t// this.node.getComponent(Sprite).setMaterial(Material.getBuiltinMaterial(Material.BUILTIN_NAME.GRAY_SPRITE + ''), 0);\r\n\t}\r\n\tupdate(deltaTime: number) {\r\n        this.timeAccumulator += deltaTime;\r\n        if (this.timeAccumulator >= 3) {\r\n            this.timeAccumulator = 0;\r\n            AudioManager.getInstance().updateTheMusicStatus()\r\n        }\r\n        this.GoldNumberRoller.update(deltaTime); // 手动触发滚动逻辑\r\n\t}\r\n}\r\n\r\n"]}