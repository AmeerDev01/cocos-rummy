{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandarQiuQiu/viewModel/BandarQiuQiuTitleViewModel.ts"],"names":["_decorator","Animation","Tween","Vec3","find","ViewModel","StoreInject","getStore","global","sourceManageSelector","PrefabPathDefine","EffectType","SetViewModel","RuleViewModel","changeAllWinUsersAction","changeCancelBetDataAction","changeCardTypeAction","changeGoldDataAction","changeWinAreaRateAction","setMemberBetAction","setNewBetDataAction","setCountDownAction","setGameStatusAction","setInitGameStatusAction","setTipsAction","setUsersInfoAction","changeBlueCardAction","changeRedCardAction","changeTwinNumAction","ccclass","property","TitleViewModel","constructor","isShowMenu","begin","setEvent","returnHall","closeSubGame","dispatch","openMenuPanel","openMenu","openHelpPanel","openRule","openSetPanel","openSet","clearCacheData","titleNode","comp","getPropertyNode","props_mask_titrle","titleAnimation","getComponent","play","tw","to","scale","start","nodeWrap","setViewModel","mountView","getFile","MAIN_SET","source","appendTo","effectType","EFFECT1","isModal","onClosePanel","unMount","EFFECT2","connect","ruleViewModel","MAIN_RULE","storeState","store","getState","inject","state","betData","bet","memberBet"],"mappings":"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","sourcesContent":["import { _decorator, assetManager,AssetManager, Component, instantiate, Node, Animation, Tween, Vec3, find } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { BandarQiuQiu_title, IProps, IEvent } from \"../components/BandarQiuQiu_title\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from '../store';\r\nimport { global } from '../../../hall';\r\nimport { sourceManageSelector } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { EffectType } from '../../../utils/NodeIOEffect';\r\nimport SetViewModel from './BandarQiuQiuSetViewModel';\r\nimport RuleViewModel from './BandarQiuQiuRuleViewModel';\r\nimport { changeAllWinUsersAction, changeCancelBetDataAction, changeCardTypeAction, changeGoldDataAction, changeWinAreaRateAction, setMemberBetAction, setNewBetDataAction } from '../store/actions/bet';\r\n// import { betAreaViewModel } from './BandarGameBoardViewModel';\r\nimport { setCountDownAction, setGameStatusAction, setGoldAction, setInitGameStatusAction, setTipsAction, setUsersInfoAction } from '../store/actions/game';\r\nimport { GameStatus } from '../type';\r\nimport { changeBlueCardAction, changeRedCardAction, changeTwinNumAction, changeWinAreaAction } from '../store/actions/pokerDetail';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nexport let setViewModel:SetViewModel\r\nexport let ruleViewModel:RuleViewModel\r\n@StoreInject(getStore())\r\nclass TitleViewModel extends ViewModel<BandarQiuQiu_title, IProps, IEvent> {\r\n  private isShowMenu:boolean=false\r\n\r\n    constructor() {\r\n        super('BandarQiuQiu_title')     \r\n      }\r\n    \r\n      protected begin() { \r\n        this.setEvent({\r\n          returnHall:()=>{\r\n            global.closeSubGame();\r\n            this.dispatch(setNewBetDataAction(null));\r\n            // betAreaViewModel.comp.clearAllBetAreaGold();\r\n            this.dispatch(setGameStatusAction(null));\r\n            this.dispatch(changeAllWinUsersAction(null));\r\n          },\r\n          openMenuPanel:()=>{\r\n            this.openMenu()\r\n          },\r\n          openHelpPanel:()=>{\r\n            this.openRule()\r\n          },\r\n    \r\n          openSetPanel:()=>{\r\n            this.openSet();\r\n          },\r\n        })\r\n  }\r\n  public clearCacheData() {\r\n    this.dispatch(setNewBetDataAction(null)); \r\n    this.dispatch(setGameStatusAction(null));\r\n    this.dispatch(setInitGameStatusAction(null))\r\n    this.dispatch(changeAllWinUsersAction(null));\r\n    this.dispatch(setTipsAction(null))\r\n    this.dispatch(setCountDownAction(0));\r\n    this.dispatch(changeGoldDataAction(null));\r\n    this.dispatch(setMemberBetAction(null))\r\n    this.dispatch(setUsersInfoAction(null));\r\n    this.dispatch(changeCancelBetDataAction(null));\r\n    this.dispatch(changeBlueCardAction(null));\r\n    this.dispatch(changeRedCardAction(null));\r\n    this.dispatch(changeTwinNumAction(null));\r\n    this.dispatch(changeWinAreaRateAction(null));\r\n    this.dispatch(changeCardTypeAction(null));\r\n  }\r\n    \r\n  public openMenu() {\r\n      const titleNode: Node = this.comp.getPropertyNode().props_mask_titrle as Node\r\n      const titleAnimation=titleNode.getComponent(Animation)\r\n      if(!this.isShowMenu){\r\n        titleAnimation.play()    \r\n      }else{\r\n        const tw=new Tween(titleNode).to(0.2,{scale:new Vec3(1,0,0)}).start()\r\n      }\r\n      this.isShowMenu=!this.isShowMenu\r\n      \r\n    }\r\n    public openSet(nodeWrap?: Node) {\r\n      setViewModel = new SetViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_SET).source)\r\n        .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n          onClosePanel: () => {\r\n            setViewModel.unMount(EffectType.EFFECT2)\r\n          }\r\n        }).connect()\r\n    }\r\n    public openRule(nodeWrap?: Node) {\r\n      ruleViewModel = new RuleViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_RULE).source)\r\n        .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n          onClosePanel: () => {\r\n            ruleViewModel.unMount(EffectType.EFFECT2)  \r\n          }\r\n        }).connect()\r\n    }\r\n      \r\n      public connect() {\r\n        const storeState = this.store.getState() as StateType;\r\n\r\n        this.inject({}, (state: StateType) => {\r\n          return {\r\n            betData: state.bet.betData,\r\n            memberBet: state.bet.memberBet,\r\n            \r\n          }\r\n        })\r\n        return this\r\n      }\r\n\r\n}\r\n\r\nexport default TitleViewModel\r\n"]}