{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/domino/components/Domino_Record.ts"],"names":["_decorator","Label","Node","BaseComponent","DeskStatus","ccclass","property","Domino_Record","propertyNode","props_spr_record_bg","props","deskStatus","outCardItem","cardIList","events","start","initState","bindEvent","useProps","key","value","calNumber","active","PLAYING","cur","bindUI","addNumber","arr","cardItem","forEach","v","upFace","downFace","children","i","getComponent","string","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AAC9BC,MAAAA,a,iBAAAA,a;;AACUC,MAAAA,U,iBAAAA,U;;;;;;;;;OACb;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;+BAkBjBO,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb;AAAA;AAAA,0CACyE;AAAA;AAAA;AAAA,eAK9DC,YAL8D,GAK/C;AACxBC,YAAAA,mBAAmB,EAAE,IAAIP,IAAJ;AADG,WAL+C;AAAA,eASjEQ,KATiE,GASjD;AACtBC,YAAAA,UAAU,EAAE,IADU;AAEtBC,YAAAA,WAAW,EAAE,EAFS;AAGtBC,YAAAA,SAAS,EAAE;AAHW,WATiD;AAAA,eAejEC,MAfiE,GAehD,EAfgD;AAAA;;AACxEC,QAAAA,KAAK,GAAG,CAEP;;AAgBSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AAGA;;AAESC,QAAAA,SAAS,GAAS,CAE3B;;AAESC,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAID,GAAG,KAAK,aAAZ,EAA2B;AAC1B,iBAAKE,SAAL;AACA,WAFD,MAEO,IAAIF,GAAG,KAAK,WAAZ,EAAyB;AAC/B,iBAAKE,SAAL;AACA,WAFM,MAEA,IAAIF,GAAG,KAAK,YAAZ,EAA0B;AAChC,iBAAKX,YAAL,CAAkBC,mBAAlB,CAAsCa,MAAtC,GAA+C;AAAA;AAAA,0CAAWC,OAAX,KAAuBH,KAAK,CAACI,GAA5E;AACA;AACD;;AAESC,QAAAA,MAAM,GAAS;AACxB,eAAKjB,YAAL,CAAkBC,mBAAlB,CAAsCa,MAAtC,GAA+C,KAA/C;AACA;;AAEOI,QAAAA,SAAS,CAACC,GAAD,EAAgBC,QAAhB,EAAsC;AACtDA,UAAAA,QAAQ,CAACC,OAAT,CAAiBC,CAAC,IAAI;AACrB;AACA,gBAAIA,CAAC,CAACC,MAAF,KAAaD,CAAC,CAACE,QAAnB,EAA6B;AAC5BL,cAAAA,GAAG,CAACG,CAAC,CAACC,MAAH,CAAH;AACA,aAFD,MAEO;AACNJ,cAAAA,GAAG,CAACG,CAAC,CAACC,MAAH,CAAH;AACAJ,cAAAA,GAAG,CAACG,CAAC,CAACE,QAAH,CAAH;AACA;AACD,WARD;AASA;;AAEOX,QAAAA,SAAS,GAAG;AACnB,cAAIM,GAAG,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAV;AACA,eAAKD,SAAL,CAAeC,GAAf,EAAoB,KAAKjB,KAAL,CAAWE,WAA/B;AACA,eAAKc,SAAL,CAAeC,GAAf,EAAoB,KAAKjB,KAAL,CAAWG,SAA/B;AAEA,eAAKL,YAAL,CAAkBC,mBAAlB,CAAsCwB,QAAtC,CAA+CJ,OAA/C,CAAuD,CAACC,CAAD,EAAII,CAAJ,KAAU;AAChEJ,YAAAA,CAAC,CAACK,YAAF,CAAelC,KAAf,EAAsBmC,MAAtB,GAAgC,IAAIT,GAAG,CAACO,CAAD,CAAR,GAAe,EAA9C;AACA,WAFD;AAGA;;AAEDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAnEuE,O","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { CardItem, DeskStatus } from '../type';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tdeskStatus: DeskStatus,\r\n\t/**已经在桌面打出的牌组 */\r\n\toutCardItem: CardItem[],\r\n\t/**手牌数组 */\r\n\tcardIList: CardItem[]\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\n\r\n@ccclass('Domino_Record')\r\nexport class Domino_Record extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_spr_record_bg: new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdeskStatus: null,\r\n\t\toutCardItem: [],\r\n\t\tcardIList: [],\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === 'outCardItem') {\r\n\t\t\tthis.calNumber();\r\n\t\t} else if (key === 'cardIList') {\r\n\t\t\tthis.calNumber();\r\n\t\t} else if (key === 'deskStatus') {\r\n\t\t\tthis.propertyNode.props_spr_record_bg.active = DeskStatus.PLAYING === value.cur;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.propertyNode.props_spr_record_bg.active = false;\r\n\t}\r\n\r\n\tprivate addNumber(arr: number[], cardItem: CardItem[]) {\r\n\t\tcardItem.forEach(v => {\r\n\t\t\t// 相同的只算一张牌\r\n\t\t\tif (v.upFace === v.downFace) {\r\n\t\t\t\tarr[v.upFace]++;\r\n\t\t\t} else {\r\n\t\t\t\tarr[v.upFace]++;\r\n\t\t\t\tarr[v.downFace]++;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate calNumber() {\r\n\t\tlet arr = [0, 0, 0, 0, 0, 0, 0];\r\n\t\tthis.addNumber(arr, this.props.outCardItem);\r\n\t\tthis.addNumber(arr, this.props.cardIList);\r\n\r\n\t\tthis.propertyNode.props_spr_record_bg.children.forEach((v, i) => {\r\n\t\t\tv.getComponent(Label).string = (7 - arr[i]) + '';\r\n\t\t})\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}