{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/domino/components/Domino_Opponent.ts"],"names":["_decorator","Label","Node","Sprite","tween","Vec3","BaseComponent","DeskStatus","PlayerSatus","global","roomChooseViewModel","ccclass","property","Domino_Opponent","propertyNode","props_btn_head","props_btn_head_circle","props_label_name","props_label_gold","props_label_handCards_num","props_btn_gift","props_spr_cek","props_Layout_cards_handCards","props_spr_banker","props_spr_ready","props_label_countDown_time","props_Layout_cards_misNum","props_win_label","props_loss_label","props","currActiveSeatIndex","outCountdown","newCardItem","uid","head","nickName","glodAmount","state","WAITING","isMaster","remainCardCount","cardIList","noWayCardNumber","isActive","deskStatus","seatIndex","winloss","events","start","initState","bindEvent","useProps","key","value","node","active","string","formatAmountWithLetter","loadHeadSprite","clearData","cur","beginGameClear","countdown","isReconnect","playCard","updateWinloss","setState","updateMissNumber","time","deal","mainBoardViewModel","comp","outFlyCard","getWorldPosition","values","children","forEach","find","name","labelNode","initPos","position","x","y","to","call","isValid","setPosition","bindUI","useState","fillReconnectData","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,K,OAAAA,K;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AACxDC,MAAAA,a,iBAAAA,a;;AACqBC,MAAAA,U,iBAAAA,U;AAAoBC,MAAAA,W,iBAAAA,W;;AACzCC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,mB,iBAAAA,mB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;iCAwCjBa,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb;AAAA;AAAA,0CAC2E;AAAA;AAAA;AAAA,eAKhEC,YALgE,GAKjD;AACxB;AACAC,YAAAA,cAAc,EAAE,IAAIZ,MAAJ,EAFQ;;AAGxB;AACAa,YAAAA,qBAAqB,EAAE,IAAId,IAAJ,EAJC;AAKxBe,YAAAA,gBAAgB,EAAE,IAAIhB,KAAJ,EALM;AAMxBiB,YAAAA,gBAAgB,EAAE,IAAIjB,KAAJ,EANM;AAOxBkB,YAAAA,yBAAyB,EAAE,IAAIlB,KAAJ,EAPH;AAQxBmB,YAAAA,cAAc,EAAE,IAAIlB,IAAJ,EARQ;AASxBmB,YAAAA,aAAa,EAAE,IAAInB,IAAJ,EATS;AAUxBoB,YAAAA,4BAA4B,EAAE,IAAIpB,IAAJ,EAVN;;AAWxB;AACAqB,YAAAA,gBAAgB,EAAE,IAAIrB,IAAJ,EAZM;;AAaxB;AACAsB,YAAAA,eAAe,EAAE,IAAItB,IAAJ,EAdO;;AAexB;AACAuB,YAAAA,0BAA0B,EAAE,IAAIxB,KAAJ,EAhBJ;AAiBxByB,YAAAA,yBAAyB,EAAE,IAAIxB,IAAJ,EAjBH;AAkBxByB,YAAAA,eAAe,EAAE,IAAI1B,KAAJ,EAlBO;AAmBxB2B,YAAAA,gBAAgB,EAAE,IAAI3B,KAAJ;AAnBM,WALiD;AAAA,eA2BnE4B,KA3BmE,GA2BnD;AACtBC,YAAAA,mBAAmB,EAAE,CAAC,CADA;AAEtBC,YAAAA,YAAY,EAAE,IAFQ;AAGtBC,YAAAA,WAAW,EAAE,IAHS;AAItBC,YAAAA,GAAG,EAAE,EAJiB;AAKtBC,YAAAA,IAAI,EAAE,CAAC,CALe;AAMtBC,YAAAA,QAAQ,EAAE,EANY;AAOtBC,YAAAA,UAAU,EAAE,CAAC,CAPS;AAQtBC,YAAAA,KAAK,EAAE;AAAA;AAAA,4CAAYC,OARG;AAStBC,YAAAA,QAAQ,EAAE,KATY;AAUtBC,YAAAA,eAAe,EAAE,CAAC,CAVI;AAWtBC,YAAAA,SAAS,EAAE,EAXW;AAYtBC,YAAAA,eAAe,EAAE,EAZK;AAatBC,YAAAA,QAAQ,EAAE,KAbY;AActBC,YAAAA,UAAU,EAAE;AAAA;AAAA,0CAAWN,OAdD;AAetBO,YAAAA,SAAS,EAAE,CAAC,CAfU;AAgBtBC,YAAAA,OAAO,EAAE;AAhBa,WA3BmD;AAAA,eA8CnEC,MA9CmE,GA8ClD,EA9CkD;AAAA;;AAC1EC,QAAAA,KAAK,GAAG,CAEP;;AA+CSC,QAAAA,SAAS,GAAG;AACrB,iBAAO;AACNT,YAAAA,eAAe,EAAE;AADX,WAAP;AAGA;;AAESU,QAAAA,SAAS,GAAS,CAC3B;;AAESC,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE;AACA,cAAID,GAAG,KAAK,KAAZ,EAAmB;AAClB,iBAAKE,IAAL,CAAUC,MAAV,GAAmB,KAAK1B,KAAL,CAAWI,GAAX,KAAmB,EAAtC;AACA;;AACDmB,UAAAA,GAAG,KAAK,UAAR,KAAuB,KAAKtC,YAAL,CAAkBG,gBAAlB,CAAmCuC,MAAnC,GAA4C,KAAK3B,KAAL,CAAWM,QAA9E;AACAiB,UAAAA,GAAG,KAAK,YAAR,KAAyB,KAAKtC,YAAL,CAAkBI,gBAAlB,CAAmCsC,MAAnC,GAA4C,KAAK3B,KAAL,CAAWO,UAAX,CAAsBqB,sBAAtB,EAArE;AACAL,UAAAA,GAAG,KAAK,UAAR,KAAuB,KAAKtC,YAAL,CAAkBS,gBAAlB,CAAmCgC,MAAnC,GAA4C,KAAK1B,KAAL,CAAWU,QAA9E;AACAa,UAAAA,GAAG,KAAK,MAAR,IAAmB;AAAA;AAAA,gCAAOM,cAAP,CAAsB,KAAK7B,KAAL,CAAWK,IAAjC,EAAuC,KAAKpB,YAAL,CAAkBC,cAAzD,CAAnB;;AACA,cAAIqC,GAAG,KAAK,OAAZ,EAAqB;AACpB,iBAAKtC,YAAL,CAAkBU,eAAlB,CAAkC+B,MAAlC,GAA2C,KAAK1B,KAAL,CAAWQ,KAAX,KAAqB;AAAA;AAAA,4CAAYC,OAA5E;;AACA,gBAAI,KAAKT,KAAL,CAAWQ,KAAX,KAAqB;AAAA;AAAA,4CAAYC,OAArC,EAA8C;AAC7C,mBAAKqB,SAAL;AACA;AACD;;AAED,cAAIP,GAAG,KAAK,YAAZ,EAA0B;AACzB,gBAAI;AAAA;AAAA,0CAAWd,OAAX,KAAuBe,KAAK,CAACO,GAAjC,EAAsC;AACrC,mBAAKC,cAAL;AACA;AACD,WAJD,MAIO,IAAIT,GAAG,KAAK,qBAAR,IAAiCC,KAAK,CAACO,GAAN,KAAc,KAAK/B,KAAL,CAAWgB,SAA9D,EAAyE,CAE/E,CAFM,MAEA,IAAIO,GAAG,KAAK,cAAR,IAA0BC,KAAK,CAACO,GAAhC,IAAuCP,KAAK,CAACO,GAAN,CAAUf,SAAV,KAAwB,KAAKhB,KAAL,CAAWgB,SAA9E,EAAyF;AAC/F,iBAAKiB,SAAL,CAAeT,KAAK,CAACO,GAArB;AACA,WAFM,MAEA,IAAIR,GAAG,KAAK,aAAR,IAAyBC,KAAK,CAACO,GAA/B,IAAsC,CAACP,KAAK,CAACO,GAAN,CAAUG,WAAjD,IAAgEV,KAAK,CAACO,GAAN,CAAUf,SAAV,KAAwB,KAAKhB,KAAL,CAAWgB,SAAvG,EAAkH;AACxH,iBAAKmB,QAAL;AACA,WAFM,MAEA,IAAIZ,GAAG,KAAK,SAAZ,EAAuB;AAC7B,iBAAKa,aAAL,CAAmBZ,KAAK,CAACO,GAAzB;AACA,WAFM,MAEA,IAAIR,GAAG,KAAK,iBAAZ,EAA+B;AACrC,iBAAKc,QAAL,CAAc;AAAE1B,cAAAA,eAAe,EAAEa,KAAK,CAACO;AAAzB,aAAd;AACA,WAFM,MAEA,IAAIR,GAAG,KAAK,iBAAZ,EAA+B;AACrC,iBAAKe,gBAAL,CAAsBd,KAAK,CAACO,GAA5B;AACA;AACD;;AAEOE,QAAAA,SAAS,CAAC/B,YAAD,EAA0B;AAC1C,eAAKjB,YAAL,CAAkBW,0BAAlB,CAA6C6B,IAA7C,CAAkDC,MAAlD,GAA2DxB,YAAY,CAACqC,IAAb,GAAoB,CAA/E;AACA,eAAKtD,YAAL,CAAkBW,0BAAlB,CAA6C+B,MAA7C,GAAsDzB,YAAY,CAACqC,IAAb,GAAoB,EAA1E;AACA;AAED;;;AACOC,QAAAA,IAAI,GAAG;AACb;AACA;AACA,eAAKH,QAAL,CAAc;AAAE1B,YAAAA,eAAe,EAAE,KAAKH,KAAL,CAAWG,eAAX,GAA6B;AAAhD,WAAd;AACA;AAED;;;AACQwB,QAAAA,QAAQ,GAAG;AAClB;AACA;AACA,eAAKE,QAAL,CAAc;AAAE1B,YAAAA,eAAe,EAAE,KAAKH,KAAL,CAAWG,eAAX,GAA6B;AAAhD,WAAd;AACA;AAAA;AAAA,0DAAoB8B,kBAApB,CAAuCC,IAAvC,CAA4CC,UAA5C,CAAuD,KAAK1D,YAAL,CAAkBK,yBAAlB,CAA4CmC,IAA5C,CAAiDmB,gBAAjD,EAAvD;AACA;AAED;;;AACQN,QAAAA,gBAAgB,CAACO,MAAgB,GAAG,EAApB,EAAwB;AAC/C,eAAK5D,YAAL,CAAkBY,yBAAlB,CAA4C6B,MAA5C,GAAqD,KAArD;AACA,eAAKzC,YAAL,CAAkBY,yBAAlB,CAA4CiD,QAA5C,CAAqDC,OAArD,CAA6DtB,IAAI,IAAI;AACpE,kBAAMD,KAAK,GAAGqB,MAAM,CAACG,IAAP,CAAYxB,KAAK,IAAIC,IAAI,CAACwB,IAAL,KAAc,8BAA8BzB,KAAjE,CAAd;;AACA,gBAAIA,KAAK,IAAI,CAAb,EAAgB;AACf,mBAAKvC,YAAL,CAAkBY,yBAAlB,CAA4C6B,MAA5C,GAAqD,IAArD;AACAD,cAAAA,IAAI,CAACC,MAAL,GAAc,IAAd;AACA,aAHD,MAGO;AACND,cAAAA,IAAI,CAACC,MAAL,GAAc,KAAd;AACA;AACD,WARD;AASA;;AAEOU,QAAAA,aAAa,CAACZ,KAAD,EAAgB;AACpC,cAAIA,KAAK,KAAK,CAAd,EAAiB;AACjB,eAAKvC,YAAL,CAAkBa,eAAlB,CAAkC2B,IAAlC,CAAuCC,MAAvC,GAAgDF,KAAK,GAAG,CAAxD;AACA,eAAKvC,YAAL,CAAkBc,gBAAlB,CAAmC0B,IAAnC,CAAwCC,MAAxC,GAAiD,CAAC,KAAKzC,YAAL,CAAkBa,eAAlB,CAAkC2B,IAAlC,CAAuCC,MAAzF;AACA,cAAIwB,SAAJ;;AACA,cAAI1B,KAAK,GAAG,CAAZ,EAAe;AACd,iBAAKvC,YAAL,CAAkBa,eAAlB,CAAkC6B,MAAlC,GAA2C,MAAMH,KAAK,CAACI,sBAAN,EAAjD;AACAsB,YAAAA,SAAS,GAAG,KAAKjE,YAAL,CAAkBa,eAAlB,CAAkC2B,IAA9C;AACA,WAHD,MAGO;AACN,iBAAKxC,YAAL,CAAkBc,gBAAlB,CAAmC4B,MAAnC,GAA4CH,KAAK,CAACI,sBAAN,EAA5C;AACAsB,YAAAA,SAAS,GAAG,KAAKjE,YAAL,CAAkBc,gBAAlB,CAAmC0B,IAA/C;AACA;;AACD,gBAAM0B,OAAO,GAAG,IAAI3E,IAAJ,CAAS0E,SAAS,CAACE,QAAV,CAAmBC,CAA5B,EAA+BH,SAAS,CAACE,QAAV,CAAmBE,CAAlD,CAAhB;AACA/E,UAAAA,KAAK,CAAC2E,SAAD,CAAL,CAAiBK,EAAjB,CAAoB,CAApB,EAAuB;AAAEH,YAAAA,QAAQ,EAAE,IAAI5E,IAAJ,CAAS2E,OAAO,CAACE,CAAjB,EAAoBF,OAAO,CAACG,CAAR,GAAY,EAAhC;AAAZ,WAAvB,EAA0EE,IAA1E,CAA+E,MAAM;AACpF,gBAAIN,SAAS,CAACO,OAAd,EAAuB;AACtBP,cAAAA,SAAS,CAACQ,WAAV,CAAsBP,OAAtB;AACAD,cAAAA,SAAS,CAACxB,MAAV,GAAmB,KAAnB;AACA;AACD,WALD,EAKGP,KALH;AAMA;;AAESwC,QAAAA,MAAM,GAAS;AACxB,eAAK1E,YAAL,CAAkBM,cAAlB,CAAiCmC,MAAjC,GAA0C,KAA1C;AACA,eAAKD,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,eAAKzC,YAAL,CAAkBW,0BAAlB,CAA6C6B,IAA7C,CAAkDC,MAAlD,GAA2D,KAA3D;AACA,eAAKzC,YAAL,CAAkBQ,4BAAlB,CAA+CiC,MAA/C,GAAwD,KAAxD;AACA,eAAKzC,YAAL,CAAkBS,gBAAlB,CAAmCgC,MAAnC,GAA4C,KAA5C;AACA,eAAKzC,YAAL,CAAkBO,aAAlB,CAAgCkC,MAAhC,GAAyC,KAAzC;AACA,eAAKzC,YAAL,CAAkBa,eAAlB,CAAkC2B,IAAlC,CAAuCC,MAAvC,GAAgD,KAAhD;AACA,eAAKzC,YAAL,CAAkBc,gBAAlB,CAAmC0B,IAAnC,CAAwCC,MAAxC,GAAiD,KAAjD;AAEA,eAAKY,gBAAL;AAEA,eAAKsB,QAAL,CAAc,CAACrC,GAAD,EAAMC,KAAN,KAAgB;AAC7B,iBAAKvC,YAAL,CAAkBQ,4BAAlB,CAA+CiC,MAA/C,GAAwDF,KAAK,CAACO,GAAN,GAAY,CAApE;AACA,iBAAK9C,YAAL,CAAkBK,yBAAlB,CAA4CqC,MAA5C,GAAqDH,KAAK,CAACO,GAAN,GAAY,EAAjE;AACA,WAHD,EAGG,CAAC,iBAAD,CAHH;AAIA;;AAEOC,QAAAA,cAAc,GAAG;AACxB,eAAK/C,YAAL,CAAkBU,eAAlB,CAAkC+B,MAAlC,GAA2C,KAA3C;AACA,eAAKW,QAAL,CAAc;AAAE1B,YAAAA,eAAe,EAAE;AAAnB,WAAd;AACA;;AAEOmB,QAAAA,SAAS,GAAG;AACnB,eAAKG,SAAL,CAAe;AACdM,YAAAA,IAAI,EAAE,CADQ;AAEdvB,YAAAA,SAAS,EAAE;AAFG,WAAf;AAIA;;AAEM6C,QAAAA,iBAAiB,CAAClD,eAAD,EAA0B;AACjD,eAAK0B,QAAL,CAAc;AAAE1B,YAAAA,eAAe,EAAEA;AAAnB,WAAd;AACA;;AAEDmD,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAzLyE,O","sourcesContent":["import { _decorator, Component, Label, log, Node, Sprite, tween, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { CardItem, Countdown, DeskStatus, Player, PlayerSatus } from '../type';\r\nimport { global } from '../../../hall';\r\nimport { roomChooseViewModel } from '../index';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\tremainCardCount: number\r\n}\r\n\r\nexport interface IProps {\r\n\t/**桌子状态 */\r\n\tdeskStatus: DeskStatus,\r\n\t/**当前正激活等待的用户 */\r\n\tcurrActiveSeatIndex: number,\r\n\t/**出牌倒计时 */\r\n\toutCountdown: Countdown,\r\n\tnewCardItem: CardItem,\r\n\tuid: string,\r\n\t/**头像序号 */\r\n\thead: number,\r\n\tnickName: string,\r\n\tglodAmount: number,\r\n\t/**状态 */\r\n\tstate: PlayerSatus,\r\n\t/**是否是庄家 */\r\n\tisMaster: boolean,\r\n\t/**剩余牌数量 */\r\n\tremainCardCount: number,\r\n\t/**手牌组，正常情况下，只有玩家自身才有 */\r\n\tcardIList: CardItem[],\r\n\t/**跟不上的牌点数 */\r\n\tnoWayCardNumber: number[],\r\n\t/**是否激活 */\r\n\tisActive: boolean,\r\n\t/**座位号 */\r\n\tseatIndex: number,\r\n\twinloss: number,\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\n\r\n@ccclass('Domino_Opponent')\r\nexport class Domino_Opponent extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\t/**头像图片 */\r\n\t\tprops_btn_head: new Sprite(),\r\n\t\t/**头像外圈 */\r\n\t\tprops_btn_head_circle: new Node(),\r\n\t\tprops_label_name: new Label(),\r\n\t\tprops_label_gold: new Label(),\r\n\t\tprops_label_handCards_num: new Label(),\r\n\t\tprops_btn_gift: new Node(),\r\n\t\tprops_spr_cek: new Node(),\r\n\t\tprops_Layout_cards_handCards: new Node(),\r\n\t\t/**庄家标识 */\r\n\t\tprops_spr_banker: new Node(),\r\n\t\t/**准备 */\r\n\t\tprops_spr_ready: new Node(),\r\n\t\t/**倒计时 */\r\n\t\tprops_label_countDown_time: new Label(),\r\n\t\tprops_Layout_cards_misNum: new Node(),\r\n\t\tprops_win_label: new Label(),\r\n\t\tprops_loss_label: new Label(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tcurrActiveSeatIndex: -1,\r\n\t\toutCountdown: null,\r\n\t\tnewCardItem: null,\r\n\t\tuid: '',\r\n\t\thead: -1,\r\n\t\tnickName: '',\r\n\t\tglodAmount: -1,\r\n\t\tstate: PlayerSatus.WAITING,\r\n\t\tisMaster: false,\r\n\t\tremainCardCount: -1,\r\n\t\tcardIList: [],\r\n\t\tnoWayCardNumber: [],\r\n\t\tisActive: false,\r\n\t\tdeskStatus: DeskStatus.WAITING,\r\n\t\tseatIndex: -1,\r\n\t\twinloss: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\tremainCardCount: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\t// console.log('opponent usrprops ', key, value)\r\n\t\tif (key === \"uid\") {\r\n\t\t\tthis.node.active = this.props.uid !== ''\r\n\t\t}\r\n\t\tkey === \"nickName\" && (this.propertyNode.props_label_name.string = this.props.nickName)\r\n\t\tkey === \"glodAmount\" && (this.propertyNode.props_label_gold.string = this.props.glodAmount.formatAmountWithLetter())\r\n\t\tkey === 'isMaster' && (this.propertyNode.props_spr_banker.active = this.props.isMaster)\r\n\t\tkey === \"head\" && (global.loadHeadSprite(this.props.head, this.propertyNode.props_btn_head))\r\n\t\tif (key === \"state\") {\r\n\t\t\tthis.propertyNode.props_spr_ready.active = this.props.state === PlayerSatus.WAITING\r\n\t\t\tif (this.props.state === PlayerSatus.WAITING) {\r\n\t\t\t\tthis.clearData();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (key === 'deskStatus') {\r\n\t\t\tif (DeskStatus.WAITING === value.cur) {\r\n\t\t\t\tthis.beginGameClear();\r\n\t\t\t}\r\n\t\t} else if (key === 'currActiveSeatIndex' && value.cur === this.props.seatIndex) {\r\n\r\n\t\t} else if (key === 'outCountdown' && value.cur && value.cur.seatIndex === this.props.seatIndex) {\r\n\t\t\tthis.countdown(value.cur);\r\n\t\t} else if (key === 'newCardItem' && value.cur && !value.cur.isReconnect && value.cur.seatIndex === this.props.seatIndex) {\r\n\t\t\tthis.playCard();\r\n\t\t} else if (key === 'winloss') {\r\n\t\t\tthis.updateWinloss(value.cur);\r\n\t\t} else if (key === 'remainCardCount') {\r\n\t\t\tthis.setState({ remainCardCount: value.cur })\r\n\t\t} else if (key === 'noWayCardNumber') {\r\n\t\t\tthis.updateMissNumber(value.cur);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate countdown(outCountdown: Countdown) {\r\n\t\tthis.propertyNode.props_label_countDown_time.node.active = outCountdown.time > 0;\r\n\t\tthis.propertyNode.props_label_countDown_time.string = outCountdown.time + \"\";\r\n\t}\r\n\r\n\t/**发牌 */\r\n\tpublic deal() {\r\n\t\t// this.propertyNode.props_Layout_cards_handCards.active = true;\r\n\t\t// this.propertyNode.props_label_handCards_num.string = ++this.state.remainCardCount + '';\r\n\t\tthis.setState({ remainCardCount: this.state.remainCardCount + 1 })\r\n\t}\r\n\r\n\t/**出牌 */\r\n\tprivate playCard() {\r\n\t\t// this.propertyNode.props_Layout_cards_handCards.active = true;\r\n\t\t// this.propertyNode.props_label_handCards_num.string = --this.state.remainCardCount + '';\r\n\t\tthis.setState({ remainCardCount: this.state.remainCardCount - 1 })\r\n\t\troomChooseViewModel.mainBoardViewModel.comp.outFlyCard(this.propertyNode.props_label_handCards_num.node.getWorldPosition());\r\n\t}\r\n\r\n\t/**更新缺点 */\r\n\tprivate updateMissNumber(values: number[] = []) {\r\n\t\tthis.propertyNode.props_Layout_cards_misNum.active = false;\r\n\t\tthis.propertyNode.props_Layout_cards_misNum.children.forEach(node => {\r\n\t\t\tconst value = values.find(value => node.name === 'props_spr_cards_misNum-00' + value);\r\n\t\t\tif (value >= 0) {\r\n\t\t\t\tthis.propertyNode.props_Layout_cards_misNum.active = true;\r\n\t\t\t\tnode.active = true;\r\n\t\t\t} else {\r\n\t\t\t\tnode.active = false;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate updateWinloss(value: number) {\r\n\t\tif (value === 0) return;\r\n\t\tthis.propertyNode.props_win_label.node.active = value > 0;\r\n\t\tthis.propertyNode.props_loss_label.node.active = !this.propertyNode.props_win_label.node.active;\r\n\t\tlet labelNode: Node;\r\n\t\tif (value > 0) {\r\n\t\t\tthis.propertyNode.props_win_label.string = '+' + value.formatAmountWithLetter();\r\n\t\t\tlabelNode = this.propertyNode.props_win_label.node;\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_loss_label.string = value.formatAmountWithLetter();\r\n\t\t\tlabelNode = this.propertyNode.props_loss_label.node;\r\n\t\t}\r\n\t\tconst initPos = new Vec3(labelNode.position.x, labelNode.position.y);\r\n\t\ttween(labelNode).to(1, { position: new Vec3(initPos.x, initPos.y + 50) }).call(() => {\r\n\t\t\tif (labelNode.isValid) {\r\n\t\t\t\tlabelNode.setPosition(initPos);\r\n\t\t\t\tlabelNode.active = false;\r\n\t\t\t}\r\n\t\t}).start();\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.propertyNode.props_btn_gift.active = false;\r\n\t\tthis.node.active = false\r\n\t\tthis.propertyNode.props_label_countDown_time.node.active = false;\r\n\t\tthis.propertyNode.props_Layout_cards_handCards.active = false;\r\n\t\tthis.propertyNode.props_spr_banker.active = false;\r\n\t\tthis.propertyNode.props_spr_cek.active = false;\r\n\t\tthis.propertyNode.props_win_label.node.active = false;\r\n\t\tthis.propertyNode.props_loss_label.node.active = false;\r\n\r\n\t\tthis.updateMissNumber();\r\n\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tthis.propertyNode.props_Layout_cards_handCards.active = value.cur > 0;\r\n\t\t\tthis.propertyNode.props_label_handCards_num.string = value.cur + '';\r\n\t\t}, ['remainCardCount'])\r\n\t}\r\n\r\n\tprivate beginGameClear() {\r\n\t\tthis.propertyNode.props_spr_ready.active = false;\r\n\t\tthis.setState({ remainCardCount: 0 })\r\n\t}\r\n\r\n\tprivate clearData() {\r\n\t\tthis.countdown({\r\n\t\t\ttime: 0,\r\n\t\t\tseatIndex: 0\r\n\t\t});\r\n\t}\r\n\r\n\tpublic fillReconnectData(remainCardCount: number) {\r\n\t\tthis.setState({ remainCardCount: remainCardCount })\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}