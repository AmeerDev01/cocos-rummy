{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/common/components/Common_GiftUser.ts"],"names":["_decorator","instantiate","Label","Node","Sprite","Toggle","Vec3","BaseComponent","global","sourceManageSeletor","isChatShieldingUser","putChatShieldingUser","removeChatShieldingUser","SpriteFramePathDefine","SkeletonPathDefine","SoundPathDefine","ccclass","property","GIFT_ICON_CONFIG","value","spriteFramePath","img_icon_cock","skeletonPath","cock","dub","angle","offset","img_icon_egg","egg","img_icon_durian","durian","img_icon_rose","rose","img_icon_beer","beer","img_icon_pan","pan","img_icon_money","money","img_icon_bucket","bucket","img_icon_shoe","shoe","img_icon_kiss","kiss","img_icon_tomato","tomato","img_icon_brick","brick","Common_GiftUser","playCount","props","isUser","gameType","undefined","memberId","head","name","gold","events","selectGift","count","propertyNode","props_head","props_label_gift_userName","props_label_gift_userGold","props_gift_on_off","props_top_croupier","props_heguan_yxx","props_heguan_bandar","props_top_user","props_play_number","props_gift_groups","props_btn_gift_box","props_spr_gift_bg_user","props_spr_gift_bg_dealer","start","initState","bindEvent","node","on","EventType","TOUCH_END","active","TOGGLE","e","key","isChecked","children","forEach","v","parseInt","replace","getPlayNumber","toggles","i","length","toggle","getComponent","useProps","loadHeadSprite","cur","string","formatAmountWithLetter","bindUI","find","initIconConfig","iconNode","getChildByName","spriteFrame","getFile","source","addChild","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA+BC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAqBC,MAAAA,M,OAAAA,M;AAAqBC,MAAAA,I,OAAAA,I;;AACnGC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,M,iBAAAA,M;AAAcC,MAAAA,mB,iBAAAA,mB;;AAGdC,MAAAA,mB,iBAAAA,mB;AAAqBC,MAAAA,oB,iBAAAA,oB;AAAsBC,MAAAA,uB,iBAAAA,uB;;AAC3CC,MAAAA,qB,iBAAAA,qB;;AACAC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBjB,U;;AAe9B;AACA;AACA;kCACakB,gB,GAAiC,CAC7C;AACCC,QAAAA,KAAK,EAAE,CADR;AAECC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBC,aAFxC;AAGCC,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBC,IAHlC;AAICC,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBD,IAJtB;AAKCE,QAAAA,KAAK,EAAE,CALR;AAMCC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANT,OAD6C,EAQ1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBO,YAFrC;AAGFL,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBM,GAH/B;AAIFJ,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBI,GAJnB;AAKFH,QAAAA,KAAK,EAAE,GALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OAR0C,EAe1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBS,eAFrC;AAGFP,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBQ,MAH/B;AAIFN,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBM,MAJnB;AAKFL,QAAAA,KAAK,EAAE,GALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,EAAT,EAAa,CAAb;AANN,OAf0C,EAsB1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBW,aAFrC;AAGFT,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBU,IAH/B;AAIFR,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBQ,IAJnB;AAKFP,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OAtB0C,EA6B1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBa,aAFrC;AAGFX,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBY,IAH/B;AAIFV,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBU,IAJnB;AAKFT,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OA7B0C,EAoC1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBe,YAFrC;AAGFb,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBc,GAH/B;AAIFZ,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBY,GAJnB;AAKFX,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAC,EAAV,EAAc,EAAd;AANN,OApC0C,EA2C1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBiB,cAFrC;AAGFf,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBgB,KAH/B;AAIFd,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBc,KAJnB;AAKFb,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OA3C0C,EAkD1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBmB,eAFrC;AAGFjB,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBkB,MAH/B;AAIFhB,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBgB,MAJnB;AAKFf,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,EAAT,EAAa,CAAb;AANN,OAlD0C,EAyD1C;AACFa,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBqB,aAFrC;AAGFnB,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBoB,IAH/B;AAIFlB,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBkB,IAJnB;AAKFjB,QAAAA,KAAK,EAAE,MAAM,CALX;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OAzD0C,EAgE1C;AACFa,QAAAA,KAAK,EAAE,EADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsBuB,aAFrC;AAGFrB,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBsB,IAH/B;AAIFpB,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBoB,IAJnB;AAKFnB,QAAAA,KAAK,EAAE,CALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OAhE0C,EAuE1C;AACFa,QAAAA,KAAK,EAAE,EADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsByB,eAFrC;AAGFvB,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmBwB,MAH/B;AAIFtB,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBsB,MAJnB;AAKFrB,QAAAA,KAAK,EAAE,GALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAC,EAAb;AANN,OAvE0C,EA8E1C;AACFa,QAAAA,KAAK,EAAE,EADL;AAEFC,QAAAA,eAAe,EAAE;AAAA;AAAA,4DAAsB2B,cAFrC;AAGFzB,QAAAA,YAAY,EAAE;AAAA;AAAA,sDAAmB0B,KAH/B;AAIFxB,QAAAA,GAAG,EAAE;AAAA;AAAA,gDAAgBwB,KAJnB;AAKFvB,QAAAA,KAAK,EAAE,GALL;AAMFC,QAAAA,MAAM,EAAE,IAAIpB,IAAJ,CAAS,CAAT,EAAY,CAAZ;AANN,OA9E0C,C;;iCAwGjC2C,e,WADZjC,OAAO,CAAC,iBAAD,C,gBAAR,MACaiC,eADb;AAAA;AAAA,0CAC2E;AAAA;AAAA;;AAG1E;AAH0E,eAIlEC,SAJkE,GAItD,CAJsD;AAAA,eAMnEC,KANmE,GAMnD;AACtBC,YAAAA,MAAM,EAAE,IADc;AAEtBC,YAAAA,QAAQ,EAAEC,SAFY;AAGtBC,YAAAA,QAAQ,EAAED,SAHY;AAItBE,YAAAA,IAAI,EAAEF,SAJgB;AAKtBG,YAAAA,IAAI,EAAEH,SALgB;AAMtBI,YAAAA,IAAI,EAAE;AANgB,WANmD;AAAA,eAenEC,MAfmE,GAelD;AACvBC,YAAAA,UAAU,EAAE,CAACzC,KAAD,EAAgB0C,KAAhB,KAAkC,CAAG;AAD1B,WAfkD;AAAA,eAuBhEC,YAvBgE,GAuBjD;AACxBC,YAAAA,UAAU,EAAE,IAAI5D,IAAJ,EADY;AAExB6D,YAAAA,yBAAyB,EAAE,IAAI9D,KAAJ,EAFH;AAGxB+D,YAAAA,yBAAyB,EAAE,IAAI/D,KAAJ,EAHH;AAIxBgE,YAAAA,iBAAiB,EAAE,IAAI/D,IAAJ,EAJK;AAKxBgE,YAAAA,kBAAkB,EAAE,IAAIhE,IAAJ,EALI;AAMxBiE,YAAAA,gBAAgB,EAAE,IAAIjE,IAAJ,EANM;AAOxBkE,YAAAA,mBAAmB,EAAE,IAAIlE,IAAJ,EAPG;AAQxBmE,YAAAA,cAAc,EAAE,IAAInE,IAAJ,EARQ;AASxBoE,YAAAA,iBAAiB,EAAE,IAAIpE,IAAJ,EATK;AAUxBqE,YAAAA,iBAAiB,EAAE,IAAIrE,IAAJ,EAVK;AAWxBsE,YAAAA,kBAAkB,EAAE,IAAItE,IAAJ,EAXI;AAYxBuE,YAAAA,sBAAsB,EAAE,IAAIvE,IAAJ,EAZA;AAaxBwE,YAAAA,wBAAwB,EAAE,IAAIxE,IAAJ;AAbF,WAvBiD;AAAA;;AAC1EyE,QAAAA,KAAK,GAAG,CAAG;;AAkBDC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AACA;;AAkBSC,QAAAA,SAAS,GAAS;AAC3B,eAAKC,IAAL,CAAUC,EAAV,CAAa7E,IAAI,CAAC8E,SAAL,CAAeC,SAA5B,EAAuC,MAAM;AAC5C,iBAAKH,IAAL,CAAUI,MAAV,GAAmB,KAAnB;AACA,WAFD;AAIA,eAAKrB,YAAL,CAAkBI,iBAAlB,CAAoCc,EAApC,CAAuC3E,MAAM,CAAC4E,SAAP,CAAiBG,MAAxD,EAAiEC,CAAD,IAAe;AAC9E,kBAAMC,GAAG,GAAG,UAAU,KAAKnC,KAAL,CAAWI,QAAjC;;AACA,gBAAI8B,CAAC,CAACE,SAAN,EAAiB;AAChB;AAAA;AAAA,gEAAqB,KAAKpC,KAAL,CAAWI,QAAhC;AACA,aAFD,MAEO;AACN;AAAA;AAAA,sEAAwB,KAAKJ,KAAL,CAAWI,QAAnC;AACA;AACD,WAPD;AASA,eAAKO,YAAL,CAAkBS,iBAAlB,CAAoCiB,QAApC,CAA6CC,OAA7C,CAAqDC,CAAC,IAAI;AACzDA,YAAAA,CAAC,CAACV,EAAF,CAAK3E,MAAM,CAAC4E,SAAP,CAAiBG,MAAtB,EAA+BC,CAAD,IAAe;AAC5C,kBAAIA,CAAC,CAACE,SAAN,EAAiB;AAChB,qBAAKrC,SAAL,GAAiByC,QAAQ,CAACD,CAAC,CAACjC,IAAF,CAAOmC,OAAP,CAAe,SAAf,EAA0B,EAA1B,CAAD,CAAzB;AACA,eAFD,MAEO;AACN,qBAAK1C,SAAL,GAAiB,CAAjB;AACA;AACD,aAND;AAOA,WARD;AASA;;AAEO2C,QAAAA,aAAa,GAAG;AACvB,gBAAMC,OAAO,GAAG,KAAKhC,YAAL,CAAkBS,iBAAlB,CAAoCiB,QAApD;;AACA,eAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,OAAO,CAACE,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACxC,kBAAME,MAAM,GAAGH,OAAO,CAACC,CAAD,CAAP,CAAWG,YAAX,CAAwB7F,MAAxB,CAAf;;AACA,gBAAI4F,MAAM,CAACV,SAAX,EAAsB;AACrB,qBAAOI,QAAQ,CAACM,MAAM,CAAClB,IAAP,CAAYtB,IAAZ,CAAiBmC,OAAjB,CAAyB,SAAzB,EAAoC,EAApC,CAAD,CAAf;AACA;AACD;;AACD,iBAAO,CAAP;AACA;;AAESO,QAAAA,QAAQ,CAACb,GAAD,EAAoBnE,KAApB,EAAmD;AACpE,cAAImE,GAAG,KAAK,QAAZ,EAAsB,CACrB,CADD,MACO,IAAIA,GAAG,KAAK,MAAZ,EAAoB;AAC1B;AAAA;AAAA,kCAAOc,cAAP,CAAsBjF,KAAK,CAACkF,GAA5B,EAAiC,KAAKvC,YAAL,CAAkBC,UAAlB,CAA6BmC,YAA7B,CAA0C9F,MAA1C,CAAjC;AACA,WAFM,MAEA,IAAIkF,GAAG,KAAK,MAAZ,EAAoB;AAC1B,iBAAKxB,YAAL,CAAkBE,yBAAlB,CAA4CsC,MAA5C,GAAqDnF,KAAK,CAACkF,GAA3D;AACA,WAFM,MAEA,IAAIf,GAAG,KAAK,MAAZ,EAAoB;AAC1B,iBAAKxB,YAAL,CAAkBG,yBAAlB,CAA4CqC,MAA5C,GAAqD,KAAKnD,KAAL,CAAWO,IAAX,CAAgB6C,sBAAhB,EAArD;AACA,WAFM,MAEA,IAAIjB,GAAG,KAAK,UAAZ,EAAwB,CAC9B,CADM,MACA,IAAIA,GAAG,KAAK,UAAZ,EAAwB;AAC9B,iBAAKxB,YAAL,CAAkBI,iBAAlB,CAAoCgC,YAApC,CAAiD7F,MAAjD,EAAyDkF,SAAzD,GAAqE;AAAA;AAAA,4DAAoB,KAAKpC,KAAL,CAAWI,QAA/B,CAArE;AACA,WAFM,MAEA,IAAI+B,GAAG,KAAK,UAAZ,EAAwB;AAC9B,iBAAKxB,YAAL,CAAkBQ,cAAlB,CAAiCa,MAAjC,GAA0C,KAAKhC,KAAL,CAAWC,MAArD;AACA,iBAAKU,YAAL,CAAkBY,sBAAlB,CAAyCS,MAAzC,GAAkD,KAAKhC,KAAL,CAAWC,MAA7D;AACA,iBAAKU,YAAL,CAAkBa,wBAAlB,CAA2CQ,MAA3C,GAAoD,CAAC,KAAKhC,KAAL,CAAWC,MAAhE,CAH8B,CAK9B;AAEA;AACA;AACA;AACA;AACA;AACD;;AACSoD,QAAAA,MAAM,GAAS;AACxB,gBAAMP,MAAM,GAAG,KAAKnC,YAAL,CAAkBS,iBAAlB,CAAoCiB,QAApC,CAA6CiB,IAA7C,CAAkDf,CAAC,IAAIA,CAAC,CAACjC,IAAF,KAAW,YAAY,KAAKP,SAAnF,CAAf;AACA+C,UAAAA,MAAM,KAAKA,MAAM,CAACC,YAAP,CAAoB7F,MAApB,EAA4BkF,SAA5B,GAAwC,IAA7C,CAAN;AAEA,eAAKmB,cAAL;AACA;;AAEOA,QAAAA,cAAc,GAAG;AACxB,eAAK5C,YAAL,CAAkBW,kBAAlB,CAAqCU,MAArC,GAA8C,KAA9C;AACAjE,UAAAA,gBAAgB,CAACuE,OAAjB,CAAyBC,CAAC,IAAI;AAC7B,kBAAMiB,QAAQ,GAAG1G,WAAW,CAAC,KAAK6D,YAAL,CAAkBW,kBAAnB,CAA5B;AACAkC,YAAAA,QAAQ,CAACxB,MAAT,GAAkB,IAAlB;AACAwB,YAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCV,YAAzC,CAAsD9F,MAAtD,EAA8DyG,WAA9D,GAA4E;AAAA;AAAA,4DAAoB,QAApB,EAA8BC,OAA9B,CAAsCpB,CAAC,CAACtE,eAAxC,EAAyD2F,MAArI;AACA,iBAAKjD,YAAL,CAAkBU,iBAAlB,CAAoCwC,QAApC,CAA6CL,QAA7C;AACAA,YAAAA,QAAQ,CAAC3B,EAAT,CAAY7E,IAAI,CAAC8E,SAAL,CAAeC,SAA3B,EAAsC,MAAM;AAC3C,mBAAKvB,MAAL,CAAYC,UAAZ,CAAuB8B,CAAC,CAACvE,KAAzB,EAAgC,KAAK+B,SAArC;AACA,mBAAK6B,IAAL,CAAUI,MAAV,GAAmB,KAAnB;AACA,aAHD;AAIA,WATD;AAUA;;AAED8B,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA1HyE,O","sourcesContent":["import { _decorator, Button, Component, instantiate, Label, Node, Sprite, SpriteFrame, Toggle, UITransform, Vec3, WebView } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport { global, lang, sourceManageSeletor } from '../../hall';\r\nimport { addToastAction, ToastType } from '../../hall/store/actions/baseBoard';\r\nimport { GameType } from '../viewModel/GiftUserViewModel';\r\nimport { isChatShieldingUser, putChatShieldingUser, removeChatShieldingUser } from '../../utils/tool';\r\nimport { SpriteFramePathDefine } from '../sourceDefine/spriteDefine';\r\nimport { SkeletonPathDefine } from '../sourceDefine/skeletonDefine';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\ntype IconConfig = {\r\n\tvalue: number,\r\n\t/**图片资源路径 */\r\n\tspriteFramePath: string,\r\n\t/**骨骼动画资源路径 */\r\n\tskeletonPath: string,\r\n\t/**配音路径 */\r\n\tdub: SoundPathDefine,\r\n\t/**图标飞的过程中旋转的角度 */\r\n\tangle: number,\r\n\t/**图标的偏移量 */\r\n\toffset: Vec3\r\n}\r\n/**\r\n * 礼物图标配置\r\n */\r\nexport const GIFT_ICON_CONFIG: IconConfig[] = [\r\n\t{\r\n\t\tvalue: 1,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_cock,\r\n\t\tskeletonPath: SkeletonPathDefine.cock,\r\n\t\tdub: SoundPathDefine.cock,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 2,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_egg,\r\n\t\tskeletonPath: SkeletonPathDefine.egg,\r\n\t\tdub: SoundPathDefine.egg,\r\n\t\tangle: 360,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 3,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_durian,\r\n\t\tskeletonPath: SkeletonPathDefine.durian,\r\n\t\tdub: SoundPathDefine.durian,\r\n\t\tangle: 360,\r\n\t\toffset: new Vec3(20, 0),\r\n\t}, {\r\n\t\tvalue: 4,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_rose,\r\n\t\tskeletonPath: SkeletonPathDefine.rose,\r\n\t\tdub: SoundPathDefine.rose,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 5,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_beer,\r\n\t\tskeletonPath: SkeletonPathDefine.beer,\r\n\t\tdub: SoundPathDefine.beer,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 6,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_pan,\r\n\t\tskeletonPath: SkeletonPathDefine.pan,\r\n\t\tdub: SoundPathDefine.pan,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(-50, 25),\r\n\t}, {\r\n\t\tvalue: 7,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_money,\r\n\t\tskeletonPath: SkeletonPathDefine.money,\r\n\t\tdub: SoundPathDefine.money,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 8,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_bucket,\r\n\t\tskeletonPath: SkeletonPathDefine.bucket,\r\n\t\tdub: SoundPathDefine.bucket,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(30, 0),\r\n\t}, {\r\n\t\tvalue: 9,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_shoe,\r\n\t\tskeletonPath: SkeletonPathDefine.shoe,\r\n\t\tdub: SoundPathDefine.shoe,\r\n\t\tangle: 360 * 5,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 10,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_kiss,\r\n\t\tskeletonPath: SkeletonPathDefine.kiss,\r\n\t\tdub: SoundPathDefine.kiss,\r\n\t\tangle: 0,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}, {\r\n\t\tvalue: 11,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_tomato,\r\n\t\tskeletonPath: SkeletonPathDefine.tomato,\r\n\t\tdub: SoundPathDefine.tomato,\r\n\t\tangle: 360,\r\n\t\toffset: new Vec3(0, -20),\r\n\t}, {\r\n\t\tvalue: 12,\r\n\t\tspriteFramePath: SpriteFramePathDefine.img_icon_brick,\r\n\t\tskeletonPath: SkeletonPathDefine.brick,\r\n\t\tdub: SoundPathDefine.brick,\r\n\t\tangle: 360,\r\n\t\toffset: new Vec3(0, 0),\r\n\t}\r\n]\r\n\r\nexport interface IState {\r\n}\r\n\r\nexport interface IProps {\r\n\tisUser?: boolean,\r\n\tgameType?: GameType,\r\n\tmemberId?: string,\r\n\thead?: number,\r\n\tname?: string,\r\n\tgold?: number\r\n}\r\nexport interface IEvent {\r\n\tselectGift: (value: number, count: number) => void\r\n}\r\n\r\n@ccclass('Common_GiftUser')\r\nexport class Common_GiftUser extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\r\n\t/**全局的播放次数 */\r\n\tprivate playCount = 1;\r\n\r\n\tpublic props: IProps = {\r\n\t\tisUser: true,\r\n\t\tgameType: undefined,\r\n\t\tmemberId: undefined,\r\n\t\thead: undefined,\r\n\t\tname: undefined,\r\n\t\tgold: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tselectGift: (value: number, count: number) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_head: new Node(),\r\n\t\tprops_label_gift_userName: new Label(),\r\n\t\tprops_label_gift_userGold: new Label(),\r\n\t\tprops_gift_on_off: new Node(),\r\n\t\tprops_top_croupier: new Node(),\r\n\t\tprops_heguan_yxx: new Node(),\r\n\t\tprops_heguan_bandar: new Node(),\r\n\t\tprops_top_user: new Node(),\r\n\t\tprops_play_number: new Node(),\r\n\t\tprops_gift_groups: new Node(),\r\n\t\tprops_btn_gift_box: new Node(),\r\n\t\tprops_spr_gift_bg_user: new Node(),\r\n\t\tprops_spr_gift_bg_dealer: new Node(),\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.node.active = false;\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_gift_on_off.on(Toggle.EventType.TOGGLE, (e: Toggle) => {\r\n\t\t\tconst key = \"gift_\" + this.props.memberId;\r\n\t\t\tif (e.isChecked) {\r\n\t\t\t\tputChatShieldingUser(this.props.memberId)\r\n\t\t\t} else {\r\n\t\t\t\tremoveChatShieldingUser(this.props.memberId)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_play_number.children.forEach(v => {\r\n\t\t\tv.on(Toggle.EventType.TOGGLE, (e: Toggle) => {\r\n\t\t\t\tif (e.isChecked) {\r\n\t\t\t\t\tthis.playCount = parseInt(v.name.replace(\"toggle_\", \"\"))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playCount = 1;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getPlayNumber() {\r\n\t\tconst toggles = this.propertyNode.props_play_number.children;\r\n\t\tfor (let i = 0; i < toggles.length; i++) {\r\n\t\t\tconst toggle = toggles[i].getComponent(Toggle);\r\n\t\t\tif (toggle.isChecked) {\r\n\t\t\t\treturn parseInt(toggle.node.name.replace(\"toggle_\", \"\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 1;\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === 'isUser') {\r\n\t\t} else if (key === 'head') {\r\n\t\t\tglobal.loadHeadSprite(value.cur, this.propertyNode.props_head.getComponent(Sprite));\r\n\t\t} else if (key === 'name') {\r\n\t\t\tthis.propertyNode.props_label_gift_userName.string = value.cur;\r\n\t\t} else if (key === 'gold') {\r\n\t\t\tthis.propertyNode.props_label_gift_userGold.string = this.props.gold.formatAmountWithLetter();\r\n\t\t} else if (key === 'gameType') {\r\n\t\t} else if (key === 'memberId') {\r\n\t\t\tthis.propertyNode.props_gift_on_off.getComponent(Toggle).isChecked = isChatShieldingUser(this.props.memberId);\r\n\t\t} else if (key === '_setDone') {\r\n\t\t\tthis.propertyNode.props_top_user.active = this.props.isUser;\r\n\t\t\tthis.propertyNode.props_spr_gift_bg_user.active = this.props.isUser;\r\n\t\t\tthis.propertyNode.props_spr_gift_bg_dealer.active = !this.props.isUser;\r\n\t\t\t\r\n\t\t\t// this.propertyNode.props_top_croupier.active = !this.props.isUser;\r\n\r\n\t\t\t// if (this.propertyNode.props_top_croupier.active) {\r\n\t\t\t// \tthis.propertyNode.props_heguan_yxx.active = this.props.gameType === GameType.YXX;\r\n\t\t\t// \tthis.propertyNode.props_heguan_bandar.active = this.props.gameType === GameType.BANDAR_QIU_QIU || this.props.gameType === GameType.BANDAR;\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\tprotected bindUI(): void {\r\n\t\tconst toggle = this.propertyNode.props_play_number.children.find(v => v.name === \"toggle_\" + this.playCount)\r\n\t\ttoggle && (toggle.getComponent(Toggle).isChecked = true);\r\n\r\n\t\tthis.initIconConfig();\r\n\t}\r\n\r\n\tprivate initIconConfig() {\r\n\t\tthis.propertyNode.props_btn_gift_box.active = false;\r\n\t\tGIFT_ICON_CONFIG.forEach(v => {\r\n\t\t\tconst iconNode = instantiate(this.propertyNode.props_btn_gift_box);\r\n\t\t\ticonNode.active = true;\r\n\t\t\ticonNode.getChildByName(\"spr_gift_icon\").getComponent(Sprite).spriteFrame = sourceManageSeletor(\"common\").getFile(v.spriteFramePath).source;\r\n\t\t\tthis.propertyNode.props_gift_groups.addChild(iconNode);\r\n\t\t\ticonNode.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t\tthis.events.selectGift(v.value, this.playCount);\r\n\t\t\t\tthis.node.active = false;\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}