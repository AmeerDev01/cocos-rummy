{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Proxy/SlotProxy.ts"],"names":["SlotProxy","instantiate","log","BaseProxy","roller","SlotRepository","config","RollerType","constructor","proxyName","data","repository","initRoller","rollerList","iconRollerQueue","forEach","rollerData","i","Object","assign","setStopIndex","rollerIndex","stopIndex","showResult","setResult","resultData","result","getRollerList"],"mappings":";;;4IAYaA,S;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVLC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,G,OAAAA,G;;AAFdC,MAAAA,S;;AACCC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,c,iBAAAA,c;;AAETC,MAAAA,M;;;;;;;;;4BAEKC,U,0BAAAA,U;AAAAA,QAAAA,U;AAAAA,QAAAA,U;eAAAA,U;;;2BAOCP,S,GAAN,MAAMA,SAAN;AAAA;AAAA,kCAAkD;AAC9CQ,QAAAA,WAAW,CAACC,SAAiB,GAAG,IAArB,EAA2BC,IAAS,GAAG,IAAvC,EAA6C;AAC3D,gBAAMD,SAAN,EAAiBC,IAAjB;AACA,eAAKC,UAAL,GAAkB;AAAA;AAAA,iDAAlB;AACH,SAJoD,CAMrD;;AACA;AACJ;AACA;AACA;;;AACWC,QAAAA,UAAU,GAAG;AAChB;AACA;AACA,eAAKD,UAAL,CAAgBE,UAAhB,GAA6B,EAA7B;AACA;AAAA;AAAA,gCAAOC,eAAP,CAAuBC,OAAvB,CAA+B,CAACC,UAAD,EAAaC,CAAb,KAAmB;AAC9C;AACA;AACA,kBAAMP,IAAI,GAAGQ,MAAM,CAACC,MAAP,CAAc,EAAd;AAAA;AAAA,kCAA0B;AAACT,cAAAA,IAAI,EAAEM;AAAP,aAA1B,CAAb;AACC,iBAAKL,UAAL,CAAgBE,UAAhB,CAA2BI,CAA3B,IAAgChB,WAAW,CAACS,IAAD,CAA3C;AACJ,WALD;AAMH;AAED;AACJ;AACA;AACA;AACA;;;AACWU,QAAAA,YAAY,CAACC,WAAD,EAAsBC,SAAtB,EAAyC;AACxD,gBAAMC,UAAU,GAAG,KAAKZ,UAAL,CAAgBE,UAAhB,CAA2BQ,WAA3B,EAAwCE,UAA3D;AACAA,UAAAA,UAAU,CAACD,SAAX,GAAuBA,SAAvB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACWE,QAAAA,SAAS,CAACH,WAAD,EAAsBC,SAAtB,EAAyCG,UAAzC,EAA+D;AAC3E,gBAAMT,UAAU,GAAG,KAAKL,UAAL,CAAgBE,UAAhB,CAA2BQ,WAA3B,CAAnB;;AACA,cAAIL,UAAJ,EAAgB;AACZA,YAAAA,UAAU,CAACO,UAAX,CAAsBD,SAAtB,GAAkCA,SAAlC;AACAN,YAAAA,UAAU,CAACO,UAAX,CAAsBG,MAAtB,GAA+BD,UAA/B;AACH,WAHD,MAGO;AACHvB,YAAAA,GAAG,CAAC,cAAD,CAAH;AACH;AACJ;;AAEMyB,QAAAA,aAAa,GAAG;AACnB,iBAAO,KAAKhB,UAAL,CAAgBE,UAAvB;AACH;;AAnDoD,O","sourcesContent":["import BaseProxy from \"./BaseProxy\"\r\nimport {roller, SlotRepository} from \"../Repositories/SlotRepository\"\r\nimport {instantiate, log} from \"cc\";\r\nimport config from \"../phoenix_config\"\r\n\r\nexport enum RollerType {\r\n    /**普通的5列小滑槽 */\r\n    NORMAL = \"iconRollerQueue\",\r\n    /**3列滑槽，中间为大滑槽 */\r\n    LARGE = \"largeIconRollerQueue\"\r\n}\r\n\r\nexport class SlotProxy extends BaseProxy<SlotRepository> {\r\n    public constructor(proxyName: string = null, data: any = null) {\r\n        super(proxyName, data);\r\n        this.repository = new SlotRepository()\r\n    }\r\n\r\n    // private repository: FruitsSlotRepository\r\n    /**\r\n     * 初始化滑槽数据\r\n     * @param rollerType NORMAL展示5列, LARGE展示3列且中间为大滑槽\r\n     */\r\n    public initRoller() {\r\n        // 首先重置\r\n        // console.log(\"rollerType\", rollerType)\r\n        this.repository.rollerList = []\r\n        config.iconRollerQueue.forEach((rollerData, i) => {\r\n            //如果只有3列数据，那需要将将第二排设置为大滑槽数据\r\n            // const data = Object.assign({}, (rollerType === RollerType.LARGE && i === 1) ? bigRoller : roller, { data: rollerData })\r\n            const data = Object.assign({}, roller, {data: rollerData})\r\n             this.repository.rollerList[i] = instantiate(data)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 设置停止序号（控制停止）\r\n     * @param rollerIndex 滑槽序号\r\n     * @param stopIndex 停止的序号（规则从1开始，默认为-1：停止）\r\n     */\r\n    public setStopIndex(rollerIndex: number, stopIndex: number) {\r\n        const showResult = this.repository.rollerList[rollerIndex].showResult\r\n        showResult.stopIndex = stopIndex\r\n    }\r\n\r\n    /**\r\n     * 赋值结果数据\r\n     * @param rollerIndex 滑槽序号\r\n     * @param stopIndex 数据开始截取结果的序号（从1开始的）\r\n     * @param resultData 结果数据（其实可以不用，但是可以看得出获取了多少个元素）\r\n     */\r\n    public setResult(rollerIndex: number, stopIndex: number, resultData: number[]) {\r\n        const rollerData = this.repository.rollerList[rollerIndex]\r\n        if (rollerData) {\r\n            rollerData.showResult.stopIndex = stopIndex\r\n            rollerData.showResult.result = resultData\r\n        } else {\r\n            log(\"未找到对应的滚槽数据载体\")\r\n        }\r\n    }\r\n\r\n    public getRollerList() {\r\n        return this.repository.rollerList\r\n    }\r\n}\r\n"]}