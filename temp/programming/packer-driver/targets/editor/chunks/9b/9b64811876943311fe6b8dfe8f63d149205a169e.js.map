{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Component/phoenix_Loader.ts"],"names":["_decorator","Component","Label","ProgressBar","Node","global","lang","ccclass","property","phoenix_Loader","loaderState","onLoad","getCloseBtn","active","node","getChildByName","start","on","EventType","TOUCH_END","closeSubGame","getLoaderState","setLoadingProgress","fileName","total","remain","isValid","progressBar","getComponent","str","progress","loaderTxt","string","toFixed","write","k","WebSocketModule","GameInit","placeStr","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAMC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,I,OAAAA,I;;AACzCC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,I,iBAAAA,I;;;;;;;;;OACV;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV,O,GAAsBR,U;;gCAEfS,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAACN,KAAD,C,2BAFb,MACaO,cADb,SACoCR,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA,eAGnCS,WAHmC,GAGvB,IAHuB;AAAA;;AAIhCC,QAAAA,MAAM,GAAS;AACrB,eAAKC,WAAL,GAAmBC,MAAnB,GAA4B,KAA5B;AACH;;AACOD,QAAAA,WAAW,GAAE;AACjB,iBAAO,KAAKE,IAAL,CAAUC,cAAV,CAAyB,kBAAzB,CAAP;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKJ,WAAL,GAAmBK,EAAnB,CAAsBb,IAAI,CAACc,SAAL,CAAeC,SAArC,EAA+C,MAAI;AAC/C,iBAAKT,WAAL,GAAiB,KAAjB;AACA;AAAA;AAAA,kCAAOU,YAAP;AACH,WAHD;AAIH;;AACDC,QAAAA,cAAc,GAAE;AACZ,iBAAO,KAAKX,WAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIY,QAAAA,kBAAkB,CAACC,QAAD,EAAmBC,KAAnB,EAAkCC,MAAlC,EAAkD;AAChE,cAAG,CAAC,KAAKX,IAAN,IAAc,CAAC,KAAKA,IAAL,CAAUY,OAA5B,EAAqC;AACrC,cAAIC,WAAW,GAAC,KAAKb,IAAL,CAAUC,cAAV,CAAyB,mBAAzB,EAA8Ca,YAA9C,CAA2DzB,WAA3D,CAAhB;AACA,cAAI0B,GAAG,GAACJ,MAAM,GAACD,KAAf;AACAG,UAAAA,WAAW,CAACG,QAAZ,GAAsBD,GAAtB;AACN,eAAKE,SAAL,CAAeC,MAAf,GAAyB,GAAE,CAAC,CAAC,IAAGP,MAAM,GAACD,KAAX,IAAsB,GAAvB,EAA4BS,OAA5B,CAAoC,CAApC,CAAuC,GAAlE,CALsE,CAMhE;;AACA,cAAGJ,GAAG,IAAE,CAAR,EAAU;AACN,iBAAKE,SAAL,CAAeC,MAAf,GAAsB;AAAA;AAAA,8BAAKE,KAAL,CAAWC,CAAC,IAAIA,CAAC,CAACC,eAAF,CAAkBC,QAAlC,EAA4C,EAA5C,EAAgD;AAAEC,cAAAA,QAAQ,EAAE;AAAZ,aAAhD,CAAtB;AACA;AACP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAvCyC,O;;;;;iBAEvB,I","sourcesContent":["import {_decorator, Component, Label,ProgressBar,Node, log} from 'cc';\r\nimport {global, lang} from \"../../../../hall\";\r\nconst {ccclass, property} = _decorator;\r\n@ccclass('phoenix_Loader')\r\nexport class phoenix_Loader extends Component {\r\n    @property(Label)\r\n    loaderTxt: Label = null\r\n    public loaderState=true;\r\n    protected onLoad(): void {\r\n        this.getCloseBtn().active = false;\r\n    }\r\n    private getCloseBtn(){\r\n        return this.node.getChildByName('props_btn_return');\r\n    }\r\n    start() {\r\n        this.getCloseBtn().on(Node.EventType.TOUCH_END,()=>{\r\n            this.loaderState=false\r\n            global.closeSubGame()\r\n        })\r\n    }\r\n    getLoaderState(){\r\n        return this.loaderState\r\n    }\r\n    /**\r\n     *\r\n     * @param fileName 资源名称\r\n     * @param total 全部文件数量\r\n     * @param remain 剩余的数量\r\n     */\r\n    setLoadingProgress(fileName: string, total: number, remain: number) {\r\n        if(!this.node || !this.node.isValid) return;\r\n        let progressBar=this.node.getChildByName('props_progressBar').getComponent(ProgressBar)\r\n        let str=remain/total\r\n        progressBar.progress =str;\r\n\t\tthis.loaderTxt.string = `${((1-(remain/total) ) * 100).toFixed(0)}%`\r\n        //this.node.getChildByName('props_btn_return').active = remain !== 0;\r\n        if(str<=0){\r\n            this.loaderTxt.string=lang.write(k => k.WebSocketModule.GameInit, {}, { placeStr: \"Game init...\" })\r\n           }\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n"]}