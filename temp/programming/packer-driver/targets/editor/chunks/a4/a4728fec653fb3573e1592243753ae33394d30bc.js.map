{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragonTiger/components/DragonTiger_MainPanel.ts"],"names":["_decorator","instantiate","Label","Node","sp","Sprite","Toggle","tween","UITransform","Vec3","Animation","SpriteFrame","bezier","game","Game","BaseComponent","SKT_MAG_TYPE","sktInstance","sktMsgListener","formatNumber","getNodeByNameDeep","getNodePositionInCanvas","getUUID","initToggle","omitStr","SpriteFramePathDefine","PrefabPathDefine","sourceManageSeletor","bundleDragonTiger","bundleCommon","mainGameViewModel","dragonTiger_Audio","playGetCoin","changeSelectChipAction","setMemberBetAction","winViewModel","loseViewModel","historyViewModel","usersViewModel","onlineViewModel","bundlePkgName","playBtnClick","playChip","playDefeat","playDragonCard","playGame","playTigerCard","playTimeout","playTurnCard","playWin","global","lang","ToastPosition","addToastAction","FontPathDefine","ChipViewModel","config","initBetData","BetType","gameCacheData","changeGoldDataAction","TaskScheduler","Task","ccclass","property","DragonTiger_MainPanel","amountArr","lastArr","repeatArr","skeleton","skeletonWin","initSeconds","isShowGame","isBet","isLockBet","betAreaInfo","Map","areaInfo","isFlyStar","taskScheduler","clearTime","leftNode","rightNode","propertyNode","props_ToggleGroup","props_btn_history","props_layout_history","props_btn_dragon","props_btn_tiger","props_btn_seri","props_btn_ulang","props_spr_user_head","props_user_name","props_label_user_goldNum","props_label_gold_up","props_btn_addGold","props_spr_history_new","props_djs5_0","props_djs10_6","props_cards_left","props_cards_right","props_dragonTiger_pokerLeft","props_dragonTiger_pokerRight","props_spr_cardBg_right","props_spr_cardBg_left","props_dragonTiger_game_bet","props_dragonTiger_stop_bet","props_layout_lock","props_btn_shop","props_add_chips","props_tips_gold","props_tips_vip","props_remind_noBet","props_remind_repeat","props","sendedP","readySendP","win","seconds","betSeconds","typeThreeSeconds","gameType","durGameType","roomId","gold","memberName","memberId","icon","winGold","winType","memberBet","oddNewList","oddsList","pokerInfo","pokerRightNum","suit","rank","color","pokerLeftNum","tips","selectChip","myInfo","usersInfo","countDown","newBetData","allWinUsers","goldData","cancelBetData","events","giveUsersGift","openHistoryPanel","openWinPanel","openLosePanel","openChipPanel","closeWinPanel","start","sendCard","initState","betCountDown","bindEvent","on","EVENT_HIDE","EVENT_SHOW","node","isValid","sendSktMessage","GAME_SHOW","add","data","dragonTiger_VS","getChildByName","active","getComponent","string","load","SkeletonData","err","sk","Skeleton","skeletonData","animation","EventType","TOUCH_END","HISTORY","repeatBet","betArea","BLUE","RED","SERI","openShop","EventHandler","useState","key","value","cur","destroy","window","clearTimeout","closePopup2","init","dispatch","sendCardAction","judgeCoin","updateLockBetState","stopBet","longStop","timer","setTimeout","openCard","children","forEach","item","interactable","closePopup","isUnMount","clear","clearAllBetAreaGold","useProps","undefined","parseInt","formatAmountWithCommas","loadHeadSprite","flyChip","joinqQueue","done","flyWinAreaToUser","index","comp","playAddGold","length","updateTipsShow","Object","keys","areaNode","getNodeByBetType","getNodeToBetType","Number","cancelBet","spriteFrame","pre","setState","shuffleCard","changeHistoryMin","hisTime","settleAccount","startPosition","position","x","y","formatAmountWithLetter","by","call","scheduleOnce","setPosition","channelToggleCallback","event","customEventData","toggleArr","target","i","isChecked","num","chipTypes","createChip","chipValue","parent","mountView","getFile","MAIN_CHIP","source","appendTo","connect","setProps","betType","name","toLowerCase","hallDispatch","content","write","k","palyingModule","RechangeGlod","placeStr","betData","isMyBet","sendBet","betAmount","isMe","BET_RESPONSE","isFly","find","v","viewModel","radom","Math","random","chipNode","endPosition","randomBetEndPosition","addBetInfo","updateAllBet","uiTransform","getBetStartPosition","setWorldPosition","convertToWorldSpaceAR","to","angle","easing","gameOption","seatNumber","playWinAni","winRateMaxIndex","betTypeIndex","indexOf","splice","flyStar","updateBetAreaGold","totalBetAmount","meTotalBetAmount","betInfo","betInfos","get","chips","chip","endPositon","getFlyToHeadEndPosition","worldPosition","scale","unMount","clearBetAreaGold","removeAllChildren","myHeadPosition","onlineNumberPosition","headLocations","flyToHeGuan","concat","FlyLossAreaToHe","dealerPosition","copyBetInfo","odds","arr","Array","fill","push","userId","filter","map","getStar","parentNode","getPropertyNode","props_spr_icon","showWinRate","starIcon","starNode","addChild","playWinRateTween","tweenNode","endPos","playTime","callBack","startPos","startAngle","eulerAngles","fruitTween","mixY","maxY","mixX","maxX","progressX","end","current","t","progressY","parallel","progress","onUpdate","z","set","floor","list","gameWinIcon","gameY","gameX","contentSize","width","DRAGONTIGER_HISTORY_DRAGON","DRAGONTIGER_HISTORY_TIGER","DRAGONTIGER_HISTORY_SERI","newIconX","newIconY","height","setSiblingIndex","console","log","time","removeChip","delay","clearRepeatBet","some","total","type1Total","type2Total","type3Total","betData1","typeTotal","type","betId","betData2","betData3","lastBetArr","positionX","positionY","splitChip","vsIcon","gameTime","play","FINISHED","contrastCards","loop","pokerTotalNum","sendCardNode","String","DRAGONTIGER_HENG_PAI_MINI","DRAGONTIGER_HENG_PAI_MIDDLE","DRAGONTIGER_HENG_PAI_BIG","DRAGONTIGER_SHU_PAI_BIG","DRAGONTIGER_SHU_PAI_MIDDLE","DRAGONTIGER_SHU_PAI_MINI","leftCard","rightCard","dragonTigerLeftCard","dragonTigerRightCard","amountNum","charAt","substring","grayscale","font","WU_BET","GREEN_BET","BLUE_BET","DARK_BLUE_BET","RED_BET","PURPLE_BET","ORANGE_BET","destroyCallBack","destoryQueue","stopQueue","bindUI","isLock","updateTipsValue","getMyHeadPosition","chipFlyToHead","MIDDLE","InitGameModule","BetFaild","format","update","deltaTime"],"mappings":"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","sourcesContent":["import {_decorator,instantiate, Label, Node, Skeleton, sp, Sprite,Toggle,tween, UITransform,Vec3,Animation,SpriteFrame,sys, bezier,UIOpacity, find, game, Game,} from \"cc\";\r\nimport { BaseComponent } from \"../../../base/BaseComponent\";\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from \"../socketConnect\";\r\nimport { formatNumber, getNodeByNameDeep, getNodePositionInCanvas, getUUID, initToggle, omitStr } from \"../../../utils/tool\";\r\nimport { SpriteFramePathDefine } from \"../sourceDefine/spriteDefine\";\r\nimport { SkeletalPathDefine } from \"../sourceDefine/skeletalDefine\";\r\nimport { PrefabPathDefine } from \"../sourceDefine/prefabDefine\";\r\nimport { sourceManageSeletor,bundleDragonTiger ,bundleCommon, mainGameViewModel, dragonTiger_Audio, playGetCoin} from \"../index\";\r\nimport {changeSelectChipAction, setMemberBetAction, setMemberDataAction } from '../store/actions/history';\r\nimport {winViewModel,loseViewModel,historyViewModel, usersViewModel, onlineViewModel} from '../ViewModel/DragonTigerMainViewModel';\r\nimport { paddingNum, removeComma} from './DragonTiger_win';\r\nimport { bundlePkgName } from \"../sourceDefine\"\r\nimport { playBtnClick, playChip, playDefeat, playDragonCard, playGame, playTigerCard, playTimeout, playTurnCard, playWin } from \"../index\";\r\nimport { global, lang } from \"../../../hall\";\r\nimport { ToastPosition, ToastType, addToastAction } from \"../../../hall/store/actions/baseBoard\";\r\nimport { FontPathDefine } from \"../sourceDefine/fontDefine\";\r\nimport { Tips } from \"../store/actions/pokerDetail\";\r\nimport ChipViewModel from \"../ViewModel/DragonTigerChipViewModel\";\r\nimport config, { initBetData } from \"../config\";\r\nimport { BetData, BetInfo, BetType, DragonTigerCard, HeadType, MemberInfoVo, RepeatBet, SendBet, WinUser, gameCacheData } from \"../type\";\r\nimport { changeGoldDataAction } from \"../store/actions/game\";\r\nimport TaskScheduler, { Task } from \"../../../utils/TaskScheduler\";\r\n\r\nconst { ccclass, property } = _decorator;\r\nexport interface IState {\r\n  gameType:number,\r\n  winType:number,\r\n  countDown:number,\r\n  betCountDown:number,\r\n  initSeconds:number,\r\n}\r\nexport interface IProps {\r\n  roomId:string,\r\n  gold:number,\r\n  memberName: string,\r\n  memberId:string,\r\n  icon: number,//头像的spriteFrame下标值\r\n  winGold: number,\r\n  winType?:number,\r\n  memberBet:object,\r\n  oddsList: number[];\r\n  oddNewList:number[];\r\n  pokerLeftNum:DragonTigerCard,\r\n  pokerRightNum: DragonTigerCard,\r\n  pokerInfo: {\r\n    pokerLeftNum:DragonTigerCard,\r\n    pokerRightNum: DragonTigerCard,\r\n  }\r\n  sendedP:number,\r\n  readySendP:number,\r\n  win:number,\r\n  seconds:number,\r\n  betSeconds:number,\r\n  typeThreeSeconds:number,\r\n  gameType: number,\r\n  /**801阶段转换 */\r\n  durGameType: number,\r\n  tips: Tips[],\r\n  selectChip: number,\r\n  myInfo: HeadType,\r\n  usersInfo: MemberInfoVo[],\r\n  countDown: number,\r\n  newBetData: BetData,\r\n  allWinUsers: WinUser[],\r\n  goldData: object,\r\n  cancelBetData:BetData\r\n  \r\n}\r\nexport interface IEvent {\r\n  giveUsersGift: () => void;\r\n  openHistoryPanel: () => void;\r\n  openWinPanel: () => void;\r\n  openLosePanel: () => void;\r\n  openChipPanel: () => void;\r\n  closeWinPanel:()=>void;\r\n}\r\nexport let timer;\r\nexport let hisTime;\r\nexport let gameTime;\r\n@ccclass(\"DragonTiger_MainPanel\")\r\nexport class DragonTiger_MainPanel extends BaseComponent<IState,IProps,IEvent> {\r\n  @property(Node)\r\n  history:Node[]=[];\r\n  public amountArr: Array<RepeatBet> = [];\r\n  private lastArr:Array<RepeatBet>=[];\r\n  private repeatArr:Array<RepeatBet>=[];\r\n  private skeleton=new Node();\r\n  private skeletonWin=new Node();\r\n  private initSeconds:number=5;\r\n  private isShowGame: boolean = true;\r\n  private isBet: boolean = true;\r\n  private isLockBet: boolean = false;\r\n  private betAreaInfo: Map<BetType, BetInfo[]> = new Map();\r\n  private areaInfo = [1, 2, 3];\r\n\tprivate isFlyStar: boolean = false;\r\n  private taskScheduler = new TaskScheduler();\r\n  private clearTime;\r\n\r\n  /**牌节点 */\r\n  private leftNode: Node;\r\n  private rightNode: Node;\r\n\r\n\r\n  start() {\r\n    this.sendCard()\r\n  }\r\n  protected propertyNode = {\r\n    props_ToggleGroup: new Node(),// toggle下注金币\r\n    props_btn_history: new Node(),\r\n    props_layout_history:new Node(),\r\n    props_btn_dragon: new Node(),\r\n    props_btn_tiger: new Node(),\r\n    props_btn_seri: new Node(),\r\n    props_btn_ulang: new Node(),\r\n    props_spr_user_head: new Node(),\r\n    props_user_name:new Node(),\r\n    props_label_user_goldNum:new Node(),\r\n    props_label_gold_up:new Node(),\r\n    props_btn_addGold:new Node(),\r\n    props_spr_history_new:new Node(),\r\n    props_djs5_0:new Node(),\r\n    props_djs10_6: new Node(),\r\n    props_cards_left: new Node(),\r\n    props_cards_right:new Node(),\r\n    props_dragonTiger_pokerLeft:new Node(),\r\n    props_dragonTiger_pokerRight:new Node(),\r\n    props_spr_cardBg_right:new Node(),\r\n    props_spr_cardBg_left:new Node(),\r\n    props_dragonTiger_game_bet:new Node(),\r\n    props_dragonTiger_stop_bet:new Node(),\r\n    props_layout_lock:new Node(),\r\n    props_btn_shop:new Node(),\r\n    props_add_chips: new Node(),//添加金币的父节点\r\n    props_tips_gold:new Node(),\r\n    props_tips_vip: new Node(),\r\n    props_remind_noBet: new Node(),\r\n    props_remind_repeat:new Node(),\r\n    \r\n  };\r\n  public props: IProps = {\r\n    sendedP:0,\r\n    readySendP:0,\r\n    win:null,\r\n    seconds:0,\r\n    betSeconds:0,\r\n    typeThreeSeconds:0,\r\n    gameType:null,\r\n    durGameType:null,\r\n    roomId:\"\",\r\n    gold:null,\r\n    memberName: \"\",\r\n    memberId:\"\",\r\n    icon: 0,//头像的spriteFrame下标值\r\n    winGold:0,\r\n    winType:0,\r\n    memberBet:{},\r\n    oddNewList:[],\r\n    oddsList: [],\r\n    pokerInfo: null,\r\n    pokerRightNum:{\r\n      suit:0,//花色\r\n      rank:\"\",//数字\r\n      color:0\r\n    },\r\n    pokerLeftNum:{\r\n      suit:0,//花色\r\n      rank:\"\",//数字\r\n      color:0\r\n    },\r\n    tips: null,\r\n    selectChip: 1000,\r\n    myInfo: null,\r\n    usersInfo: null,\r\n    countDown: null,\r\n    newBetData: null,\r\n    allWinUsers: null,\r\n    goldData: null,\r\n    cancelBetData:null,\r\n    \r\n  };\r\n  public events: IEvent = {\r\n    giveUsersGift: () => {},\r\n    openHistoryPanel: () => {},\r\n    openWinPanel: () => {},\r\n    openLosePanel: () => {},\r\n    openChipPanel: () => {},\r\n    closeWinPanel:()=>{}\r\n  };\r\n  protected initState() {\r\n    return {\r\n      gameType:0,\r\n      winType:0,\r\n      countDown:0,\r\n      betCountDown:0,\r\n      initSeconds:0,\r\n    };\r\n  }\r\n  protected bindEvent(): void {\r\n    game.on(Game.EVENT_HIDE, () => {//用户切入后台\r\n       this.isShowGame=false;\r\n    });\r\n\t\tgame.on(Game.EVENT_SHOW, () => {\r\n      this.isShowGame=true\r\n      if(this.node && this.node.isValid){\r\n        sktInstance.sendSktMessage(SKT_MAG_TYPE.GAME_SHOW, {roomId: gameCacheData.roomId });\r\n      }\r\n      sktMsgListener.add(SKT_MAG_TYPE.GAME_SHOW,bundlePkgName,(data)=>{//810\r\n        if (data.seconds>0) {\r\n          if(this.node){\r\n            const dragonTiger_VS=this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\")\r\n            dragonTiger_VS.active=false;\r\n            if(data.seconds>5){\r\n              this.propertyNode.props_djs10_6.getChildByName(\"dragonTiger_CountDown\").getComponent(Label).string =data.seconds+'';\r\n            }else{\r\n              bundleDragonTiger.load(`car/djs5_${data.seconds}`,sp.SkeletonData,(err,sk)=>{\r\n                if (!err) {       \r\n                  if (!this.propertyNode || !this.propertyNode.props_djs5_0) { return }\r\n                  this.propertyNode.props_djs5_0.getComponent(sp.Skeleton).skeletonData = sk;\r\n                  this.propertyNode.props_djs5_0.getComponent(sp.Skeleton).animation = \"animation\";\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n\t\t});\r\n    this.propertyNode.props_btn_history.on(Node.EventType.TOUCH_END, () => {\r\n      playBtnClick();\r\n      sktInstance.sendSktMessage(SKT_MAG_TYPE.HISTORY,gameCacheData.roomId)\r\n      this.events.openHistoryPanel();\r\n    });\r\n    this.propertyNode.props_btn_ulang.on(Node.EventType.TOUCH_END, () => {\r\n      playBtnClick();\r\n      this.repeatBet();\r\n    });\r\n    this.propertyNode.props_btn_dragon.on(Node.EventType.TOUCH_END,()=>{\r\n      playBtnClick();\r\n      this.betArea(BetType.BLUE)\r\n    })\r\n    this.propertyNode.props_btn_tiger.on(Node.EventType.TOUCH_END,()=>{\r\n      playBtnClick();\r\n      this.betArea(BetType.RED)\r\n    })\r\n    this.propertyNode.props_btn_seri.on(Node.EventType.TOUCH_END, () => {\r\n      playBtnClick();\r\n      this.betArea(BetType.SERI)\r\n    })\r\n    this.propertyNode.props_btn_addGold.on(Node.EventType.TOUCH_END,()=>{\r\n      playBtnClick()\r\n      global.openShop()\r\n    })\r\n    this.propertyNode.props_btn_shop.on(Node.EventType.TOUCH_END,()=>{\r\n      playBtnClick()\r\n      global.openShop()\r\n    })\r\n    initToggle( this.propertyNode.props_ToggleGroup,this.node,new DragonTiger_MainPanel.EventHandler(),\"DragonTiger_MainPanel\",\"channelToggleCallback\" );\r\n    this.useState((key, value) => {\r\n      this.isBet = value.cur === 1;\r\n      if (value.cur === 1) { //下注阶段\r\n        if(!this.isShowGame){\r\n          this.propertyNode.props_cards_left.active=true;\r\n          this.propertyNode.props_cards_right.active = true;\r\n          this.leftNode && this.leftNode.destroy();\r\n          this.rightNode && this.rightNode.destroy();\r\n          return\r\n        }\r\n        this.leftNode && this.leftNode.destroy();\r\n        this.rightNode && this.rightNode.destroy();\r\n        window.clearTimeout(this.clearTime)\r\n        this.closePopup2();\r\n        this.areaInfo=[1,2,3]\r\n      \r\n        this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\").active = false;\r\n        this.init(); //初始化\r\n        this.dispatch(setMemberBetAction({})); //清空当前用户下注memberBet的数据\r\n        // this.openCountDown(); // 播放倒计时\r\n        this.sendCardAction() //发牌行为\r\n        this.judgeCoin(this.props.gold); \r\n        this.updateLockBetState();\r\n      }\r\n      if(value.cur === 2){ //开奖阶段\r\n        if(!this.isShowGame){ \r\n          this.propertyNode.props_cards_left.active=true;\r\n          this.propertyNode.props_cards_right.active = true;\r\n          this.leftNode && this.leftNode.destroy();\r\n          this.rightNode && this.rightNode.destroy();\r\n          this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\").active=true;\r\n          return \r\n        }\r\n        this.stopBet();\r\n        this.propertyNode.props_djs10_6.active=false;\r\n        this.propertyNode.props_djs5_0.active =false;\r\n        this.propertyNode.props_dragonTiger_game_bet.active=false\r\n        dragonTiger_Audio.longStop(); //暂停倒计时的音效\r\n        window.clearTimeout(timer)\r\n        this.clearTime=window.setTimeout(()=>{\r\n          if(this.node && this.node.isValid){\r\n            this.openCard();\r\n          }\r\n        },2000);\r\n      }\r\n      if (value.cur === 3) { //结算阶段  \r\n        this.propertyNode.props_djs10_6.active=false;\r\n        this.propertyNode.props_djs5_0.active =false;\r\n        this.propertyNode.props_dragonTiger_game_bet.active=false;\r\n        this.propertyNode.props_dragonTiger_stop_bet.active = false\r\n        dragonTiger_Audio.longStop()\r\n        window.clearTimeout(timer)\r\n        window.clearTimeout(this.clearTime)\r\n        this.propertyNode.props_ToggleGroup.children.forEach(item=>item.getComponent(Toggle).interactable=false);\r\n        this.closePopup();\r\n        this.clearTime= window.setTimeout(() => {\r\n          if (mainGameViewModel.isUnMount) { return }\r\n          this.betAreaInfo.clear();\r\n          this.clearAllBetAreaGold()  \r\n\r\n        },2000)\r\n        this.areaInfo = [1, 2, 3];\r\n        if(!this.isShowGame){ this.init(); return }\r\n      }  \r\n    },[\"gameType\"])    \r\n  }\r\n  protected useProps(key: keyof IProps, value: { pre: any; cur: any }) {\r\n      /**当传入的props发生变化，要执行的函数 */\r\n      //这里是如果界面要用到这个数据，把这个值绑定到界面节点上   如果要更改store里这个值 调用this.dispatch(setUserInfoAction(新的 ： gameTotalNum))\r\n    if(key === \"gold\"){\r\n      let gold = value.cur;\r\n      if(value.cur===undefined){\r\n        gold = 0;\r\n      }\r\n      this.judgeCoin(gold)\r\n      this.updateLockBetState();\r\n      if( value.cur <= 0 || value.cur == undefined){\r\n        this.propertyNode.props_label_user_goldNum.getComponent(Label).string = \"0\";\r\n      }else{\r\n        this.propertyNode.props_label_user_goldNum.getComponent(Label).string = parseInt(value.cur).formatAmountWithCommas();\r\n      }\r\n    }\r\n    if (key === \"myInfo\") {\r\n      if (!value.cur) { return }\r\n      global.loadHeadSprite(value.cur.icon, this.propertyNode.props_spr_user_head.getComponent(Sprite));//加载头像\r\n      this.propertyNode.props_user_name.getComponent(Label).string = omitStr(value.cur.memberName + \"\", 12);\r\n\t\t}\r\n    // key===\"memberName\" && (this.propertyNode.props_user_name.getComponent(Label).string=omitStr(value.cur+\"\",12) )\r\n    if (key === \"newBetData\") {\r\n      if (!value.cur) { return }\r\n      if (value.cur.memberId === gameCacheData.memberId) { return };\r\n      this.flyChip(value.cur)\r\n    }\r\n    if (key === \"allWinUsers\") {\r\n      if(!value.cur){ return }\r\n      this.taskScheduler.joinqQueue(new Task((done)=>{\r\n          if(mainGameViewModel.isUnMount){ return }\r\n          if (value.cur) {\r\n            value.cur.forEach(item=>{\t\t \r\n              this.flyWinAreaToUser(item)\r\n            })\r\n          }\r\n\r\n        window.setTimeout(() => done(), 1000)\r\n      }),false).joinqQueue(new Task((done)=>{\r\n          if(mainGameViewModel.isUnMount){ return }\r\n          if(!value.cur){\r\n            return\r\n          }\r\n          value.cur.forEach(item=>{\r\n            if(item.memberId !== gameCacheData.memberId){\r\n              if(item.index < 6 && item.index >= 0){\r\n                usersViewModel.comp.playAddGold(item ,item.gold)\r\n              }\r\n            }\r\n            \r\n          })\r\n      \r\n        window.setTimeout(()=>done(),1000)\r\n      }),false)\r\n    }\r\n    if (key === \"countDown\") {\r\n      this.propertyNode.props_djs10_6.active = value.cur > 5;\r\n      const dragonTiger_VS=this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\");\r\n      dragonTiger_VS.active=false;\r\n      this.propertyNode.props_dragonTiger_game_bet.active = value.cur === 15\r\n      this.propertyNode.props_dragonTiger_stop_bet.active = value.cur <= 0\r\n      if (value.cur === 5) {\r\n        playTimeout()\r\n      }else if(value.cur===15){\r\n        playGame()\r\n      }\r\n      if (value.cur > 5 ) {\r\n        // this.propertyNode.props_djs10_6.active = true;\r\n         // 开始动画播放\r\n         this.propertyNode.props_dragonTiger_game_bet.getComponent(sp.Skeleton).animation = \"animation\";\r\n        //  this.propertyNode.props_dragonTiger_game_bet.setSiblingIndex(1000)\r\n         this.propertyNode.props_djs10_6.getComponent(sp.Skeleton).animation = \"animation\";\r\n         this.propertyNode.props_djs10_6.getChildByName(\"dragonTiger_CountDown\").getComponent(Label).string = value.cur+\"\";\r\n      } else {\r\n       \r\n        this.propertyNode.props_dragonTiger_game_bet.active = false;\r\n        this.propertyNode.props_djs10_6.getChildByName(\"dragonTiger_CountDown\").getComponent(Label).string = \"\"\r\n        this.propertyNode.props_djs10_6.active = false;\r\n        // 播放倒计时5-0\r\n        this.propertyNode.props_djs5_0.active = true;\r\n        bundleDragonTiger.load(`car/djs5_${value.cur}`,sp.SkeletonData,(err,sk)=>{\r\n          if (!err) {     \r\n            if (!this.propertyNode || !this.propertyNode.props_djs5_0) { return }\r\n            this.propertyNode.props_djs5_0.getComponent(sp.Skeleton).skeletonData=sk\r\n            this.propertyNode.props_djs5_0.getComponent(sp.Skeleton).animation = \"animation\";\r\n          }\r\n        })\r\n        if(value.cur<=0){\r\n          if(historyViewModel!==undefined){\r\n            if(!historyViewModel.isUnMount){//历史记录面板未关，倒计时结束，重新请求\r\n              sktInstance.sendSktMessage(SKT_MAG_TYPE.HISTORY,gameCacheData.roomId)\r\n            }\r\n          }\r\n          this.propertyNode.props_djs5_0.active=false;\r\n          return\r\n        }\r\n      }\r\n    }\r\n    if (key === \"tips\") {\r\n      if (value.cur && value.cur.length > 0) {\r\n         // this.updateLockBetState()\r\n        this.updateTipsShow()\r\n       \r\n      } else {\r\n\t\t\t\tthis.propertyNode.props_layout_lock.active = false;\r\n\t\t\t}\r\n      \r\n    }\r\n    if (key === \"memberBet\") { \r\n      if (!value.cur || value.cur === undefined) { return };\r\n      if (Object.keys(value.cur).length != 0) { \r\n        for(let key in value.cur){\r\n          let areaNode:Node;\r\n          if(key===\"1\"){\r\n            areaNode=this.propertyNode.props_btn_dragon\r\n          }else if(key===\"2\"){\r\n            areaNode=this.propertyNode.props_btn_tiger\r\n          }else if(key===\"3\"){\r\n            areaNode=this.propertyNode.props_btn_seri\r\n          }\r\n          if (value.cur[key] === 0) {\r\n            getNodeByNameDeep(\"Label_bet_mine\", areaNode).getComponent(Label).string = \"\"\r\n          } else {\r\n            areaNode.getChildByName(\"spr_bet_bg\").active = true;\r\n            getNodeByNameDeep(\"Label_bet_mine\", areaNode).getComponent(Label).string = value.cur[key].formatAmountWithCommas()\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (key === \"goldData\") {\r\n      if (!value.cur || value.cur === undefined) { return };\r\n      if(value.cur && Object.keys(value.cur).length != 0){   \r\n        for (let key in value.cur) {    \r\n          let areaNode = this.getNodeByBetType(this.getNodeToBetType(Number(key)))\r\n\t\t\t\t\tgetNodeByNameDeep(\"Label_bet_all\", areaNode).getComponent(Label).string = formatNumber(value.cur[key]);\r\n\t\t\t\t}\r\n\t\t\t  }    \r\n    }\r\n    if (key === 'cancelBetData') {\r\n      if(!value.cur){return}\r\n\t\t\tthis.cancelBet(value.cur);\r\n\t\t}\r\n    if (key === \"icon\") {\r\n      if (!value.cur) { return }\r\n\t\t\tbundleCommon.load(`resource/head/head_circle_${value.cur}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tthis.propertyNode.props_spr_user_head.getComponent(Sprite).spriteFrame = sp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n    if (key === \"sendedP\") {\r\n      window.setTimeout(() => {\r\n        if (mainGameViewModel.isUnMount) { return };\r\n        this.sendCard()\r\n     },4000)\r\n    }\r\n    if (key === \"readySendP\") {\r\n      window.setTimeout(() => {\r\n        if (mainGameViewModel.isUnMount) { return };\r\n        this.sendCard()\r\n       },4000)\r\n    }\r\n    // if(key===\"seconds\"){\r\n    //     this.setState({\r\n    //       countDown:value.cur\r\n    //     })\r\n    // }\r\n    if(key===\"typeThreeSeconds\"){\r\n      this.initSeconds=value.cur\r\n      if(value.cur===0){\r\n        this.initSeconds=value.pre\r\n      }\r\n    }\r\n    if (key === \"gameType\") {\r\n      this.setState({\r\n        gameType:value.cur\r\n      })\r\n    }\r\n    // if(key===\"betSeconds\"){\r\n    //     this.setState({\r\n    //       countDown:value.cur\r\n    //     }) \r\n    // }\r\n    // if (key === \"pokerLeftNum\") { this.shuffleCard() }\r\n    // if( key===\"pokerRightNum\" ){ this.shuffleCard() }\r\n    if(key===\"pokerInfo\"){ this.shuffleCard() }\r\n    if( key===\"oddsList\" ){ this.changeHistoryMin(value.cur) }\r\n    if(key===\"oddNewList\"){\r\n      hisTime=window.setTimeout(()=>{\r\n        this.changeHistoryMin(value.cur)\r\n      },4000)\r\n    }\r\n    if (key === \"winType\") {\r\n      window.setTimeout(()=>{  \r\n        if(this.node && this.node.isValid){\r\n          this.settleAccount()\r\n        }\r\n      },2000)\r\n        \r\n    }\r\n    if(key===\"winGold\"){\r\n      if(value.cur<=0 || value.cur === undefined) return;  \r\n      const startPosition = new Vec3(this.propertyNode.props_label_gold_up.position.x, this.propertyNode.props_label_gold_up.position.y);\r\n      this.propertyNode.props_label_gold_up.getComponent(Label).string = \"+\" + value.cur.formatAmountWithLetter()\r\n      this.propertyNode.props_label_gold_up.active=true;\r\n      tween(this.propertyNode.props_label_gold_up).by(1, { position: new Vec3(0, 30) }).call(() => {\r\n        this.scheduleOnce(() => {\r\n        this.propertyNode.props_label_gold_up.active = false;\r\n        this.propertyNode.props_label_gold_up.setPosition(startPosition);\r\n        }, 0.5);\r\n      }).start();\r\n    }\r\n  }\r\n  /**Toggle选中金币的回调 效果切换*/ \r\n  protected channelToggleCallback(event: Event, customEventData: string) {\r\n    playBtnClick();\r\n    const toggleArr: Node[] = event.target[\"parent\"].children;\r\n    for (let i = 0; i < toggleArr.length; i++) {       \r\n      if (toggleArr[i].getComponent(Toggle).isChecked) {\r\n        let num=config.chipTypes[i].value;\r\n        this.dispatch(changeSelectChipAction(num));//更新选中的金币值\r\n        toggleArr[i].children[0].active = false;\r\n        toggleArr[i].children[1].active = false;\r\n        toggleArr[i].children[2].active = true;\r\n      } else {\r\n        toggleArr[i].children[0].active = true;\r\n        toggleArr[i].children[1].active = true;\r\n        toggleArr[i].children[2].active = false;\r\n      }\r\n    }\r\n  }\r\n  /** 创造对应选取的金币  */\r\n\tprivate createChip(chipValue: number, parent: Node): ChipViewModel {\r\n\t\treturn new ChipViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.MAIN_CHIP).source).appendTo(parent).connect().setProps({ value: chipValue });\r\n\t}\r\n  protected betArea(betType: BetType) { \r\n    if(this.props.gameType >= 2){ return }\r\n    if (this.props.tips && this.props.tips.length > 0) {\r\n          const tips = this.props.tips[0]\r\n          if ('vip' === tips.name.toLowerCase()) {\r\n            return; \r\n          } else if ('gold' === tips.name.toLowerCase()) {\r\n            // 提示用户余额不足\r\n            global.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.RechangeGlod,{},{ placeStr:\"对不起，您的金币不足，请充值!\" }) }));\r\n            return;\r\n          }\r\n    }\r\n    if (this.isLockBet = this.props.gold < 5000) {\r\n\t\t\treturn;\r\n    }\r\n    if (this.props.gold < this.props.selectChip) {\r\n\t\t\t// 提示用户余额不足\r\n\r\n\t\t\tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.RechangeGlod,{},{ placeStr:\"对不起，您的金币不足，请充值!\" })}));\r\n\t\t\treturn;\r\n    }\r\n    const betData = initBetData(this.props.myInfo.index, this.props.myInfo.memberId, betType, this.props.selectChip);\r\n\t\tbetData.isMyBet = true;//当前用户是否下注\r\n    const sendBet:SendBet = {\r\n\t\t\troomId: gameCacheData.roomId,\r\n      memberId: this.props.myInfo.memberId,\r\n      memberName: this.props.myInfo.memberName,\r\n      gold: betData.betAmount,\r\n      betType: betData.betType,\r\n\t\t\tisMe: betData.isMyBet,\r\n\t\t}\r\n\t   // 下注信息发送给服务器\r\n\t   sktInstance.sendSktMessage(SKT_MAG_TYPE.BET_RESPONSE, sendBet);\r\n     this.flyChip(betData)\r\n    //  this.amountArr.push(sendBet);\r\n  } \r\n\t/**\r\n\t * 飞筹码\r\n\t * @param betData \r\n\t * @param isFly 是否飞筹码的动画，false用于刚进入初始化筹码\r\n\t */\r\n\tpublic flyChip(betData: BetData, isFly: boolean = true): void {\r\n\t\t// 下注筹码不存在，不处理\r\n\t\tif (!config.chipTypes.find(v => v.value === betData.betAmount)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tisFly = betData.isFly;\r\n\t\tisFly = this.isShowGame;\r\n\t\tconst betArea = this.getNodeByBetType(betData.betType).getChildByName(\"Layout_bet\");\r\n\t\tconst viewModel = this.createChip(betData.betAmount, this.propertyNode.props_add_chips);\r\n\t\tlet radom = Math.random()*90-90;//旋转角度\r\n\t\tconst chipNode = viewModel.comp.node;\r\n\t\tconst endPosition = this.randomBetEndPosition(betData.betType);\r\n\t\tthis.addBetInfo(betData,viewModel);\r\n    this.updateAllBet();\r\n\t\tif (isFly) {\r\n\t\t\tplayChip()\r\n\t\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\t\t\tconst startPosition = this.getBetStartPosition(betData);\r\n\t\t\tchipNode.setWorldPosition(uiTransform.convertToWorldSpaceAR(startPosition));\r\n\t\t\ttween(chipNode).to(1, { position: endPosition , angle:-radom,},{easing: 'quintOut'}).start();\r\n      // if (!isWinRateBet && betData.index === config.gameOption.winRateMaxIndex) {\r\n      if (betData.memberId !== gameCacheData.memberId) {\r\n        if (betData.index > config.gameOption.seatNumber) {\r\n\t\t\t\t\t\t\tonlineViewModel.comp.playWinAni()\r\n        }\r\n      }\r\n\t\t\tif (betData.index === config.gameOption.winRateMaxIndex) {\r\n\t\t\t\t//判定是否是未展示星星的区域数组 若未展示，返回区域下标 否（即已展示） 返回-1\r\n\t\t\t\tlet betTypeIndex = this.areaInfo.indexOf(betData.betType);\r\n\r\n\t\t\t\tif(betTypeIndex >= 0){\r\n\t\t\t\t\tthis.areaInfo.splice(betTypeIndex,1);//移除展示了的区域\r\n\t\t\t\t\t// 飞星星\r\n          this.flyStar(this.getNodeByBetType(betData.betType), betData.betType);\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.updateBetAreaGold(betData, betArea.parent);\r\n  }\r\n  \t/** 下注总值 用户下注值 */\r\n\tprivate updateBetAreaGold(betData: BetData, betArea: Node): void {\r\n\t\tif (betData.totalBetAmount === 0) {\t\t\t\r\n\t\t\tgetNodeByNameDeep(\"Label_bet_all\", betArea).getComponent(Label).string = \"0\"; \r\n\t\t\tgetNodeByNameDeep(\"Label_bet_mine\", betArea).getComponent(Label).string = \"\";\r\n\t\t\tgetNodeByNameDeep(\"Label_bet_mine\", betArea).parent.active = betData.meTotalBetAmount > 0;\r\n\t\t}\r\n  }\r\n  \t/** 赢的区域飞金币到用户头像 */\r\n\tprivate flyWinAreaToUser(betInfo,isFly: boolean = true): void{\r\n\t\tif(!this.props.win ){ return}\r\n    const betInfos = this.betAreaInfo.get(this.props.win);\r\n    if (betInfos) {\r\n      playGetCoin()\r\n      betInfos.forEach(betInfo => {\r\n        betInfo.chips.forEach(chip => {\r\n          const chipNode = chip.comp.node;\r\n          const endPositon = this.getFlyToHeadEndPosition(betInfo);\r\n          const uiTransform = this.node.getComponent(UITransform);\r\n          tween(chipNode).to(0.8, { worldPosition: uiTransform.convertToWorldSpaceAR(endPositon) ,scale:new Vec3(0.1,0.1)},{easing: 'quintOut'})\r\n            .call(() => {\r\n              chip.unMount();\r\n            })\r\n            .start();\r\n          })\r\n      });\r\n\t\t\t}\r\n\t\t// })\r\n  }\r\n    /**清除所有下注区域的金币 */\r\n  public clearAllBetAreaGold() {\r\n    this.dispatch(changeGoldDataAction({}));\r\n\t\tthis.clearBetAreaGold(this.propertyNode.props_btn_dragon);\r\n\t\tthis.clearBetAreaGold(this.propertyNode.props_btn_seri);\r\n\t\tthis.clearBetAreaGold(this.propertyNode.props_btn_tiger);\r\n\t\t// this.hideAllWinRate();\r\n\t\tthis.areaInfo = [1, 2, 3];\r\n\t\t// this.clearBetWinAreaAni(this.areaInfo);\r\n\t\t// this.amountArr = [];\t\r\n\t}\r\n  private clearBetAreaGold(betArea: Node) {\r\n\t\tbetArea.getChildByName(\"Layout_bet\").removeAllChildren();\r\n\t\t\r\n\t\tthis.updateBetAreaGold({\r\n\t\t\tindex: 0, memberId: \"\", betAmount: 0, betType: null, totalBetAmount: 0, meTotalBetAmount: 0\r\n\t\t}, betArea);\r\n\t}\r\n  \t/**筹码飞向头像的结束坐标 */\r\n\tprivate getFlyToHeadEndPosition(betInfo: BetInfo) {\r\n\t\tif (betInfo.isMe) {\r\n\t\t\t// 播放获得金币的音效\r\n\t\t\t// playGetCoin();\r\n\t\t\treturn new Vec3(config.gameOption.myHeadPosition.x, config.gameOption.myHeadPosition.y);\r\n\t\t}\r\n\r\n\t\tif (betInfo.index >= config.gameOption.seatNumber) {\r\n\t\t\treturn new Vec3(config.gameOption.onlineNumberPosition.x, config.gameOption.onlineNumberPosition.y);\r\n\t\t}\r\n\r\n\t\treturn new Vec3(config.headLocations[betInfo.index].x, config.headLocations[betInfo.index].y);\r\n  } \r\n\t/** 金币飞向荷官 */\r\n\tprivate flyToHeGuan(){//this.betAreaInfo 的chip存储了金币节点，可遍历它进行位置移动\r\n\t\t// playGetCoin()\r\n    let chips: ChipViewModel[] = [];\r\n\t\tthis.betAreaInfo.forEach((v, k) => {\r\n\t\t\tif(!this.props.win){//没有中奖区域\r\n\t\t\t\tv.forEach(betInfo => {\r\n\t\t\t\t\tchips = chips.concat(betInfo.chips);\r\n\t\t\t\t});\r\n\t\t\t}\r\n      // 找出未中奖的区域\r\n\r\n\t\t\tif(this.props.win){\r\n\t\t\t\t// playGetCoin()\r\n\t\t\t\tif (this.props.win !== k) {\r\n\t\t\t\t\tv.forEach(betInfo => {\r\n\t\t\t\t\t\tchips = chips.concat(betInfo.chips);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t})\r\n\t\t\r\n\t\t//未中奖区域\r\n\t\tthis.FlyLossAreaToHe(chips)\r\n\t} \r\n\t/** 未中奖区域飞金币到荷官位置 */\r\n\tprivate FlyLossAreaToHe(chips: ChipViewModel[]) {\r\n\t\tif (chips.length != 0) {\r\n\t\t\tplayGetCoin()\r\n\t\t}\r\n\t\tchips.forEach(chip => {\r\n\t\t\tconst chipNode = chip.comp.node;\r\n\t\t\tconst endPositon = new Vec3 (config.gameOption.dealerPosition.x,config.gameOption.dealerPosition.y);\r\n\t\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\r\n\t\t\ttween(chipNode).to(0.8, { worldPosition: uiTransform.convertToWorldSpaceAR(endPositon),scale:new Vec3(0.1,0.1) }, {easing: 'quintOut'})\r\n\t\t\t\t.call(() => {\r\n\t\t\t\t\t// this.lossAnimationEnd();\r\n\t\t\t\t\tchip.unMount();\r\n\t\t\t\t})\r\n\t\t\t\t.start();\r\n\t\t})\r\n  }\r\n\tprivate  copyBetInfo(betInfos: BetInfo[], parent: Node, odds: number): BetInfo[] {\r\n\t\tconst arr: BetInfo[] = [];\r\n    \r\n\t\tnew Array(odds).fill(0).forEach(v => {\r\n\t\t\tbetInfos.forEach(betInfo => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tindex: betInfo.index,\r\n\t\t\t\t\tuserId: betInfo.userId,\r\n\t\t\t\t\tisMe: betInfo.isMe,\r\n\t\t\t\t\tchips: betInfo.chips.filter(chip => chip.comp.props).map(chip => this.createChip(chip.comp.props.value, parent))\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\treturn arr;\r\n\t}\r\n  \t/**获得星星 */\r\n\tprivate getStar(parentNode:Node, betType: BetType) {\r\n\t\treturn usersViewModel.comp.getPropertyNode().props_spr_icon as Node\r\n\t}\r\n  /**显示星星在下注区域 */\r\n\tprivate showWinRate(betType: BetType) {\r\n\t\tif (!this.node || !this.node.isValid) return;\r\n\t\tthis.getStar( this.getNodeByBetType(betType), betType ).active  =  true;\r\n\t}\r\n  /**飞星星 */\r\n  private flyStar(parentNode:Node, betType: BetType) {\r\n    const endPosition = getNodePositionInCanvas(this.getStar( parentNode, betType ));\r\n    let starIcon = usersViewModel.comp.getPropertyNode().props_spr_icon as Node\r\n    // let starIcon = getNodeByNameDeep(\"props_spr_icon\",this.node.parent.getChildByName(\"prefabs_bandar_users\"));\r\n    const starNode  =  instantiate(starIcon);\r\n    const startPosition = getNodePositionInCanvas(starIcon)\r\n    starNode.active  =  true;\r\n    this.node.addChild(starNode);\r\n    starNode.setPosition(startPosition);\r\n        tween(starNode).to(1,{scale:new Vec3(0.8,0.8)}).start();\r\n    this.playWinRateTween(starNode, endPosition, 1, () => {\r\n      \r\n      this.scheduleOnce(() => {\r\n        this.showWinRate(betType);\r\n        starNode.destroy();\r\n        if(this.isFlyStar){this.isFlyStar = false}\r\n      }, 0.5);\r\n    });\r\n    \r\n  }\r\n  /**飞星星抛物线动画 */\r\n\tpublic playWinRateTween(tweenNode: Node, endPos: Vec3, playTime: number, callBack: Function) {\r\n\t\tconst startPos = tweenNode.position;\r\n\t\tconst startAngle = tweenNode.eulerAngles;\r\n\t\tconst fruitTween = tween(startPos);\r\n\r\n\t\tconst x = (startPos.x + endPos.x) / 2;\r\n\t\tconst y = (startPos.y + endPos.y) / 2;\r\n\r\n\t\tconst mixY = y + y * 0.6;\r\n\t\tconst maxY = y + y * 0.6;\r\n\t\tconst mixX = x;\r\n\t\tconst maxX = x;\r\n\t\tvar progressX = function (start, end, current, t) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tcurrent = bezier(start, mixX, maxX, end, t);\r\n\t\t\treturn current;\r\n\t\t}\r\n\t\tvar progressY = function (start, end, current, t) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tcurrent = bezier(start, mixY, maxY, end, t);\r\n\t\t\treturn current;\r\n\t\t}\r\n\r\n\t\tfruitTween.parallel(\r\n\t\t\ttween().to(playTime, { x: endPos.x }, {\r\n\t\t\t\tprogress: progressX, onUpdate: () => {\r\n\t\t\t\t\ttweenNode.isValid && tweenNode.setPosition(startPos);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\ttween().to(playTime, { y: endPos.y }, {\r\n\t\t\t\tprogress: progressY, onUpdate: () => {\r\n\t\t\t\t\ttweenNode.isValid && tweenNode.setPosition(startPos);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t).start();\r\n\t\ttween(startAngle).to(playTime, { z: 360 }, {\r\n\t\t\tonUpdate: () => {\r\n\t\t\t\tif (tweenNode.isValid) {\r\n\t\t\t\t\ttweenNode.eulerAngles = startAngle;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).call(() => callBack()).start();\r\n\t}\r\n  \t/**下注总筹码 */\r\n\tprivate updateAllBet(){\r\n\t\t// for(let key in gameCacheData.goldData){\r\n\t\t// \tlet areaNode = this.getNodeByBetType(this.getNodeToBetType(Number(key)))\r\n\t\t// \tif(gameCacheData.goldData[key] === 0){\r\n\t\t// \t\tgetNodeByNameDeep(\"Label_bet_all\", areaNode).getComponent(Label).string = \"0\"\r\n\t\t// \t}else{\r\n\t\t// \t\tgetNodeByNameDeep(\"Label_bet_all\", areaNode).getComponent(Label).string = formatNumber(gameCacheData.goldData[key]);\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n  \t/**\r\n\t * 添加下注信息\r\n\t * @param betData \r\n\t * @param viewModel \r\n\t */\r\n\tprivate addBetInfo(betData: BetData, viewModel: ChipViewModel) {\r\n\t\tlet betInfos = this.betAreaInfo.get(betData.betType);\r\n\t\tif (!betInfos) {\r\n\t\t\tbetInfos = [];\r\n\t\t\tthis.betAreaInfo.set(betData.betType, betInfos);\r\n\t\t}  \r\n\t\t\r\n\t\tlet betInfo = betInfos.find(v => v.userId === betData.memberId);\r\n\t\tif (betInfo) {\r\n\t\t\tbetInfo.chips.push(viewModel);\r\n\t\t} else {\r\n\t\t\tbetInfos.push({\r\n\t\t\t\tindex: betData.index,\r\n\t\t\t\tuserId: betData.memberId,\r\n\t\t\t\tisMe: betData.isMyBet,\r\n\t\t\t\tchips: [viewModel]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t}\r\n\t/** 获得下注筹码飞的开始坐标 */\r\n\tprivate getBetStartPosition(betData: BetData): Vec3 {\r\n\t\tif (betData.isMyBet) {\r\n\t\t\treturn new Vec3(config.gameOption.myHeadPosition.x, config.gameOption.myHeadPosition.y);\r\n\t\t}\r\n\r\n\t\tif (betData.index >= config.gameOption.seatNumber) {\r\n\t\t\treturn new Vec3(config.gameOption.onlineNumberPosition.x, config.gameOption.onlineNumberPosition.y);\r\n\t\t}\r\n\r\n\t\treturn new Vec3(config.headLocations[betData.index].x, config.headLocations[betData.index].y);\r\n\t}\r\n\t/** 获得下注筹码飞的结束坐标 */\r\n  private randomBetEndPosition(betType): Vec3 {\r\n    let y: number = Math.floor(Math.random() * -150 + 50);//目标位置Y\r\n    let x: number = 0;\r\n    if (betType === 1) {\r\n      x = Math.floor(Math.random() * -200 - 200);\r\n      \r\n    }else if(betType === 2) {\r\n      x = Math.floor(Math.random() * 200 + 200);\r\n      \r\n    }else if(betType === 3) {\r\n      x = Math.floor(Math.random() * 200 - 100);\r\n      y = Math.floor(Math.random() * -100);\r\n    }\r\n\r\n\t\treturn new Vec3(x, y);\r\n\t}\r\n  /** 获取点击区域的节点 */\r\n  private getNodeByBetType(betType: BetType) {\r\n    if (BetType.BLUE === betType) {\r\n      return this.propertyNode.props_btn_dragon;\r\n    } else if (BetType.RED === betType) {\r\n      return this.propertyNode.props_btn_tiger;\r\n    } else if (BetType.SERI === betType) {\r\n      return this.propertyNode.props_btn_seri;\r\n    }\r\n  }\r\n  private getNodeToBetType(betType: number) {\r\n    if (1 === betType) {\r\n      return BetType.BLUE;\r\n    } else if (2 === betType) {\r\n      return BetType.RED;\r\n    } else if (3 === betType) {\r\n      return BetType.SERI;\r\n    } \r\n  }\r\n  /**更新历史记录min*/\r\n  protected changeHistoryMin(list:number[]){\r\n    if(this.node && this.node.isValid){\r\n      for(let i = 0 ; i < list.length ; i++){  \r\n        let gameWinIcon= instantiate(this.propertyNode.props_layout_history.getChildByName(\"spr_history_icon1\"))\r\n            gameWinIcon.active=true;\r\n        let gameY:number=gameWinIcon.position.y;\r\n        let gameX:number=gameWinIcon.position.x+gameWinIcon.getComponent(UITransform).contentSize.width*i        \r\n        if(list[i] === 1){\r\n          gameWinIcon.getComponent(Sprite).spriteFrame=sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_HISTORY_DRAGON).source;\r\n        }else if(list[i] === 2){\r\n          gameWinIcon.getComponent(Sprite).spriteFrame=sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_HISTORY_TIGER).source;\r\n        }else{\r\n          gameWinIcon.getComponent(Sprite).spriteFrame=sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_HISTORY_SERI).source;           \r\n        }\r\n        gameWinIcon.setPosition(gameX,gameY)\r\n        this.propertyNode.props_layout_history.addChild(gameWinIcon)\r\n        if(list[list.length - 1] && list.length > 0){\r\n          let newIconX:number=gameX+gameWinIcon.getComponent(UITransform).contentSize.width*1/2\r\n          let newIconY:number=gameY+gameWinIcon.getComponent(UITransform).contentSize.height/2\r\n          this.propertyNode.props_spr_history_new.setPosition(newIconX,newIconY)\r\n          this.propertyNode.props_spr_history_new.setSiblingIndex(500)\r\n          this.propertyNode.props_btn_history.setSiblingIndex(0)\r\n          this.propertyNode.props_spr_history_new.active=true;\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n  /**自动关闭输赢结算弹窗*/\r\n  protected closePopup(){\r\n    //五秒后自动关闭结算弹框\r\n    if (mainGameViewModel.isUnMount) { return }\r\n    console.log(\"this.initSeconds\",this.initSeconds);\r\n    \r\n    let time:number=this.initSeconds*1000\r\n    window.setTimeout(() => {\r\n\r\n      if (this.node && this.node.isValid) {    \r\n        this.removeChip()\r\n        if(winViewModel!=undefined){\r\n          if(!winViewModel.isUnMount){\r\n            // this.removeChip()\r\n            winViewModel.unMount()\r\n          }\r\n        }\r\n        if (loseViewModel != undefined) {\r\n          if(!loseViewModel.isUnMount){\r\n            // this.removeChip()\r\n            loseViewModel.unMount()\r\n          }\r\n        }\r\n      }                \r\n      \r\n    },time) \r\n  }\r\n\r\n  /**自动关闭输赢结算弹窗  避免网卡未关闭弹窗，在一阶段在关一次*/\r\n  protected closePopup2(){\r\n    //五秒后自动关闭结算弹框\r\n    this.scheduleOnce(() => {\r\n      if (mainGameViewModel.isUnMount ) { return }\r\n      if(this.node && this.node.isValid){\r\n          if(winViewModel!=undefined){\r\n            if(!winViewModel.isUnMount){\r\n                winViewModel.unMount()\r\n            }\r\n          }\r\n          if(loseViewModel!=undefined){\r\n            if(!loseViewModel.isUnMount){\r\n              loseViewModel.unMount()\r\n            }\r\n          }\r\n      }                 \r\n    },1)\r\n  }\r\n    /**重复下注按钮*/ \r\n  protected repeatBet() {\r\n    if (this.props.gameType >= 2) {\r\n      if (!this.propertyNode && !this.propertyNode.props_remind_noBet) { return };\r\n\t\t\tthis.propertyNode.props_remind_noBet.active = true;\r\n\t\t\ttween(this.propertyNode.props_remind_noBet)\r\n\t\t\t.delay(2)\r\n\t\t\t.call(() => { \r\n\t\t\t\tthis.propertyNode.props_remind_noBet.active  = false;\r\n\t\t\t})\r\n\t\t\t.start()\r\n      return\r\n    };\r\n    if (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n    let toggleArr: Node[] = this.propertyNode.props_ToggleGroup.children;\r\n    this.clearRepeatBet();\r\n    this.repeatArr = this.lastArr;\r\n    if (this.repeatArr.length === 0) {\r\n\t\t\tif (!this.propertyNode && !this.propertyNode.props_remind_repeat) { return };\r\n\t\t\tthis.propertyNode.props_remind_repeat.active = true;\r\n\t\t\ttween(this.propertyNode.props_remind_repeat)\r\n\t\t\t.delay(2)\r\n\t\t\t.call(() => { \r\n\t\t\t\tthis.propertyNode.props_remind_repeat.active  = false;\r\n\t\t\t})\r\n\t\t\t.start()\r\n\t\t\treturn\r\n\t\t}\r\n    // this.amountArr.push(...this.lastArr)   \r\n    let isBet = toggleArr.some((item) => {\r\n      return item.getComponent(Toggle).interactable === true\r\n    });\r\n    if (isBet) {//是否可以点击下注\r\n      // 恢复上一次下注的情况\r\n      let total: number = 0\r\n      let type1Total: number = 0;\r\n      let type2Total: number = 0;\r\n      let type3Total: number = 0;\r\n      for (var i = 0; i < this.repeatArr.length; i++) { \r\n        total += this.repeatArr[i].gold;\r\n        if (this.repeatArr[i].betType === 1) {\r\n          type1Total += this.repeatArr[i].gold;\r\n        }else if (this.repeatArr[i].betType === 2) {\r\n          type2Total += this.repeatArr[i].gold;\r\n        }else if (this.repeatArr[i].betType === 3) {\r\n          type3Total += this.repeatArr[i].gold;\r\n        }\r\n      }\r\n      let betData1 = { typeTotal: type1Total, type: 1, betId:\"\" };\r\n      let betData2 = { typeTotal: type2Total, type: 2, betId:\"\" };\r\n      let betData3 = { typeTotal: type3Total, type: 3, betId:\"\" };\r\n      let lastBetArr = [betData1,betData2,betData3];\r\n      if (this.props.gold >= total) {//只有用户总金额大于所有重复下注的金币额之和 才可以下注\r\n        // for (var i = 0; i < this.repeatArr.length; i++) { \r\n        //   sktInstance.sendSktMessage(SKT_MAG_TYPE.BET_RESPONSE, this.repeatArr[i])\r\n        // }\r\n        for (let i = 0; i < lastBetArr.length; i++){\r\n          if (lastBetArr[i].typeTotal <= 0) { continue };\r\n          lastBetArr[i].betId = getUUID();\r\n          let chipNode = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.MAIN_CHIP).source);\r\n          let positionX: number = this.propertyNode.props_spr_user_head.position.x;\r\n          let positionY: number = this.propertyNode.props_spr_user_head.position.y;\r\n            // 设置下注金币初始位置\r\n          chipNode.setPosition(positionX, positionY);\r\n          const chips: number[] = [];\r\n          usersViewModel.comp.splitChip(lastBetArr[i].typeTotal, chips)\r\n\r\n          chips.forEach(chip => {\r\n            const sendBet: SendBet = {\r\n              roomId: gameCacheData.roomId,\r\n              memberId: this.props.myInfo.memberId,\r\n              memberName: this.props.myInfo.memberName,\r\n              gold: chip,\r\n              betType: lastBetArr[i].type,\r\n              betId: lastBetArr[i].betId,\r\n              isMe: true,\r\n            }\r\n            const betData = initBetData(this.props.myInfo.index, this.props.myInfo.memberId, lastBetArr[i].type, chip);\r\n            betData.isMyBet = true;\r\n            sktInstance.sendSktMessage(SKT_MAG_TYPE.BET_RESPONSE, sendBet);\r\n            this.flyChip(betData);\r\n            // this.amountArr.push(sendBet);\r\n          })\r\n       \r\n        }\r\n      }else{//禁止下注\r\n        // 提示用户余额不足\r\n       global.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.RechangeGlod,{},{ placeStr:\"对不起，您的金币不足，请充值!\" }) }));\r\n       return;\r\n     }\r\n    }\r\n  }\r\n  /**清除重复下注按钮的数据*/ \r\n  protected clearRepeatBet() {\r\n    this.repeatArr=[]\r\n  }\r\n  /**出现停止动画*/\r\n  protected stopBet(){\r\n    let toggleArr: Node[] = this.propertyNode.props_ToggleGroup.children;\r\n    // 5-0倒计时结束节点 隐藏\r\n    this.propertyNode.props_djs10_6.active=false;\r\n    this.propertyNode.props_djs5_0.active =false;\r\n    // 停止下注\r\n    toggleArr.forEach(item=>{\r\n      item.getComponent(Toggle).interactable=false\r\n      item.getComponent(Toggle).isChecked=false\r\n      item.children[0].active=true;\r\n      item.children[1].active=true;\r\n      item.children[2].active=false;\r\n    })\r\n    // 改为停止动画的资源\r\n    this.scheduleOnce(()=>{\r\n      this.vsIcon()\r\n      this.propertyNode.props_dragonTiger_stop_bet.getComponent(sp.Skeleton).animation = \"animation\";\r\n      this.propertyNode.props_dragonTiger_stop_bet.active = true;\r\n      // this.propertyNode.props_dragonTiger_stop_bet.setSiblingIndex(500);\r\n      // if(!mainGameViewModel.isUnMount){\r\n        gameTime=window.setTimeout(()=>{\r\n          if( this.node && this.node.isValid){\r\n            if(this.propertyNode.props_dragonTiger_stop_bet!=null){\r\n              this.propertyNode.props_dragonTiger_stop_bet.active=false;\r\n            }\r\n          }\r\n        },2000)\r\n      // }\r\n    })\r\n  }\r\n  /**vs图标*/\r\n  protected vsIcon(){\r\n     // VS 图标出现\r\n     let vsIcon=this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\");\r\n     vsIcon.setPosition(0,-200)\r\n     this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\").active = true;\r\n     tween(vsIcon)\r\n       .to(0.2,{position:new Vec3(0,254,0)})\r\n       .start()\r\n  }\r\n  /**开牌*/ \r\n  protected openCard() {  \r\n    if(this.node && this.node.isValid){\r\n      // this.shuffleCard();//牌面变化,洗牌\r\n      playTurnCard()\r\n      // this.propertyNode.props_cards_left.getChildByName(\"spr_cardBg_left\").active=false\r\n      // this.propertyNode.props_dragonTiger_pokerLeft.active=true;\r\n      this.leftNode = instantiate(this.propertyNode.props_cards_left)\r\n      this.propertyNode.props_cards_left.active = false;\r\n      this.leftNode.active = true;\r\n      getNodeByNameDeep(\"prefabs_dragonTiger_card\",this.node).addChild(this.leftNode)\r\n      this.leftNode.getComponent(Animation).play();\r\n  \r\n\r\n      this.rightNode = instantiate(this.propertyNode.props_cards_right)\r\n      this.propertyNode.props_cards_right.active = false;\r\n      this.rightNode.active = true;\r\n      getNodeByNameDeep(\"prefabs_dragonTiger_card\",this.node).addChild(this.rightNode)\r\n      this.leftNode.getComponent(Animation).on(Animation.EventType.FINISHED,()=>{\r\n        // this.propertyNode.props_dragonTiger_pokerRight.parent.getChildByName(\"spr_cardBg_right\").active=false\r\n        // this.propertyNode.props_dragonTiger_pokerRight.active=true;\r\n        // leftNode.destroy()\r\n        this.rightNode.getComponent(Animation).play();\r\n        playTurnCard()\r\n    \r\n      })\r\n      this.rightNode.getComponent(Animation).on(Animation.EventType.FINISHED,()=>{   \r\n          // rightNode.destroy()\r\n          this.contrastCards();\r\n          this.flyToHeGuan();\r\n      })\r\n    }\r\n  }\r\n  /**对比牌 大小 谁赢，谁播放动画*/ \r\n  protected contrastCards(){  \r\n    if(this.props.win===1){//龙赢\r\n       this.skeleton= this.node.getChildByName(\"dragon_win\");\r\n      this.skeletonWin=this.propertyNode.props_btn_dragon.parent.getChildByName(\"zhongjiang_long\");\r\n      playDragonCard()\r\n    \r\n    }else if(this.props.win===2){//虎赢\r\n      this.skeleton= this.node.getChildByName(\"tiger_win\");\r\n      this.skeletonWin=this.propertyNode.props_btn_tiger.parent.getChildByName(\"zhongjiang_hu\");\r\n      playTigerCard()\r\n    }else {//和\r\n      this.skeleton= this.node.getChildByName(\"seri\");\r\n      this.skeletonWin=this.propertyNode.props_btn_seri.parent.getChildByName(\"zhongjiang_he\");\r\n    }\r\n    this.skeleton.active=true;\r\n    this.skeletonWin.active=true;\r\n    // this.skeleton.setSiblingIndex(490);\r\n\r\n    this.skeletonWin.getComponent(sp.Skeleton).loop=true;\r\n    this.skeletonWin.getComponent(sp.Skeleton).animation = \"animation\";\r\n    this.skeleton.getComponent(sp.Skeleton).animation = \"animation\";\r\n\r\n  }\r\n  /**发牌--资源的变化*/ \r\n  protected sendCard() {\r\n     // 发牌数量的变化，影响图片资源的变化\r\n    if(this.node && this.node.isValid){\r\n      let pokerTotalNum: number = 414;\r\n      if (!this.node || this.node === undefined) { return };\r\n      let sendCardNode = getNodeByNameDeep(\"prefabs_dragonTiger_sendCard\", this.node);\r\n      if(!sendCardNode){ return }\r\n      getNodeByNameDeep(\"Label_heng\", sendCardNode).getComponent(Label).string = String(this.props.sendedP);\r\n      getNodeByNameDeep(\"Label_shu\", sendCardNode).getComponent(Label).string = String(this.props.readySendP);\r\n      sendCardNode.getChildByName(\"spr_poker_heng\").active = this.props.sendedP !== 0;\r\n      sendCardNode.getChildByName(\"spr_poker_shu\").active = this.props.readySendP !== 0;\r\n\r\n      if (this.props.sendedP / pokerTotalNum < 1 / 3) {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_heng\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_HENG_PAI_MINI).source;\r\n      } else if (\r\n        this.props.sendedP / pokerTotalNum < 2 / 3 &&\r\n        this.props.sendedP / pokerTotalNum > 1 / 3\r\n      ) {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_heng\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_HENG_PAI_MIDDLE).source;\r\n      } else {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_heng\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile( SpriteFramePathDefine.DRAGONTIGER_HENG_PAI_BIG).source;\r\n      }\r\n      // 竖牌--未使用的牌\r\n      if (this.props.readySendP/ pokerTotalNum > 2 / 3) {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_shu\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_SHU_PAI_BIG).source;\r\n      } else if (\r\n        this.props.readySendP / pokerTotalNum < 2 / 3 &&\r\n        this.props.readySendP / pokerTotalNum > 1 / 3\r\n      ) {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_shu\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_SHU_PAI_MIDDLE).source;\r\n      } else {\r\n        this.node.getChildByName(\"prefabs_dragonTiger_sendCard\").getChildByName(\"spr_poker_shu\").getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(SpriteFramePathDefine.DRAGONTIGER_SHU_PAI_MINI).source;\r\n      }   \r\n    }\r\n   \r\n\r\n  }\r\n  /**发牌动画*/ \r\n  protected sendCardAction(){\r\n    //发牌的动画节点\r\n    if(this.node && this.node.isValid){\r\n      this.propertyNode.props_cards_right.active=false;\r\n      this.propertyNode.props_cards_left.active=false;\r\n  \r\n      this.propertyNode.props_spr_cardBg_left.active=true;\r\n      this.propertyNode.props_spr_cardBg_left.getComponent(Animation).play();\r\n  \r\n      this.propertyNode.props_spr_cardBg_left.getComponent(Animation).on(Animation.EventType.FINISHED, () => {\r\n        this.propertyNode.props_cards_left.active=true;\r\n        // this.propertyNode.props_dragonTiger_pokerLeft.parent.getChildByName(\"spr_cardBg_left\").active=true;\r\n        this.propertyNode.props_spr_cardBg_right.active=true;\r\n        this.propertyNode.props_spr_cardBg_right.getComponent(Animation).play();\r\n      },this)\r\n  \r\n      this.propertyNode.props_spr_cardBg_right.getComponent(Animation).on(Animation.EventType.FINISHED, () => {\r\n        this.propertyNode.props_cards_right.active = true;\r\n        // this.propertyNode.props_dragonTiger_pokerRight.parent.getChildByName(\"spr_cardBg_right\").active=true;\r\n        this.propertyNode.props_spr_cardBg_left.active=false;\r\n        this.propertyNode.props_spr_cardBg_right.active=false;\r\n      },this)\r\n       \r\n      this.sendCard()\r\n    }else{\r\n      return\r\n    }\r\n  \r\n  }\r\n  /**洗牌*/ \r\n  protected shuffleCard() {\r\n    if (mainGameViewModel.isUnMount || !this.propertyNode) { return };\r\n      let leftCard=this.propertyNode.props_dragonTiger_pokerLeft\r\n    let rightCard = this.propertyNode.props_dragonTiger_pokerRight\r\n    if (this.node && this.node.isValid) {\r\n      if (this.props && this.props.pokerInfo) {\r\n        let dragonTigerLeftCard:DragonTigerCard={...this.props.pokerInfo.pokerLeftNum}\r\n        let dragonTigerRightCard:DragonTigerCard={...this.props.pokerInfo.pokerRightNum}     \r\n        bundleDragonTiger.load(dragonTigerLeftCard.color==1?`poker/poker_num_b${dragonTigerLeftCard.rank}/spriteFrame`:`poker/poker_num_r${dragonTigerLeftCard.rank}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n          if (!err) {\r\n            if (!leftCard || !leftCard.children) { return };\r\n            // getNodeByNameDeep(\"spr_poker_num\", leftCard).getComponent(Sprite).spriteFrame = sp;\r\n            leftCard.getChildByName(\"spr_poker_num\").getComponent(Sprite).spriteFrame = sp\r\n          }\r\n        })\r\n        bundleDragonTiger.load(`poker/poker_flower_s${dragonTigerLeftCard.suit}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n          if (!err) {\r\n            if (!leftCard || !leftCard.children) { return };\r\n            leftCard.getChildByName(\"spr_poker_flowerS\").getComponent(Sprite).spriteFrame = sp\r\n          }\r\n        })\r\n        if(leftCard && Number(dragonTigerLeftCard.rank)<=10){\r\n          bundleDragonTiger.load(`poker/poker_flower_${dragonTigerLeftCard.suit}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n            if (!err) {\r\n            if (!leftCard || !leftCard.children) { return };\r\n              leftCard.getChildByName(\"spr_poker_flower\").getComponent(Sprite).spriteFrame = sp\r\n            }\r\n          })\r\n        }else{\r\n          bundleDragonTiger.load(dragonTigerLeftCard.color==1?`poker/poker_flower_b${dragonTigerLeftCard.rank}/spriteFrame`:`poker/poker_flower_r${dragonTigerLeftCard.rank}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n            if (!err) {\r\n            if (!leftCard || !leftCard.children) { return };\r\n              leftCard.getChildByName(\"spr_poker_flower\").getComponent(Sprite).spriteFrame = sp\r\n            }\r\n          })\r\n        }\r\n        leftCard.setPosition(-122,254)\r\n  \r\n        bundleDragonTiger.load(dragonTigerRightCard.color==1?`poker/poker_num_b${dragonTigerRightCard.rank}/spriteFrame`:`poker/poker_num_r${dragonTigerRightCard.rank}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n          if (!err) {\r\n            if (!rightCard || !rightCard.children) { return };\r\n            rightCard.getChildByName(\"spr_poker_num\").getComponent(Sprite).spriteFrame = sp\r\n          }\r\n        })\r\n        bundleDragonTiger.load(`poker/poker_flower_s${dragonTigerRightCard.suit}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n          if (!err) {\r\n            if (!rightCard || !rightCard.children) { return };\r\n            rightCard.getChildByName(\"spr_poker_flowerS\").getComponent(Sprite).spriteFrame = sp\r\n          }\r\n        })\r\n        if(rightCard && Number(dragonTigerRightCard.rank)<=10  ){\r\n          bundleDragonTiger.load(`poker/poker_flower_${dragonTigerRightCard.suit}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n            if (!err) {\r\n            if (!rightCard || !rightCard.children) { return };\r\n              rightCard.getChildByName(\"spr_poker_flower\").getComponent(Sprite).spriteFrame = sp\r\n            }\r\n          })\r\n        }else{\r\n          bundleDragonTiger.load(dragonTigerRightCard.color==1?`poker/poker_flower_b${dragonTigerRightCard.rank}/spriteFrame`:`poker/poker_flower_r${dragonTigerRightCard.rank}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n            if (!err) {\r\n            if (!rightCard || !rightCard.children) { return };\r\n              rightCard.getChildByName(\"spr_poker_flower\").getComponent(Sprite).spriteFrame = sp\r\n            }\r\n          })\r\n        }\r\n        rightCard.setPosition(118,254)\r\n      }\r\n    }\r\n  }\r\n  /**结算输赢*/\r\n  protected settleAccount(){\r\n    if (this.node && this.node.isValid) {\r\n      console.log(\"this.props.winType\",this.props.winType);\r\n      \r\n      if (this.props.winType === 1) {\r\n        this.taskScheduler.joinqQueue(new Task((done) => {\r\n          this.events.openWinPanel()\r\n          playWin()\r\n          window.setTimeout(()=>done(),1000)\r\n          \r\n        }),false)\r\n      } else if (this.props.winType === 2) {\r\n        this.taskScheduler.joinqQueue(new Task((done) => {\r\n          this.events.openLosePanel()\r\n          playDefeat()\r\n          window.setTimeout(()=>done(),1000)\r\n        }),false)\r\n      }else {}\r\n    }  \r\n  }\r\n  /**移除下注的金币*/\r\n  protected removeChip(){\r\n    //移除添加的金币节点\r\n    if (this.node === null) { return }\r\n    // this.betAreaInfo.clear();\r\n    // this.clearAllBetAreaGold()\r\n    this.areaInfo = [1, 2, 3];\r\n    this.propertyNode.props_add_chips.removeAllChildren()\r\n    // let child=this.node.getChildByName(\"props_add_chips\").children\r\n    // let chip:Node[]=[]\r\n    //  for(let i=0;i<child.length;i++){\r\n    //    if(child[i].name===\"prefabs_dragonTiger_chip\"){\r\n    //     chip.push(child[i])\r\n    //    }\r\n    //  }\r\n    // chip.forEach((item)=>{\r\n\t\t// \ttween(item).to(0.2,{scale:new Vec3(0,0,0)}).start();\r\n    //   // item.destroy()\r\n    //   this.node.getChildByName(\"props_add_chips\").removeChild(item)\r\n    // })\r\n  }\r\n  /**初始化*/\r\n  protected init(){\r\n    if(this.node && this.node.isValid){\r\n      this.lastArr=this.amountArr //留存上一把的下注情况\r\n      this.amountArr = [];\r\n      this.removeChip()\r\n      // 被翻过来的牌\r\n      // this.propertyNode.props_dragonTiger_pokerLeft.active=false;\r\n      // this.propertyNode.props_dragonTiger_pokerRight.active=false;\r\n      // vsIcon隐藏\r\n      this.node.getChildByName(\"prefabs_dragonTiger_card\").getChildByName(\"dragonTiger_VS\").active=false;\r\n      // 倒计时12-6节点\r\n      this.propertyNode.props_djs10_6.active=true;\r\n      // 赢的光圈节点\r\n      this.skeleton.active=false;\r\n      this.skeletonWin.active=false;\r\n      this.propertyNode.props_btn_dragon.getChildByName(\"spr_bet_bg\").getChildByName(\"Label_bet_mine\").getComponent(Label).string='0'\r\n      this.propertyNode.props_btn_tiger.getChildByName(\"spr_bet_bg\").getChildByName(\"Label_bet_mine\").getComponent(Label).string='0'\r\n      this.propertyNode.props_btn_seri.getChildByName(\"spr_bet_bg\").getChildByName(\"Label_bet_mine\").getComponent(Label).string='0'\r\n      this.propertyNode.props_btn_dragon.getChildByName(\"spr_bet_bg\").active=false;\r\n      this.propertyNode.props_btn_seri.getChildByName(\"spr_bet_bg\").active=false;\r\n      this.propertyNode.props_btn_tiger.getChildByName(\"spr_bet_bg\").active=false;\r\n      // this.propertyNode.props_btn_dragon.getChildByName(\"Label_bet_all\").getComponent(Label).string=\"0\";\r\n      // this.propertyNode.props_btn_tiger.getChildByName(\"Label_bet_all\").getComponent(Label).string=\"0\";\r\n      // this.propertyNode.props_btn_seri.getChildByName(\"Label_bet_all\").getComponent(Label).string=\"0\";\r\n      if(!this.isShowGame){      \r\n        this.propertyNode.props_cards_right.active=true;\r\n        this.propertyNode.props_cards_left.active = true;\r\n        this.leftNode && this.leftNode.destroy();\r\n        this.rightNode && this.rightNode.destroy();\r\n      }\r\n    }\r\n  }\r\n  /**金币不足*/\r\n  protected judgeCoin(gold){\r\n    // 当用户的金币值小于下注的金币值时，下注金币呈现灰度，不可点击\r\n    this.propertyNode.props_ToggleGroup.children.forEach(item=>{\r\n      let amountNum:string=item.getChildByName(\"spr_chips\").getChildByName(\"Label_chips\").getComponent(Label).string\r\n      if(amountNum.charAt(amountNum.length-1)==\"K\"){   \r\n        amountNum=String(Number(amountNum.substring(0,amountNum.length-1))*1000)\r\n      }else if(amountNum.charAt(amountNum.length-1)==\"M\"){\r\n        amountNum=String(Number(amountNum.substring(0,amountNum.length-1))*1000000)\r\n      }\r\n      if(gold<Number(amountNum) ){\r\n        item.getChildByName(\"spr_chips\").getComponent(Sprite).grayscale=true;\r\n        item.getChildByName(\"spr_chips\").getChildByName(\"Label_chips\").getComponent(Label).font=sourceManageSeletor().getFile(FontPathDefine.WU_BET).source\r\n        item.getComponent(Toggle).interactable=false;\r\n        item.getComponent(Toggle).isChecked=false;\r\n        item.children[0].active=true;\r\n        item.children[1].active=true;\r\n        item.children[2].active=false;\r\n      }else{\r\n        item.getChildByName(\"spr_chips\").getComponent(Sprite).grayscale=false;\r\n        item.getComponent(Toggle).interactable=true;\r\n        let amountNum:string = item.getChildByName(\"spr_chips\").getChildByName(\"Label_chips\").getComponent(Label).string\r\n        let font=amountNum==\"1000\"?sourceManageSeletor().getFile(FontPathDefine.GREEN_BET).source:amountNum==\"5000\"?sourceManageSeletor().getFile(FontPathDefine.BLUE_BET).source:\r\n                  amountNum==\"10K\"?sourceManageSeletor().getFile(FontPathDefine.DARK_BLUE_BET).source:amountNum==\"100K\"?sourceManageSeletor().getFile(FontPathDefine.RED_BET).source:\r\n                  amountNum==\"500K\"?sourceManageSeletor().getFile(FontPathDefine.PURPLE_BET).source:sourceManageSeletor().getFile(FontPathDefine.ORANGE_BET).source\r\n        item.getChildByName(\"spr_chips\").getChildByName(\"Label_chips\").getComponent(Label).font=font          \r\n        item.getComponent(Toggle).isChecked=false;\r\n        item.children[0].active=true;\r\n        item.children[1].active=true;\r\n        item.children[2].active=false;\r\n   \r\n        //默认选中上一局最后下注的金币\r\n        if(item.getComponent(Toggle).isChecked){\r\n          item.children[0].active=false;\r\n          item.children[1].active=false;\r\n          item.children[2].active=true;\r\n        }\r\n      }  \r\n    })\r\n\r\n\r\n  }\r\n  protected destroyCallBack(): void {\r\n\t\tthis.taskScheduler.destoryQueue();\r\n    this.taskScheduler.stopQueue(false)\r\n\t}\r\n  protected bindUI(): void {\r\n\r\n    //充值弹框隐藏\r\n    this.propertyNode.props_layout_lock.active = false;\r\n  }\r\n  /**更新锁定下注区域状态 */\r\n  private updateLockBetState() { \r\n    // 是否锁定下注  金币不足5千时出现充值弹框\r\n\t\tlet isLock = this.props.gold < 5000 || this.props.gold == undefined || this.props.gold == 0;;\r\n    \r\n\t\tif (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\tisLock = true;\r\n    } else {\r\n      isLock = false;\r\n    }\r\n    if (isLock) {\r\n\t\t\tthis.updateTipsValue(this.propertyNode.props_tips_gold, String(5000));\r\n      this.updateTipsShow();  \r\n    }\r\n    this.propertyNode.props_layout_lock.active = isLock;\r\n     \r\n    if(this.props.gold < 5000){\r\n      // 停止下注\r\n      this.propertyNode.props_ToggleGroup.children.forEach(item=>{\r\n        item.getComponent(Toggle).interactable=false\r\n        item.getComponent(Toggle).isChecked=false\r\n        item.children[0].active=true;\r\n        item.children[1].active=true;\r\n        item.children[2].active=false;\r\n      })\r\n    }\r\n      \r\n  }\r\n  private updateTipsShow() {\r\n\t\tthis.propertyNode.props_tips_vip.active = false\r\n\t\tthis.propertyNode.props_tips_gold.active = false\r\n    \r\n\t\tif (this.props.tips && this.props.tips.length > 0) {\r\n\t\t\tconst tips = this.props.tips[0]\r\n\t\t\tlet node;\r\n\t\t\tif ('vip' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_vip;\r\n\t\t\t} else if ('gold' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_gold;\r\n\t\t\t}else if ('level' === tips.name.toLowerCase()) {\r\n\t\t\t\tnode = this.propertyNode.props_tips_vip;\r\n\t\t\t} \r\n\t\t\tnode && this.updateTipsValue(node, tips.num);\r\n    }\r\n\r\n  }\r\n  private updateTipsValue(node: Node, num: string) {\r\n    node.active = true;\r\n\t\tnode.getChildByName('Label_lock_num').getComponent(Label).string = Number(num).formatAmountWithCommas();\r\n    this.propertyNode.props_layout_lock.active = true;\r\n  }\r\n  \t/**\r\n\t * 获得自己的头像位置\r\n\t * @returns \r\n\t */\r\n\tprivate getMyHeadPosition() {\r\n\t\treturn new Vec3(config.gameOption.myHeadPosition.x, config.gameOption.myHeadPosition.y);\r\n\t}\r\n\t/**筹码飞向用户头像 */\r\n\tprivate chipFlyToHead(chip: ChipViewModel, betInfo: BetInfo) {\r\n\t\tconst chipNode = chip.comp.node;\r\n\t\tconst endPositon = betInfo ? this.getFlyToHeadEndPosition(betInfo) : this.getMyHeadPosition();\r\n\t\tconst uiTransform = this.node.getComponent(UITransform);\r\n\t\ttween(chipNode).to(0.3, { worldPosition: uiTransform.convertToWorldSpaceAR(endPositon) })\r\n\t\t\t.call(() => {\r\n\t\t\t\tchip.unMount();\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n  private cancelBet(cancelBetData: BetData) {\r\n\r\n\t\tif (cancelBetData) {\r\n      const betInfos = this.betAreaInfo.get(cancelBetData.betType);\r\n      if (betInfos === undefined) return;\r\n\t\t\tif (betInfos && betInfos.length > 0) {\r\n\t\t\t\tconst chips = betInfos.find(v => v.userId === gameCacheData.memberId || v.isMe).chips;\r\n\r\n\t\t\t\tfor (let i = 0; i < chips.length; i++) {\r\n\t\t\t\t\tconst chip = chips[i];\r\n\t\t\t\t\tif (chip.comp.props.value === cancelBetData.betAmount) {\r\n\t\t\t\t\t\tchips.splice(i, 1);\r\n\t\t\t\t\t\tthis.chipFlyToHead(chip, undefined);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst betArea = this.getNodeByBetType(cancelBetData.betType).getChildByName(\"Layout_bet\");\r\n\t\t\t// this.updateBetAreaGold(cancelBetData, betArea.parent);\r\n\t\t\tconst betAmount = cancelBetData.betAmount < 10000 ? cancelBetData.betAmount.formatAmountWithCommas() : cancelBetData.betAmount.formatAmountWithLetter();\r\n\t\t\tglobal.hallDispatch(\r\n\t\t\t\taddToastAction({\r\n\t\t\t\t\tposition: ToastPosition.MIDDLE,\r\n\t\t\t\t\tcontent:\r\n\t\t\t\t\t\tlang.write(k => k.InitGameModule.BetFaild, {}, { placeStr: \"{0} 筹码下注失败\" }).format(betAmount)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n  update(deltaTime: number) {}\r\n}\r\n\r\n\r\n\r\n\r\n"]}