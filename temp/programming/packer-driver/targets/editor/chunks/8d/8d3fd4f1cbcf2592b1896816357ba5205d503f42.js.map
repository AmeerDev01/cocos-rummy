{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/fruit777/components/Fruit777_Header.ts"],"names":["_decorator","Button","Label","Node","Animation","BaseComponent","global","TaskScheduler","StepNumber","BuyType","ccclass","property","Fruit777_Header","taskScheduler","stepNumber","propertyNode","props_btn_up_home","props_btn_up_set","props_Label_up_goldNum","props_btn_up_addGold","props_beli","props_SPECIAL","props_menu_panel","props_btn_up_menu","props_spr_menu_bg","props_btn_info","props_btn_vip","props","balance","roundAllEnd","events","openHelpPanel","openVipMain","start","initState","bindEvent","node","on","EventType","TOUCH_END","active","getComponent","play","CLICK","closeSubGame","openPersonCenter","openShop","TAS","useProps","key","value","stop","pre","cur","num","string","toFixed","formatAmountWithCommas","setFlyNode","parent","destroyCallBack","destoryQueue","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAmBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;;AAC5CC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,M,iBAAAA,M;;AACFC,MAAAA,a;;AACAC,MAAAA,U;;AACEC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;iCAgBjBY,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb;AAAA;AAAA,0CAC2E;AAAA;AAAA;AAAA,eAElEC,aAFkE,GAEnC;AAAA;AAAA,+CAFmC;AAAA,eAGlEC,UAHkE;AAAA,eAIhEC,YAJgE,GAIjD;AACxBC,YAAAA,iBAAiB,EAAE,IAAIb,IAAJ,EADK;AAExBc,YAAAA,gBAAgB,EAAE,IAAId,IAAJ,EAFM;AAGxBe,YAAAA,sBAAsB,EAAE,IAAIhB,KAAJ,EAHA;AAIxBiB,YAAAA,oBAAoB,EAAE,IAAIhB,IAAJ,EAJE;AAKxBiB,YAAAA,UAAU,EAAE,IAAIjB,IAAJ,EALY;AAMxBkB,YAAAA,aAAa,EAAE,IAAIlB,IAAJ,EANS;AAOxBmB,YAAAA,gBAAgB,EAAE,IAAInB,IAAJ,EAPM;AAQxBoB,YAAAA,iBAAiB,EAAE,IAAItB,MAAJ,EARK;AASxBuB,YAAAA,iBAAiB,EAAE,IAAIrB,IAAJ,EATK;AAUxBsB,YAAAA,cAAc,EAAE,IAAIxB,MAAJ,EAVQ;AAWxByB,YAAAA,aAAa,EAAE,IAAIzB,MAAJ;AAXS,WAJiD;AAAA,eAkBnE0B,KAlBmE,GAkBnD;AACtBC,YAAAA,OAAO,EAAE,CADa;AAEtBC,YAAAA,WAAW,EAAE;AAFS,WAlBmD;AAAA,eAuBnEC,MAvBmE,GAuBlD;AACvBC,YAAAA,aAAa,EAAE,MAAM,CAAG,CADD;AAEvBC,YAAAA,WAAW,EAAE,MAAM,CAAG;AAFC,WAvBkD;AAAA;;AAC1EC,QAAAA,KAAK,GAAG,CAAG;;AA2BDC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AAGA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKpB,YAAL,CAAkBQ,iBAAlB,CAAoCa,IAApC,CAAyCC,EAAzC,CAA4ClC,IAAI,CAACmC,SAAL,CAAeC,SAA3D,EAAsE,MAAM;AAC3E,iBAAKxB,YAAL,CAAkBO,gBAAlB,CAAmCkB,MAAnC,GAA4C,IAA5C;AACA,iBAAKzB,YAAL,CAAkBS,iBAAlB,CAAoCiB,YAApC,CAAiDrC,SAAjD,EAA4DsC,IAA5D,CAAiE,iBAAjE;AACA,WAHD;AAKA,eAAK3B,YAAL,CAAkBO,gBAAlB,CAAmCe,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAeC,SAArD,EAAgE,MAAM;AACrE,iBAAKxB,YAAL,CAAkBO,gBAAlB,CAAmCkB,MAAnC,GAA4C,KAA5C;AACA,WAFD,EAEG,IAFH;AAIA,eAAKzB,YAAL,CAAkBU,cAAlB,CAAiCW,IAAjC,CAAsCC,EAAtC,CAAyCpC,MAAM,CAACqC,SAAP,CAAiBK,KAA1D,EAAiE,MAAM;AACtE,iBAAKb,MAAL,CAAYC,aAAZ;AACA,WAFD,EAEG,IAFH;AAIA,eAAKhB,YAAL,CAAkBW,aAAlB,CAAgCU,IAAhC,CAAqCC,EAArC,CAAwCpC,MAAM,CAACqC,SAAP,CAAiBK,KAAzD,EAAgE,MAAM;AACrE,iBAAKb,MAAL,CAAYE,WAAZ;AACA,WAFD,EAEG,IAFH;AAIA,eAAKjB,YAAL,CAAkBC,iBAAlB,CAAoCqB,EAApC,CAAuClC,IAAI,CAACmC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE;AAAA;AAAA,kCAAOK,YAAP,GADsE,CAEtE;AACA;AACA;AACA;AACA;AACA;AACA,WARD;AASA,eAAK7B,YAAL,CAAkBE,gBAAlB,CAAmCoB,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAeC,SAArD,EAAgE,MAAM;AACrE;AAAA;AAAA,kCAAOM,gBAAP,CAAwB,CAAxB;AACA,WAFD;AAGA,eAAK9B,YAAL,CAAkBI,oBAAlB,CAAuCkB,EAAvC,CAA0ClC,IAAI,CAACmC,SAAL,CAAeC,SAAzD,EAAoE,MAAM;AACzE;AAAA;AAAA,kCAAOO,QAAP;AACA,WAFD;AAGA,eAAK/B,YAAL,CAAkBK,UAAlB,CAA6BiB,EAA7B,CAAgClC,IAAI,CAACmC,SAAL,CAAeC,SAA/C,EAA0D,MAAM;AAC/D;AAAA;AAAA,kCAAOO,QAAP;AACA,WAFD;AAGA,eAAK/B,YAAL,CAAkBM,aAAlB,CAAgCgB,EAAhC,CAAmClC,IAAI,CAACmC,SAAL,CAAeC,SAAlD,EAA6D,MAAM;AAClE;AAAA;AAAA,kCAAOO,QAAP,CAAgB;AAAA;AAAA,oCAAQC,GAAxB;AACA,WAFD;AAGA;;AAESC,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAID,GAAG,KAAK,SAAZ,EAAuB;AACtB,iBAAKnC,UAAL,IAAmB,KAAKA,UAAL,CAAgBqC,IAAhB,EAAnB;AACA,iBAAKrC,UAAL,GAAkB;AAAA;AAAA,0CAAeoC,KAAK,CAACE,GAArB,EAA0BF,KAAK,CAACG,GAAhC,EAAsCC,GAAD,IAAS;AAC/D,mBAAKvC,YAAL,IAAqB,KAAKA,YAAL,CAAkBG,sBAAvC,KAAkE,KAAKH,YAAL,CAAkBG,sBAAlB,CAAyCqC,MAAzC,GAAkD,CAAC,CAACD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAF,EAAkBC,sBAAlB,EAApH;AACA,aAFiB,EAEf,MAAM,CAAG,CAFM,CAAlB;AAGA,iBAAK3C,UAAL,CAAgB4C,UAAhB,CAA2B,KAAK3C,YAAL,CAAkBG,sBAAlB,CAAyCkB,IAAzC,CAA8CuB,MAAzE,EAAiF,KAAK5C,YAAL,CAAkBG,sBAAlB,CAAyCkB,IAA1H,EAAgI,EAAhI;AACA,iBAAKtB,UAAL,CAAgBmB,KAAhB,GANsB,CAUtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AAES2B,QAAAA,eAAe,GAAG;AAC3B,eAAK/C,aAAL,CAAmBgD,YAAnB;AACA;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA1GyE,O","sourcesContent":["import { _decorator, Button, Component, Label, Node, Animation } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global, lang } from '../../../hall';\r\nimport TaskScheduler, { Task } from '../../../utils/TaskScheduler';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tbalance: number,\r\n\troundAllEnd: boolean\r\n}\r\nexport interface IEvent {\r\n\topenHelpPanel: () => void,\r\n\topenVipMain: () => void\r\n}\r\n\r\n@ccclass('Fruit777_Header')\r\nexport class Fruit777_Header extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\tprivate taskScheduler: TaskScheduler = new TaskScheduler()\r\n\tprivate stepNumber: StepNumber\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_up_home: new Node(),\r\n\t\tprops_btn_up_set: new Node(),\r\n\t\tprops_Label_up_goldNum: new Label(),\r\n\t\tprops_btn_up_addGold: new Node(),\r\n\t\tprops_beli: new Node(),\r\n\t\tprops_SPECIAL: new Node(),\r\n\t\tprops_menu_panel: new Node(),\r\n\t\tprops_btn_up_menu: new Button(),\r\n\t\tprops_spr_menu_bg: new Node(),\r\n\t\tprops_btn_info: new Button(),\r\n\t\tprops_btn_vip: new Button()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tbalance: 0,\r\n\t\troundAllEnd: true\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\topenHelpPanel: () => { },\r\n\t\topenVipMain: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_up_menu.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.propertyNode.props_menu_panel.active = true\r\n\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).play('animation_title')\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.propertyNode.props_menu_panel.active = false\r\n\t\t}, this)\r\n\r\n\t\tthis.propertyNode.props_btn_info.node.on(Button.EventType.CLICK, () => {\r\n\t\t\tthis.events.openHelpPanel()\r\n\t\t}, this)\r\n\r\n\t\tthis.propertyNode.props_btn_vip.node.on(Button.EventType.CLICK, () => {\r\n\t\t\tthis.events.openVipMain()\r\n\t\t}, this)\r\n\r\n\t\tthis.propertyNode.props_btn_up_home.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tglobal.closeSubGame()\r\n\t\t\t// if (this.props.roundAllEnd || !sktInstance.isConnect || dataTransfer(DataKeyType.GAME_TYPE) === GameType.SUBGAME1) {\r\n\t\t\t// \t/**只要转动完成、连接断开、开宝箱子游戏，都可以直接退出 */\r\n\t\t\t// \tglobal.closeSubGame()\r\n\t\t\t// } else {\r\n\t\t\t// \tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.GameExit, {}, { placeStr: \"游戏中，请勿退出\" }) }))\r\n\t\t\t// }\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_set.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tglobal.openPersonCenter(2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_addGold.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_beli.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_SPECIAL.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tglobal.openShop(BuyType.TAS)\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"balance\") {\r\n\t\t\tthis.stepNumber && this.stepNumber.stop()\r\n\t\t\tthis.stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\tthis.propertyNode && this.propertyNode.props_Label_up_goldNum && (this.propertyNode.props_Label_up_goldNum.string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t}, () => { })\r\n\t\t\tthis.stepNumber.setFlyNode(this.propertyNode.props_Label_up_goldNum.node.parent, this.propertyNode.props_Label_up_goldNum.node, 22)\r\n\t\t\tthis.stepNumber.start()\r\n\r\n\r\n\r\n\t\t\t// this.taskScheduler.joinqQueue(new Task((done) => {\r\n\t\t\t// \tthis.stepNumber && this.stepNumber.stop()\r\n\t\t\t// \tthis.stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t// \t\tthis.propertyNode && this.propertyNode.props_Label_up_goldNum && (this.propertyNode.props_Label_up_goldNum.string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t// \t}, () => done())\r\n\t\t\t// \tthis.stepNumber.start()\r\n\t\t\t// }), true)\r\n\t\t}\r\n\t}\r\n\r\n\tprotected destroyCallBack() {\r\n\t\tthis.taskScheduler.destoryQueue()\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}