{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenixV2/components/PhoenixV2_RulePanel.ts"],"names":["_decorator","Node","PageView","BaseComponent","phoenixV2_Audio","SoundPathDefine","ccclass","property","PhoenixV2_RulePanel","propertyNode","props_btnClose","props_img_rule_1","props_img_rule_2","props_img_rule_3","props_PageView","props_indicator","props_indicator_toggle1","props_indicator_toggle2","props_indicator_toggle3","props","events","onClose","start","initState","bindEvent","on","EventType","TOUCH_END","playOneShot","BTN_CLICK","TOUCH_MOVE","TURN","scrollPageViewListener","useProps","key","value","node","SCROLL_ENDED","pageView","curPageIdx","scrollToPage","getPages","length","showIndex","page","num","arr","children","filter","v","name","startsWith","forEach","item","i","getChildByName","active","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Node, PageView } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { phoenixV2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n}\r\nexport interface IEvent {\r\n\tonClose: () => void\r\n}\r\n\r\n@ccclass('PhoenixV2_RulePanel')\r\nexport class PhoenixV2_RulePanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btnClose: new Node(),\r\n\t\tprops_img_rule_1: new Node(),\r\n\t\tprops_img_rule_2: new Node(),\r\n\t\tprops_img_rule_3: new Node(),\r\n\t\tprops_PageView: new PageView(),\r\n\t\tprops_indicator:new Node(),\r\n\t\tprops_indicator_toggle1: new Node(),\r\n\t\tprops_indicator_toggle2:new Node(),\r\n\t\tprops_indicator_toggle3: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClose: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btnClose.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.BTN_CLICK)\r\n\t\t\tthis.events.onClose();\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_1.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.TURN)\r\n\t\t\tthis.scrollPageViewListener()\r\n\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_2.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.TURN)\r\n\t\t\tthis.scrollPageViewListener()\r\n\r\n\t\t})\r\n\t\tthis.propertyNode.props_img_rule_3.on(Node.EventType.TOUCH_MOVE, () => {\r\n\t\t\tphoenixV2_Audio.playOneShot(SoundPathDefine.TURN)\r\n\t\t\tthis.scrollPageViewListener()\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t}\r\n\r\n\tprivate scrollPageViewListener() {\r\n\t\tif (!this.propertyNode) return\r\n\t\tthis.propertyNode.props_PageView.node.on(PageView.EventType.SCROLL_ENDED, (pageView: PageView) => {\t\t\t\r\n\t\t\tif (pageView.curPageIdx === 0) {\r\n\t\t\t\tpageView.scrollToPage(pageView.getPages().length - 3, 0);\r\n\t\t\t    this.showIndex(0)\r\n\r\n\t\t\t} else if (pageView.curPageIdx + 1 === pageView.getPages().length - 1) {\r\n\t\t\t\tpageView.scrollToPage(1, 0)\r\n\t\t\t    this.showIndex(1)\r\n\r\n\t\t\t} else if (pageView.curPageIdx + 1 === pageView.getPages().length) {\r\n\t\t\t\tpageView.scrollToPage(2, 0)\r\n\t\t\t    this.showIndex(2)\r\n\t\t\t}\r\n\t\t\tconst page = pageView.getPages()[pageView.curPageIdx];\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showIndex(num) {\r\n\t\tif (!this.propertyNode) return\r\n\t    let arr = this.propertyNode.props_indicator.children.filter(v => v.name.startsWith(\"props_indicator_toggle\"));\r\n\t\tarr.forEach((item,i) => {\r\n\t\t\tif (i === num) {\r\n\t\t\t\titem.getChildByName(\"CheckMark\").active = true;\r\n\t\t\t} else {\r\n\t\t\t\titem.getChildByName(\"CheckMark\").active = false;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}