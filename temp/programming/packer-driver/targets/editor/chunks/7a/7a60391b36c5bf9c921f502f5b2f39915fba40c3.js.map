{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/manager/Crash_GameManager.ts"],"names":["Crash_GameManager","Game","game","Crash_WsManager","LANG","LocalStorageUtils","LOCAL_DATA_KEY","constructor","lang","EN","serverTm","beginTm","isLogout","isLogin","cacert","console","log","getItem","Number","getInstance","instance","init","off","EVENT_SHOW","onGameShow","EVENT_HIDE","onGameHide","on","destroy","setServerTime","serverTime","Date","getTime","getServerTime","tm","logout","closeConnect","setIsLogout","bl","getIsLogout","setIsLogin","getIsLogin","setLang","setItem","getLang","update","ft"],"mappings":"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","sourcesContent":["// import WsManager from \"../../net/WsManager\";\r\nimport { Game, game } from \"cc\";\r\nimport Crash_WsManager from \"../net/Crash_WsManager\";\r\nimport { LANG } from \"../const/Crash_BaseConst\";\r\nimport LocalStorageUtils, { LOCAL_DATA_KEY } from \"../utils/LocalStorageUtils\";\r\n// import AudioManager from \"./AudioManager\";\r\n// import { sceneMgr } from \"./SceneManager\";\r\n\r\nexport default class Crash_GameManager {\r\n\r\n    private lang: LANG = LANG.EN;\r\n\r\n    private serverTm = null;\r\n    private beginTm = null;\r\n\r\n    private isLogout: boolean = false;\r\n    private isLogin: boolean = false;\r\n\r\n    public cacert: any = null;\r\n\r\n    constructor() {\r\n        console.log(\"GameManager New!!!!!!!!!!\");\r\n        this.lang = LocalStorageUtils.getItem(LOCAL_DATA_KEY.LANG, Number, LANG.EN);\r\n    }\r\n\r\n    private static instance: Crash_GameManager = null;\r\n    public static getInstance() {\r\n        if(!this.instance){\r\n            this.instance = new Crash_GameManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public init(){\r\n        game.off(Game.EVENT_SHOW, this.onGameShow, this);\r\n        game.off(Game.EVENT_HIDE, this.onGameHide, this);\r\n        game.on(Game.EVENT_SHOW, this.onGameShow, this);\r\n        game.on(Game.EVENT_HIDE, this.onGameHide, this);\r\n    }\r\n\r\n    public destroy() {\r\n\r\n    }\r\n\r\n    private onGameShow() {\r\n       // AudioManager.getInstance().resumeMusic();\r\n    }\r\n\r\n    private onGameHide() {\r\n       // AudioManager.getInstance().pauseMusic();\r\n    }\r\n\r\n    public setServerTime( serverTime: number ) {\r\n        this.serverTm = serverTime;\r\n        this.beginTm = new Date().getTime();\r\n    }\r\n\r\n    public getServerTime(): number {\r\n        if(!this.serverTm) {return null;}\r\n        let tm = new Date().getTime();\r\n        return this.serverTm + (tm - this.beginTm);\r\n    }\r\n\r\n    public logout() {\r\n        this.isLogout = true;\r\n        this.isLogin = false;\r\n        // LocalStorageUtils.setItem(LOCAL_DATA_KEY.TOKEN, \"\");\r\n        Crash_WsManager.getInstance().closeConnect();\r\n    }\r\n\r\n    public setIsLogout(bl: boolean) { this.isLogout = bl; }\r\n    public getIsLogout(): boolean { return this.isLogout; }\r\n\r\n    public setIsLogin(bl: boolean) { this.isLogin = bl; }\r\n    public getIsLogin() { return this.isLogin; }\r\n\r\n    public setLang(lang: LANG) {\r\n        this.lang = lang;\r\n        LocalStorageUtils.setItem(LOCAL_DATA_KEY.LANG, this.lang);\r\n    }\r\n\r\n    public getLang(): LANG {\r\n        return this.lang;\r\n    }\r\n\r\n    public update(ft) {\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n"]}