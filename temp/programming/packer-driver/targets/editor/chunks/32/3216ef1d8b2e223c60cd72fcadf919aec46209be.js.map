{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragon/Slot/Component/dragon_RulesPanel.ts"],"names":["_decorator","Node","tween","UIOpacity","UITransform","Vec3","BaseComponent","ccclass","property","dragon_RulesPanel","showIndex","start","bindEvent","closeButton","on","EventType","TOUCH_END","hidePanel","con_x","showIndexMark","width","contentWrap","getComponent","TOUCH_START","e","getLocation","x","TOUCH_MOVE","t","children","position","length","forEach","child","index","to","y","indexMark","item","i","active","bindUI","uiOpacity","node","opacity","mainPanel","scale","easing","call","destroy","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Node, tween, UIOpacity, UITransform, Vec3, color, Label, } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('dragon_RulesPanel')\r\nexport class dragon_RulesPanel extends BaseComponent {\r\n\r\n\t@property(Node)\r\n\tcloseButton: Node = null\r\n\r\n\t@property(Node)\r\n\tmainPanel: Node = null\r\n\r\n\t@property(Node)\r\n\tcontentWrap: Node = null\r\n\r\n\t@property(Node)\r\n\tindexMark: Node = null\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\tprivate showIndex: number = 0\r\n\tprotected bindEvent(): void {\r\n\t\tthis.closeButton.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.hidePanel()\r\n\t\t})\r\n\r\n\t\tlet con_x: number = 0\r\n\t\tthis.showIndexMark()\r\n\t\tlet width = this.contentWrap.getComponent(UITransform).width\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_START, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n\t\t\tcon_x = e.getLocation().x\r\n\t\t})\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_MOVE, () => { })\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_END, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n\t\t\tconst t = e.getLocation().x - con_x\r\n\t\t\tif (t < 0) {\r\n\t\t\t\t//向左滑动\r\n\t\t\t\tif (this.contentWrap.children[0].position.x <= -(this.contentWrap.children.length - 1) * width) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentWrap.children.forEach((child, index) => {\r\n\t\t\t\t\ttween(child).to(0.1, { position: new Vec3(child.position.x - width, child.position.y) }).start()\r\n\t\t\t\t})\r\n\t\t\t\tthis.showIndex++\r\n\t\t\t}\r\n\t\t\tif (t > 0) {\r\n\t\t\t\t//向右滑动\r\n\t\t\t\tif (this.contentWrap.children[this.contentWrap.children.length - 1].position.x + 100 >= (this.contentWrap.children.length - 1) * width) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentWrap.children.forEach((child, index) => {\r\n\t\t\t\t\ttween(child).to(0.1, { position: new Vec3(child.position.x + width, child.position.y) }).start()\r\n\t\t\t\t})\r\n\t\t\t\tthis.showIndex--\r\n\t\t\t}\r\n\t\t\tthis.showIndexMark()\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showIndexMark() {\r\n\t\tthis.indexMark.children.forEach((item, i) => {\r\n\t\t\tif (this.showIndex !== i) {\r\n\t\t\t\titem.children[0].active = false\r\n\t\t\t} else {\r\n\t\t\t\titem.children[0].active = true\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tconst uiOpacity = this.node.getComponent(UIOpacity)\r\n\t\tuiOpacity.opacity = 0;\r\n\t\t// this.mainPanel.setScale(0.8, 0.8)\r\n\t\ttween(this.mainPanel).to(0.4, { scale: new Vec3(1, 1, 1) }, { easing: \"backOut\" }).start()\r\n\t\ttween(uiOpacity).to(0.4, { opacity: 255 }).call(() => { }).start()\r\n\t}\r\n\r\n\tpublic hidePanel() {\r\n\t\tconst uiOpacity = this.node.getComponent(UIOpacity)\r\n\t\ttween(this.node).to(0.2, { scale: new Vec3(0, 0, 0) }).start()\r\n\t\ttween(uiOpacity).to(0.2, { opacity: 0 }).call(() => {\r\n\t\t\tthis.node.destroy()\r\n\t\t}).start()\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}