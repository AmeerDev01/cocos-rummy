{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragon/Slot/utils.ts"],"names":["convertToMandK","number","M","toFixed","K","tween","Node","math","Facade","ProxyDefine","Vec3","EffectType","bindClickEvent","node","effectType","SCALE","handler","on","EventType","TOUCH_START","to","position","getPosition","x","y","start","TOUCH_END","call","getRootPosition","totalX","totalY","parent","name","getUrlParams","reg","RegExp","r","window","location","search","substring","match","unescape","getBgProxy","Instance","retrieveProxy","BG","getLocalCacheDataProxy","LOCAL_CACHE_DATA","getSocketProxy","WEBSOCKET","getSlotProxy","SLOT"],"mappings":"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","sourcesContent":["import { tween, Node, math, NodeEventType } from \"cc\";\r\nimport Facade from \"../Framework/care/Facade\";\r\nimport { ProxyDefine } from \"./Const/ProxyDefine\";\r\nimport { BgProxy } from \"./Proxy/BgProxy\";\r\nimport { LocalCacheDataProxy } from \"./Proxy/LocalCacheDataProxy\";\r\nimport { SocketProxy } from \"./Proxy/SocketProxy\";\r\nimport { SlotProxy } from \"./Proxy/SlotProxy\";\r\nconst { Vec3 } = math\r\n\r\nexport enum EffectType {\r\n  SCALE = \"scale\"\r\n}\r\n\r\nexport const bindClickEvent = (node: Node, effectType: EffectType = EffectType.SCALE, handler?: () => void) => {\r\n  node.on(Node.EventType.TOUCH_START, () => {\r\n    tween(node).to(0.1, { position: new Vec3(node.getPosition().x, node.getPosition().y - 5) }).start()\r\n  })\r\n  node.on(Node.EventType.TOUCH_END, () => {\r\n    tween(node).to(0.1, { position: new Vec3(node.getPosition().x, node.getPosition().y + 5) }).call(() => {\r\n      handler && handler()\r\n    }).start()\r\n  })\r\n}\r\n\r\nexport const getRootPosition = (node: Node, totalX?: number, totalY?: number): math.Vec3 => {\r\n  if (node.parent.name === 'Canvas') {\r\n    return new Vec3(totalX, totalY, 0)\r\n  } else {\r\n    const x = node.position.x + node.parent.position.x\r\n    const y = node.position.y + node.parent.position.y\r\n    return getRootPosition(node.parent, x, y)\r\n  }\r\n}\r\n\r\nexport const getUrlParams = (name: string) => {\r\n  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i')\r\n  var r = window.location.search.substring(1).match(reg)\r\n  if (r != null) {\r\n    return unescape(r[2])\r\n  }\r\n  return null\r\n}\r\n\r\nexport const getBgProxy = () => {\r\n  return (Facade.Instance.retrieveProxy(ProxyDefine.BG) as BgProxy)\r\n}\r\nexport const getLocalCacheDataProxy = () => {\r\n  return <LocalCacheDataProxy>Facade.Instance.retrieveProxy(ProxyDefine.LOCAL_CACHE_DATA);\r\n}\r\nexport const getSocketProxy = () => {\r\n  return (Facade.Instance.retrieveProxy(ProxyDefine.WEBSOCKET) as SocketProxy)\r\n}\r\nexport const getSlotProxy = () => {\r\n  return Facade.Instance.retrieveProxy(ProxyDefine.SLOT) as SlotProxy\r\n}\r\nexport function convertToMandK(number) {\r\n    if (number >= 1000000) {\r\n        let M = (number / 1000000).toFixed(2);\r\n        return `${M}M`;\r\n    } else if (number >= 1000) {\r\n        let K = (number / 1000).toFixed(2);\r\n        return `${K}k`;\r\n    } else {\r\n        return `${number}`;\r\n    }\r\n}\r\n\r\n"]}