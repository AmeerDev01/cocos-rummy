{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfcV2/components/GxfcV2_Main.ts"],"names":["_decorator","Animation","instantiate","Node","sp","Toggle","Vec3","BaseComponent","changeGame","setAutoLauncherInfo","setBetDropDownList","updateWinloss","AutoLauncherType","GameType","getAutoCount","isLimit","RollerStatus","updateRollerStatus","GxfcV2_Audio","mainViewModel","sourceManageSeletor","SoundPathDefine","StepNumberV2","PrefabPathDefine","SkeletonAnimationPlayer","ccclass","property","GxfcV2_Main","portraitSkLeft","portraitSkRight","gateSk","stepNumberV2","props_aiji_kaiguanmenOrigonPos","baseNodeOffectNode","baseNodeOrigonScale","baseNodeScale","isChangeSmall","bgIndex","propertyNode","props_main_bg1","props_main_bg2","props_main_bg3","props_mini_game_bg","props_main_slot_bg","props_small_down","props_mini_slot_small_bg","props_main_slot_small_bg","props_Up_Feature","props_buttomBar","props_roller","props_bet_dropdownlist","props_autoLauncher","props_btn_off","props_btn_confirm","selectedNode","props","betDropDownlist","positionId","gold","gameTypeInfo","lastGameType","MAIN","currGameType","viewGameType","leftCount","subGameAnimationPlayInfo","jackpotDatas","jackpotTotalAmount","autoLauncherInfo","events","onSendBet","start","getHour","getHeader","getFooter","getRoller","initState","bindEvent","on","EventType","TOUCH_END","dispatch","listenerBetDropDownListEvent","children","forEach","toggle","getComponent","node","onToggleClick","openAoutoPanl","autoLauncherType","name","count","totalCount","playOneShot","biu","active","getAutoState","clearAuto","NONE","event","clickedToggle","target","isChecked","useProps","key","value","isValid","showOrHideBetDropDownlist","cur","createFlyBg","changeGameType","gameType","isMainGame","isSubGame2","SUBGAME2","isChangeGame","status","pos","position","play","bindUI","updateKaiGuanMen","isSubGame","SUBGAME1","isNextMainGame","flyBgNode","getFile","FLY_BG","source","addChild","titleSkeleton","getChildByName","Skeleton","scheduleOnce","rollerPanelViewModel","comp","rollerViewModelArr","v","index","getWildListNode","removeAllChildren","destroy","subGameAnimationEndHandle","playAnimation","type","console","log","playBgMusic","END","currentTime","Date","currentHour","getHours","changeBg","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Animation, AnimationState, Graphics, instantiate, Label, Mask, Node, sp, Sprite, Toggle, tween, UIOpacity, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { changeGame, setAutoLauncherInfo, setBetDropDownList, updateWinloss } from '../store/actions/game';\r\nimport { AutoLauncherInfo, AutoLauncherType, calBetAmount, GameType, GameTypeInfo, getAutoCount, isLimit, JackpotData, RollerStatus, SubGameAnimationPlayInfo } from '../type';\r\nimport { updateRollerStatus } from '../store/actions/roller';\r\nimport { GxfcV2_Audio, mainViewModel, sourceManageSeletor } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { global } from '../../../hall';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport config from '../config';\r\nimport { Shake } from '../../../utils/Shake';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport SkeletonAnimationPlayer from '../../../utils/SkeletonPlay';\r\nimport { SpriteFramePathDefine } from '../sourceDefine/spriteDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tbetDropDownlist: boolean,\r\n\t/** 选择的线id */\r\n\tpositionId: number,\r\n\t/** 余额 */\r\n\tgold: number,\r\n\t/**游戏类型信息 */\r\n\tgameTypeInfo: GameTypeInfo,\r\n\t/** 子游戏过场动画播放信息 */\r\n\tsubGameAnimationPlayInfo: SubGameAnimationPlayInfo,\r\n\t/** jackpot数据 */\r\n\tjackpotDatas: JackpotData[],\r\n\t/** jackpot总金额 */\r\n\tjackpotTotalAmount: number,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo: AutoLauncherInfo\r\n}\r\nexport interface IEvent {\r\n\tonSendBet: () => void\r\n}\r\n\r\n@ccclass('GxfcV2_Main')\r\nexport class GxfcV2_Main extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n        this.getHour()\r\n\t}\r\n\r\n\tprivate portraitSkLeft: sp.Skeleton;\r\n\tprivate portraitSkRight: sp.Skeleton;\r\n\tprivate gateSk: sp.Skeleton;\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprivate props_aiji_kaiguanmenOrigonPos: Vec3\r\n\tprivate baseNodeOffectNode: Vec3;\r\n\t/** 原始缩放大小 */\r\n\tprivate baseNodeOrigonScale: Vec3 = new Vec3(1, 1, 1);\r\n\t/** 缩放大小 */\r\n\tprivate baseNodeScale: Vec3 = new Vec3(3, 3, 3);\r\n\r\n\tpublic isChangeSmall: boolean = false;\r\n\r\n\tprivate bgIndex: number = 0;\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_main_bg1: new Node(),\r\n\t\tprops_main_bg2: new Node(),\r\n\t\tprops_main_bg3: new Node(),\r\n\t\tprops_mini_game_bg: new Node(),\r\n\t\tprops_main_slot_bg: new Node(),\r\n\t\tprops_small_down:new Node(),\r\n\t\tprops_mini_slot_small_bg: new Node(),\r\n\t\tprops_main_slot_small_bg:new Node(),\r\n\t\tprops_Up_Feature: new Node(),\r\n\t\tprops_buttomBar: new Node(),\r\n\t\tprops_roller: new Node(),\r\n\t\tprops_bet_dropdownlist: new Node(),\r\n\t\tprops_autoLauncher: new Node(),\r\n\t\tprops_btn_off: new Node(),\r\n\t\tprops_btn_confirm:new Node()\r\n\t}\r\n\tprivate selectedNode: Node\r\n\tpublic props: IProps = {\r\n\t\tbetDropDownlist: false,\r\n\t\tpositionId: 0,\r\n\t\tgold: 0,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.MAIN,\r\n\t\t\tcurrGameType: GameType.MAIN,\r\n\t\t\tviewGameType: GameType.MAIN,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tsubGameAnimationPlayInfo: null,\r\n\t\tjackpotDatas: [],\r\n\t\tjackpotTotalAmount: 0,\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonSendBet: () => { }\r\n\t}\r\n\r\n\tpublic getHeader() {\r\n\t\treturn this.propertyNode.props_Up_Feature;\r\n\t}\r\n\r\n\tpublic getFooter() {\r\n\t\treturn this.propertyNode.props_buttomBar;\r\n\t}\r\n\r\n\tpublic getRoller() {\r\n\t\treturn this.propertyNode.props_roller;\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t\t// this.propertyNode.props_autoLauncher.getComponent(Animation).on(Animation.EventType.FINISHED, (e, state: AnimationState) => {\r\n\t\t// \tif (state.name === 'animation_autoLauncher_down') {\r\n\t\t// \t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\t\t// \t}\r\n\t\t// });\r\n\t\tthis.propertyNode.props_bet_dropdownlist.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t})\r\n\r\n\t\tthis.listenerBetDropDownListEvent();\r\n\t}\r\n\r\n\tprivate listenerBetDropDownListEvent() {\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\ttoggle.getComponent(Toggle).node.on(Node.EventType.TOUCH_END, this.onToggleClick, this);\r\n\t\t});\r\n\t\tthis.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.openAoutoPanl()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_confirm.on(Node.EventType.TOUCH_END,()=>{\r\n\t\t\tconst autoLauncherType = (this.selectedNode ? this.selectedNode.name:'t10') as AutoLauncherType; // 默认T10\r\n\t\t\t\tconst count = getAutoCount(autoLauncherType);\r\n\t\t\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\t\t\tautoLauncherType: autoLauncherType,\r\n\t\t\t\t\ttotalCount: count,\r\n\t\t\t\t\tleftCount: isLimit(autoLauncherType) ? 1 : count - 1,\r\n\t\t\t\t}))\r\n\t\t\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.biu)\r\n\t\t\t\tthis.dispatch(setBetDropDownList(false));\r\n\t\t\t\tthis.events.onSendBet();\r\n\t\t\t\tthis.openAoutoPanl()\r\n\t\t})\r\n\t}\r\n\tpublic openAoutoPanl(){\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active=!this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic getAutoState(){\r\n\t\treturn this.propertyNode.props_bet_dropdownlist.active\r\n\t}\r\n\tpublic clearAuto(){\r\n\t\tthis.dispatch(setAutoLauncherInfo({\r\n\t\t\tautoLauncherType: AutoLauncherType.NONE,\r\n\t\t\ttotalCount: 0,\r\n\t\t\tleftCount: 0\r\n\t\t}))\r\n\t}\r\n\tprivate onToggleClick(event) {\r\n\t\t// 获取点击的 Toggle 按钮\r\n\t\tconst clickedToggle = event.target.getComponent(Toggle);\r\n\t\tif (!clickedToggle.isChecked) {\r\n\t\t\tclickedToggle.isChecked = true;\r\n\t\t\tthis.selectedNode = event.target\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 取消其他 Toggle 按钮的选中状态\r\n\t\tthis.propertyNode.props_autoLauncher.children.forEach((toggle) => {\r\n\t\t\tif (toggle !== clickedToggle) {\r\n\t\t\t\ttoggle.getComponent(Toggle).isChecked = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\t// console.log(\"key\", key, \"value\", value);\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'betDropDownlist') {\r\n\t\t\t\tthis.showOrHideBetDropDownlist(value.cur)\r\n\t\t\t} else if (key === 'subGameAnimationPlayInfo') {\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.createFlyBg();\r\n\t\t\t\t}\r\n\t\t\t} else if (key === 'gameTypeInfo') {\r\n\t\t\t\tthis.changeGameType(this.props.gameTypeInfo.viewGameType);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate changeGameType(gameType: GameType) {\r\n\t\tconst isMainGame = gameType === GameType.MAIN;\r\n\t\tconst isSubGame2 = gameType === GameType.SUBGAME2;\r\n\t\t// 主游戏要显示的界面\r\n\t\tthis.propertyNode.props_main_bg1.active = isMainGame && this.bgIndex === 0;\r\n\t\tthis.propertyNode.props_main_bg2.active = isMainGame && this.bgIndex === 1;\r\n\t\tthis.propertyNode.props_main_bg3.active = isMainGame && this.bgIndex === 2;\r\n\r\n\t\t// this.propertyNode.props_main_slot_bg.active = isMainGame \r\n\t\tthis.propertyNode.props_main_slot_small_bg.active = isMainGame\r\n\r\n\t\t// 子游戏要显示的界面\r\n\t\tthis.propertyNode.props_mini_game_bg.active = !isMainGame \r\n\t\tthis.propertyNode.props_mini_slot_small_bg.active = !isMainGame\r\n\t\tthis.propertyNode.props_small_down.active = !isMainGame\r\n\t}\r\n\r\n\t/**是否准备切换游戏 */\r\n\tprivate isChangeGame() {\r\n\t\treturn this.props.gameTypeInfo && this.props.gameTypeInfo.viewGameType !== this.props.gameTypeInfo.currGameType;\r\n\t}\r\n\r\n\tprivate showOrHideBetDropDownlist(status: boolean) {\r\n\t\tconst pos = this.propertyNode.props_autoLauncher.position;\r\n\t\tif (status) {\r\n\t\t\tthis.propertyNode.props_bet_dropdownlist.active = true;\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_up\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 255 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -160) }).start();\r\n\t\t} else {\r\n\t\t\tthis.propertyNode.props_autoLauncher.getComponent(Animation).play(\"animation_autoLauncher_down\");\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher.getComponent(UIOpacity)).to(0.5, { opacity: 0 }).start();\r\n\t\t\t// tween(this.propertyNode.props_autoLauncher).to(0.2, { position: new Vec3(pos.x, -500) }).call(() => {\r\n\t\t\t// \tthis.node.isValid && (this.propertyNode.props_bet_dropdownlist.active = false);\r\n\t\t\t// }).start();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\t// this.props_aiji_kaiguanmenOrigonPos = this.propertyNode.props_aiji_kaiguanmen.position.clone();\r\n\t\t// this.props_aiji_kaiguanmenOrigonPos = new Vec3();\r\n\t\tthis.baseNodeOffectNode = new Vec3(-100, -200);\r\n\r\n\t\tthis.propertyNode.props_bet_dropdownlist.active = false;\r\n\r\n\t\t// this.gateSk = this.propertyNode.props_aiji_kaiguanmen.getComponent(sp.Skeleton)\r\n\t\t// this.portraitSkLeft = this.propertyNode.props_skeletonLeft.getComponent(sp.Skeleton)\r\n\t\t// this.portraitSkRight = this.propertyNode.props_skeletonRight.getComponent(sp.Skeleton)\r\n\r\n\t\tthis.updateKaiGuanMen();\r\n\t}\r\n\r\n\tprivate updateKaiGuanMen() {\r\n\t\t// this.propertyNode.props_aiji_kaiguanmen.active = false;\r\n\t\t// this.propertyNode.props_aiji_zhuanquanding.active = false;\r\n\t}\r\n\r\n\tprivate isSubGame(gameType: GameType) {\r\n\t\treturn gameType === GameType.SUBGAME1 || gameType === GameType.SUBGAME2\r\n\t}\r\n\r\n\tprivate isNextMainGame() {\r\n\t\treturn this.props.gameTypeInfo.currGameType === GameType.MAIN;\r\n\t}\r\n\r\n\t/**转场动画 */\r\n\tpublic createFlyBg() {\r\n\t\t//转场\r\n\t\tlet flyBgNode = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.FLY_BG).source)//动画转场背景\r\n\t\tthis.node.addChild(flyBgNode);\r\n\t\tconst titleSkeleton = flyBgNode.getChildByName(\"fly\").getComponent(sp.Skeleton)\r\n\t\tif (this.node && this.node.isValid && this.props.gameTypeInfo.currGameType === GameType.MAIN) { \r\n\t\t\tthis.isChangeSmall = true;\r\n\t\t\t\r\n\t\t}\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tif (this.node && this.node.isValid && this.props.gameTypeInfo.currGameType === GameType.MAIN) {\r\n\t\t\t\tif (this.bgIndex === 0) {\r\n\t\t\t\t\tthis.propertyNode.props_main_bg1.active = true \r\n\t\t\t\t}else if (this.bgIndex === 1) {\r\n\t\t\t\t\tthis.propertyNode.props_main_bg2.active = true \r\n\t\t\t\t}else if (this.bgIndex === 2) {\r\n\t\t\t\t\tthis.propertyNode.props_main_bg3.active = true \r\n\t\t\t\t}\r\n\t\t\t\tthis.propertyNode.props_main_slot_small_bg.active = true\r\n\t\t\t\tthis.propertyNode.props_mini_game_bg.active = false \r\n\t\t\t\tthis.propertyNode.props_mini_slot_small_bg.active = false;\r\n\t\t\t\tthis.propertyNode.props_small_down.active = false;\r\n\t\t\t\t// this.unscheduleAllCallbacks()\r\n\t\t\t\tmainViewModel.rollerPanelViewModel.comp.rollerViewModelArr.forEach((v, index) => { \r\n\t\t\t\t\tv.comp.getWildListNode().active = false;\r\n\t\t\t\t\tv.comp.getWildListNode().removeAllChildren();\r\n\t\t\t\t})\r\n\t\t\t\t// for (let i = 0; i < 5; i++) {\r\n\t\t\t\t// \tmainViewModel.rollerPanelViewModel.comp.rollerViewModelArr[i].comp.getWildListNode().active = false;\r\n\t\t\t\t// \tmainViewModel.rollerPanelViewModel.comp.rollerViewModelArr[i].comp.getWildListNode().removeAllChildren();\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_mini_game_bg.active = true \r\n\t\t\t\tthis.propertyNode.props_mini_slot_small_bg.active = true;\r\n\t\t\t\tthis.propertyNode.props_small_down.active = true;\r\n\t\t\t}\r\n\t\t},1.5)\r\n\t\tnew SkeletonAnimationPlayer(titleSkeleton, 'animation', false, () => {\r\n\t\t\tflyBgNode && flyBgNode.destroy();\r\n\t\t\tthis.node && this.node.isValid && this.subGameAnimationEndHandle(0);\r\n\t\t\t//切换游戏 初始化盈利\r\n\t\t}).playAnimation()\r\n\t}\r\n\r\n\t/**动画结束处理 */\r\n\tprivate subGameAnimationEndHandle(type: number) {\r\n\r\n\t\tconst gameTypeInfo = { ...this.props.gameTypeInfo }\r\n\t\tgameTypeInfo.lastGameType = gameTypeInfo.viewGameType;\r\n\t\tgameTypeInfo.viewGameType = gameTypeInfo.currGameType;\r\n\t\tthis.dispatch(changeGame(gameTypeInfo))\r\n        console.log(\"gameTypeInfo\",gameTypeInfo,type);\r\n\t\t\r\n\t\t// 进入到小游戏1之后，把进入前的这一局的输赢设置为0\r\n\t\tif (gameTypeInfo.viewGameType === GameType.SUBGAME1) {\r\n\t\t\tthis.dispatch(updateWinloss(0));\r\n\t\t}\r\n\r\n\r\n\t\tmainViewModel.playBgMusic();\r\n\r\n\t\t// 开门动画结束，准备切换到小游戏后，结束游戏\r\n\t\tif (type === 0) {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.dispatch(updateRollerStatus(RollerStatus.END))\r\n\t\t\t}, 1)\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getHour() {\r\n\t\tconst currentTime = new Date();\r\n\t\tconst currentHour = currentTime.getHours();\r\n\t\tconsole.log(\"index currentHour\",currentHour);\r\n\t\t\r\n\t\tif (currentHour >= 6 && currentHour < 12) {\r\n\t\t  this.bgIndex = 0; // 早上\r\n\t\t} else if (currentHour >= 12 && currentHour < 18) {\r\n\t\t  this.bgIndex = 1; // 中午\r\n\t\t} else {\r\n\t\t  this.bgIndex = 2; // 晚上\r\n\t\t}\r\n\t\tthis.changeBg(this.bgIndex)\r\n\t}\r\n\r\n\tprivate changeBg(index) {\r\n\t\tconsole.log(\"index\",index);\r\n\t\t// let sprite = this.propertyNode.props_main_bg.getComponent(Sprite).spriteFrame;\r\n\t\t\r\n\t\t// if (index === 0) {\r\n\t\t// \tsprite = sourceManageSeletor().getFile(SpriteFramePathDefine.bg1).source;\r\n\t\t// } else if (index === 1) {\r\n\t\t// \tsprite = sourceManageSeletor().getFile(SpriteFramePathDefine.bg2).source;\r\n\t\t// } else if (index === 2) {\r\n\t\t// \tsprite = sourceManageSeletor().getFile(SpriteFramePathDefine.bg3).source;\r\n\t\t// }\r\n\r\n\t\t// console.log(\"index sprite\",sprite);\r\n\t\t\r\n\t}\r\n\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}