{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandarQiuQiu/viewModel/BandarQiuQiuUsersViewModel.ts"],"names":["_decorator","ViewModel","StoreInject","getStore","gameCacheData","SKT_MAG_TYPE","sktInstance","ccclass","property","UsersViewModel","constructor","begin","setEvent","giveGift","value","memberId","num","data","roomId","interactionId","toSitId","sendSktMessage","GIVE_GIFT","connect","inject","state","newBetData","bet","usersInfo","game"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AAGFC,MAAAA,S;AAAaC,MAAAA,W,iBAAAA,W;;AAEXC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,W,iBAAAA,W;;;;;;;;;OACjB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;AAGxBS,MAAAA,c,WADL;AAAA;AAAA,sCAAY;AAAA;AAAA,iCAAZ,C,gBAAD,MACMA,cADN;AAAA;AAAA,kCAC2E;AAGvEC,QAAAA,WAAW,GAAG;AACV,gBAAM,oBAAN;AACD;;AAESC,QAAAA,KAAK,GAAG;AAChB,eAAKC,QAAL,CAAc;AACZC,YAAAA,QAAQ,EAAE,CAACC,KAAD,EAAgBC,QAAhB,EAAkCC,GAAlC,KAAkD;AAC1D,oBAAMC,IAAe,GAAG;AACtBC,gBAAAA,MAAM,EAAE;AAAA;AAAA,oDAAcA,MADA;;AAEtB;AACAC,gBAAAA,aAAa,EAAEL,KAHO;;AAItB;AACAM,gBAAAA,OAAO,EAAEL,QALa;;AAMtB;AACAC,gBAAAA,GAAG,EAAEA;AAPiB,eAAxB;AASA;AAAA;AAAA,8CAAYK,cAAZ,CAA2B;AAAA;AAAA,gDAAaC,SAAxC,EAAmDL,IAAnD;AACD;AAZW,WAAd;AAcD;;AAGMM,QAAAA,OAAO,GAAG;AACf,eAAKC,MAAL,CAAY,EAAZ,EAAiBC,KAAD,IAAsB;AACpC,mBAAO;AACLC,cAAAA,UAAU,EAACD,KAAK,CAACE,GAAN,CAAUD,UADhB;AAELE,cAAAA,SAAS,EAACH,KAAK,CAACI,IAAN,CAAWD,SAFhB,CAGL;;AAHK,aAAP;AAKD,WAND;AAOA,iBAAO,IAAP;AACD;;AAlCoE,O;;yBAsC5DnB,c","sourcesContent":["import { _decorator, assetManager,AssetManager, Component, instantiate, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { BandarQiuQiu_users, IProps, IEvent } from \"../components/BandarQiuQiu_users\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from '../store';\r\nimport { gameCacheData, ReqGiftSo } from '../type';\r\nimport { SKT_MAG_TYPE, sktInstance } from '../socketConnect';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@StoreInject(getStore())\r\nclass UsersViewModel extends ViewModel<BandarQiuQiu_users, IProps, IEvent> {\r\n\r\n\r\n    constructor() {\r\n        super('BandarQiuQiu_users')     \r\n      }\r\n    \r\n      protected begin() { \r\n        this.setEvent({\r\n          giveGift: (value: number, memberId: string, num: number) => {\r\n            const data: ReqGiftSo = {\r\n              roomId: gameCacheData.roomId,\r\n              /**道具Id */\r\n              interactionId: value,\r\n              /**获赠玩家 */\r\n              toSitId: memberId,\r\n              /** 总共需要花费的金币 */\r\n              num: num\r\n            }\r\n            sktInstance.sendSktMessage(SKT_MAG_TYPE.GIVE_GIFT, data)\r\n          }\r\n        })\r\n      }\r\n    \r\n      \r\n      public connect() {\r\n        this.inject({}, (state: StateType) => {\r\n          return {\r\n            newBetData:state.bet.newBetData,\r\n            usersInfo:state.game.usersInfo,\r\n            // allWinUsers:state.bet.allWinUsers\r\n          }\r\n        })\r\n        return this\r\n      }\r\n\r\n}\r\n\r\nexport default UsersViewModel\r\n"]}