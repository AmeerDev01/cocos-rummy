{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandar/viewModel/BandarGameBoardViewModel.ts"],"names":["_decorator","find","sys","UITransform","Vec3","ViewModel","StoreInject","getStore","HistoryViewModel","mainGameViewModel","sourceManageSelector","PrefabPathDefine","EffectType","UsersViewModel","TitleViewModel","BetAreaViewModel","FooterViewModel","SKT_MAG_TYPE","sktInstance","sktMsgListener","bundlePkgName","config","initBetData","global","lang","addToastAction","ClockViewModel","OnlineViewModel","BetHistoryViewModel","setCountDownAction","setGameStatusAction","setGoldAction","setInitGameStatusAction","setMyInfoAction","setMyWinLose","setOnlineNumber","setSecondsAction","setTipsAction","setUsersInfoAction","BaseViewModel","gameCacheData","GameStatus","CardBankerViewModel","PotViewModel","SendViewModel","TrigJackpotViewModel","CardUserViewModel","changeRekorAction","changeResult1Action","changeResult2Action","changeResult3Action","changeResult4Action","changeStatistikAction","changeTrenAction","setAllCardTypeAction","setBankerPokerAction","setBlackPokerAction","setBlockNumAction","setDiamondPokerAction","setFarmhouseNumAction","setHeartNumAction","setPlumPokerAction","setRedPokerAction","setSakuraNumAction","setSpadeNumAction","setWinAreaAction","changeAllCardRateAction","changeAllWinUsersAction","changeCardRateAction","changeAreaWinLoseAction","changeCardTypeAction","changeGoldDataAction","setMemberBetAction","setNewBetDataAction","changeCancelBetDataAction","WinViewModel","LoseViewModel","BANKER_ID","ccclass","property","GameBoardViewModel","constructor","sendViewModel","betHistoryViewModel","clockViewModel","gameType","BET","countDown","isShowGame","winArea","winCardRate","allCardRate","timer","begin","listenerAuth","listenerUserJoinOrQuit","initView","add","TOP_UP","data","comp","scheduleOnce","dispatch","GAME_TIP","GAMESTATUS_CRASH","seconds","startCountdown","openBeginAnim","leftUsers","concat","rightUsers","STOP_BET","updatePokerInfo","qiuQiuMemberDrawPrizeVo","updateAllWinUser","qiuQiuWinMemberVo","updateAreaWinLoseRateInfo","qiuQiuMemberWinLoseVo","qiuQiuSettlementVo","updateUserSettlement","newBankerPoker","newBlackPoker","newRedPoker","newPlumPoker","newDiamondPoker","WAIT","BET_ALL","preBet","gold","memberBet","resultCode","sendBet","roomId","memberId","props","myInfo","memberName","betAmount","betType","isMe","betId","betAreaViewModel","amountArr","push","undefined","betData","index","isMyBet","HISTORY","winLoseList","reverse","qiuStatistikVo","qiuQiuMemberWinVo","BET_RESPONSE","goldData","memberData","getSeatIndex","type","ALL_USERS","GAME_SHOW","gameStatus","GIVE_GIFT","seats","usersInfo","filter","v","receiveMemberId","length","forEach","seat","x","y","headLocations","endPos","viewNode","getComponent","convertToWorldSpaceAR","flyGift","giveMemberId","getHeadPos","giftId","parent","setEvent","openHistoryPanel","openHistory","openWinPanel","openWin","openLosePanel","openLose","sendGameShowEvent","sendSktMessage","goldStr","icon","winGold","gameOption","lookOnIndex","winType","winList","roomWinInfo","updateWinloss","list","roomInfoSize","roomLeftInfoVos","roomRightInfoVos","setUsersInfo","lotteryVo","farmhouse","spade","heart","sakura","block","second","cardType","stopCountdown","areaWinLose","spadeWinLose","heartWinLose","sakuraWinLose","blockWinLose","spadeType","heartType","sakuraType","blockType","farmhouseType","isUnMount","spadeWin","heartWin","sakuraWin","blockWin","isFrom","pos","dealerPosition","myHeadPosition","onlineNumberPosition","addOnce","AUTH","localStorage","setItem","JSON","stringify","token","getItem","gameId","JOIN_GAME","hallDispatch","content","write","k","InitGameModule","GameBoardInit","placeStr","closeSubGame","confirmContent","leftMember","rightMember","result1","blackResults","result2","redResults","result3","plumResults","result4","diamondResults","black","getPropertyNode","props_layout_icon_black","red","props_layout_icon_red","plum","props_layout_icon_plum","diamond","props_layout_icon_diamond","createResult","allCardType","window","setTimeout","spadeNum","heartNum","sakuraNum","blockNum","farmhouseNum","memberNum","i","usersViewModel","initBSUsers","openUsers","openTitle","openHeGuan","openSendCard","openClock","openOnline","openBetHistory","openCardBanker","openCardUser","openBetArea","openFooter","clearInterval","setInterval","unMountCallBack","clearData","removeById","titleViewModel","clearCacheData","nodeWrap","historyViewModel","mountView","getFile","MAIN_HISTORY_WIN","source","appendTo","effectType","EFFECT1","isModal","onClosePanel","unMount","EFFECT2","connect","baseViewModel","MANI_HE_GUAN","MAIN_CLOCK","onlineViewModel","MAIN_ONLINES","MAIN_BET_HISTORY","MAIN_USERS","MAIN_TITLE","MAIN_BET_AREA","footerViewModel","MAIN_USER","openPot","MAIN_POT","MAIN_BEGIN","bankerCardViewModel","MAIN_CARD_BANKER","userCardViewModel","MAIN_CARD_USER","MAIN_SEND_CARD","winViewModel","MAIN_WIN","loseViewModel","MAIN_LOSE","openTrigJackpot","MAIN_TRIG_JACKPOT","users","time","Date","now","leftItem","rightItem","inject","state","game","myWinLose","initGameStatus"],"mappings":"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","sourcesContent":["import { _decorator, assetManager, AssetManager, Component, find, Game, game, instantiate, Node, sys, UITransform, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { Bandar_gameBoard, IProps, IEvent } from \"../components/Bandar_gameBoard\"\r\nimport ViewModel, { StoreInject } from \"../../../base/ViewModel\"\r\nimport { StateType } from \"../store/reducer\"\r\nimport { getStore } from '../store';\r\nimport HistoryViewModel from './BandarHistoryViewModel';\r\nimport { mainGameViewModel, sourceManageSelector } from '../index';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport { EffectType } from '../../../utils/NodeIOEffect';\r\nimport UsersViewModel from './BandarUsersViewModel';\r\nimport TitleViewModel from './BandarTitleViewModel';\r\nimport BetAreaViewModel from './BandarBetAreaViewModel';\r\nimport FooterViewModel from './BandarFooterViewModel';\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from '../socketConnect';\r\nimport { bundlePkgName } from '../sourceDefine';\r\nimport config, { initBetData } from '../config';\r\nimport { global, lang } from '../../../hall';\r\nimport { addToastAction } from '../../../hall/store/actions/baseBoard';\r\nimport ClockViewModel from './BandarClockViewModel';\r\nimport OnlineViewModel from './BandarOnlineViewModel';\r\nimport BetHistoryViewModel from './BandarBetHistoryViewModel';\r\nimport { setCountDownAction, setGameStatusAction, setGoldAction, setInitGameStatusAction, setMyInfoAction, setMyWinLose, setOnlineNumber, setSecondsAction, setTipsAction, setUsersInfoAction } from '../store/actions/game';\r\nimport BaseViewModel from '../../../common/viewModel/BaseViewModel';\r\nimport { BetType, gameCacheData, GameStatus, MemberInfoVo, ResGiftVo } from '../type';\r\nimport CardBankerViewModel from './BandarCardBankerViewModel';\r\nimport PotViewModel from './BandarPotViewModel';\r\nimport SendViewModel from './BandarSendCardViewModel';\r\nimport TrigJackpotViewModel from './BandarTrigJackpotViewModel';\r\nimport CardUserViewModel from './BandarCardUserViewModel';\r\nimport { changeRekorAction, changeResult1Action, changeResult2Action, changeResult3Action, changeResult4Action, changeStatistikAction, changeTrenAction } from '../store/actions/history';\r\nimport { setAllCardTypeAction, setBankerPokerAction, setBlackPokerAction, setBlockNumAction, setDiamondPokerAction, setFarmhouseNumAction, setHeartNumAction, setPlumPokerAction, setRedPokerAction, setSakuraNumAction, setSpadeNumAction, setWinAreaAction } from '../store/actions/pokerDetail';\r\nimport { changeAllCardRateAction, changeAllWinUsersAction, changeCardRateAction, changeAreaWinLoseAction, changeCardTypeAction, changeGoldDataAction, setMemberBetAction, setNewBetDataAction, WinUser, changeCancelBetDataAction } from '../store/actions/bet';\r\nimport WinViewModel from './BandarWinViewModel';\r\nimport LoseViewModel from './BandarLoseViewModel';\r\nimport { BANKER_ID } from '../../../common/viewModel/GiftUserViewModel';\r\n\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport let historyViewModel: HistoryViewModel\r\nexport let sendViewModel: SendViewModel\r\nexport let usersViewModel: UsersViewModel\r\nexport let footerViewModel: FooterViewModel\r\nexport let onlineViewModel: OnlineViewModel\r\nexport let betAreaViewModel: BetAreaViewModel\r\nexport let winViewModel: WinViewModel\r\nexport let loseViewModel: LoseViewModel\r\nexport let userCardViewModel: CardUserViewModel;\r\nexport let bankerCardViewModel: CardBankerViewModel;\r\nexport let titleViewModel: TitleViewModel\r\n@StoreInject(getStore())\r\nclass GameBoardViewModel extends ViewModel<Bandar_gameBoard, IProps, IEvent> {\r\n  private sendViewModel: SendViewModel;\r\n  private betHistoryViewModel: BetHistoryViewModel;\r\n  private clockViewModel: ClockViewModel;\r\n  private gameType: GameStatus = GameStatus.BET;\r\n  public countDown: number;\r\n  private isShowGame: boolean = true;\r\n  private winArea: number[] = [];\r\n  private winCardRate: number[] = [];\r\n  private allCardRate: number[] = [];\r\n  constructor() {\r\n    super('Bandar_gameBoard')\r\n  }\r\n\r\n  protected begin() {\r\n\r\n    this.listenerAuth();//认证\r\n    this.listenerUserJoinOrQuit();\r\n    // 初始化界面\r\n    this.initView();\r\n\r\n    sktMsgListener.add(SKT_MAG_TYPE.TOP_UP, bundlePkgName, (data) => {//10\r\n      this.comp.scheduleOnce(() => {\r\n        this.dispatch(setGoldAction(data))\r\n      },7)\r\n    })\r\n    sktMsgListener.add(SKT_MAG_TYPE.GAME_TIP, bundlePkgName, (data) => {//11\r\n      this.dispatch(setTipsAction(data))\r\n    })\r\n\r\n    // sktMsgListener.add(SKT_MAG_TYPE.POKER, bundlePkgName, (data) => {//805\r\n\r\n    //   this.dispatch(setBankerPokerAction(data.lotteryVo.farmhouse))\r\n    //   this.dispatch(setBlackPokerAction(data.lotteryVo.spade))\r\n    //   this.dispatch(setRedPokerAction(data.lotteryVo.heart))\r\n    //   this.dispatch(setPlumPokerAction(data.lotteryVo.sakura))\r\n    //   this.dispatch(setDiamondPokerAction(data.lotteryVo.block));\r\n\r\n    // })\r\n    sktMsgListener.add(SKT_MAG_TYPE.GAMESTATUS_CRASH, bundlePkgName, (data) => {//8101\r\n      if (data.gameType === GameStatus.BET && data.seconds > 0) {\r\n        this.winArea = [];\r\n        this.winCardRate = [];\r\n        this.allCardRate = []\r\n        this.dispatch(setSecondsAction(data.seconds));\r\n        this.dispatch(setGameStatusAction(GameStatus.BET));\r\n        this.dispatch(setCountDownAction(data.seconds));\r\n\r\n        this.countDown = data.seconds;\r\n        this.startCountdown();\r\n\r\n        if (data.seconds > 3) {\r\n          if (this.comp.isShowGame) {\r\n            this.openBeginAnim();\r\n            // this.openSendCard();\r\n          }\r\n        }\r\n        this.dispatch(setUsersInfoAction(gameCacheData.leftUsers.concat(gameCacheData.rightUsers)));\r\n\r\n      } else if (data.gameType === GameStatus.STOP_BET) {\r\n        this.updatePokerInfo(data.qiuQiuMemberDrawPrizeVo)\r\n        this.updateAllWinUser(data.qiuQiuWinMemberVo)\r\n        this.updateAreaWinLoseRateInfo(data.qiuQiuMemberWinLoseVo,data.seconds)\r\n        if (data.qiuQiuSettlementVo) {\r\n          this.updateUserSettlement(data.qiuQiuSettlementVo)\r\n        }\r\n\r\n      } else {\r\n        gameCacheData.newBankerPoker = [];\r\n        gameCacheData.newBlackPoker = [];\r\n        gameCacheData.newRedPoker = [];\r\n        gameCacheData.newPlumPoker = [];\r\n        gameCacheData.newDiamondPoker = [];\r\n        this.winCardRate = [];\r\n        this.allCardRate = [];\r\n        this.winArea = [];\r\n        this.dispatch(setGameStatusAction(GameStatus.WAIT));\r\n        this.dispatch(setCountDownAction(data.seconds));\r\n        this.countDown = data.seconds;\r\n        this.startCountdown();\r\n      }\r\n    })\r\n    sktMsgListener.add(SKT_MAG_TYPE.BET_ALL, bundlePkgName, (data) => {//802\r\n      if (!config.preBet) {\r\n        this.dispatch(setGoldAction(data.gold))\r\n        this.dispatch(setMemberBetAction(data.memberBet))\r\n\r\n      } else if (data.resultCode === 0) {\r\n        const sendBet = {\r\n          roomId: gameCacheData.roomId,\r\n          memberId: this.comp.props.myInfo.memberId,\r\n          memberName: this.comp.props.myInfo.memberName,\r\n          gold: data.betAmount,\r\n          betType: data.betType,\r\n          isMe: true,\r\n          betId: data.betId\r\n        }\r\n        betAreaViewModel.comp.amountArr.push(sendBet);\r\n        this.dispatch(setGoldAction(data.gold))\r\n        this.dispatch(setMemberBetAction(data.memberBet))\r\n      } else if (data.resultCode !== undefined && data.resultCode !== 0) {\r\n        this.dispatch(setGoldAction(data.gold))\r\n        this.dispatch(setMemberBetAction(data.memberBet))\r\n        const betData = initBetData(this.comp.props.myInfo.index, this.comp.props.myInfo.memberId, data.betType, data.betAmount);\r\n        betData.betId = data.betId;\r\n        betData.isMyBet = true;\r\n\r\n        this.dispatch(changeCancelBetDataAction(betData))\r\n      }\r\n    })\r\n    sktMsgListener.add(SKT_MAG_TYPE.HISTORY, bundlePkgName, (data) => {//806\r\n\r\n      this.dispatch(changeTrenAction(data.winLoseList.reverse()));\r\n      this.dispatch(changeStatistikAction(data.qiuStatistikVo));\r\n      this.dispatch(changeRekorAction(data.qiuQiuMemberWinVo));\r\n    })\r\n    sktMsgListener.add(SKT_MAG_TYPE.BET_RESPONSE, bundlePkgName, (data) => {//8102\r\n      gameCacheData.goldData = data.goldData;\r\n      this.dispatch(changeGoldDataAction(data.goldData))\r\n      const memberId = data.memberData.memberId;\r\n      const index = this.getSeatIndex(memberId);\r\n      const isMyBet = this.comp.props.myInfo.memberId === memberId;\r\n      // console.log(data.goldData[data.memberData.type]);\r\n\r\n      // const totalBetAmount=data.goldData[data.memberData.type]\r\n      // const betType = convertBetType(data.memberData.type);\r\n      const betData = initBetData(index, memberId, data.memberData.type, data.memberData.gold);\r\n      betData.isMyBet = isMyBet;\r\n      this.dispatch(setNewBetDataAction(betData));\r\n      // console.log(data);\r\n    })\r\n    // sktMsgListener.add(SKT_MAG_TYPE.SETTLEMENT, bundlePkgName, (data) => {//804\r\n    //   // console.log(data);\r\n    //   let myInfo = {\r\n    //     gold: data.myInfo.gold,\r\n    //     goldStr: data.myInfo.gold + \"\",\r\n    //     icon: data.myInfo.icon,\r\n    //     memberName: data.myInfo.memberName,\r\n    //     winGold: data.myInfo.winGold,\r\n    //     memberId: data.myInfo.memberId,\r\n    //     index: config.gameOption.lookOnIndex,\r\n    //     memberBet: data.myInfo.memberBet,\r\n    //     winType: data.myInfo\r\n    //   }\r\n    //   gameCacheData.winList = data.roomWinInfo;\r\n    //   // const myHead = convertHeadType(data.myInfo);\r\n    //   this.dispatch(setMyInfoAction(myInfo));\r\n    //   this.dispatch(setGoldAction(data.myInfo.gold))\r\n    //   this.dispatch(setMyWinLose(data.myInfo.winType))\r\n\r\n    // })\r\n    sktMsgListener.add(SKT_MAG_TYPE.ALL_USERS, bundlePkgName, (data) => {//807\r\n      // 改变在线人数\r\n      this.dispatch(setOnlineNumber(data));\r\n    })\r\n\r\n    // sktMsgListener.add(SKT_MAG_TYPE.OTHER_WIN, bundlePkgName, (data) => {//808\r\n\r\n    //   this.updateWinloss(data.list)\r\n    //   // 改变在线人数\r\n    //   this.dispatch(setOnlineNumber(data.roomInfoSize));\r\n    //   gameCacheData.leftUsers = data.roomLeftInfoVos;\r\n    //   gameCacheData.rightUsers = data.roomRightInfoVos;\r\n    //   //榜上所有用户信息\r\n    //   this.setUsersInfo();\r\n    //   // this.dispatch(changeAllWinUsersAction(data.list))\r\n\r\n    // })\r\n    sktMsgListener.add(SKT_MAG_TYPE.GAME_SHOW, bundlePkgName, (data: any) => {//810\r\n      if (GameStatus.BET === this.comp.props.gameStatus) {\r\n        // 拿到最新的倒计时后，就减掉1秒\r\n        this.countDown = data.seconds;\r\n        this.startCountdown();\r\n      }\r\n    })\r\n\r\n    sktMsgListener.add(SKT_MAG_TYPE.GIVE_GIFT, bundlePkgName, (data: ResGiftVo) => {//11\r\n      const seats = this.comp.props.usersInfo.filter(v => v.memberId === data.receiveMemberId);\r\n      // 如果展示座位上有两个相同人，就同时送两次\r\n      if (seats && seats.length > 1) {\r\n        seats.forEach(seat => {\r\n          const { x, y } = config.headLocations[seat.index];\r\n          const endPos = this.viewNode.getComponent(UITransform).convertToWorldSpaceAR(new Vec3(x, y))\r\n          global.flyGift(data.giveMemberId, data.receiveMemberId, this.getHeadPos(data.giveMemberId, true), endPos, data.giftId, this.viewNode.parent);\r\n        })\r\n      } else {\r\n        global.flyGift(data.giveMemberId, data.receiveMemberId, this.getHeadPos(data.giveMemberId, true),\r\n          this.getHeadPos(data.receiveMemberId, false), data.giftId, this.viewNode.parent);\r\n      }\r\n    })\r\n\r\n    this.setEvent({\r\n      openHistoryPanel: () => {\r\n        this.openHistory()\r\n      },\r\n\r\n      openWinPanel: () => {\r\n        this.openWin();\r\n      },\r\n\r\n      openLosePanel: () => {\r\n        this.openLose();\r\n      },\r\n      sendGameShowEvent: () => {\r\n        sktInstance.sendSktMessage(SKT_MAG_TYPE.GAME_SHOW, { roomId: gameCacheData.roomId });\r\n      }\r\n    })\r\n  }\r\n\r\n  /**更新用户结算 */\r\n  private updateUserSettlement(data) {\r\n    this.comp.scheduleOnce(() => {\r\n      let myInfo = {\r\n        gold: data.myInfo.gold,\r\n        goldStr: data.myInfo.gold + \"\",\r\n        icon: data.myInfo.icon,\r\n        memberName: data.myInfo.memberName,\r\n        winGold: data.myInfo.winGold,\r\n        memberId: data.myInfo.memberId,\r\n        index: config.gameOption.lookOnIndex,\r\n        memberBet: data.myInfo.memberBet,\r\n        winType: data.myInfo\r\n      }\r\n      gameCacheData.winList = data.roomWinInfo;\r\n      // const myHead = convertHeadType(data.myInfo);\r\n      this.dispatch(setMyInfoAction(myInfo));\r\n      this.dispatch(setGoldAction(data.myInfo.gold))\r\n      this.dispatch(setMyWinLose(data.myInfo.winType))\r\n   },7)\r\n  }\r\n\r\n  /**更新所有赢的玩家信息 */\r\n  private updateAllWinUser(data) {\r\n    this.comp.scheduleOnce(() => {\r\n      this.updateWinloss(data.list)\r\n      // 改变在线人数\r\n      this.dispatch(setOnlineNumber(data.roomInfoSize));\r\n      gameCacheData.leftUsers = data.roomLeftInfoVos;\r\n      gameCacheData.rightUsers = data.roomRightInfoVos;\r\n      //榜上所有用户信息\r\n      this.setUsersInfo();\r\n    },6)\r\n  }\r\n  /**更新牌的信息 */\r\n  private updatePokerInfo(data) {\r\n    this.dispatch(setBankerPokerAction(data.lotteryVo.farmhouse))\r\n    this.dispatch(setBlackPokerAction(data.lotteryVo.spade))\r\n    this.dispatch(setRedPokerAction(data.lotteryVo.heart))\r\n    this.dispatch(setPlumPokerAction(data.lotteryVo.sakura))\r\n    this.dispatch(setDiamondPokerAction(data.lotteryVo.block));\r\n  }\r\n  /**更新小历史记录及牌的倍率及区域赢信息 */\r\n  private updateAreaWinLoseRateInfo(data,second) {\r\n    let cardType: number[] = [];\r\n    gameCacheData.newBankerPoker = data.farmhouse\r\n    gameCacheData.newBlackPoker = data.spade\r\n    gameCacheData.newRedPoker = data.heart\r\n    gameCacheData.newPlumPoker = data.sakura\r\n    gameCacheData.newDiamondPoker = data.block\r\n    this.stopCountdown();\r\n    let areaWinLose = [data.spadeWinLose, data.heartWinLose, data.sakuraWinLose, data.blockWinLose]\r\n    if (data.spadeWinLose === 1) {\r\n      this.winArea.push(1)\r\n      this.winCardRate.push(data.spadeType)\r\n    }\r\n    if (data.heartWinLose === 1) {\r\n      this.winArea.push(2)\r\n      this.winCardRate.push(data.heartType)\r\n    }\r\n    if (data.sakuraWinLose === 1) {\r\n      this.winArea.push(3)\r\n      this.winCardRate.push(data.sakuraType)\r\n    }\r\n    if (data.blockWinLose === 1) {\r\n      this.winArea.push(4)\r\n      this.winCardRate.push(data.blockType)\r\n    }\r\n    cardType.push(data.farmhouseType)\r\n    this.allCardRate.push(data.spadeType)\r\n    this.allCardRate.push(data.heartType)\r\n    this.allCardRate.push(data.sakuraType)\r\n    this.allCardRate.push(data.blockType)\r\n    cardType = cardType.concat(this.allCardRate)\r\n    this.dispatch(changeCardTypeAction(cardType))\r\n    this.dispatch(changeAllCardRateAction(this.allCardRate))\r\n    this.dispatch(changeAreaWinLoseAction(areaWinLose))\r\n    this.dispatch(setWinAreaAction(this.winArea));\r\n    this.dispatch(changeCardRateAction(this.winCardRate));\r\n    this.dispatch(setGameStatusAction(GameStatus.STOP_BET));\r\n    let seconds = second - 5\r\n    // result1.push(data.data.spadeWin[data.data.spadeWin.length-1])\r\n    this.comp.scheduleOnce(()=>{\r\n      if (!mainGameViewModel.isUnMount) {\r\n        this.dispatch(changeResult1Action(data.spadeWin));\r\n        this.dispatch(changeResult2Action(data.heartWin));\r\n        this.dispatch(changeResult3Action(data.sakuraWin));\r\n        this.dispatch(changeResult4Action(data.blockWin));\r\n      }\r\n    }, seconds)\r\n  }\r\n\r\n\r\n  /**获得获得用户所在位置 */\r\n  private getHeadPos(memberId: string, isFrom: boolean) {\r\n    const seat = this.comp.props.usersInfo.find(v => v.memberId === memberId);\r\n    let pos;\r\n    if (seat) {\r\n      pos = config.headLocations[seat.index];\r\n    } else if (BANKER_ID === memberId) {\r\n      pos = config.gameOption.dealerPosition;\r\n    } else if (isFrom && this.comp.props.myInfo.memberId === memberId) {\r\n      pos = config.gameOption.myHeadPosition;\r\n    } else if (isFrom) {\r\n      pos = config.gameOption.onlineNumberPosition;\r\n    } else {\r\n      return undefined;\r\n    }\r\n\r\n    return this.viewNode.getComponent(UITransform).convertToWorldSpaceAR(new Vec3(pos.x, pos.y));\r\n  }\r\n\r\n  /**\r\n   * 认证消息监听及处理\r\n   */\r\n  private listenerAuth() {\r\n    sktMsgListener.addOnce(SKT_MAG_TYPE.AUTH, bundlePkgName, (data: any) => {\r\n      sys.localStorage.setItem(\"auth\", JSON.stringify(data));\r\n    })\r\n\r\n    // sys.localStorage.setItem(\"token\",window.location.search.substring(6))\r\n    // sys.localStorage.setItem(\"token\",config.testConfig.token)\r\n    sktInstance.sendSktMessage(SKT_MAG_TYPE.AUTH, {\r\n      token: sys.localStorage.getItem(\"token\"),\r\n      gameId: config.gameId\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n  * 监听用户进出游戏\r\n  */\r\n  private listenerUserJoinOrQuit() {\r\n    sktMsgListener.add(SKT_MAG_TYPE.JOIN_GAME, bundlePkgName, (data) => {//4\r\n      if (!data) {\r\n        global.hallDispatch(addToastAction({ content: lang.write(k => k.InitGameModule.GameBoardInit, {}, { placeStr: \"game init failed\" }) }))\r\n        global.closeSubGame({ confirmContent: lang.write(k => k.InitGameModule.GameBoardInit) });\r\n        return;\r\n      }\r\n      gameCacheData.leftUsers = data.leftMember;\r\n      gameCacheData.rightUsers = data.rightMember;\r\n      gameCacheData.roomId = data.roomId;\r\n      gameCacheData.memberId = data.myInfo.memberId;\r\n      gameCacheData.goldData = data.goldData;\r\n      this.dispatch(setInitGameStatusAction(data.gameType));\r\n      let myInfo = {\r\n        gold: data.myInfo.gold,\r\n        goldStr: data.myInfo.gold + \"\",\r\n        icon: data.myInfo.icon,\r\n        memberName: data.myInfo.memberName,\r\n        winGold: data.myInfo.winGold,\r\n        memberId: data.myInfo.memberId,\r\n        index: config.gameOption.lookOnIndex,\r\n        memberBet: data.myInfo.memberBet,\r\n      }\r\n\r\n      this.dispatch(setMyInfoAction(myInfo));\r\n      this.dispatch(setGoldAction(data.myInfo.gold))\r\n      this.dispatch(changeGoldDataAction(data.goldData));\r\n      let result1 = data.blackResults ? data.blackResults : [];\r\n      let result2 = data.redResults ? data.redResults : [];\r\n      let result3 = data.plumResults ? data.plumResults :[];\r\n      let result4 = data.diamondResults ? data.diamondResults : [];\r\n      let black = this.betHistoryViewModel.comp.getPropertyNode().props_layout_icon_black as Node;\r\n      let red = this.betHistoryViewModel.comp.getPropertyNode().props_layout_icon_red as Node;\r\n      let plum = this.betHistoryViewModel.comp.getPropertyNode().props_layout_icon_plum as Node;\r\n      let diamond = this.betHistoryViewModel.comp.getPropertyNode().props_layout_icon_diamond as Node\r\n      this.betHistoryViewModel.comp.createResult(black, result1, false)\r\n      this.betHistoryViewModel.comp.createResult(red, result2, false)\r\n      this.betHistoryViewModel.comp.createResult(plum, result3, false)\r\n      this.betHistoryViewModel.comp.createResult(diamond, result4, false)\r\n\r\n      if (data.gameType === GameStatus.BET && data.seconds > 0) {\r\n        this.dispatch(setSecondsAction(data.seconds));\r\n        this.winArea = [];\r\n        this.winCardRate = [];\r\n        this.allCardRate = [];\r\n        this.dispatch(setCountDownAction(data.seconds));\r\n        if (data.seconds !== 0) {\r\n          this.countDown = data.seconds;\r\n          this.startCountdown();\r\n        }\r\n        this.dispatch(setGameStatusAction(GameStatus.BET));\r\n        if (data.seconds > 3) {\r\n          this.openBeginAnim();\r\n          // this.openSendCard();\r\n        }\r\n      } else if (data.gameType === GameStatus.STOP_BET ) {\r\n        this.dispatch(setGameStatusAction(null));\r\n        this.dispatch(setWinAreaAction([]));\r\n        this.dispatch(setNewBetDataAction(null));\r\n        this.stopCountdown();\r\n        let allCardType = [];\r\n        allCardType.push(data.farmhouseType);\r\n        allCardType.push(data.spadeType);\r\n        allCardType.push(data.heartType);\r\n        allCardType.push(data.sakuraType);\r\n        allCardType.push(data.blockType);\r\n        this.dispatch(setAllCardTypeAction(allCardType));\r\n        window.setTimeout(() => {\r\n          this.dispatch(setSpadeNumAction(data.spadeNum));\r\n          this.dispatch(setHeartNumAction(data.heartNum));\r\n          this.dispatch(setSakuraNumAction(data.sakuraNum));\r\n          this.dispatch(setBlockNumAction(data.blockNum));\r\n          this.dispatch(setFarmhouseNumAction(data.farmhouseNum));\r\n        }, 100)\r\n      } else if (data.gameType === GameStatus.WAIT && data.seconds > 0) {\r\n        this.winArea = [];\r\n        this.winCardRate = [];\r\n        this.allCardRate = []\r\n        this.dispatch(setGameStatusAction(GameStatus.WAIT));\r\n        this.dispatch(setCountDownAction(data.seconds));\r\n        if (data.seconds !== 0) {\r\n          this.countDown = data.seconds;\r\n          this.startCountdown();\r\n        }\r\n\r\n      }\r\n\r\n      // 改变在线人数\r\n      this.dispatch(setOnlineNumber(data.memberNum));\r\n      //榜上所有用户信息\r\n      this.setUsersInfo()\r\n      this.dispatch(setUsersInfoAction(gameCacheData.leftUsers.concat(gameCacheData.rightUsers)));\r\n      if (!this.comp.props.usersInfo || this.comp.props.usersInfo === undefined) { return };\r\n      this.comp.props.usersInfo.forEach((v, i) => {\r\n        usersViewModel.comp.initBSUsers(v, v.index)\r\n      })\r\n      // // 初始化界面\r\n      // this.initView();\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  public initView() {\r\n\r\n    this.openUsers();\r\n    this.openTitle();\r\n    this.openHeGuan();\r\n    this.openSendCard();//荷官发牌，下注阶段出现\r\n    this.openClock();\r\n    this.openOnline();\r\n    this.openBetHistory();\r\n\r\n    this.openCardBanker();\r\n    this.openCardUser(this.clockViewModel.viewNode);\r\n    this.openBetArea();\r\n    this.openFooter();\r\n    // titleViewModel.clearCacheData()\r\n    // this.openPot();\r\n    // this.openTrigJackpot();//trigJackpot\r\n  }\r\n\r\n\r\n  // 开始倒计时\r\n  private timer: number = 0;\r\n  private startCountdown() {\r\n    if (this.timer > 0) {\r\n      window.clearInterval(this.timer);\r\n      this.timer = 0;\r\n    }\r\n    this.dispatch(setCountDownAction(this.countDown--));\r\n    this.timer = window.setInterval(() => {\r\n      this.dispatch(setCountDownAction(this.countDown--));\r\n      if (this.countDown <= 0) {\r\n        window.clearInterval(this.timer);\r\n        // this.stopCountdown();//测试为0时不展示时钟\r\n        this.timer = 0;\r\n      }\r\n    }, 1000)\r\n  }\r\n  /**停止倒计时 */\r\n  private stopCountdown() {\r\n    // 如果倒计时已经为0了，不处理了\r\n    if (this.comp.props.countDown <= 0) {\r\n      return;\r\n    }\r\n    this.dispatch(setCountDownAction(0));\r\n    this.timer && window.clearInterval(this.timer);\r\n    this.timer = 0;\r\n  }\r\n\r\n\r\n  protected unMountCallBack(): void {\r\n    this.clearData();\r\n    sktMsgListener.removeById(bundlePkgName)\r\n  }\r\n\r\n  private clearData() {\r\n    titleViewModel.clearCacheData()\r\n  }\r\n\r\n  public openHistory(nodeWrap?: Node) {\r\n    historyViewModel = new HistoryViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_HISTORY_WIN).source)\r\n      .appendTo(this.viewNode.parent, { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n        onClosePanel: () => {\r\n          historyViewModel.unMount(EffectType.EFFECT2)\r\n        }\r\n      }).connect()\r\n\r\n  }\r\n\r\n  public openHeGuan(nodeWrap?: Node) {\r\n    const baseViewModel = new BaseViewModel(\"Bandar_heGuan\").mountView(sourceManageSelector().getFile(PrefabPathDefine.MANI_HE_GUAN).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n\r\n  public openClock(nodeWrap?: Node) {\r\n    this.clockViewModel = new ClockViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_CLOCK).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openOnline(nodeWrap?: Node) {\r\n    onlineViewModel = new OnlineViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_ONLINES).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openBetHistory(nodeWrap?: Node) {\r\n    this.betHistoryViewModel = new BetHistoryViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_BET_HISTORY).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openUsers(nodeWrap?: Node) {\r\n    usersViewModel = new UsersViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_USERS).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n\r\n  public openTitle(nodeWrap?: Node) {\r\n    titleViewModel = new TitleViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_TITLE).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openBetArea() {\r\n    betAreaViewModel = new BetAreaViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_BET_AREA).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openFooter() {\r\n    footerViewModel = new FooterViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_USER).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openPot() {\r\n    const baseViewModel = new PotViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_POT).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n\r\n  public openBeginAnim() {\r\n    const baseViewModel = new BaseViewModel(\"Bandar_begin\").mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_BEGIN).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openCardBanker() {\r\n    bankerCardViewModel = new CardBankerViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_CARD_BANKER).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openCardUser(nodeWrap?: Node) {\r\n    userCardViewModel = new CardUserViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_CARD_USER).source)\r\n      .appendTo(nodeWrap, { effectType: EffectType.EFFECT1, isModal: false }).setEvent({\r\n\r\n      }).connect()\r\n  }\r\n  public openSendCard() {\r\n    sendViewModel = new SendViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_SEND_CARD).source)\r\n      .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: false }).connect()\r\n  }\r\n\r\n  public openWin(nodeWrap?: Node) {\r\n    winViewModel = new WinViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_WIN).source)\r\n      .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n        onClosePanel: () => {\r\n          winViewModel.unMount(EffectType.EFFECT2)\r\n        }\r\n\r\n      }).connect()\r\n\r\n  }\r\n\r\n\r\n  public openLose(nodeWrap?: Node) {\r\n    loseViewModel = new LoseViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_LOSE).source)\r\n      .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n        onClosePanel: () => {\r\n          loseViewModel.unMount(EffectType.EFFECT2)\r\n        }\r\n      }).connect()\r\n  }\r\n\r\n  public openTrigJackpot() {\r\n    const baseViewModel = new TrigJackpotViewModel().mountView(sourceManageSelector().getFile(PrefabPathDefine.MAIN_TRIG_JACKPOT).source)\r\n      .appendTo(find(\"Canvas\"), { effectType: EffectType.EFFECT1, isModal: true })\r\n  }\r\n\r\n  private getSeatIndex(memberId: string) {\r\n    // 倒起找，原因是因为有可能重复上榜，右边上榜优先\r\n    // console.log(this.comp.props.usersInfo);\r\n\r\n    const seat = [...this.comp.props.usersInfo].reverse().find(v => v.memberId === memberId);\r\n    if (seat) {\r\n      return seat.index;\r\n    }\r\n    return config.gameOption.lookOnIndex;\r\n  }\r\n\r\n  private updateWinloss(users: WinUser[]) {\r\n    if (!users || users.length === 0) {\r\n      this.dispatch(changeAllWinUsersAction(null))\r\n      return;\r\n    }\r\n    users.filter(v => v.gold !== 0).forEach(v => {\r\n      v.index = this.getSeatIndex(v.memberId);\r\n      v.time = Date.now()\r\n    })\r\n    // console.log(\"users-----\",users);\r\n\r\n    this.dispatch(changeAllWinUsersAction(users))\r\n  }\r\n\r\n\r\n  private setUsersInfo() {\r\n    /** 初始化榜上用户信息 */\r\n    // console.log(gameCacheData.leftUsers);\r\n\r\n    if (gameCacheData.leftUsers) {\r\n      gameCacheData.leftUsers.forEach((leftItem, i) => {\r\n        leftItem.index = i\r\n        // memberName: ;\r\n        // memberId:;\r\n        // icon: ;\r\n        // gold: ;\r\n        // winType:;\r\n        // winGold:;\r\n        // memberBet: ;\r\n      })\r\n\r\n    }\r\n    if (gameCacheData.rightUsers) {\r\n      gameCacheData.rightUsers.forEach((rightItem, i) => {\r\n        rightItem.index = 3 + i\r\n      })\r\n\r\n    }\r\n\r\n    // window.setTimeout(()=>{\r\n    // this.dispatch(setUsersInfoAction(gameCacheData.leftUsers.concat(gameCacheData.rightUsers)))\r\n    // },4000)\r\n\r\n\r\n  }\r\n\r\n  public connect() {\r\n    this.inject({}, (state: StateType) => {\r\n\r\n      return {\r\n        countDown: state.game.countDown,\r\n        usersInfo: state.game.usersInfo,\r\n        myInfo: state.game.myInfo,\r\n        myWinLose: state.game.myWinLose,\r\n        gameStatus: state.game.gameStatus,\r\n        // initGameType: null,\r\n        initGameStatus: state.game.initGameStatus\r\n      }\r\n    })\r\n    return this\r\n  }\r\n\r\n}\r\n\r\nexport default GameBoardViewModel\r\n"]}