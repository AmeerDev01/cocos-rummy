{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/godWealthV2/components/GodWealthV2_Icon.ts"],"names":["GodWealthV2Icon","UITransform","Vec3","instantiate","sp","Sprite","Label","mainViewModel","sourceManageSeletor","PrefabPathDefine","getNodeByNameDeep","config","IconId","constructor","iconConfig","isPoolObject","node","faceNode","faceAnimationNode","skeleton","sprite","use","iconIndex","borderNode","borderNode2","amountNode","Particle2DNode","callback","getFile","ICON","source","getComponent","width","normalRollOption","singleRollerWidth","height","singleRollerHeight","Skeleton","active","removeFromParent","id","BEETLE","getChildByName","string","Math","ceil","random","listenerSkeletonEvent","buildIcon","setCompleteListener","isValid","hideWin","resetIcon","parentNode","addChild","setScale","scale","getId","restore","destory","getNode","getHeight","getIconIndex","setPosition","value","getPosition","skeletonData","skeletonName","setAnimation","animationArr","spriteFrame","fileName","playWin","isBorder","loop","offset","distance","WILD","setWorldPosition","worldPosition","clone","add","SCATTER","timeScale","playBaoHeAnimation","done","setSiblingIndex","children","length","pauseWin","clearTracks","hideBaoHeWin","isUse","setAmount","amount","miniNum","comp","majorNum","formatAmountWithLetter","formatAmountWithCommas","showBg","hideBg","getAmountNode","getParticleNode","destroy"],"mappings":"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","sourcesContent":["import { Node, UITransform, Vec3, instantiate, sp, Sprite, Label } from \"cc\";\r\nimport { mainViewModel, sourceManageSeletor } from \"../index\";\r\nimport { PrefabPathDefine } from \"../sourceDefine/prefabDefine\";\r\nimport { getNodeByNameDeep } from \"../../../utils/tool\";\r\nimport config from \"../config\";\r\nimport { IconId } from \"../type\";\r\n\r\nexport class GodWealthV2Icon {\r\n  private node: Node;\r\n  private faceNode: Node;\r\n  public faceAnimationNode: Node;\r\n  private iconConfig;\r\n  private skeleton: sp.Skeleton;\r\n  private sprite: Sprite\r\n  private use = false;\r\n  private iconIndex = 0;\r\n\r\n  private borderNode: Node;\r\n  public borderNode2: Node;\r\n\r\n  public amountNode: Node;\r\n  public Particle2DNode: Node;\r\n\r\n  private isPoolObject = true;\r\n  private callback;\r\n\r\n\r\n  constructor(iconConfig, isPoolObject: boolean = true) {\r\n    this.iconConfig = iconConfig;\r\n    this.isPoolObject = isPoolObject;\r\n    this.node = instantiate(sourceManageSeletor().getFile(PrefabPathDefine.ICON).source);\r\n    this.node.getComponent(UITransform).width = config.normalRollOption.singleRollerWidth;\r\n    this.node.getComponent(UITransform).height = config.normalRollOption.singleRollerHeight;\r\n\r\n    this.faceNode = getNodeByNameDeep(\"face\", this.node);\r\n    this.faceAnimationNode = getNodeByNameDeep(\"face-animation\", this.node);\r\n\r\n    this.sprite = this.faceNode.getComponent(Sprite);\r\n    this.skeleton = this.faceAnimationNode.getComponent(sp.Skeleton);\r\n\r\n    this.borderNode = getNodeByNameDeep(\"focusBorder\", this.node);\r\n    this.borderNode.active = true;\r\n    this.borderNode.removeFromParent();\r\n\r\n    this.borderNode2 = getNodeByNameDeep(\"focusBorder2\", this.node);\r\n    // this.borderNode2.active = true;\r\n    this.borderNode2.removeFromParent();\r\n    \r\n    if (this.iconConfig.id === IconId.BEETLE) {\r\n      this.amountNode = getNodeByNameDeep(\"amount\", this.node);\r\n      this.amountNode.active = true;\r\n      this.Particle2DNode = this.amountNode.getChildByName(\"props_Particle\");\r\n      this.amountNode.getChildByName(\"label_number\").getComponent(Label).string = Math.ceil((Math.random() * 100))  + '';\r\n      this.listenerSkeletonEvent();\r\n    }\r\n\r\n    this.buildIcon();\r\n  }\r\n\r\n  private listenerSkeletonEvent() {\r\n    this.skeleton.setCompleteListener(() => {\r\n      if (this.node && this.node.isValid && this.callback) {\r\n        this.callback && this.callback();\r\n        this.callback = null;\r\n        this.hideWin();\r\n      }\r\n    })\r\n  }\r\n\r\n    /**获得图标 */\r\n  public resetIcon(iconConfig, parentNode?: Node, iconIndex?: number) {\r\n    this.use = true;\r\n    this.iconConfig = iconConfig;\r\n    this.iconIndex = iconIndex;\r\n    parentNode && parentNode.addChild(this.node);\r\n    this.node.setScale(iconConfig.scale[0], iconConfig.scale[1]);\r\n  }\r\n\r\n  public getId() {\r\n    return this.iconConfig.id;\r\n  }\r\n\r\n /**归还到缓存池 */\r\n public restore() {\r\n  this.use = false;\r\n  this.iconIndex = -1;\r\n  this.node.active = true;\r\n  this.node.removeFromParent();\r\n  this.node && this.node.isValid && this.amountNode && (this.amountNode.getChildByName(\"label_number\").getComponent(Label).string = Math.ceil((Math.random() * 100))  + '');\r\n  if (this.iconConfig.id === IconId.BEETLE) {\r\n    this.amountNode.active = true;\r\n  }\r\n  !this.isPoolObject && this.destory();\r\n}\r\n\r\npublic getNode() {\r\n  return this.node;\r\n}\r\n\r\npublic getHeight() {\r\n  return this.node.getComponent(UITransform).height;\r\n}\r\n\r\npublic getIconIndex() {\r\n  return this.iconIndex;\r\n}\r\n\r\npublic setPosition(value: Vec3) {\r\n  if (this.node) {\r\n    this.node.setPosition(value);\r\n  }\r\n}\r\n\r\npublic getPosition() {\r\n  return this.node.getPosition();\r\n}\r\n\r\nprivate buildIcon() {\r\n  this.faceAnimationNode.active = true;\r\n  this.faceAnimationNode.removeFromParent();\r\n\r\n  const skeletonData = sourceManageSeletor().getFile(this.iconConfig.skeletonName).source;\r\n  this.skeleton.skeletonData = skeletonData;\r\n  this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n  this.sprite.spriteFrame = sourceManageSeletor().getFile(this.iconConfig.fileName).source;\r\n\r\n}\r\n\r\n/**播放普通中奖 */\r\n  public playWin(parentNode: Node, isBorder: boolean = true, loop: boolean = true) {\r\n    const offset = new Vec3(this.iconConfig.distance[0], this.iconConfig.distance[1]);\r\n    if (this.iconConfig.id === IconId.WILD) {\r\n      this.faceAnimationNode.setScale(this.iconConfig.scale[0], this.iconConfig.scale[1]);\r\n    }\r\n    this.faceAnimationNode.active = true;\r\n    parentNode.addChild(this.faceAnimationNode)\r\n    this.faceAnimationNode.setWorldPosition(this.node.worldPosition.clone().add(offset));\r\n\r\n    \r\n    if (isBorder) {\r\n      this.borderNode.active = true;\r\n      parentNode.addChild(this.borderNode)\r\n      this.borderNode.setWorldPosition(this.node.worldPosition);\r\n    }\r\n    \r\n    this.faceNode.active = false;\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], loop);\r\n    if (!loop && this.iconConfig.id === IconId.SCATTER) {// && mainViewModel.rollerPanelViewModel.comp.isAllEnd\r\n      \r\n      this.faceAnimationNode.getComponent(sp.Skeleton).timeScale = 2.5;\r\n    }\r\n    \r\n}\r\n\r\n/**播放宝盒动画 */\r\n  public playBaoHeAnimation(parentNode,done) {\r\n    this.callback = done;\r\n    this.faceAnimationNode.active = true;\r\n    this.node.addChild(this.faceAnimationNode);\r\n    this.faceAnimationNode.setWorldPosition(this.node.worldPosition);\r\n    this.faceNode.active = false;\r\n\r\n      this.borderNode2.active = true;\r\n      this.borderNode2.setScale(1, 0.95);\r\n      // if (!this.borderNode2.parent) {\r\n        parentNode.addChild(this.borderNode2)\r\n        this.borderNode2.setWorldPosition(this.node.worldPosition);\r\n      // }\r\n    // this.borderNode2.active = true;\r\n    // this.node.addChild(this.borderNode2)\r\n\r\n    this.amountNode.setSiblingIndex(this.node.children.length);\r\n\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[1], true);\r\n  }\r\n  \r\n  public pauseWin() {\r\n    this.borderNode.active = false;\r\n    if (this.iconConfig.id === 6) {\r\n      this.skeleton.clearTracks()\r\n    }\r\n    // this.skeleton.clearTracks()\r\n    this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n  }\r\n\r\n/**隐藏普通中奖 */\r\npublic hideWin() {\r\n  this.faceAnimationNode.active = false;\r\n  this.faceAnimationNode.removeFromParent();\r\n  this.borderNode.active = false;\r\n  this.borderNode.removeFromParent();\r\n  this.faceNode.active = true;\r\n  this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n  }\r\n  \r\n  /**隐藏宝盒中奖 */\r\npublic hideBaoHeWin() {\r\n  this.faceAnimationNode.active = false;\r\n  this.faceAnimationNode.removeFromParent();\r\n  this.borderNode2.active = false;\r\n  this.borderNode2.removeFromParent();\r\n  this.faceNode.active = true;\r\n  this.skeleton.setAnimation(0, this.iconConfig.animationArr[0], false);\r\n}\r\n\r\n/**是否使用 */\r\npublic isUse() {\r\n  return this.use;\r\n}\r\n\r\n  public setAmount(amount) {\r\n    const miniNum = mainViewModel.comp.miniNum;\r\n    const majorNum = mainViewModel.comp.majorNum;\r\n    if (this.node && this.node.isValid) {\r\n  \r\n      if (amount >= miniNum && amount < majorNum) {\r\n        this.amountNode.getChildByName(\"label_number\").getComponent(Label).string = \"MINI\";\r\n      } else if (amount >= majorNum) {\r\n        this.amountNode.getChildByName(\"label_number\").getComponent(Label).string = \"MAJOR\";\r\n        \r\n      } else if (amount < miniNum) {\r\n        \r\n        this.amountNode.getChildByName(\"label_number\").getComponent(Label).string = amount >= 10000 ? amount.formatAmountWithLetter() : amount.formatAmountWithCommas();\r\n      }\r\n    }\r\n}\r\n\r\npublic showBg() {\r\n  this.node.getChildByName(\"bg\").active = true;\r\n}\r\n\r\npublic hideBg() {\r\n  this.node.getChildByName(\"bg\").active = false;\r\n}\r\n\r\npublic getAmountNode() {\r\n  return this.amountNode;\r\n}\r\n  \r\npublic getParticleNode() {\r\n  return this.Particle2DNode;\r\n}\r\n\r\npublic destory() {\r\n  this.node && this.node.isValid && this.node.destroy();\r\n  this.faceAnimationNode.destroy();\r\n  this.borderNode.destroy();\r\n  this.node = null;\r\n  this.iconConfig = null;\r\n  this.skeleton = null;\r\n}\r\n}"]}