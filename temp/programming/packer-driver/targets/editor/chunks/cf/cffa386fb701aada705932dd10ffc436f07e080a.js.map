{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfc/Slot/Component/gxfc_RulesPanel.ts"],"names":["_decorator","Node","tween","UIOpacity","UITransform","Vec3","BaseComponent","AudioManager","SoundList","ccclass","property","gxfc_RulesPanel","showIndex","start","bindEvent","closeButton","on","EventType","TOUCH_END","hidePanel","con_x","showIndexMark","width","contentWrap","getComponent","TOUCH_START","e","getLocation","x","TOUCH_MOVE","t","children","position","length","forEach","child","index","to","y","getInstance","playSound","dragAndDropToTurnThePage","indexMark","item","i","active","bindUI","uiOpacity","node","opacity","mainPanel","setScale","scale","easing","call","destroy","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Node, tween, UIOpacity, UITransform, Vec3, color, Label, } from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nimport {AudioManager, SoundList, } from \"../Managr/AudioManager\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('gxfc_RulesPanel')\r\nexport class gxfc_RulesPanel extends BaseComponent {\r\n\r\n\t@property(Node)\r\n\tcloseButton: Node = null\r\n\r\n\t@property(Node)\r\n\tmainPanel: Node = null\r\n\r\n\t@property(Node)\r\n\tcontentWrap: Node = null\r\n\r\n\t@property(Node)\r\n\tindexMark: Node = null\r\n\r\n\r\n\r\n\tstart() {\r\n\r\n\t}\r\n\tprivate showIndex: number = 0\r\n\tprotected bindEvent(): void {\r\n\t\tthis.closeButton.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.hidePanel()\r\n\t\t})\r\n\t\tlet con_x: number = 0\r\n\t\tthis.showIndexMark()\r\n\t\tlet width = this.contentWrap.getComponent(UITransform).width\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_START, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n\t\t\tcon_x = e.getLocation().x\r\n\t\t})\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_MOVE, () => { })\r\n\t\tthis.contentWrap.on(Node.EventType.TOUCH_END, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n\t\t\tconst t = e.getLocation().x - con_x\r\n\t\t\tif (t < 0) {\r\n\t\t\t\t//向左滑动\r\n\t\t\t\tif (this.contentWrap.children[0].position.x <= -(this.contentWrap.children.length - 1) * width) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentWrap.children.forEach((child, index) => {\r\n\t\t\t\t\ttween(child).to(0.1, { position: new Vec3(child.position.x - width, child.position.y) }).start()\r\n\t\t\t\t})\r\n\t\t\t\tthis.showIndex++\r\n                AudioManager.getInstance().playSound(SoundList.dragAndDropToTurnThePage)\r\n\t\t\t}\r\n\t\t\tif (t > 0) {\r\n\t\t\t\t//向右滑动\r\n\t\t\t\tif (this.contentWrap.children[this.contentWrap.children.length - 1].position.x + 100 >= (this.contentWrap.children.length - 1) * width) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentWrap.children.forEach((child, index) => {\r\n\t\t\t\t\ttween(child).to(0.1, { position: new Vec3(child.position.x + width, child.position.y) }).start()\r\n\t\t\t\t})\r\n\t\t\t\tthis.showIndex--\r\n                AudioManager.getInstance().playSound(SoundList.dragAndDropToTurnThePage)\r\n\t\t\t}\r\n\t\t\tthis.showIndexMark()\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showIndexMark() {\r\n\t\tthis.indexMark.children.forEach((item, i) => {\r\n\t\t\tif (this.showIndex !== i) {\r\n\t\t\t\titem.children[0].active = false\r\n\t\t\t} else {\r\n\t\t\t\titem.children[0].active = true\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tconst uiOpacity = this.node.getComponent(UIOpacity)\r\n\t\tuiOpacity.opacity = 0;\r\n\t\tthis.mainPanel.setScale(0.8, 0.8)\r\n\t\ttween(this.mainPanel).to(0.4, { scale: new Vec3(1, 1, 1) }, { easing: \"backOut\" }).start()\r\n\t\ttween(uiOpacity).to(0.4, { opacity: 255 }).call(() => { }).start()\r\n\t}\r\n\r\n\tpublic hidePanel() {\r\n\t\tconst uiOpacity = this.node.getComponent(UIOpacity)\r\n\t\ttween(this.node).to(0.2, { scale: new Vec3(0, 0, 0) }).start()\r\n\t\ttween(uiOpacity).to(0.2, { opacity: 0 }).call(() => {\r\n\t\t\tthis.node.destroy()\r\n\t\t}).start()\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}