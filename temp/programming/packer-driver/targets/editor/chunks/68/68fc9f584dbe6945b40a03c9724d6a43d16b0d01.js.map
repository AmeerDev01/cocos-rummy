{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragonV2/components/DragonV2_DialogWin.ts"],"names":["_decorator","Label","Node","BaseComponent","DialogType","GameType","isAuto","getNodeByNameDeep","config","StepNumberV2","cacheData","Dragonv2_Audio","SoundPathDefine","ccclass","property","DragonV2_DialogWin","stepNumberV2","jackpotWin","propertyNode","props_bigWin","props_jackpot","props_megaWin","props_superWin","props_freeEntry","props_freeSettlement","props_jackpotpopUps","props_baoHeGameEntry","props","dialogInfo","gameTypeInfo","lastGameType","NONE","currGameType","viewGameType","leftCount","autoLauncherInfo","events","onWindowCloseHandler","dialogType","start","initState","bindEvent","node","on","EventType","TOUCH_END","playOneShot","btn_click","isFreeGameEntry","isBaoHeGameEntry","isFreeGameSettlement","destroy","isBaoHeGameSettlement","active","showFreeSettlement","getChildByName","FREE_GAME_ENTRY","BAO_HE_GAME_ENTRY","FREE_GAME_SETTLEMENT","BAO_HE_GAME_SETTLEMENT","useProps","key","value","isValid","hideAll","cur","BIG_WIN","showBigWin","JACKPOT","showJackpot","MEGA_WIN","showMegaWin","SUPER_WIN","showSuperWin","getLw","showBaoHeSettlement","showFreeEntry","showBaoHeEntry","labelNode","getComponent","string","params","detryCloseWindow","type","numberLabel","startStepNumber","rollerLaunchResult","dl","si","lw","done","get_coin","length","fixedChessboardIcon","count","grand","major","mini","label","end","num","Number","toFixed","formatAmountWithCommas","normalRollOption","numberRollerTime","scheduleOnce","dialogWinShowTime","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Label, Node } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { AutoLauncherInfo, DialogInfo, DialogType, GameType, GameTypeInfo, isAuto } from '../type';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport config from '../config';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { cacheData } from '../dataTransfer';\r\nimport { Dragonv2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tdialogInfo?: DialogInfo,\r\n\tgameTypeInfo?: GameTypeInfo,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo?: AutoLauncherInfo\r\n}\r\nexport interface IEvent {\r\n\tonWindowCloseHandler: (dialogType: DialogType) => void\r\n}\r\n\r\n@ccclass('DragonV2_DialogWin')\r\nexport class DragonV2_DialogWin extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\tprivate jackpotWin = false\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_bigWin: new Node(),\r\n\t\tprops_jackpot: new Node(),\r\n\t\tprops_megaWin: new Node(),\r\n\t\tprops_superWin: new Node(),\r\n\t\tprops_freeEntry: new Node(),\r\n\t\tprops_freeSettlement: new Node(),\r\n\t\tprops_jackpotpopUps: new Node(),\r\n\t\tprops_baoHeGameEntry: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdialogInfo: null,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.NONE,\r\n\t\t\tcurrGameType: GameType.NONE,\r\n\t\t\tviewGameType: GameType.NONE,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonWindowCloseHandler: (dialogType: DialogType) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tif (this.isFreeGameEntry() || this.isBaoHeGameEntry() || this.isFreeGameSettlement() || this.jackpotWin) {\r\n\t\t\t\tthis.jackpotWin = false\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.isBaoHeGameSettlement()) { // jackpot\r\n\t\t\t\t\tthis.propertyNode.props_jackpotpopUps.active = false\r\n\t\t\t\t\tthis.jackpotWin = true\r\n\t\t\t\t\tthis.showFreeSettlement(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.node.getChildByName('SpriteSplash').on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tif (this.isFreeGameEntry() || this.isBaoHeGameEntry() || this.isFreeGameSettlement() || this.jackpotWin) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.jackpotWin = false\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.isBaoHeGameSettlement()) { // jackpot\r\n\t\t\t\t\tthis.jackpotWin = true\r\n\t\t\t\t\tthis.propertyNode.props_jackpotpopUps.active = false\r\n\t\t\t\t\tthis.showFreeSettlement(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tprivate isFreeGameEntry() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY;\r\n\t}\r\n\r\n\tprivate isBaoHeGameEntry() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.BAO_HE_GAME_ENTRY;\r\n\t}\r\n\r\n\tprivate isFreeGameSettlement() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT;\r\n\t}\r\n\r\n\tprivate isBaoHeGameSettlement() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.BAO_HE_GAME_SETTLEMENT;\r\n\t}\r\n\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'dialogInfo') {\r\n\t\t\t\tthis.hideAll();\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.node.active = true;\r\n\t\t\t\t\tif (this.props.dialogInfo.dialogType === DialogType.BIG_WIN) {\r\n\t\t\t\t\t\tthis.showBigWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.JACKPOT) {\r\n\t\t\t\t\t\tthis.showJackpot();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.MEGA_WIN) {\r\n\t\t\t\t\t\tthis.showMegaWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.SUPER_WIN) {\r\n\t\t\t\t\t\tthis.showSuperWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT) {\r\n\t\t\t\t\t\tthis.showFreeSettlement(1);\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.BAO_HE_GAME_SETTLEMENT) {\r\n\t\t\t\t\t\tif (this.getLw()) {\r\n\t\t\t\t\t\t\tthis.showBaoHeSettlement(() => {\r\n\t\t\t\t\t\t\t\tthis.jackpotWin = true\r\n\t\t\t\t\t\t\t\tthis.showFreeSettlement(2);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.jackpotWin = true\r\n\t\t\t\t\t\t\tthis.showFreeSettlement(2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY) {\r\n\t\t\t\t\t\tthis.showFreeEntry();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.BAO_HE_GAME_ENTRY) {\r\n\t\t\t\t\t\tthis.showBaoHeEntry();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.node.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate hideAll() {\r\n\t\tfor (const key in this.propertyNode) {\r\n\t\t\tthis.propertyNode[key].active = false;\r\n\t\t}\r\n\t}\r\n\t/* 进免费小游戏 */\r\n\tprivate showFreeEntry() {\r\n\t\tthis.propertyNode.props_freeEntry.active = true;\r\n\t\tconst labelNode = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeEntry)\r\n\t\tlabelNode.getComponent(Label).string = this.props.dialogInfo.params[0];\r\n\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\tif (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t}\r\n\t}\r\n\t/* 进龙珠小游戏 */\r\n\tprivate showBaoHeEntry() {\r\n\t\tthis.propertyNode.props_baoHeGameEntry.active = true;\r\n\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\tif (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t}\r\n\t}\r\n\t/* 小游戏结算 */\r\n\tprivate showFreeSettlement(type: 1 | 2) {\r\n\t\tthis.propertyNode.props_freeSettlement.active = true;\r\n\t\tthis.propertyNode.props_freeSettlement.getChildByName('Img_infree').active = (type == 1)\r\n\t\tthis.propertyNode.props_freeSettlement.getChildByName('Img_inspecial').active = (type == 2)\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeSettlement)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\t\tif (this.node && this.node.isValid && isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\t\tthis.detryCloseWindow();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tprivate getLw() { // 获取后端报奖信息\r\n\t\treturn cacheData.rollerLaunchResult.dl.si[0] && cacheData.rollerLaunchResult.dl.si[0].lw\r\n\t}\r\n\t/* 龙珠游戏结算 */\r\n\tprivate showBaoHeSettlement(done) {\r\n\t\tDragonv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_jackpotpopUps.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_jackpotpopUps)\r\n\t\t// mini\r\n\t\tlet length = cacheData.rollerLaunchResult.dl.si[0].fixedChessboardIcon.length\r\n\t\tlet count=0\r\n\t\tif (length >= 15) {\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon').active = false\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon1').active = false\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon2').active = true\r\n\t\t\tcount = this.getLw().grand\r\n\t\t} else if (length >= 10) {\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon').active = false\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon1').active = true\r\n\t\t\tcount = this.getLw().major\r\n\t\t} else if (length >= 5) {\r\n\t\t\tcount = this.getLw().mini\r\n\t\t\tthis.propertyNode.props_jackpotpopUps.getChildByName('Title_Youwon').active = true\r\n\t\t}\r\n\t\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, count, () => {\r\n\t\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\t\tif (this.node && this.node.isValid && isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\t\tthis.propertyNode.props_jackpotpopUps.active = false;\r\n\t\t\t\tdone()\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\tprivate showBigWin() {\r\n\t\tDragonv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_bigWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_bigWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate showJackpot() {\r\n\t\tDragonv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_jackpot.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_jackpot)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate showMegaWin() {\r\n\t\tDragonv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_megaWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_megaWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate showSuperWin() {\r\n\t\tDragonv2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_superWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_superWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\tprivate startStepNumber(label: Label, start, end, done) {\r\n\t\tthis.stepNumberV2.start(start, end, (num) => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t}\r\n\t\t}, () => this.node && this.node.isValid && done(), config.normalRollOption.numberRollerTime);\r\n\t}\r\n\r\n\tprivate detryCloseWindow() {\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t}, config.normalRollOption.dialogWinShowTime)\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}