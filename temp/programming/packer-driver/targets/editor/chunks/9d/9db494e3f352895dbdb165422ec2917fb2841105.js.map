{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_ShopPanel.ts"],"names":["_decorator","assetManager","Button","EditBox","instantiate","Label","Node","ProgressBar","ScrollView","Sprite","SpriteFrame","sys","Toggle","ToggleContainer","BaseComponent","config","vipMap","initToggle","baseBoardView","bundleCommon","global","hallAudio","sourceManageSeletor","SoundPathDefine","addToastAction","setLoadingAction","lang","SKT_MAG_TYPE","sktInstance","sktMsgListener","BaseViewModel","EffectType","PrefabPathDefine","ccclass","property","BuyType","Hall_ShopPanel","propertyNode","props_ToggleGroup_shop_title","props_btn_tips_close","props_ToggleGroup2","props_input_gold_num","props_ToggleGroup_gold","props_sbtn_shop_pergi","props_btn_gold_null","props_Label_choose_2","props_word_vip_left","props_word_vip_right","props_Label_vip","props_ProgressBar_vip","props_spr_title","props_btn_shop_tolong","props_Toggle_template2","props_ScrollView_tas","props_spr_tas_template","props","dataList","memberInfo","defaultBuyType","COIN","events","onClosePanel","rechargeHandler","channelItem","amount","start","initState","buyType","chooseChannelIndex","chooseAmount","chooseChannelItem","giftList","bindEvent","on","EventType","TOUCH_END","setState","openURL","bankHelpUrl","node","EventHandler","useProps","key","value","cur","forEach","item","index","toggleItem","active","loadRemote","iconMin","err","asset","getChildByName","getComponent","spriteFrame","createWithImage","string","name","type","addChild","isChecked","memberId","vipItem","find","i","vipLevel","length","formatAmountWithCommas","progress","vipLevelExperience","load","sp","TAS","children","bindUI","lastQeqPicUrl","useState","dataItem","rateOfExchange","child","destroy","itemTemplate","preinstallList","iconUrl","nativeUrl","state","limitDown","limitUp","dispatch","content","write","k","HallModule","HallShopAmount","gold1","gold2","placeStr","varue","removeAllChildren","filter","mallPage","giftName","normalGoldCoin","updateRenderData","discountCoins","chooseBankVM","mountView","getFile","HELL_CHOOSE_BANK","source","appendTo","mainPanelViewModel","parentNode","effectType","EFFECT1","isModal","setEvent","unMount","EFFECT2","onOrder","rechargeChannelId","sendSktMessage","RECHARGE_ORDER","money","orderRechargeType","giftBagMallId","id","isLoading","setProps","onlyDisplayArr","rechargeChannelIds","add","GIFT_LIST","data","hallDispatch","isShow","channelToggleCallback","event","customEventData","playOneShot","BTU_CLICK","chooseIndex","target","indexOf","buyTypeToggleCallback","channelAmountToggleCallback","onDestroy","removeById","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, assetManager, Button, Component, EditBox, EventHandler, ImageAsset, instantiate, Label, Node, ProgressBar, ScrollView, Sprite, SpriteFrame, sys, Toggle, ToggleContainer, UITransform } from 'cc';\r\nimport { BaseComponent } from '../../base/BaseComponent';\r\nimport { config, rechargeChannel, vipMap } from '../config';\r\nimport { initToggle } from '../../utils/tool';\r\nimport { baseBoardView, bundleCommon, global, hallAudio, sourceManageSeletor } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport { InitStateType } from '../store/actions/memberInfo';\r\nimport { addToastAction, setLoadingAction } from '../store/actions/baseBoard';\r\nimport { lang } from '../index';\r\nimport { SKT_MAG_TYPE, sktInstance, sktMsgListener } from '../socketConnect';\r\nimport { GiftItemType } from './Hall_GiftBag';\r\nimport BaseViewModel from '../viewModel/BaseViewModel';\r\nimport { Hall_ChooseBank, IState as CBState, IProps as CBProps, IEvent as CBEvent } from './Hall_ChooseBank';\r\nimport { EffectType } from '../../utils/NodeIOEffect';\r\nimport { PrefabPathDefine } from '../sourceDefine/prefabDefine';\r\nimport ModalBox from '../../common/ModalBox';\r\nimport { purchaseAppsflyerEvents } from '../../common/bridge';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport type ChannelItemType = {\r\n\t/**渠道type */\r\n\tchannelType: number,\r\n\ticonMax: string,\r\n\ticonMin: string,\r\n\ticonUrl: string,\r\n\tid: string,\r\n\t/**充值最低值 */\r\n\tlimitDown: number,\r\n\t/**充值最高值 */\r\n\tlimitUp: number,\r\n\t/**充值预制额度 */\r\n\tpreinstallList: Array<string>,\r\n\t/**换算的额度 */\r\n\trateOfExchange: number,\r\n\t/**类型 */\r\n\ttype: number,\r\n\tname: string\r\n}\r\n\r\nexport enum BuyType {\r\n\tCOIN,\r\n\tTAS\r\n}\r\nexport interface IState {\r\n\t/**选中的充值类型, */\r\n\tbuyType: BuyType,\r\n\t/**选中的渠道 */\r\n\tchooseChannelIndex: number,\r\n\t/**选择的金额 */\r\n\tchooseAmount: number,\r\n\t/**选择的渠道数据 */\r\n\tchooseChannelItem: ChannelItemType,\r\n\tgiftList: Array<GiftItemType>\r\n}\r\n\r\nexport interface IProps {\r\n\t/**主数据 */\r\n\tdataList?: ChannelItemType[],\r\n\tmemberInfo: InitStateType,\r\n\tdefaultBuyType?: BuyType,\r\n}\r\nexport interface IEvent {\r\n\tonClosePanel?: () => void\r\n\t/**确认充值 */\r\n\trechargeHandler: (channelItem: ChannelItemType | null, amount: string) => void\r\n}\r\n\r\n@ccclass('Hall_ShopPanel')\r\nexport class Hall_ShopPanel extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_ToggleGroup_shop_title: new ToggleContainer(),\r\n\t\tprops_btn_tips_close: new Node(),\r\n\t\t/**toggle选择外框 */\r\n\t\t// props_ToggleGroup: new Node(),\r\n\t\tprops_ToggleGroup2: new Node(),\r\n\t\t/**自定义输入 */\r\n\t\tprops_input_gold_num: new Node(),\r\n\t\t/**平铺金额选择框 */\r\n\t\tprops_ToggleGroup_gold: new Node(),\r\n\t\t/**确认充值 */\r\n\t\tprops_sbtn_shop_pergi: new Node(),\r\n\t\t/**置空 */\r\n\t\tprops_btn_gold_null: new Node(),\r\n\t\t/** 兑换率 */\r\n\t\tprops_Label_choose_2: new Node(),\r\n\t\t/**当前VIP */\r\n\t\tprops_word_vip_left: new Sprite(),\r\n\t\t/**目标VIP */\r\n\t\tprops_word_vip_right: new Sprite(),\r\n\t\t/**VIP描述 */\r\n\t\tprops_Label_vip: new Label(),\r\n\t\t/**vip进度条 */\r\n\t\tprops_ProgressBar_vip: new ProgressBar(),\r\n\t\t/**说明页 */\r\n\t\tprops_spr_title: new Node(),\r\n\t\tprops_btn_shop_tolong: new Button(),\r\n\t\t// props_Toggle_template: new Node(),\r\n\t\tprops_Toggle_template2: new Node(),\r\n\t\tprops_ScrollView_tas: new ScrollView(),\r\n\t\tprops_spr_tas_template: new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdataList: [],\r\n\t\tmemberInfo: null,\r\n\t\tdefaultBuyType: BuyType.COIN\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClosePanel: () => { },\r\n\t\trechargeHandler: (channelItem: ChannelItemType | null, amount: string) => { }\r\n\t}\r\n\r\n\tprotected initState(props) {\r\n\t\treturn {\r\n\t\t\tbuyType: BuyType.COIN,\r\n\t\t\tchooseChannelIndex: -1,\r\n\t\t\tchooseAmount: -1,\r\n\t\t\tchooseChannelItem: null,\r\n\t\t\tgiftList: []\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onClosePanel()\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_gold_null.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.setState({ chooseAmount: 0 })\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_spr_title.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tsys.openURL(config.bankHelpUrl)\r\n\t\t\t// ModalBox.Instance().show({ url: config.bankHelpUrl, type: \"Confirm\" })\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_shop_tolong.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tsys.openURL(config.bankHelpUrl)\r\n\t\t\t// ModalBox.Instance().show({ url: config.bankHelpUrl, type: \"Confirm\" })\r\n\t\t})\r\n\t\tinitToggle(this.propertyNode.props_ToggleGroup_shop_title.node, this.node, new Hall_ShopPanel.EventHandler(), \"Hall_ShopPanel\", \"buyTypeToggleCallback\")\r\n\t\tinitToggle(this.propertyNode.props_ToggleGroup2, this.node, new Hall_ShopPanel.EventHandler(), \"Hall_ShopPanel\", \"channelToggleCallback\")\r\n\t\tinitToggle(this.propertyNode.props_ToggleGroup_gold, this.node, new Hall_ShopPanel.EventHandler(), \"Hall_ShopPanel\", \"channelAmountToggleCallback\")\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"dataList\") {\r\n\t\t\t// let defaultChooseIndex = 0\r\n\t\t\t// this.propertyNode.props_ToggleGroup.children.forEach(i => i.active = false);\r\n\t\t\t// (value.cur as Array<any>).sort((a, b) => a.channelType - b.channelType).forEach((item, index) => {\r\n\t\t\t// \tif (item.type === 1) {\r\n\t\t\t// \t\tthis.propertyNode.props_ToggleGroup.children[(item.channelType - 1) * 2].active = true\r\n\t\t\t// \t\tif (index === 0) {\r\n\t\t\t// \t\t\tdefaultChooseIndex = (item.channelType - 1) * 2\r\n\t\t\t// \t\t\tthis.propertyNode.props_ToggleGroup.children[defaultChooseIndex].getComponent(Toggle).isChecked = true\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// \tif (item.type === 2) {\r\n\t\t\t// \t\tthis.propertyNode.props_ToggleGroup.children[(item.channelType - 1) * 2 + 1].active = true\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\t\t\t(value.cur as Array<any>).forEach((item, index) => {\r\n\t\t\t\tconst toggleItem = instantiate(this.propertyNode.props_Toggle_template2)\r\n\t\t\t\ttoggleItem.active = true\r\n\t\t\t\tassetManager.loadRemote(item.iconMin, (err, asset: ImageAsset) => {\r\n\t\t\t\t\tif (this.propertyNode && !err) {\r\n\t\t\t\t\t\ttoggleItem.getChildByName('spr_icon').getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\ttoggleItem.getChildByName('spr_icon_name').getComponent(Label).string = item.name\r\n\t\t\t\titem.type === 0 && (toggleItem.getChildByName('spr_tag-red').active = true)\r\n\t\t\t\titem.type === 1 && (toggleItem.getChildByName('spr_tag-green').active = true)\r\n\t\t\t\tthis.propertyNode.props_ToggleGroup2.addChild(toggleItem)\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\ttoggleItem.getComponent(Toggle).isChecked = true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (key === \"memberInfo\") {\r\n\t\t\tif (!this.props.memberInfo.memberId) return\r\n\t\t\tlet vipItem = vipMap.find(i => i[0] === this.props.memberInfo.vipLevel + 1)\r\n\t\t\tif (!vipItem) vipItem = vipMap[vipMap.length - 1]\r\n\t\t\tthis.propertyNode.props_Label_vip.string = `Masih perlu to up ${vipItem[1].formatAmountWithCommas()}`\r\n\t\t\tthis.propertyNode.props_ProgressBar_vip.progress = this.props.memberInfo.vipLevelExperience / vipItem[1]\r\n\t\t\tbundleCommon.load(`resource/vip/b_VIP${this.props.memberInfo.vipLevel}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\t!err && (this.propertyNode.props_word_vip_left.getComponent(Sprite).spriteFrame = sp)\r\n\t\t\t})\r\n\t\t\tbundleCommon.load(`resource/vip/b_VIP${vipItem[0]}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\t!err && (this.propertyNode.props_word_vip_right.getComponent(Sprite).spriteFrame = sp)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (key === \"defaultBuyType\") {\r\n\t\t\tif (this.props.defaultBuyType === BuyType.TAS) {\r\n\t\t\t\tthis.propertyNode.props_ToggleGroup_shop_title.node.children[1].getComponent(Toggle).isChecked = true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.propertyNode.props_spr_tas_template.active = false\r\n\t\tlet lastQeqPicUrl: string = ''\r\n\t\tthis.useState((key, value) => {\r\n\t\t\t// const chooseChooseType = rechargeChannel[value.cur].channelType //parseInt(((value.cur + 1) / 2) + '')\r\n\t\t\t// const chooseChooseType = this.props.dataList[value.cur].channelType //parseInt(((value.cur + 1) / 2) + '')\r\n\t\t\t// const type = this.props.dataList[value.cur].type\r\n\t\t\t// const dataItem = this.props.dataList.find(item => item.channelType === this.props.dataList[value.cur].channelType && item.type === this.props.dataList[value.cur].type)\r\n\t\t\t\r\n\t\t\tconst dataItem = this.props.dataList[value.cur]\r\n\t\t\tthis.setState({ chooseChannelItem: dataItem })\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tthis.propertyNode.props_Label_choose_2.getComponent(Label).string = `=${dataItem.rateOfExchange} Cash`\r\n\t\t\t\tthis.propertyNode.props_ToggleGroup_gold.children.forEach((child, index) => {\r\n\t\t\t\t\tif (index >= 1) {\r\n\t\t\t\t\t\tchild.destroy()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tconst itemTemplate = this.propertyNode.props_ToggleGroup_gold.children[0]\r\n\t\t\t\tdataItem.preinstallList.forEach((amount) => {\r\n\t\t\t\t\tconst node = instantiate(itemTemplate)\r\n\t\t\t\t\tnode.getChildByName(\"amount\").getComponent(Label).string = (+amount).formatAmountWithCommas()\r\n\t\t\t\t\tnode.getChildByName(\"amount_show\").getComponent(Label).string = amount\r\n\t\t\t\t\tnode.active = true\r\n\t\t\t\t\tthis.propertyNode.props_ToggleGroup_gold.addChild(node)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// console.error(\"未找到相应的渠道类型。序号：\" + value.cur)\r\n\t\t\t}\r\n\t\t\tlastQeqPicUrl = this.props.dataList[value.cur].iconUrl\r\n\t\t\tassetManager.loadRemote(this.props.dataList[value.cur].iconUrl, (err, asset: ImageAsset) => {\r\n\t\t\t\tif (this.propertyNode && !err && (asset.nativeUrl === lastQeqPicUrl)) {\r\n\t\t\t\t\tthis.propertyNode.props_spr_title.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}, [\"chooseChannelIndex\"])\r\n\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tif (this.state.chooseAmount) {\r\n\t\t\t\tthis.propertyNode.props_input_gold_num.getComponent(EditBox).string = value.cur\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_input_gold_num.getComponent(EditBox).string = ''\r\n\t\t\t}\r\n\t\t}, [\"chooseAmount\"])\r\n\r\n\t\tthis.propertyNode.props_sbtn_shop_pergi.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst amount = +this.propertyNode.props_input_gold_num.getComponent(EditBox).string\r\n\t\t\tif (amount < this.state.chooseChannelItem.limitDown || amount > this.state.chooseChannelItem.limitUp) {\r\n\t\t\t\tthis.dispatch(addToastAction({\r\n\t\t\t\t\tcontent: lang.write(k => k.HallModule.HallShopAmount,\r\n\t\t\t\t\t\t{ gold1: this.state.chooseChannelItem.limitDown, gold2: this.state.chooseChannelItem.limitUp },\r\n\t\t\t\t\t\t{ placeStr: `充值金额需在${this.state.chooseChannelItem.limitDown}~${this.state.chooseChannelItem.limitUp}之间` })\r\n\t\t\t\t}))\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.events.rechargeHandler(this.state.chooseChannelItem, this.propertyNode.props_input_gold_num.getComponent(EditBox).string)\r\n\t\t})\r\n\r\n\t\tthis.useState((key, varue) => {\r\n\t\t\tthis.propertyNode.props_ScrollView_tas.content.removeAllChildren()\r\n\t\t\tthis.state.giftList.filter(i => i.mallPage === 1).forEach((item, index) => {\r\n\t\t\t\tconst node = instantiate(this.propertyNode.props_spr_tas_template)\r\n\t\t\t\tnode.getChildByName(\"Label_name\").getComponent(Label).string = item.giftName\r\n\t\t\t\tnode.getChildByName(\"Label_gole_old\").getComponent(Label).string = item.normalGoldCoin.formatAmountWithCommas()\r\n\t\t\t\tnode.getChildByName(\"Label_gole_old\").getComponent(Label).updateRenderData(true)\r\n\t\t\t\tnode.getChildByName(\"Label_gole\").getComponent(Label).string = item.discountCoins.formatAmountWithCommas()\r\n\t\t\t\tnode.getChildByName(\"btn_buy\").getChildByName(\"label_price_buy\").getComponent(Label).string = item.amount.formatAmountWithCommas()\r\n\t\t\t\tnode.getChildByName(\"btn_buy\").on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t\t\t//购买\r\n\t\t\t\t\tconst chooseBankVM = new BaseViewModel<Hall_ChooseBank, CBState, CBProps, CBEvent>('Hall_ChooseBank').mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_CHOOSE_BANK).source)\r\n\t\t\t\t\t\t.appendTo(baseBoardView.mainPanelViewModel.parentNode, { effectType: EffectType.EFFECT1, isModal: true }).setEvent({\r\n\t\t\t\t\t\t\tonClosePanel: () => {\r\n\t\t\t\t\t\t\t\tchooseBankVM.unMount(EffectType.EFFECT2)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonOrder: (rechargeChannelId) => {\r\n\t\t\t\t\t\t\t\tsktInstance.sendSktMessage(SKT_MAG_TYPE.RECHARGE_ORDER, {\r\n\t\t\t\t\t\t\t\t\trechargeChannelId,\r\n\t\t\t\t\t\t\t\t\tmoney: item.amount,\r\n\t\t\t\t\t\t\t\t\torderRechargeType: 2,\r\n\t\t\t\t\t\t\t\t\tgiftBagMallId: item.id\r\n\t\t\t\t\t\t\t\t}, { isLoading: true })\r\n\t\t\t\t\t\t\t\t// purchaseAppsflyerEvents(item.amount + '', 'IDR')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).setProps({\r\n\t\t\t\t\t\t\tonlyDisplayArr: item.rechargeChannelIds || []\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tnode.active = true\r\n\t\t\t\tthis.propertyNode.props_ScrollView_tas.content.addChild(node)\r\n\t\t\t})\r\n\t\t}, [\"giftList\"])\r\n\t\tsktMsgListener.add(SKT_MAG_TYPE.GIFT_LIST, \"shop\", (data) => {\r\n\t\t\tglobal.hallDispatch(setLoadingAction({ isShow: false }))\r\n\t\t\tthis.setState({ giftList: data || [] })\r\n\t\t})\r\n\t\tsktInstance.sendSktMessage(SKT_MAG_TYPE.GIFT_LIST, {}, { isLoading: true })\r\n\t}\r\n\r\n\tchannelToggleCallback(event: Event, customEventData: string) {\r\n\t\thallAudio.playOneShot(SoundPathDefine.BTU_CLICK)\r\n\t\tconst chooseIndex = event.target['parent'].children.indexOf(event.target)\r\n\t\tthis.setState({\r\n\t\t\tchooseChannelIndex: chooseIndex//chooseIndex % 2 === 0 ? chooseIndex / 2 : parseInt((chooseIndex / 2) + '') + 1\r\n\t\t})\r\n\t}\r\n\tbuyTypeToggleCallback(event: Event, customEventData: string) {\r\n\t\thallAudio.playOneShot(SoundPathDefine.BTU_CLICK)\r\n\t\tconst chooseIndex = event.target['parent'].children.indexOf(event.target)\r\n\t\tthis.setState({\r\n\t\t\tbuyType: chooseIndex\r\n\t\t})\r\n\t}\r\n\t/**选充值金额 */\r\n\tchannelAmountToggleCallback(event: Event, customEventData: string) {\r\n\t\thallAudio.playOneShot(SoundPathDefine.BTU_CLICK)\r\n\t\tconst chooseAmount = +event.target['getChildByName'](\"amount_show\").getComponent(Label).string\r\n\t\t// console.log(chooseAmount)\r\n\t\tthis.setState({ chooseAmount })\r\n\t}\r\n\tprotected onDestroy() {\r\n\t\tsktMsgListener.removeById(\"shop\")\r\n\t}\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}