{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/thor/components/Thor_WinShowView.ts"],"names":["_decorator","instantiate","Label","Node","tween","Vec3","Sprite","BaseComponent","sourceManageSeletor","SpriteFramePathDefine","StepNumber","changeProfit","ccclass","property","Thor_WinShowView","arrayOfIcons","total","smallTotal","propertyNode","props_item","props_content","props_spr_win_box","props_label_rate","props","winningData","multipleTotal","gameFreeGametotalMultiplier","viewGameType","profit","events","start","initState","bindEvent","useProps","key","value","cur","length","children","count","smallIconIcons","icon_1","icon_2","icon_3","icon_4","icon_5","icon_6","icon_7","icon_8","icon_9","node","active","x","y","getPosition","getChildByName","getComponent","string","itemId","spriteFrame","getFile","source","console","log","JSON","stringify","amount","formatAmountWithCommas","dispatch","addChild","to","position","easing","call","str","replace","Number","num","toFixed","forEach","item","destroy","calcMultiple","rate","props_label_gold","scale","scheduleOnce","initTotalPanl","setPosition","setScale","startFalling","clearTheDrop","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, instantiate, Component, Label, Layout, Node, ScrollView, tween, Vec3, log, Sprite } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { sourceManageSeletor } from '../index';\r\nimport spriteDefine, { SpriteFramePathDefine } from '../sourceDefine/spriteDefine';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { changeProfit } from '../store/actions/game';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\twinningData?: object\r\n\tmultipleTotal?: number\r\n\tgameFreeGametotalMultiplier?: number\r\n\tviewGameType?: number,\r\n\tprofit: number\r\n\r\n}\r\nexport interface IEvent {\r\n\r\n}\r\n\r\n@ccclass('Thor_WinShowView')\r\nexport class Thor_WinShowView extends BaseComponent<IState, IProps, IEvent> {\r\n\tprivate arrayOfIcons = []\r\n\tprivate total = 0\r\n\tprivate smallTotal = 0\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_item: new Node(),\r\n\t\tprops_content: new Node(),\r\n\t\tprops_spr_win_box: new Node(),\r\n\t\tprops_label_rate: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\twinningData: [],\r\n\t\tmultipleTotal: 0,\r\n\t\tgameFreeGametotalMultiplier: 0,\r\n\t\tviewGameType: 0,\r\n\t\tprofit: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"winningData\" && value.cur) {\r\n\t\t\tlet length = this.propertyNode.props_content.children.length\r\n\t\t\tif (value.cur.count >= 0) {\r\n\t\t\t\tlet smallIconIcons = [\r\n\t\t\t\t\tSpriteFramePathDefine.icon_1,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_2,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_3,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_4,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_5,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_6,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_7,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_8,\r\n\t\t\t\t\tSpriteFramePathDefine.icon_9,\r\n\t\t\t\t]\r\n\t\t\t\tlet node: Node = instantiate(this.propertyNode.props_item)\r\n\t\t\t\tnode.active = true\r\n\t\t\t\tlet { x, y } = node.getPosition()\r\n\t\t\t\tnode.getChildByName('props_label_num').getComponent(Label).string = value.cur.count + ''\r\n\t\t\t\tif (smallIconIcons[value.cur.itemId - 1]) {\r\n\t\t\t\t\tnode.getChildByName('props_spr_icon').getComponent(Sprite).spriteFrame = sourceManageSeletor().getFile(smallIconIcons[value.cur.itemId - 1]).source\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('winshow NULL', JSON.stringify(this.props.winningData));\r\n\t\t\t\t}\r\n\t\t\t\tnode.getChildByName('props_label_glod').getComponent(Label).string = value.cur.amount.formatAmountWithCommas()\r\n\t\t\t\tthis.total += value.cur.amount\r\n\t\t\t\tif (this.props.viewGameType != 1) {\r\n\t\t\t\t\tthis.dispatch(changeProfit(this.total))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.dispatch(changeProfit(this.props.profit + value.cur.amount))\r\n\t\t\t\t}\r\n\t\t\t\tthis.propertyNode.props_content.addChild(node)\r\n\t\t\t\ttween(node)\r\n\t\t\t\t\t.to(0.4, { position: new Vec3(x, (length * 34) + 17, 1) }, { easing: 'cubicInOut' }) // 使用 cubicInOut 缓动到新位置\r\n\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\tif (!this.propertyNode) return\r\n\t\t\t\t\t\tthis.propertyNode.props_spr_win_box.active = true;\r\n\t\t\t\t\t\tlet str = this.propertyNode.props_spr_win_box.getChildByName('props_label_gold').getComponent(Label).string\r\n\t\t\t\t\t\tif (str) {\r\n\t\t\t\t\t\t\tstr = str.replace(/,/g, \"\")\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr = '0'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t(new StepNumber(Number(str), this.total, (num) => {\r\n\t\t\t\t\t\t\tthis.propertyNode && (this.propertyNode.props_spr_win_box.getChildByName('props_label_gold').getComponent(Label).string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t\t\t\t})).start()\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 添加一个简短的回弹动作\r\n\t\t\t\t\t// .by(0.1, { position: new Vec3(0, -10, 0) }, { easing: 'sineOut' }) // 先向下移动一点\r\n\t\t\t\t\t// .by(0.1, { position: new Vec3(0, 10, 0) }, { easing: 'sineIn' }) // 再回到原来的位置\r\n\t\t\t\t\t.start();\r\n\t\t\t} else {\r\n\t\t\t\tif (length > 0) {\r\n\t\t\t\t\tif (!this.propertyNode) return\r\n\t\t\t\t\tthis.propertyNode.props_content.children.forEach(item => {\r\n\t\t\t\t\t\tlet { x, y } = item.getPosition()\r\n\t\t\t\t\t\ttween(item)\r\n\t\t\t\t\t\t\t.to(0.2, { position: new Vec3(x, -188, 1) }) // 使用 to 缓动到新位置\r\n\t\t\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\t\t\titem.destroy()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.start();\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.total = 0\r\n\t\t\t\t\tthis.propertyNode.props_spr_win_box.getChildByName('props_label_gold').getComponent(Label).string = '0'\r\n\t\t\t\t\tthis.propertyNode.props_spr_win_box.active = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === 'multipleTotal' || key === \"gameFreeGametotalMultiplier\") {\r\n\t\t\tif (this.props.viewGameType == 1) {\r\n\t\t\t\tif (this.total !== 0 && this.props.gameFreeGametotalMultiplier !== 0) {\r\n\t\t\t\t\tthis.calcMultiple(this.props.gameFreeGametotalMultiplier)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.total !== 0 && this.props.multipleTotal !== 0) {\r\n\t\t\t\t\tthis.calcMultiple(this.props.multipleTotal)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcalcMultiple(rate) { // 倍数相乘\r\n\t\tif (!this.propertyNode) return\r\n\t\tlet str = this.propertyNode.props_spr_win_box.getChildByName('props_label_gold').getComponent(Label).string\r\n\t\tif (str) {\r\n\t\t\tstr = str.replace(/,/g, \"\")\r\n\t\t} else {\r\n\t\t\tstr = '0'\r\n\t\t}\r\n\t\tlet props_label_gold = this.propertyNode.props_spr_win_box.getChildByName('props_label_gold')\r\n\t\tthis.propertyNode.props_label_rate.active = true\r\n\t\tthis.propertyNode.props_label_rate.getComponent(Label).string =  rate + 'x'\r\n\t\ttween(props_label_gold)\r\n\t\t\t.to(0.5, { scale: new Vec3(1.2, 1.2) })\r\n\t\t\t.call(() => {\r\n\t\t\t\tthis.propertyNode && tween(this.propertyNode.props_label_rate)\r\n\t\t\t\t\t.to(0.5, { position: new Vec3(0, 0, 1), scale: new Vec3(0, 0) })\r\n\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\tthis.propertyNode.props_spr_win_box && (new StepNumber(Number(str), (this.total * rate), (num) => {\r\n\t\t\t\t\t\t\tthis.propertyNode && (this.propertyNode.props_spr_win_box.getChildByName('props_label_gold').getComponent(Label).string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\tthis.scheduleOnce(()=>{\r\n\t\t\t\t\t\t\t\tthis.propertyNode && this.initTotalPanl()\r\n\t\t\t\t\t\t\t},0.5)\r\n\t\t\t\t\t\t})).start()\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.start()\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n\tprivate initTotalPanl() {\r\n\t\tthis.propertyNode.props_label_rate.active = false\r\n\t\tthis.propertyNode.props_label_rate.setPosition(new Vec3(0, -20, 1))\r\n\t\tthis.propertyNode.props_label_rate.setScale(new Vec3(1, 1))\r\n\t\tthis.propertyNode.props_spr_win_box.getChildByName('props_label_gold').setPosition(new Vec3(0, 5))\r\n\t\tthis.propertyNode.props_spr_win_box.getChildByName('props_label_gold').setScale(new Vec3(1, 1))\r\n\t}\r\n\tprivate startFalling() {\r\n\r\n\t}\r\n\tprivate clearTheDrop() {\r\n\r\n\t}\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}