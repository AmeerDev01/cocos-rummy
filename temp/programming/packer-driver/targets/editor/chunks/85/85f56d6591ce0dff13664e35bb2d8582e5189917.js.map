{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/hall/components/Hall_Withdraw/Hall_WithdrawBankBind.ts"],"names":["_decorator","assetManager","EditBox","Node","Sprite","SpriteFrame","BaseComponent","InputValidator","config","Guide","ccclass","property","Hall_WithdrawBankBind","propertyNode","props_icon_reken","props_btn_metode_close","props_nomor_EditBox","props_spr_cetatan_name1","props_EditBox_name","props_btn_metode_tentukan","props_layout_tentukan","props","hadChooseBankChannl","events","onClosehandler","onBindDone","accountNumber","realName","start","initState","bindEvent","on","EventType","TOUCH_END","string","begin","isChartLength","done","useProps","key","value","cur","loadRemote","iconMax","err","asset","getComponent","spriteFrame","createWithImage","beginGuide","fristLogin","main","guide_1","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,Y,OAAAA,Y;AAAyBC,MAAAA,O,OAAAA,O;AAAqBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACxEC,MAAAA,a,iBAAAA,a;;AAIFC,MAAAA,c;;AAEEC,MAAAA,M,iBAAAA,M;;AACFC,MAAAA,K;;;;;;;;;OAND;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;uCAqBjBY,qB,WADZF,OAAO,CAAC,uBAAD,C,gBAAR,MACaE,qBADb;AAAA;AAAA,0CACiF;AAAA;AAAA;AAAA,eAKtEC,YALsE,GAKvD;AACxBC,YAAAA,gBAAgB,EAAE,IAAIX,IAAJ,EADM;AAExBY,YAAAA,sBAAsB,EAAE,IAAIZ,IAAJ,EAFA;AAGxBa,YAAAA,mBAAmB,EAAE,IAAId,OAAJ,EAHG;AAIxBe,YAAAA,uBAAuB,EAAE,IAAId,IAAJ,EAJD;AAKxBe,YAAAA,kBAAkB,EAAE,IAAIhB,OAAJ,EALI;AAMxBiB,YAAAA,yBAAyB,EAAE,IAAIhB,IAAJ,EANH;;AAOxB;AACAiB,YAAAA,qBAAqB,EAAC,IAAIjB,IAAJ;AARE,WALuD;AAAA,eAgBzEkB,KAhByE,GAgBzD;AACtBC,YAAAA,mBAAmB,EAAE;AADC,WAhByD;AAAA,eAoBzEC,MApByE,GAoBxD;AACvBC,YAAAA,cAAc,EAAE,MAAM,CAAG,CADF;AAEvBC,YAAAA,UAAU,EAAE,CAACH,mBAAD,EAA+CI,aAA/C,EAAsEC,QAAtE,KAA2F,CAAG;AAFnF,WApBwD;AAAA;;AAChFC,QAAAA,KAAK,GAAG,CAEP;;AAsBSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AACA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKjB,YAAL,CAAkBE,sBAAlB,CAAyCgB,EAAzC,CAA4C5B,IAAI,CAAC6B,SAAL,CAAeC,SAA3D,EAAsE,MAAM;AAC3E,iBAAKV,MAAL,CAAYC,cAAZ;AACA,WAFD;AAGA,eAAKX,YAAL,CAAkBM,yBAAlB,CAA4CY,EAA5C,CAA+C5B,IAAI,CAAC6B,SAAL,CAAeC,SAA9D,EAAyE,MAAM;AAC9E,kBAAMP,aAAa,GAAG,KAAKb,YAAL,CAAkBG,mBAAlB,CAAsCkB,MAA5D;AACA,kBAAMP,QAAQ,GAAG,KAAKd,YAAL,CAAkBK,kBAAlB,CAAqCgB,MAAtD,CAF8E,CAG9E;AACA;AACA;AACA;;AACA;AAAA;AAAA,oDAAqBC,KAArB,GAA6BC,aAA7B,CAA2C,CAAC,CAAD,EAAI,EAAJ,CAA3C,EAAoDV,aAApD,EAAmEW,IAAnE,CAAwE,MAAM;AAC7E,mBAAKd,MAAL,CAAYE,UAAZ,CAAuB,KAAKJ,KAAL,CAAWC,mBAAlC,EAAuDI,aAAvD,EAAsEC,QAAtE;AACA,aAFD;AAGA,WAVD;AAWA;;AAESW,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAID,GAAG,KAAK,qBAAZ,EAAmC;AAClC,iBAAK1B,YAAL,CAAkBG,mBAAlB,CAAsCkB,MAAtC,GAA+CM,KAAK,CAACC,GAAN,CAAUf,aAAV,IAA2B,EAA1E;AACA,iBAAKb,YAAL,CAAkBK,kBAAlB,CAAqCgB,MAArC,GAA8CM,KAAK,CAACC,GAAN,CAAUd,QAAV,IAAsB,EAApE;AAEA1B,YAAAA,YAAY,CAACyC,UAAb,CAAwB,KAAKrB,KAAL,CAAWC,mBAAX,CAA+BqB,OAAvD,EAAgE,CAACC,GAAD,EAAMC,KAAN,KAA4B;AAC3F,kBAAI,KAAKhC,YAAL,IAAqB,CAAC+B,GAA1B,EAA+B;AAC9B,qBAAK/B,YAAL,CAAkBC,gBAAlB,CAAmCgC,YAAnC,CAAgD1C,MAAhD,EAAwD2C,WAAxD,GAAsE1C,WAAW,CAAC2C,eAAZ,CAA4BH,KAA5B,CAAtE;AACA;AACD,aAJD,EAJkC,CASlC;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA,iBAAKI,UAAL;AACA;AACD;;AAEMA,QAAAA,UAAU,GAAG;AACnB,cAAI;AAAA;AAAA,gCAAOC,UAAP,CAAkBC,IAAlB,IAA0B,CAAC;AAAA;AAAA,gCAAOD,UAAP,CAAkB,WAAlB,CAA/B,EAA+D;AAC9D;AACA;AAAA;AAAA,kCAAOA,UAAP,CAAkB,WAAlB,IAAiC,IAAjC;AACA,kBAAME,OAAO,GAAG;AAAA;AAAA,gCAAU,KAAKvC,YAAL,CAAkBM,yBAA5B,EAAuD,KAAKN,YAAL,CAAkBO,qBAAzE,CAAhB;AACAgC,YAAAA,OAAO,CAACjB,KAAR;AACA;AACD;;AAESkB,QAAAA,MAAM,GAAS,CAExB;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAnF+E,O","sourcesContent":["import { _decorator, assetManager, Component, EditBox, ImageAsset, Node, Sprite, SpriteFrame } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nconst { ccclass, property } = _decorator;\r\nimport { WithdrawBankChannelType } from '../../store/actions/withdraw';\r\nimport { bundleHall, global, lang } from '../../index';\r\nimport InputValidator from '../../../utils/InputValidator';\r\nimport { addToastAction } from '../../store/actions/baseBoard';\r\nimport { config } from '../../config';\r\nimport Guide from '../../../utils/Guide';\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\thadChooseBankChannl: WithdrawBankChannelType\r\n}\r\nexport interface IEvent {\r\n\tonClosehandler: () => void,\r\n\tonBindDone: (hadChooseBankChannl: WithdrawBankChannelType, accountNumber: string, realName: string) => void\r\n}\r\n\r\n@ccclass('Hall_WithdrawBankBind')\r\nexport class Hall_WithdrawBankBind extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_icon_reken: new Node(),\r\n\t\tprops_btn_metode_close: new Node(),\r\n\t\tprops_nomor_EditBox: new EditBox(),\r\n\t\tprops_spr_cetatan_name1: new Node(),\r\n\t\tprops_EditBox_name: new EditBox(),\r\n\t\tprops_btn_metode_tentukan: new Node(),\r\n\t\t/**引导节点 */\r\n\t\tprops_layout_tentukan:new Node()\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\thadChooseBankChannl: null\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonClosehandler: () => { },\r\n\t\tonBindDone: (hadChooseBankChannl: WithdrawBankChannelType, accountNumber: string, realName: string) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_metode_close.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tthis.events.onClosehandler()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_metode_tentukan.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tconst accountNumber = this.propertyNode.props_nomor_EditBox.string\r\n\t\t\tconst realName = this.propertyNode.props_EditBox_name.string\r\n\t\t\t// if (accountNumber.toString().substring(0, 2) !== '08') {\r\n\t\t\t// \tglobal.hallDispatch(addToastAction({ content: lang.write(k => k.InputModule.inputFaildCustomer1, {}, { placeStr: \"渠道号码必须以08开头\" }) }))\r\n\t\t\t// \treturn\r\n\t\t\t// }\r\n\t\t\tnew InputValidator().begin().isChartLength([9, 15], accountNumber).done(() => {\r\n\t\t\t\tthis.events.onBindDone(this.props.hadChooseBankChannl, accountNumber, realName)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"hadChooseBankChannl\") {\r\n\t\t\tthis.propertyNode.props_nomor_EditBox.string = value.cur.accountNumber || \"\"\r\n\t\t\tthis.propertyNode.props_EditBox_name.string = value.cur.realName || \"\"\r\n\r\n\t\t\tassetManager.loadRemote(this.props.hadChooseBankChannl.iconMax, (err, asset: ImageAsset) => {\r\n\t\t\t\tif (this.propertyNode && !err) {\r\n\t\t\t\t\tthis.propertyNode.props_icon_reken.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// bundleHall.load(`withdrawal/resource/icon_withdrawal_${value.cur.name.toLocaleLowerCase()}/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t// \t!err && (this.propertyNode.props_icon_reken.getComponent(Sprite).spriteFrame = sp)\r\n\t\t\t// })\r\n\r\n\t\t\t// if (this.props.hadChooseBankChannl.channelType === 0) {\r\n\t\t\t// \tthis.propertyNode.props_EditBox_name.node.active = false\r\n\t\t\t// \tthis.propertyNode.props_spr_cetatan_name1.active = false\r\n\t\t\t// }\r\n\t\t\tthis.beginGuide()\r\n\t\t}\r\n\t}\r\n\r\n\tpublic beginGuide() {\r\n\t\tif (config.fristLogin.main && !config.fristLogin['hasShow_3']) {\r\n\t\t\t//标明这里已经显示了\r\n\t\t\tconfig.fristLogin['hasShow_3'] = true\r\n\t\t\tconst guide_1 = new Guide(this.propertyNode.props_btn_metode_tentukan, this.propertyNode.props_layout_tentukan)\r\n\t\t\tguide_1.begin()\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}