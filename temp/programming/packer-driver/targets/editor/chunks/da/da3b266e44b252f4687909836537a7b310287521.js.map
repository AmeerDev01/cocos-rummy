{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/thor/components/Thor_Footer.ts"],"names":["_decorator","Button","Color","Label","Node","sys","Toggle","BaseComponent","config","SKT_MAG_TYPE","sktMsgListener","thor_Audio","AutoLauncherType","GameType","TaskScheduler","Task","StepNumber","autoLauncherTypeWithTimes","SoundPathDefine","UseSetOption","dataTransfer","DataKeyType","ccclass","property","Thor_Footer","timer","pressTime","pressTimeDone","taskScheduler","stepNumber","totalTimes","goldNum","positionId","isEnd","propertyNode","props_btn_down_putar","props_btn_down_subtract","props_btn_down_add","props_Label_down_goldNum","props_word_down_goodluck","props_word_down_winNum","props_word_down_pular","props_word_down_auto","props_autoLaunch_label","props_spr_nomoney","props_toggle_fast","props_scrollingThePicture","props_word_down_menang","props_btn_down_auto","props","isRollEnd","profit","subGameTimes","remainSubGameTimes","currGameType","NONE","viewGameType","isShowAutoLaunch","autoLauncherType","autoLaunchedTimes","balance","apostille","events","manualBetHandler","openAutoLauncher","closeAutoLauncher","isClear","openHelpPanel","changeBetAmount","betAmount","value","isHasten","isState","start","initState","baseBetAmountTarget","disableBetSwitch","isShowNoGlod","fillStatus","bindEvent","on","EventType","TOUCH_START","TOUCH_END","getComponent","node","CLICK","playOneShot","MIN_COIN","state","target","getBetListByLevel","index","indexOf","setState","MAX_COIN","length","BUTTONCLICK","isChecked","useProps","key","cur","getChildByName","active","interactable","updateBtuFace","pre","string","joinqQueue","done","stop","num","toFixed","formatAmountWithCommas","GAME_TYPE","MAIN","setFlyNode","parent","console","log","LIMIT","LAMIT_FAST","SUBGAME1","getAutoLauncherBaseNBoard","getProfitBar","level","JSON","parse","localStorage","getItem","lv","betList","betSwitcher","find","item","amount","bindUI","addOnce","AUTH","Instance","option","gameSet","thor","betTarget","t","i","add","LAUNCHER_BET","data","error","useState","linesQueueNum","raise","setGameOption","color","getPositionData","destroyCallBack","destoryQueue","removeById","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Button, Color, Component, EventMouse, Label, log, Node, Sprite, sys, Toggle } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport config from '../config';\r\nimport { SKT_MAG_TYPE, sktMsgListener } from '../socketConnect';\r\nimport { thor_Audio, msgListener, NORMAL_MAG_TYPE } from '../index';\r\nimport { AutoLauncherType, GameType } from '../type';\r\nimport TaskScheduler, { Task } from '../../../utils/TaskScheduler';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { autoLauncherTypeWithTimes } from '../viewModel/AutoLauncherViewModel';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nimport UseSetOption from '../../../utils/UseSetOption';\r\nimport dataTransfer, { DataKeyType } from '../dataTransfer';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\t/**是否显示自动下注面板 */\r\n\t// isShowAutoLancherPanel: boolean,\r\n\t/**基本的下注额度序号 */\r\n\tbaseBetAmountTarget: {\r\n\t\tpositionId: number;\r\n\t\tvalue: number;\r\n\t},\r\n\t/**是否禁用下注调整 */\r\n\tdisableBetSwitch: boolean\r\n\t/**是否显示金额不足提示框 */\r\n\tisShowNoGlod: boolean\r\n\t/**是否加倍*/\r\n\tfillStatus: boolean\r\n}\r\n\r\nexport interface IProps {\r\n\t/**转动是否停止 */\r\n\tisRollEnd: boolean,\r\n\t/**盈亏 */\r\n\tprofit: number,\r\n\t/**要执行的小游戏次数 */\r\n\tsubGameTimes: number,\r\n\t/**剩余的小游戏次数 */\r\n\tremainSubGameTimes: number,\r\n\t/**当前的游戏 */\r\n\tcurrGameType: GameType,\r\n\t/**当前界面所处的游戏 */\r\n\tviewGameType: GameType,\r\n\t/**自动执行显示状态 */\r\n\tisShowAutoLaunch: boolean,\r\n\t/**自动执行的类型 */\r\n\tautoLauncherType: AutoLauncherType,\r\n\t/**已经执行了多少次 */\r\n\tautoLaunchedTimes: number,\r\n\t/**玩家余额 */\r\n\tbalance: number,\r\n\t/**玩家加注 */\r\n\tapostille: boolean\r\n}\r\nexport interface IEvent {\r\n\t/**打开自动下注,isToggle：是否反向(如果开启窗台再调用则关闭)*/\r\n\topenAutoLauncher: () => void\r\n\t/**关闭自动下注框 */\r\n\tcloseAutoLauncher: (isClear: boolean) => void,\r\n\t/**手动下注 */\r\n\tmanualBetHandler: () => void,\r\n\t/**打开帮助框 */\r\n\topenHelpPanel: () => void,\r\n\t/**改变下注金额，总下注金额，下注档位positionId和下注档位额度 */\r\n\tchangeBetAmount: (betAmount: number, positionId?: number, value?: number) => void,\r\n\t/**改变下注档位 */\r\n\t// changePositionId: (positionId) => void\r\n\t/**是加速 */\r\n\tisHasten: (isState) => void\r\n\r\n}\r\n\r\n@ccclass('Thor_Footer')\r\nexport class Thor_Footer extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\tprivate timer: number\r\n\t/**按下的时间 */\r\n\tprivate pressTime: number = 0\r\n\t/**按下触发时间 */\r\n\tprivate pressTimeDone: number = 50\r\n\tprivate taskScheduler: TaskScheduler = new TaskScheduler()\r\n\tprivate stepNumber: StepNumber\r\n\tprivate totalTimes: any\r\n\tprivate goldNum: number\r\n\tprivate positionId: number\r\n\tprivate isEnd: boolean\r\n\tprotected propertyNode = {\r\n\t\t/**主启动按钮 */\r\n\t\tprops_btn_down_putar: new Node(),\r\n\t\t/**最大下注按钮 */\r\n\t\t// props_btn_down_betMax: new Button(),\r\n\t\t/**帮助开启按钮 */\r\n\t\t// props_btn_down_help: new Button(),\r\n\t\t/**下注降档 */\r\n\t\tprops_btn_down_subtract: new Node(),\r\n\t\t/**下注升档 */\r\n\t\tprops_btn_down_add: new Node(),\r\n\t\t/**下注乘法 */\r\n\t\t// props_Label_down_oneBet: new Label(),\r\n\t\t/**下注金额显示 */\r\n\t\tprops_Label_down_goldNum: new Node(),\r\n\t\t/**goodLuck */\r\n\t\tprops_word_down_goodluck: new Node(),\r\n\t\t/**盈亏 */\r\n\t\tprops_word_down_winNum: new Node(),\r\n\t\t/**自动选择框底板 */\r\n\t\t// props_down_chooseBg: new Node(),\r\n\t\t/**按钮光效 */\r\n\t\t// props_spine_guangquan: new Node(),\r\n\t\t/**PUTAR */\r\n\t\tprops_word_down_pular: new Node(),\r\n\t\tprops_word_down_auto: new Node(),\r\n\t\t/**次数 */\r\n\t\t// props_times: new Node(),\r\n\t\t/**自动执行的信息 */\r\n\t\tprops_autoLaunch_label: new Node(),\r\n\t\t/**缺钱提示 */\r\n\t\tprops_spr_nomoney: new Node(),\r\n\t\t// 是否加速\r\n\t\tprops_toggle_fast: new Toggle(),\r\n\t\t/**游戏中 */\r\n\t\tprops_scrollingThePicture: new Node(),\r\n\t\tprops_word_down_menang: new Node(),\r\n\t\tprops_btn_down_auto: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tisRollEnd: true,\r\n\t\tprofit: 0,\r\n\t\tsubGameTimes: 0,\r\n\t\tremainSubGameTimes: 0,\r\n\t\tcurrGameType: GameType.NONE,\r\n\t\tviewGameType: GameType.NONE,\r\n\t\tisShowAutoLaunch: false,\r\n\t\tautoLauncherType: AutoLauncherType.NONE,\r\n\t\tautoLaunchedTimes: 0,\r\n\t\tbalance: 0,\r\n\t\tapostille: false\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tmanualBetHandler: () => { },\r\n\t\topenAutoLauncher: () => { },\r\n\t\tcloseAutoLauncher: (isClear: boolean) => { },\r\n\t\topenHelpPanel: () => { },\r\n\t\tchangeBetAmount: (betAmount: number, positionId?: number, value?: number) => { },\r\n\t\tisHasten: (isState: boolean) => { },\r\n\t\t// changePositionId: (positionId) => void\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\t\t\t// isShowAutoLancherPanel: false,\r\n\t\t\tbaseBetAmountTarget: {\r\n\t\t\t\tpositionId: 0,\r\n\t\t\t\tvalue: 0\r\n\t\t\t},\r\n\t\t\tdisableBetSwitch: false,\r\n\t\t\tisShowNoGlod: false,\r\n\t\t\tfillStatus: false\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_down_putar.on(Node.EventType.TOUCH_START, () => {\r\n\t\t\t//鼠标按下\r\n\t\t\t// this.timer = window.setInterval(() => {\r\n\t\t\t// \tthis.pressTime += 1\r\n\t\t\t// \tif (this.pressTime > this.pressTimeDone) {\r\n\t\t\t// \t\twindow.clearInterval(this.timer)\r\n\t\t\t// \t\tif (!this.props) return\r\n\t\t\t// \t\t//打开自动运行\r\n\t\t\t// \t\t// this.setState({ isShowAutoLancherPanel: !this.state.isShowAutoLancherPanel })\r\n\t\t\t// \t\tif (!this.props.isRollEnd) return\r\n\t\t\t// \t\tthis.props.isShowAutoLaunch ? this.events.closeAutoLauncher(false) : this.events.openAutoLauncher()\r\n\t\t\t// \t}\r\n\t\t\t// }, 10)\r\n\t\t})\r\n\r\n\t\tthis.propertyNode.props_btn_down_putar.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\t//滑槽不管是否是停止状态，都要停止自动\r\n\t\t\tthis.events.closeAutoLauncher(true)\r\n\t\t\tif (!this.props.isRollEnd) return\r\n\t\t\t//短按，下注启动，先关闭自动下注面板\r\n\t\t\t// this.setState({ isShowAutoLancherPanel: false })\r\n\t\t\tthis.events.manualBetHandler()\r\n\t\t\t// this.events.manualBetHandler(this.state.baseBetAmountTarget.positionId)\r\n\t\t})\r\n\r\n\r\n\t\t// this.propertyNode.props_btn_down_help.node.on(Button.EventType.CLICK, () => {\r\n\t\t// \tthis.events.openHelpPanel()\r\n\t\t// }, this)\r\n\r\n\t\tthis.propertyNode.props_btn_down_subtract.getComponent(Button).node.on(Button.EventType.CLICK, () => {\r\n\t\t\tthor_Audio.playOneShot(SoundPathDefine.MIN_COIN)\r\n\t\t\tif (this.state.disableBetSwitch) return\r\n\t\t\tconst target = this.getBetListByLevel()\r\n\t\t\tlet index = target.indexOf(this.state.baseBetAmountTarget)\r\n\t\t\tif (index === 0) {\r\n\t\t\t\t// index = target.length - 1\r\n\t\t\t\treturn // 不循环\r\n\t\t\t} else {\r\n\t\t\t\tindex--\r\n\t\t\t}\r\n\t\t\tthis.setState({ baseBetAmountTarget: target[index] })\r\n\t\t}, this)\r\n\r\n\t\tthis.propertyNode.props_btn_down_add.getComponent(Button).node.on(Button.EventType.CLICK, () => {\r\n\t\t\tthor_Audio.playOneShot(SoundPathDefine.MAX_COIN)\r\n\t\t\tif (this.state.disableBetSwitch) return\r\n\t\t\tconst target = this.getBetListByLevel()\r\n\t\t\tlet index = target.indexOf(this.state.baseBetAmountTarget)\r\n\t\t\tif (index === target.length - 1) {\r\n\t\t\t\t// index = 0\r\n\t\t\t\treturn // 不循环\r\n\t\t\t} else {\r\n\t\t\t\tindex++\r\n\t\t\t}\r\n\t\t\tthis.setState({ baseBetAmountTarget: target[index] })\r\n\t\t}, this)\r\n\r\n\t\tthis.propertyNode.props_btn_down_auto.on(Button.EventType.CLICK, () => {\r\n\t\t\tthor_Audio.playOneShot(SoundPathDefine.BUTTONCLICK)\r\n\t\t\tif (this.props.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tthis.events.closeAutoLauncher(true)\r\n\t\t\t} else {\r\n\t\t\t\tthis.events.openAutoLauncher()\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_toggle_fast.node.on('toggle', () => {\r\n\t\t\tthis.events.isHasten(!(this.propertyNode.props_toggle_fast.getComponent(Toggle).isChecked))\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"isRollEnd\") {\r\n\t\t\tthis.isEnd = value.cur\r\n\t\t\tthis.propertyNode.props_btn_down_putar.getChildByName('disable').active = !value.cur\r\n\t\t\tthis.setState({ disableBetSwitch: !value.cur })\r\n\t\t\t// this.propertyNode.props_spine_guangquan.active = value.cur\r\n\t\t\tthis.propertyNode.props_toggle_fast.interactable = value.cur\r\n\t\t\tif (this.props.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tthis.propertyNode.props_word_down_pular.active = false\r\n\t\t\t\tthis.propertyNode.props_scrollingThePicture.active = false\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_word_down_pular.active = value.cur\r\n\t\t\t\tthis.propertyNode.props_scrollingThePicture.active = !value.cur\r\n\t\t\t}\r\n\t\t\tthis.updateBtuFace()\r\n\t\t}\r\n\t\tif (key === \"profit\") {\r\n\t\t\tthis.propertyNode.props_word_down_goodluck.active = this.props.profit === 0\r\n\t\t\tthis.propertyNode.props_word_down_winNum.active = this.props.profit !== 0\r\n\t\t\tthis.propertyNode.props_word_down_menang.active = this.props.profit !== 0\r\n\t\t\t// console.log(value.pre, value.cur)\r\n\t\t\tif (value.cur < value.pre) {\r\n\t\t\t\t//如果数值减小，应该是恢复，直接变成目标值\r\n\t\t\t\tthis.propertyNode.props_word_down_winNum.getComponent(Label).string = value.cur\r\n\t\t\t} else {\r\n\t\t\t\tthis.taskScheduler.joinqQueue(new Task((done) => {\r\n\t\t\t\t\tthis.stepNumber && this.stepNumber.stop()\r\n\t\t\t\t\tthis.stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\t\t\tthis.propertyNode && this.propertyNode.props_word_down_winNum && (this.propertyNode.props_word_down_winNum.getComponent(Label).string = (+num.toFixed(0)).formatAmountWithCommas())\r\n\t\t\t\t\t}, () => done())\r\n\t\t\t\t\tif (dataTransfer(DataKeyType.GAME_TYPE) !== GameType.MAIN) {\r\n\t\t\t\t\t\tthis.stepNumber.setFlyNode(this.propertyNode.props_word_down_winNum.parent, this.propertyNode.props_word_down_winNum, 40)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.stepNumber.start()\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"subGameTimes\" || key === \"remainSubGameTimes\") {\r\n\t\t\t// this.propertyNode.props_times.getComponent(Label).string = `${this.props.remainSubGameTimes} / ${this.props.subGameTimes}`\r\n\t\t}\r\n\t\tif (key === \"currGameType\") {\r\n\t\t\tthis.setState({ disableBetSwitch: value.cur !== GameType.MAIN })\r\n\t\t}\r\n\t\tif (key === \"viewGameType\") {\r\n\t\t\t// console.log('viewGameType', this.props.viewGameType)\r\n\t\t\tthis.updateBtuFace()\r\n\t\t\t// this.propertyNode.props_word_down_pular.active = (this.props.viewGameType !== GameType.SUBGAME2 && this.props.autoLauncherType === AutoLauncherType.NONE)\r\n\t\t\t// this.propertyNode.props_times.active = this.props.viewGameType === GameType.SUBGAME2\r\n\t\t\t// this.propertyNode.props_autoLaunch_label.active = this.props.viewGameType !== GameType.SUBGAME2 && this.props.autoLauncherType !== AutoLauncherType.NONE\r\n\t\t}\r\n\t\tif (key === \"autoLauncherType\") {\r\n\t\t\tthis.totalTimes = autoLauncherTypeWithTimes[this.props.autoLauncherType]\r\n\t\t\tconsole.log(this.totalTimes);\r\n\t\t\tif (this.props.autoLauncherType === AutoLauncherType.LIMIT) {\r\n\t\t\t\tthis.totalTimes = \"∞\"\r\n\t\t\t} else if (this.props.autoLauncherType === AutoLauncherType.LAMIT_FAST) {\r\n\t\t\t\tthis.totalTimes = \"∞⁺\"\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (key === \"autoLaunchedTimes\" || key === \"autoLauncherType\") {\r\n\t\t\tif (this.props.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tthis.propertyNode.props_autoLaunch_label.getComponent(Label).string = `${this.props.autoLaunchedTimes} / ${this.totalTimes}`\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_autoLaunch_label.getComponent(Label).string = `1 / ${this.totalTimes}`\r\n\t\t\t}\r\n\t\t\tthis.updateBtuFace()\r\n\t\t}\r\n\t\tif (key === \"apostille\") {\r\n\t\t\tthis.setState({ fillStatus: value.cur })\r\n\t\t}\r\n\t}\r\n\tprivate updateBtuFace() {\r\n\t\tif (this.props.currGameType === GameType.MAIN || this.props.currGameType === GameType.SUBGAME1) {\r\n\t\t\t//this.propertyNode.props_times.active = false\r\n\t\t\tthis.propertyNode.props_scrollingThePicture.active = false\r\n\t\t\tif (this.props.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tthis.propertyNode.props_autoLaunch_label.active = true\r\n\t\t\t\tthis.propertyNode.props_word_down_auto.active = false\r\n\t\t\t\tthis.propertyNode.props_btn_down_putar.getChildByName('disable').active = true\r\n\t\t\t\tthis.propertyNode.props_word_down_pular.active = false\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_autoLaunch_label.active = false\r\n\t\t\t\tthis.propertyNode.props_word_down_auto.active = true\r\n\t\t\t\tthis.propertyNode.props_word_down_pular.active = true\r\n\t\t\t\tthis.propertyNode.props_btn_down_putar.getChildByName('disable').active = false\r\n\t\t\t\tthis.propertyNode.props_scrollingThePicture.active = false\r\n\t\t\t}\r\n\t\t} \r\n\t\tif(this.props.currGameType === GameType.MAIN || this.props.viewGameType === GameType.MAIN){\r\n\t\t\tthis.propertyNode.props_btn_down_auto.getComponent(Button).interactable=true\r\n\t\t\tthis.propertyNode.props_btn_down_auto.getChildByName('disable').active = false\r\n\t\t}else{\r\n\t\t\tthis.propertyNode.props_btn_down_auto.getComponent(Button).interactable=false\r\n\t\t\tthis.propertyNode.props_btn_down_auto.getChildByName('disable').active = true\r\n\t\t}\r\n\t}\r\n\t/**获取自动运行底板 */\r\n\tpublic getAutoLauncherBaseNBoard() {\r\n\t\t// return this.propertyNode.props_down_chooseBg\r\n\t}\r\n\tpublic getProfitBar() {\r\n\t\treturn this.propertyNode.props_word_down_winNum\r\n\t}\r\n\r\n\t/**根据用户级别获取下注金额列表 */\r\n\tprivate getBetListByLevel() {\r\n\t\tconst level = +JSON.parse(sys.localStorage.getItem(\"thor\")).lv\r\n\t\tconst betList = config.betSwitcher.find(item => (level => item.level[0] && level < item.level[1]))\r\n\t\treturn betList ? betList.amount : []\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t\tsktMsgListener.addOnce(SKT_MAG_TYPE.AUTH, \"footer\", () => {\r\n\t\t\tconst target = this.getBetListByLevel()\r\n\t\t\tif (UseSetOption.Instance().option.gameSet.thor && UseSetOption.Instance().option.gameSet.thor.betTarget) {\r\n\t\t\t\tconst t = target.find(i => i.positionId === UseSetOption.Instance().option.gameSet.thor.betTarget.positionId)\r\n\t\t\t\tthis.setState({ baseBetAmountTarget: t || target[0] })\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ baseBetAmountTarget: target[0] })\r\n\t\t\t}\r\n\t\t}, 2)\r\n\t\tsktMsgListener.add(SKT_MAG_TYPE.LAUNCHER_BET, \"footer\", (data, error) => {\r\n\t\t\tthis.stepNumber && this.stepNumber.stop()\r\n\t\t}, 10)\r\n\t\t// msgListener.add(NORMAL_MAG_TYPE.CHANGE_GAME, 'footer', ({ currGameType }) => {\r\n\t\t// \tthis.propertyNode.props_word_down_pular.active = currGameType !== GameType.SUBGAME2\r\n\t\t// \tthis.propertyNode.props_times.active = currGameType === GameType.SUBGAME2\r\n\t\t// })\r\n\r\n\t\t// this.useState((key, value) => {\r\n\t\t// \t// this.propertyNode.props_down_chooseBg.active = value.cur\r\n\t\t// \tif (value.cur === true) {\r\n\t\t// \t\tthis.events.openAutoLauncher()\r\n\t\t// \t} else {\r\n\t\t// \t\tthis.events.closeAutoLauncher()\r\n\t\t// \t}\r\n\t\t// }, [\"isShowAutoLancherPanel\"])\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tif (key === \"fillStatus\") {\r\n\t\t\t\tif (value.cur) {\r\n\t\t\t\t\tthis.propertyNode.props_Label_down_goldNum.getComponent(Label).string = (this.goldNum * (config.linesQueueNum + 5)).formatAmountWithCommas()\r\n\t\t\t\t\t// this.propertyNode.props_Label_down_oneBet.string = `${config.linesQueueNum + 5}×${this.goldNum}`\r\n\t\t\t\t\tthis.events.changeBetAmount(this.goldNum * (config.linesQueueNum + 5), this.positionId, this.goldNum)\r\n\t\t\t\t\tthis.setState({ \"isShowNoGlod\": this.props.balance < this.goldNum * (config.linesQueueNum + 5) })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.propertyNode.props_Label_down_goldNum.getComponent(Label).string = (this.goldNum * config.linesQueueNum).formatAmountWithCommas()\r\n\t\t\t\t\t// this.propertyNode.props_Label_down_oneBet.string = `${config.linesQueueNum}×${this.goldNum}`\r\n\t\t\t\t\tthis.events.changeBetAmount(this.goldNum * (config.linesQueueNum), this.positionId, this.goldNum)\r\n\t\t\t\t\tthis.setState({ \"isShowNoGlod\": this.props.balance < this.goldNum * (config.linesQueueNum) })\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (key === \"baseBetAmountTarget\") {\r\n\t\t\t\tlet raise = this.props.apostille ? 5 : 0\r\n\t\t\t\t// this.propertyNode.props_Label_down_oneBet.string = `${config.linesQueueNum + raise}×${value.cur.value}`\r\n\t\t\t\tthis.propertyNode.props_Label_down_goldNum.getComponent(Label).string = (value.cur.value * (config.linesQueueNum + raise)).formatAmountWithCommas()\r\n\t\t\t\tthis.goldNum = value.cur.value\r\n\t\t\t\tthis.positionId = value.cur.positionId\r\n\t\t\t\tthis.events.changeBetAmount(value.cur.value * (config.linesQueueNum + raise), value.cur.positionId, value.cur.value)\r\n\t\t\t\tUseSetOption.Instance().setGameOption(\"thor\", { betTarget: value.cur })\r\n\t\t\t\tthis.setState({ \"isShowNoGlod\": this.props.balance < value.cur.value * (config.linesQueueNum + raise) })\r\n\t\t\t}\r\n\t\t\tthis.disableBetSwitch()\r\n\t\t}, [\"baseBetAmountTarget\", \"fillStatus\"])\r\n\r\n\t\tthis.useState((key, value) => {\r\n\t\t\t// this.propertyNode.props_btn_down_betMax.getComponent(Sprite).grayscale = value.cur\r\n\t\t\tthis.propertyNode.props_btn_down_subtract.getChildByName('disable').active = value.cur\r\n\t\t\tthis.propertyNode.props_btn_down_add.getChildByName('disable').active = value.cur\r\n\t\t\t!value.cur && this.disableBetSwitch()\r\n\t\t}, [\"disableBetSwitch\"])\r\n\r\n\t\tthis.useState((key, value) => {\r\n\t\t\tthis.propertyNode.props_spr_nomoney.active = value.cur\r\n\t\t\tif (value.cur) {\r\n\t\t\t\tthis.propertyNode.props_Label_down_goldNum.getComponent(Label).color = new Color(144, 144, 134);\r\n\t\t\t} else {\r\n\t\t\t\tthis.propertyNode.props_Label_down_goldNum.getComponent(Label).color = new Color(255, 255, 255);\r\n\t\t\t}\r\n\t\t}, [\"isShowNoGlod\"])\r\n\t}\r\n\r\n\tpublic getPositionData() {\r\n\t\treturn this.state.baseBetAmountTarget\r\n\t}\r\n\tprivate disableBetSwitch() {\r\n\t\tconst target = this.getBetListByLevel()\r\n\t\tlet index = target.indexOf(this.state.baseBetAmountTarget)\r\n\t\tthis.propertyNode.props_btn_down_subtract.getChildByName('disable').active = (index === 0)\r\n\t\tthis.propertyNode.props_btn_down_add.getChildByName('disable').active = (index === target.length - 1)\r\n\t}\r\n\r\n\tprotected destroyCallBack() {\r\n\t\tthis.taskScheduler.destoryQueue()\r\n\t\tsktMsgListener.removeById(\"footer\")\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}"]}