{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfc/Slot/Component/gxfc_Roller.ts"],"names":["_decorator","instantiate","Mask","Node","Prefab","Size","tween","UITransform","Vec3","BaseComponent","AudioManager","SoundList","ccclass","property","gxfc_Roller","rollerDataRep","isRoll","rollerData","rollerIndex","endFlag","initStartIndex","lastJoinIconIndex","layout2flashingArr","stopHandler","rollerLayOut2State","isSpeed","start","bindRollerData","data","startRoll","stopIndex","joinIcon","getRollProxy","setStopIndex","removeAllDockIcon","RollerLayOut2","active","RollerLayOut","setSiblingIndex","children","forEach","icon","getComponent","setEffect","node","enabled","stopRoll","cbFn","addLastJoinIconIndex","showResult","setIconEffect","mode","target","allState","comp","some","i","iconId","iconIndex","portraitNum","index","addDockIcon","state","icon2","setPosition","setTimeout","targetY","position","y","to","addChild","layout2setEffect","monitorAnimations","setBg","bgNameIndex","removeAllChildren","togglesThePopUpLayerState","showLayout2","layout2flashing","value","newValue","length","update","deltaTime","x","rollSpeed","rollerheight","intervalHeight","deviation","_lastJoinIconIndex","count","easing","call","stopCallBack","lastChild","destroy","lateUpdate","bindUI","getRepository","rootUi","root","anchorY","rollerUi","setContentSize","intervalWidth","rollerWidth","setFace","initRollerLayOut2","bindEvent","getInstance","playSound","theRollerStops","rollWithCell","window","Math","abs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AACxEC,MAAAA,a;;AAIEC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,S,iBAAAA,S;;;;;;;;;OAEjB;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV,O,GAAsBb,U;AAE5B;AACA;AACA;;6BAIac,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAACV,IAAD,C,UAGRU,QAAQ,CAACV,IAAD,C,UAERU,QAAQ,CAACT,MAAD,C,UAGRS,QAAQ,CAACT,MAAD,C,2BAVb,MACaU,WADb;AAAA;AAAA,0CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAYnCC,aAZmC;AAAA,eAanCC,MAbmC,GAa1B,KAb0B;AAAA,eAcnCC,UAdmC;;AAe3C;AAf2C,eAgBnCC,WAhBmC;;AAiB3C;AAjB2C,eAkBnCC,OAlBmC,GAkBhB,IAlBgB;;AAmB3C;AAnB2C,eAoBnCC,cApBmC,GAoBlB,CApBkB;;AAqB3C;AArB2C,eAsBnCC,iBAtBmC,GAsBf,CAtBe;AAuB3C;AAvB2C,eAwBnCC,kBAxBmC,GAwBd,EAxBc;;AAyB3C;AAzB2C,eA0BnCC,WA1BmC;AAAA,eA2BnCC,kBA3BmC,GA2BhB,KA3BgB;AAAA,eA6BnCC,OA7BmC,GA6BzB,KA7ByB;AAAA;;AA+B3CC,QAAAA,KAAK,GAAG,CACP;AAED;;;AACOC,QAAAA,cAAc,CAACT,WAAD,EAAsBU,IAAtB,EAAwC;AACzD,eAAKX,UAAL,GAAkBW,IAAlB;AACA,eAAKV,WAAL,GAAmBA,WAAnB;AACH;AAED;AACJ;AACA;AACA;;;AACWW,QAAAA,SAAS,CAACC,SAAD,EAAoBL,OAAgB,GAAG,KAAvC,EAA8C;AAC1D,eAAKA,OAAL,GAAeA,OAAf,CAD0D,CAE1D;;AACA,eAAKM,QAAL,GAH0D,CAI1D;;AACC,eAAKC,YAAL,EAAD,CAAmCC,YAAnC,CAAgD,KAAKf,WAArD,EAAkEY,SAAlE;AACA,eAAKd,MAAL,GAAc,IAAd;AACA,eAAKG,OAAL,GAAe,KAAf;AACA,eAAKe,iBAAL;AACA,eAAKC,aAAL,CAAmBC,MAAnB,GAA0B,KAA1B;AACA,eAAKC,YAAL,CAAkBC,eAAlB,CAAkC,CAAlC;AACA,eAAKH,aAAL,CAAmBG,eAAnB,CAAmC,CAAnC;AACA,eAAKD,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmCC,IAAI,IAAI;AAC3BA,YAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4CC,SAA5C;AACH,WAFD;AAGA,eAAKC,IAAL,CAAUF,YAAV,CAAuBxC,IAAvB,EAA6B2C,OAA7B,GAAuC,IAAvC,CAf0D,CAgB1D;AACA;AACH,SA9D0C,CAgE3C;;;AACOC,QAAAA,QAAQ,CAACC,IAAD,EAAwB;AACnC,eAAK5B,OAAL,GAAe,IAAf;AACA,eAAKI,WAAL,GAAmBwB,IAAnB;AACA,eAAKC,oBAAL,CAA0B,KAAK/B,UAAL,CAAgBgC,UAAhB,CAA2BnB,SAArD,EAAgE,CAAhE,EAHmC,CAInC;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACWoB,QAAAA,aAAa,CAACC,IAAD,EAA0BC,MAA1B,EAA2CC,QAAgB,GAAC,KAA5D,EAAmE;AACnF,cAAIF,IAAI,KAAK,OAAb,EAAsB;AAClB,iBAAKd,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmCC,IAAI,IAAI;AACvC,oBAAMa,IAAI,GAAeb,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAzB;;AACA,kBAAIU,MAAM,CAACG,IAAP,CAAYC,CAAC,IAAIA,CAAC,KAAKF,IAAI,CAACG,MAA5B,CAAJ,EAAyC;AACrCH,gBAAAA,IAAI,CAACX,SAAL,CAAe,CAAf;AACH,eAFD,MAEO;AACHW,gBAAAA,IAAI,CAACX,SAAL;AACH;AACJ,aAPD;AAQH,WATD,MASO;AACH,gBAAIe,SAAS,GAAG,KAAKzC,UAAL,CAAgB0C,WAAhC;AACA,iBAAKtB,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmC,CAACC,IAAD,EAAOmB,KAAP,KAAiB;AAChDF,cAAAA,SAAS;AACT,oBAAMJ,IAAI,GAAeb,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAzB;;AACA,kBAAIU,MAAM,CAACG,IAAP,CAAYC,CAAC,IAAIA,CAAC,KAAKE,SAAvB,CAAJ,EAAuC;AACnCJ,gBAAAA,IAAI,CAACX,SAAL,CAAe,CAAf;AACH,eAFD,MAEM;AACF,oBAAGU,QAAH,EAAY;AACRC,kBAAAA,IAAI,CAACX,SAAL;AACH;AACJ;AACJ,aAVD,EAFG,CAaH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACJ;AACA;AACA;;;AACWkB,QAAAA,WAAW,CAACC,KAAD,EAAgB;AAAC;AAC/B,eAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AACxB,kBAAMf,IAAI,GAAGxC,WAAW,CAAC,KAAK8D,KAAN,CAAxB;;AACA,gBAAID,KAAK,KAAK,CAAd,EAAiB;AACbrB,cAAAA,IAAI,CAACuB,WAAL,CAAiB,IAAIxD,IAAJ,CAAS,CAAT,EAAY,CAAE,GAAd,CAAjB;AACH;;AACD,gBAAIgD,CAAC,KAAK,CAAV,EAAa;AACTf,cAAAA,IAAI,CAACL,MAAL,GAAc,KAAd;AACA6B,cAAAA,UAAU,CAAC,MAAM;AACbxB,gBAAAA,IAAI,CAACL,MAAL,GAAc,IAAd;AACA,sBAAM8B,OAAO,GAAGJ,KAAK,KAAK,CAAV,GAAcrB,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkBZ,CAAC,GAAG,GAApC,GAA0Cf,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkBZ,CAAC,GAAG,GAAhF;AACAlD,gBAAAA,KAAK,CAACmC,IAAD,CAAL,CAAY4B,EAAZ,CAAe,GAAf,EAAoB;AAAEF,kBAAAA,QAAQ,EAAE,IAAI3D,IAAJ,CAAS,CAAT,EAAY0D,OAAZ;AAAZ,iBAApB,EAAwDxC,KAAxD;AACH,eAJS,EAIP,IAJO,CAAV;AAKH;;AACD,iBAAKS,aAAL,CAAmBmC,QAAnB,CAA4B7B,IAA5B;;AACA,gBAAGe,CAAC,KAAG,CAAP,EAAS;AACL,kBAAGM,KAAK,KAAK,CAAb,EAAe;AACCrB,gBAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4C6B,gBAA5C,CAA6D,CAA7D;AACA,qBAAKpC,aAAL,CAAmBI,QAAnB,CAA4BC,OAA5B,CAAoC,CAACC,IAAD,EAAMmB,KAAN,KAAgB;AAChD,sBAAG,KAAKtC,kBAAL,CAAwBiC,IAAxB,CAA6BC,CAAC,IAAIA,CAAC,KAAKI,KAAxC,CAAH,EAAkD;AAC9C,0BAAMN,IAAI,GAAeb,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAzB;AACYY,oBAAAA,IAAI,CAACZ,YAAL,CAAkB,WAAlB,CAAZ,CAA4C6B,gBAA5C,CAA6D,CAA7D;AACH;AACJ,iBALD;AAMH,eARD,MAQM;AACU9B,gBAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4C6B,gBAA5C,CAA6D,CAA7D,EAA+D,KAA/D;AACY9B,gBAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4C8B,iBAA5C,CAA8D,MAAM;AAChE,uBAAKrC,aAAL,CAAmBI,QAAnB,CAA4BC,OAA5B,CAAoC,CAACC,IAAD,EAAMmB,KAAN,KAAgB;AAChD,wBAAG,KAAKtC,kBAAL,CAAwBiC,IAAxB,CAA6BC,CAAC,IAAIA,CAAC,KAAKI,KAAxC,CAAH,EAAkD;AAC9C,4BAAMN,IAAI,GAAeb,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAzB;AACYY,sBAAAA,IAAI,CAACZ,YAAL,CAAkB,WAAlB,CAAZ,CAA4C6B,gBAA5C,CAA6D,CAA7D;AACH;AACJ,mBALD;AAMH,iBAPD;AAQH;AACJ;AACJ;;AACD,eAAKpC,aAAL,CAAmBI,QAAnB,CAA4B,CAA5B,EAA+BD,eAA/B,CAA+C,EAA/C;AACH,SA/J0C,CAiK3C;;;AACAmC,QAAAA,KAAK,CAACC,WAAD,EAAc;AACf,eAAKrC,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmC,CAACC,IAAD,EAAOmB,KAAP,KAAiB;AAChD,kBAAMN,IAAI,GAAeb,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAzB,CADgD,CAEhD;AACH,WAHD;AAIH;;AAEMR,QAAAA,iBAAiB,GAAG;AACvB,eAAKC,aAAL,CAAmBwC,iBAAnB;AACH,SA3K0C,CA6K3C;;;AACOC,QAAAA,yBAAyB,CAACd,KAAD,EAAiB;AAC9C,eAAKtC,kBAAL,GAA0BsC,KAA1B;AACF;;AACMe,QAAAA,WAAW,GAAE;AAChB,eAAK1C,aAAL,CAAmBC,MAAnB,GAA0B,KAAKZ,kBAA/B;AACH;;AACMsD,QAAAA,eAAe,CAAC1B,MAAD,EAAQ;AAC1B,eAAK9B,kBAAL,GAAwB8B,MAAxB;AACH;;AAEOJ,QAAAA,oBAAoB,CAAClB,SAAD,EAAoBiD,KAApB,EAAmC;AAC3D,cAAIC,QAAQ,GAAGlD,SAAS,GAAGiD,KAA3B;;AACA,cAAIC,QAAQ,IAAI,KAAK/D,UAAL,CAAgBW,IAAhB,CAAqBqD,MAArC,EAA6C;AACzC,iBAAK5D,iBAAL,GAAyB2D,QAAQ,GAAG,KAAK/D,UAAL,CAAgBW,IAAhB,CAAqBqD,MAAzD;AACH,WAFD,MAEO;AACH,iBAAK5D,iBAAL,GAAyB2D,QAAzB;AACH;AACJ;;AAEDE,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKnE,MAAT,EAAiB;AACb,iBAAKqB,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmCC,IAAI,IAAI;AACvCA,cAAAA,IAAI,CAACuB,WAAL,CAAiB,IAAIxD,IAAJ,CAASiC,IAAI,CAAC0B,QAAL,CAAciB,CAAvB,EAA0B3C,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkB,KAAKnD,UAAL,CAAgBoE,SAA5D,CAAjB;AACH,aAFD;;AAGA,gBAAI,KAAKhD,YAAL,CAAkBE,QAAlB,CAA2B0C,MAA/B,EAAuC;AACnC,kBAAI,KAAK5C,YAAL,CAAkBE,QAAlB,CAA2B,CAA3B,EAA8B4B,QAA9B,CAAuCC,CAAvC,IAA4C,EAAE,KAAKnD,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAAjD,CAAhD,EAAkH;AAC9G,sBAAMC,SAAS,GAAE,CAAjB,CAD8G,CAC3F;;AACnB,qBAAKzD,QAAL,GAF8G,CAI9G;;AACA,oBAAI0D,kBAAkB,GAAG,KAAKpE,iBAAL,GAAyB,CAAlD;;AACA,oBAAI,KAAKA,iBAAL,GAAyB,CAAzB,IAA8B,KAAKJ,UAAL,CAAgBW,IAAhB,CAAqBqD,MAAvD,EAA+D;AAC3DQ,kBAAAA,kBAAkB,GAAG,CAArB;AACH;;AACD,oBAAI,KAAKtE,OAAL,IAAgB,KAAKF,UAAL,CAAgBgC,UAAhB,CAA2BnB,SAA3B,GAAuC,CAAvC,KAA6C2D,kBAAjE,EAAqF;AACjF,uBAAKzE,MAAL,GAAc,KAAd;AACA,sBAAI0E,KAAK,GAAG,CAAZ;AACA,uBAAKrD,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmC,CAACC,IAAD,EAAMmB,KAAN,KAAgB;AAC/CtD,oBAAAA,KAAK,GAAG8C,MAAR,CAAeX,IAAf,EAAqB4B,EAArB,CAAwB,GAAxB,EAA6B;AACzBF,sBAAAA,QAAQ,EAAE,IAAI3D,IAAJ,CAASiC,IAAI,CAAC0B,QAAL,CAAciB,CAAvB,EAA0B3C,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkBoB,SAAlB,IAA+B,KAAKvE,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAA/C,GAAgE3B,KAAK,GAAG,EAAvG,CAA1B;AADe,qBAA7B,EAEG;AACC+B,sBAAAA,MAAM,EAAE,SADT,CACkB;;AADlB,qBAFH,EAIGC,IAJH,CAIQ,MAAM;AACVF,sBAAAA,KAAK;;AACL,0BAAIA,KAAK,KAAK,KAAKrD,YAAL,CAAkBE,QAAlB,CAA2B0C,MAAzC,EAAiD;AAC7C,6BAAKY,YAAL;AACH;AACJ,qBATD,EASGnE,KATH;AAUH,mBAXD;AAYH;AACJ;;AACD,oBAAMoE,SAAS,GAAG,KAAKzD,YAAL,CAAkBE,QAAlB,CAA2B,KAAKF,YAAL,CAAkBE,QAAlB,CAA2B0C,MAA3B,GAAoC,CAA/D,CAAlB;;AACA,kBAAIa,SAAS,CAAC3B,QAAV,CAAmBC,CAAnB,IAAwB,EAAE,KAAKnD,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAAjD,KAAoE,KAAKtE,UAAL,CAAgB0C,WAAhB,GAA8B,CAAlG,CAA5B,EAAkI;AAC9HmC,gBAAAA,SAAS,CAACC,OAAV;AACH;AACJ;AACJ;AACJ;;AAEDC,QAAAA,UAAU,GAAG,CACT;AACA;AACA;AACA;AACA;AACA;AACH;;AAESC,QAAAA,MAAM,GAAS;AACrB,eAAKlF,aAAL,GAAqB,KAAKiB,YAAL,GAAoBkE,aAApB,EAArB,CADqB,CAErB;AACA;AACA;;AACA,gBAAMC,MAAM,GAAG,KAAKC,IAAL,CAAU1D,YAAV,CAAuBnC,WAAvB,CAAf;AACA4F,UAAAA,MAAM,CAACE,OAAP,GAAiB,CAAjB;AACA,gBAAMC,QAAQ,GAAG,KAAKjE,YAAL,CAAkBK,YAAlB,CAA+BnC,WAA/B,CAAjB,CAPqB,CAQrB;;AACA+F,UAAAA,QAAQ,CAACD,OAAT,GAAmB,CAAnB,CATqB,CAUrB;;AACA,eAAKhF,iBAAL,GAAyB,KAAKD,cAAL,GAAsB,CAA/C;AACA,eAAKC,iBAAL,KAA2B,CAAC,CAA5B,KAAkC,KAAKA,iBAAL,GAAyB,KAAKJ,UAAL,CAAgBW,IAAhB,CAAqBqD,MAArB,GAA8B,CAAzF,EAZqB,CAarB;;AACAkB,UAAAA,MAAM,CAACI,cAAP,CAAsB,IAAIlG,IAAJ,CAAS,KAAKY,UAAL,CAAgBuF,aAAhB,GAAgC,KAAKvF,UAAL,CAAgBwF,WAAzD,EACjB,CAAC,KAAKxF,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAAlD,IAAkE,KAAKrE,UAAL,CAAgB0C,WAAnF,GAAkG,KAAK1C,UAAL,CAAgBsE,cADhG,CAAtB,EAdqB,CAgBrB;;AACAe,UAAAA,QAAQ,CAACC,cAAT,CAAwB,IAAIlG,IAAJ,CAAS,KAAKY,UAAL,CAAgBwF,WAAzB,EACpB,CAAC,KAAKxF,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAAlD,KAAmE,KAAKrE,UAAL,CAAgB0C,WAAhB,GAA8B,CAAjG,CADoB,CAAxB,EAjBqB,CAmBrB;;AACA,eAAKtB,YAAL,CAAkB2B,WAAlB,CAA8B,KAAK3B,YAAL,CAAkB8B,QAAlB,CAA2BiB,CAAzD,EAA6D,KAAKnE,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAAlD,GAAkE,KAAKrE,UAAL,CAAgBsE,cAA9I,EApBqB,CAqBrB;;AACA,eAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvC,UAAL,CAAgB0C,WAApC,EAAiDH,CAAC,EAAlD,EAAsD;AAClD,kBAAMf,IAAI,GAAGxC,WAAW,CAAC,KAAKwC,IAAN,CAAxB;AACAA,YAAAA,IAAI,CAACuB,WAAL,CAAiB,IAAIxD,IAAJ,CAAS,CAAT,EAAYiC,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkB,CAAC,KAAKnD,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAAlD,KAAmE9B,CAAC,GAAG,CAAvE,CAA9B,CAAjB;AACA,iBAAKnB,YAAL,CAAkBiC,QAAlB,CAA2B7B,IAA3B;AACA,kBAAMmB,KAAK,GAAG,KAAKxC,cAAL,GAAsBoC,CAApC;AACYf,YAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4CgE,OAA5C,CAAoD,KAAKzF,UAAL,CAAgBW,IAAhB,CAAqBgC,KAArB,CAApD;AACH,WA5BoB,CA6BrB;;;AACA,eAAK+C,iBAAL;AACH;;AAESC,QAAAA,SAAS,GAAS,CAE3B;;AAEOD,QAAAA,iBAAiB,GAAG;AACxB,gBAAML,QAAQ,GAAG,KAAKnE,aAAL,CAAmBO,YAAnB,CAAgCnC,WAAhC,CAAjB;AACA+F,UAAAA,QAAQ,CAACD,OAAT,GAAmB,CAAnB;AACAC,UAAAA,QAAQ,CAACC,cAAT,CAAwB,IAAIlG,IAAJ,CAAS,KAAKY,UAAL,CAAgBwF,WAAzB,EACpB,CAAC,KAAKxF,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAAlD,IAAmE,KAAKrE,UAAL,CAAgB0C,WAD/D,CAAxB;AAEH;;AAEO5B,QAAAA,QAAQ,GAAG;AACf;AACA;AACA,gBAAMU,IAAI,GAAGxC,WAAW,CAAC,KAAKwC,IAAN,CAAxB;AACAA,UAAAA,IAAI,CAACuB,WAAL,CAAiBvB,IAAI,CAAC0B,QAAL,CAAciB,CAA/B,EAAkC,CAAlC;AACA,eAAK/C,YAAL,CAAkBiC,QAAlB,CAA2B7B,IAA3B;AACYA,UAAAA,IAAI,CAACC,YAAL,CAAkB,WAAlB,CAAZ,CAA4CgE,OAA5C,CAAoD,KAAKzF,UAAL,CAAgBW,IAAhB,CAAqB,KAAKP,iBAA1B,CAApD;AACAoB,UAAAA,IAAI,CAACH,eAAL,CAAqB,CAArB;AACA,eAAKjB,iBAAL;AACA,eAAKA,iBAAL,KAA2B,CAAC,CAA5B,KAAkC,KAAKA,iBAAL,GAAyB,KAAKJ,UAAL,CAAgBW,IAAhB,CAAqBqD,MAArB,GAA8B,CAAzF,EATe,CAUf;AACA;AACH;;AAEOY,QAAAA,YAAY,GAAG;AACnB,eAAKjD,IAAL,CAAUF,YAAV,CAAuBxC,IAAvB,EAA6B2C,OAA7B,GAAuC,KAAvC;AACA,eAAKtB,WAAL,IAAoB,KAAKA,WAAL,CAAiB,KAAKL,WAAtB,EAAmC,KAAKD,UAAxC,CAApB,CAFmB,CAGnB;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA,4CAAa4F,WAAb,GAA2BC,SAA3B,CAAqC;AAAA;AAAA,sCAAUC,cAA/C;AACA,eAAK1E,YAAL,CAAkBE,QAAlB,CAA2B,KAAKF,YAAL,CAAkBE,QAAlB,CAA2B0C,MAA3B,GAAoC,CAA/D,EAAkEc,OAAlE;AACH;AAED;;;AACQiB,QAAAA,YAAY,CAAC7C,QAAD,EAA0B;AAC1C,cAAI,KAAKnD,MAAT,EAAiB;AACb,iBAAKqB,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmCC,IAAI,IAAI;AACvC;AACAnC,cAAAA,KAAK,CAACmC,IAAD,CAAL,CAAY4B,EAAZ,CAAe,KAAKpD,UAAL,CAAgBoE,SAAhB,GAA4B,IAA3C,EAAiD;AAAClB,gBAAAA,QAAQ,EAAE,IAAI3D,IAAJ,CAASiC,IAAI,CAAC0B,QAAL,CAAciB,CAAvB,EAA0B3C,IAAI,CAAC0B,QAAL,CAAcC,CAAd,IAAoB,KAAKnD,UAAL,CAAgBsE,cAAhB,GAAiC,KAAKtE,UAAL,CAAgBqE,YAArE,CAA1B;AAAX,eAAjD,EAA6K5D,KAA7K;AACH,aAHD;AAIAuF,YAAAA,MAAM,CAAChD,UAAP,CAAkB,MAAM;AACpB,kBAAI,KAAK5B,YAAL,CAAkBE,QAAlB,CAA2B0C,MAA/B,EAAuC;AACnC;AACA,sBAAMO,SAAS,GAAG0B,IAAI,CAACC,GAAL,CAAS,KAAK9E,YAAL,CAAkBE,QAAlB,CAA2B,CAA3B,EAA8B4B,QAA9B,CAAuCC,CAAhD,KAAsD,KAAKnD,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAArG,CAAlB,CAFmC,CAEoG;;AACvI,qBAAKxD,QAAL,GAHmC,CAInC;;AACA,oBAAI0D,kBAAkB,GAAG,KAAKpE,iBAAL,GAAyB,CAAlD;;AACA,oBAAI,KAAKA,iBAAL,GAAyB,CAAzB,IAA8B,KAAKJ,UAAL,CAAgBW,IAAhB,CAAqBqD,MAAvD,EAA+D;AAC3DQ,kBAAAA,kBAAkB,GAAG,CAArB;AACH;;AACD,oBAAI,KAAKtE,OAAL,IAAgB,KAAKF,UAAL,CAAgBgC,UAAhB,CAA2BnB,SAA3B,GAAuC,CAAvC,KAA6C2D,kBAAjE,EAAqF;AACjF,uBAAKzE,MAAL,GAAc,KAAd;AACA,sBAAI0E,KAAK,GAAG,CAAZ;AACA,uBAAKrD,YAAL,CAAkBE,QAAlB,CAA2BC,OAA3B,CAAmCC,IAAI,IAAI;AACvCnC,oBAAAA,KAAK,GAAG8C,MAAR,CAAeX,IAAf,EAAqB4B,EAArB,CAAwB,KAAKpD,UAAL,CAAgBoE,SAAhB,GAA4B,IAA5B,GAAmC,GAA3D,EAAgE;AAC5DlB,sBAAAA,QAAQ,EAAE,IAAI3D,IAAJ,CAASiC,IAAI,CAAC0B,QAAL,CAAciB,CAAvB,EAA0B3C,IAAI,CAAC0B,QAAL,CAAcC,CAAd,GAAkBoB,SAAlB,IAA+B,KAAKvE,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAA9E,CAA1B;AADkD,qBAAhE,EAEG;AACCI,sBAAAA,MAAM,EAAE,SADT,CACkB;;AADlB,qBAFH,EAIGC,IAJH,CAIQ,MAAM;AACVF,sBAAAA,KAAK;;AACL,0BAAIA,KAAK,KAAK,KAAKrD,YAAL,CAAkBE,QAAlB,CAA2B0C,MAAzC,EAAiD;AAC7C,6BAAKY,YAAL;AACH;AACJ,qBATD,EASGnE,KATH;AAUH,mBAXD;AAYH,iBAxBkC,CAyBnC;;;AACA,sBAAMoE,SAAS,GAAG,KAAKzD,YAAL,CAAkBE,QAAlB,CAA2B,KAAKF,YAAL,CAAkBE,QAAlB,CAA2B0C,MAA3B,GAAoC,CAA/D,CAAlB;;AACA,oBAAIa,SAAS,CAAC3B,QAAV,CAAmBC,CAAnB,IAAwB,EAAE,KAAKnD,UAAL,CAAgBqE,YAAhB,GAA+B,KAAKrE,UAAL,CAAgBsE,cAAjD,KAAoE,KAAKtE,UAAL,CAAgB0C,WAAhB,GAA8B,CAAlG,CAA5B,EAAkI;AAC9HmC,kBAAAA,SAAS,CAACC,OAAV;AACH;;AACD,qBAAKiB,YAAL,CAAkB7C,QAAlB;AACH;AACJ,aAjCD,EAiCG,KAAKlD,UAAL,CAAgBoE,SAjCnB;AAkCH;AACJ;;AAnW0C,O;;;;;iBAEtB,I;;;;;;;iBAGC,I;;;;;;;iBAEP,I;;;;;;;iBAGC,I","sourcesContent":["import {_decorator, instantiate, Mask, Node, Prefab, Size, tween, UITransform, Vec3} from 'cc';\r\nimport BaseComponent from './BaseComponent';\r\nimport {RollerType, SlotRepository} from '../Repositories/SlotRepository';\r\nimport {gxfc_Icon} from './gxfc_Icon';\r\nimport {SlotProxy} from '../Proxy/SlotProxy';\r\nimport { AudioManager, SoundList } from '../Managr/AudioManager';\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n/**\r\n * 动画停止回调\r\n */\r\ntype StopHandlerType = (rollerIndex: number, rollerData: RollerType) => void\r\n\r\n@ccclass('gxfc_Roller')\r\nexport class gxfc_Roller extends BaseComponent {\r\n    @property(Node)\r\n    RollerLayOut: Node = null\r\n\r\n    @property(Node)\r\n    RollerLayOut2: Node = null\r\n    @property(Prefab)\r\n    icon: Prefab = null\r\n\r\n    @property(Prefab)\r\n    icon2: Prefab = null\r\n\r\n    private rollerDataRep: SlotRepository\r\n    private isRoll = false\r\n    private rollerData: RollerType\r\n    /**第几条滑槽，序号 */\r\n    private rollerIndex: number\r\n    /**此值存在，即要检测停止了 */\r\n    private endFlag: boolean = true\r\n    /**初始化时，图标开始的排列序号 */\r\n    private initStartIndex = 0\r\n    /**下一个要加入的图标 */\r\n    private lastJoinIconIndex = 0\r\n    // private target: number = -1\\\r\n    private layout2flashingArr = []\r\n    /**动态效果停止后的动态回调函数 */\r\n    private stopHandler: StopHandlerType\r\n    private rollerLayOut2State=false\r\n\r\n    private isSpeed = false;\r\n\r\n    start() {\r\n    }\r\n\r\n    /**指定滑槽数据 */\r\n    public bindRollerData(rollerIndex: number, data: RollerType) {\r\n        this.rollerData = data\r\n        this.rollerIndex = rollerIndex\r\n    }\r\n\r\n    /**\r\n     * 开始滚动\r\n     * @param stopIndex 设定要停止的序号（从1开始的）\r\n     */\r\n    public startRoll(stopIndex: number, isSpeed: boolean = false) {\r\n        this.isSpeed = isSpeed;\r\n        // 往上移动一个网格，以便放上下一个要显示的icon\r\n        this.joinIcon();\r\n        // console.log(this.rollerIndex, stopIndex);\r\n        (this.getRollProxy() as SlotProxy).setStopIndex(this.rollerIndex, stopIndex)\r\n        this.isRoll = true\r\n        this.endFlag = false\r\n        this.removeAllDockIcon()\r\n        this.RollerLayOut2.active=false\r\n        this.RollerLayOut.setSiblingIndex(0)\r\n        this.RollerLayOut2.setSiblingIndex(1)\r\n        this.RollerLayOut.children.forEach(icon => {\r\n            (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).setEffect()\r\n        })\r\n        this.node.getComponent(Mask).enabled = true\r\n        // this.rollWithCell('down')\r\n        // console.log(this.getRollProxy().getRepository())\r\n    }\r\n\r\n    // 停止滚动\r\n    public stopRoll(cbFn: StopHandlerType) {\r\n        this.endFlag = true\r\n        this.stopHandler = cbFn\r\n        this.addLastJoinIconIndex(this.rollerData.showResult.stopIndex, 3);\r\n        // (this.getRollProxy() as FruitsSlotProxy).setStopIndex(this.rollerIndex)\r\n    }\r\n\r\n    /**\r\n     * 设置当前滑槽的闪动图标()\r\n     * @param mode 传入的是光标id，还是左边序列号\r\n     * @param target 光标位置或者y轴坐标序列\r\n     */\r\n    public setIconEffect(mode: 'index' | 'coord', target: number[],allState:boolean=false) {\r\n        if (mode === 'index') {\r\n            this.RollerLayOut.children.forEach(icon => {\r\n                const comp = (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\"))\r\n                if (target.some(i => i === comp.iconId)) {\r\n                    comp.setEffect(1)\r\n                } else {\r\n                    comp.setEffect()\r\n                }\r\n            })\r\n        } else {\r\n            let iconIndex = this.rollerData.portraitNum\r\n            this.RollerLayOut.children.forEach((icon, index) => {\r\n                iconIndex--\r\n                const comp = (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\"))\r\n                if (target.some(i => i === iconIndex)) {\r\n                    comp.setEffect(1)\r\n                }else {\r\n                    if(allState){\r\n                        comp.setEffect()\r\n                    }\r\n                }\r\n            })\r\n            //向上数第几个光标闪动\r\n            // for (let i = 2; i >= 0; i--) {\r\n            // \tconst comp = (<Icon>this.RollerLayOut.children[i].getComponent(\"gxfc_Icon\"))\r\n            // \tif (!comp) continue\r\n            // \tif (i === target) {\r\n            // \t\tcomp.setEffect(1)\r\n            // \t} else {\r\n            // \t\tcomp.setEffect()\r\n            // \t}\r\n            // }\r\n            // this.RollerLayOut.children.forEach((icon, index) => {\r\n            //     const comp = (<gxfc_Icon>icon.getComponent(gxfc_Icon))\r\n            //\r\n            // })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加停靠图标\r\n     * @param state\r\n     */\r\n    public addDockIcon(state: number) {// 0 向下 1 是向上\r\n        for (let i = 0; i < 3; ++i) {\r\n            const icon = instantiate(this.icon2);\r\n            if (state === 1) {\r\n                icon.setPosition(new Vec3(0, - 444));\r\n            }\r\n            if (i !== 0) {\r\n                icon.active = false;\r\n                setTimeout(() => {\r\n                    icon.active = true;\r\n                    const targetY = state === 1 ? icon.position.y + i * 148 : icon.position.y - i * 148;\r\n                    tween(icon).to(0.1, { position: new Vec3(0, targetY) }).start();\r\n                }, 1600);\r\n            }\r\n            this.RollerLayOut2.addChild(icon);\r\n            if(i===0){\r\n                if(state === 1){\r\n                    (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).layout2setEffect(4);\r\n                    this.RollerLayOut2.children.forEach((icon,index) => {\r\n                        if(this.layout2flashingArr.some(i => i === index)){\r\n                            const comp = (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\"));\r\n                            (<gxfc_Icon>comp.getComponent(\"gxfc_Icon\")).layout2setEffect(3);\r\n                        }\r\n                    })\r\n                }else {\r\n                    (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).layout2setEffect(2,false);\r\n                    (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).monitorAnimations(() => {\r\n                        this.RollerLayOut2.children.forEach((icon,index) => {\r\n                            if(this.layout2flashingArr.some(i => i === index)){\r\n                                const comp = (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\"));\r\n                                (<gxfc_Icon>comp.getComponent(\"gxfc_Icon\")).layout2setEffect(3);\r\n                            }\r\n                        })\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        this.RollerLayOut2.children[0].setSiblingIndex(99);\r\n    }\r\n\r\n    // 设置icon格子背景\r\n    setBg(bgNameIndex) {\r\n        this.RollerLayOut.children.forEach((icon, index) => {\r\n            const comp = (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\"))\r\n            // comp.setBg(bgNameIndex)\r\n        })\r\n    }\r\n\r\n    public removeAllDockIcon() {\r\n        this.RollerLayOut2.removeAllChildren()\r\n    }\r\n\r\n    //隐藏显示弹出层2\r\n    public togglesThePopUpLayerState(state: boolean) {\r\n       this.rollerLayOut2State = state\r\n    }\r\n    public showLayout2(){\r\n        this.RollerLayOut2.active=this.rollerLayOut2State\r\n    }\r\n    public layout2flashing(target){\r\n        this.layout2flashingArr=target\r\n    }\r\n\r\n    private addLastJoinIconIndex(stopIndex: number, value: number) {\r\n        let newValue = stopIndex + value;\r\n        if (newValue >= this.rollerData.data.length) {\r\n            this.lastJoinIconIndex = newValue - this.rollerData.data.length;\r\n        } else {\r\n            this.lastJoinIconIndex = newValue;\r\n        }\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if (this.isRoll) {\r\n            this.RollerLayOut.children.forEach(icon => {\r\n                icon.setPosition(new Vec3(icon.position.x, icon.position.y - this.rollerData.rollSpeed))\r\n            })\r\n            if (this.RollerLayOut.children.length) {\r\n                if (this.RollerLayOut.children[0].position.y <= -(this.rollerData.rollerheight + this.rollerData.intervalHeight)) {\r\n                    const deviation =0 //Math.abs(this.RollerLayOut.children[0].position.y) - (this.rollerData.rollerheight + this.rollerData.intervalHeight) //瞬时的纵向误差\r\n                    this.joinIcon()\r\n\r\n                    // 这里要注意\r\n                    let _lastJoinIconIndex = this.lastJoinIconIndex + 1\r\n                    if (this.lastJoinIconIndex + 1 >= this.rollerData.data.length) {\r\n                        _lastJoinIconIndex = 0\r\n                    }\r\n                    if (this.endFlag && this.rollerData.showResult.stopIndex - 1 === _lastJoinIconIndex) {\r\n                        this.isRoll = false\r\n                        let count = 0\r\n                        this.RollerLayOut.children.forEach((icon,index) => {\r\n                            tween().target(icon).to(0.5, {\r\n                                position: new Vec3(icon.position.x, icon.position.y + deviation - (this.rollerData.rollerheight + this.rollerData.intervalHeight - index * 10 ))\r\n                            }, {\r\n                                easing: \"backOut\"//\"elasticOut\"\r\n                            }).call(() => {\r\n                                count++\r\n                                if (count === this.RollerLayOut.children.length) {\r\n                                    this.stopCallBack()\r\n                                }\r\n                            }).start()\r\n                        })\r\n                    }\r\n                }\r\n                const lastChild = this.RollerLayOut.children[this.RollerLayOut.children.length - 1]\r\n                if (lastChild.position.y <= -(this.rollerData.rollerheight + this.rollerData.intervalHeight) * (this.rollerData.portraitNum + 1)) {\r\n                    lastChild.destroy()\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    lateUpdate() {\r\n        // if (this.RollerLayOut.children.length) {\r\n        // \tconst lastChild = this.RollerLayOut.children[this.RollerLayOut.children.length - 1]\r\n        // \tif (lastChild.position.y <= -(this.rollerData.rollerheight + this.rollerData.intervalHeight) * (this.rollerData.portraitNum + 1)) {\r\n        // \t\tlastChild.destroy()\r\n        // \t}\r\n        // }\r\n    }\r\n\r\n    protected bindUI(): void {\r\n        this.rollerDataRep = this.getRollProxy().getRepository();\r\n        // const layout = this.RollerLayOut.getComponent(Layout)\r\n        // layout.spacingY = this.rollerData.roller.intervalHeight\r\n        // 配置滑槽宽高度(也就是蒙板宽高)\r\n        const rootUi = this.root.getComponent(UITransform) as UITransform\r\n        rootUi.anchorY = 1\r\n        const rollerUi = this.RollerLayOut.getComponent(UITransform) as UITransform\r\n        // rootUi.anchorX = 0\r\n        rollerUi.anchorY = 1\r\n        // rollerUi.anchorX = 0\r\n        this.lastJoinIconIndex = this.initStartIndex - 1\r\n        this.lastJoinIconIndex === -1 && (this.lastJoinIconIndex = this.rollerData.data.length - 1)\r\n        // 设置蒙版组件高度\r\n        rootUi.setContentSize(new Size(this.rollerData.intervalWidth + this.rollerData.rollerWidth,\r\n            ((this.rollerData.intervalHeight + this.rollerData.rollerheight) * this.rollerData.portraitNum) + this.rollerData.intervalHeight))\r\n        //设置滑道高度，多一个高度\r\n        rollerUi.setContentSize(new Size(this.rollerData.rollerWidth,\r\n            (this.rollerData.intervalHeight + this.rollerData.rollerheight) * (this.rollerData.portraitNum + 1)))\r\n        // 滑道网上顶一个单位（但是上沿有遮挡，再降30）\r\n        this.RollerLayOut.setPosition(this.RollerLayOut.position.x, (this.rollerData.intervalHeight + this.rollerData.rollerheight) - this.rollerData.intervalHeight)\r\n        // 初始化即将开始的图标\r\n        for (let i = 0; i < this.rollerData.portraitNum; i++) {\r\n            const icon = instantiate(this.icon)\r\n            icon.setPosition(new Vec3(0, icon.position.y - (this.rollerData.intervalHeight + this.rollerData.rollerheight) * (i + 1)))\r\n            this.RollerLayOut.addChild(icon);\r\n            const index = this.initStartIndex + i;\r\n            (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).setFace(this.rollerData.data[index])\r\n        }\r\n        // this.bubble.active = this.rollerData.isBigIcon\r\n        this.initRollerLayOut2()\r\n    }\r\n\r\n    protected bindEvent(): void {\r\n\r\n    }\r\n\r\n    private initRollerLayOut2() {\r\n        const rollerUi = this.RollerLayOut2.getComponent(UITransform) as UITransform\r\n        rollerUi.anchorY = 1\r\n        rollerUi.setContentSize(new Size(this.rollerData.rollerWidth,\r\n            (this.rollerData.intervalHeight + this.rollerData.rollerheight) * (this.rollerData.portraitNum)))\r\n    }\r\n\r\n    private joinIcon() {\r\n        // this.lastJoinIconIndex === this.rollerData.data.length && (this.lastJoinIconIndex = 0)\r\n        // console.log(this.lastJoinIconIndex)\r\n        const icon = instantiate(this.icon)\r\n        icon.setPosition(icon.position.x, 0)\r\n        this.RollerLayOut.addChild(icon);\r\n        (<gxfc_Icon>icon.getComponent(\"gxfc_Icon\")).setFace(this.rollerData.data[this.lastJoinIconIndex]);\r\n        icon.setSiblingIndex(0)\r\n        this.lastJoinIconIndex--\r\n        this.lastJoinIconIndex === -1 && (this.lastJoinIconIndex = this.rollerData.data.length - 1)\r\n        // this.RollerLayOut.removeChild(this.RollerLayOut.children[this.RollerLayOut.children.length - 1])\r\n        // this.RollerLayOut.children[this.RollerLayOut.children.length - 1].destroy()\r\n    }\r\n\r\n    private stopCallBack() {\r\n        this.node.getComponent(Mask).enabled = false\r\n        this.stopHandler && this.stopHandler(this.rollerIndex, this.rollerData)\r\n        // this.RollerLayOut.children.forEach(icon => {\r\n        // \tconst comp = (<Icon>icon.getComponent(\"gxfc_Icon\"))\r\n        // \tif (comp.iconId === this.target) {\r\n        // \t\tcomp.setEffect('animation')\r\n        // \t}\r\n        // })\r\n        AudioManager.getInstance().playSound(SoundList.theRollerStops)\r\n        this.RollerLayOut.children[this.RollerLayOut.children.length - 1].destroy()\r\n    }\r\n\r\n    /**滚动一个格子 */\r\n    private rollWithCell(position: 'up' | 'down') {\r\n        if (this.isRoll) {\r\n            this.RollerLayOut.children.forEach(icon => {\r\n                // icon.setPosition(new Vec3(icon.position.x, icon.position.y - this.rollerData.rollSpeed))\r\n                tween(icon).to(this.rollerData.rollSpeed / 1000, {position: new Vec3(icon.position.x, icon.position.y - ((this.rollerData.intervalHeight + this.rollerData.rollerheight)))}).start()\r\n            })\r\n            window.setTimeout(() => {\r\n                if (this.RollerLayOut.children.length) {\r\n                    // if (this.RollerLayOut.children[0].position.y <= -(this.rollerData.rollerheight + this.rollerData.intervalHeight)) {\r\n                    const deviation = Math.abs(this.RollerLayOut.children[0].position.y) - (this.rollerData.rollerheight + this.rollerData.intervalHeight) //瞬时的纵向误差\r\n                    this.joinIcon()\r\n                    // 这里要注意\r\n                    let _lastJoinIconIndex = this.lastJoinIconIndex + 1\r\n                    if (this.lastJoinIconIndex + 1 >= this.rollerData.data.length) {\r\n                        _lastJoinIconIndex = 0\r\n                    }\r\n                    if (this.endFlag && this.rollerData.showResult.stopIndex - 1 === _lastJoinIconIndex) {\r\n                        this.isRoll = false\r\n                        let count = 0\r\n                        this.RollerLayOut.children.forEach(icon => {\r\n                            tween().target(icon).to(this.rollerData.rollSpeed / 1000 + 0.3, {\r\n                                position: new Vec3(icon.position.x, icon.position.y + deviation - (this.rollerData.rollerheight + this.rollerData.intervalHeight))\r\n                            }, {\r\n                                easing: \"backOut\"//\"elasticOut\"\r\n                            }).call(() => {\r\n                                count++\r\n                                if (count === this.RollerLayOut.children.length) {\r\n                                    this.stopCallBack()\r\n                                }\r\n                            }).start()\r\n                        })\r\n                    }\r\n                    // }\r\n                    const lastChild = this.RollerLayOut.children[this.RollerLayOut.children.length - 1]\r\n                    if (lastChild.position.y <= -(this.rollerData.rollerheight + this.rollerData.intervalHeight) * (this.rollerData.portraitNum + 1)) {\r\n                        lastChild.destroy()\r\n                    }\r\n                    this.rollWithCell(position)\r\n                }\r\n            }, this.rollerData.rollSpeed)\r\n        }\r\n    }\r\n}\r\n\r\n"]}