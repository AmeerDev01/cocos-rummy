{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/bandarQiuQiu/components/BandarQiuQiu_users.ts"],"names":["_decorator","Label","Node","tween","Vec3","Animation","instantiate","Sprite","SpriteFrame","BaseComponent","getNodeByNameDeep","omitStr","gameCacheData","config","global","bundleBanDarQiuQiu","mainGameViewModel","GameType","ccclass","property","BandarQiuQiu_users","propertyNode","props_spr_icon","props_skeleton","props_skeleton_win1","props","usersInfo","newBetData","events","giveGift","value","memberId","num","start","initState","bindEvent","useProps","key","cur","chipTypes","find","v","betAmount","playFlyChipWinAnimation","isUnMount","initUsers","forEach","item","index","initBSUsers","copyWinAnimation","seatNum","removeAllChildren","headLocations","winAnimation","active","setPosition","x","y","addChild","number","node","usersNode","children","name","startsWith","userHead","loadHeadSprite","icon","getComponent","string","gold","formatAmountWithLetter","memberName","i","load","err","sp","spriteFrame","playAddGold","betInfo","winGold","u","startPosition","position","by","call","scheduleOnce","users","play","bindUI","initHeadClick","filter","userIndex","getHeadNodeIndex","on","EventType","TOUCH_END","userInfo","showGiftWindow","BANDAR_QIU_QIU","head","userNode","parseInt","replace","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, tween, Vec3, Animation, instantiate, Sprite, SpriteFrame } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { getNodeByNameDeep, getNodePositionInCanvas, omitStr } from '../../../utils/tool';\r\nimport { BetData, MemberInfoVo, gameCacheData } from '../type';\r\nimport config from '../config';\r\nimport { global } from '../../../hall';\r\nimport { bundleBanDarQiuQiu, mainGameViewModel } from '../index';\r\nimport { GameType } from '../../../common/viewModel/GiftUserViewModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tnewBetData: BetData,\r\n\tusersInfo: MemberInfoVo[],\r\n\t\r\n}\r\nexport interface IEvent {\r\n\tgiveGift: (value: number, memberId: string, num: number) => void\r\n}\r\n\r\n@ccclass('BandarQiuQiu_users')\r\nexport class BandarQiuQiu_users extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\t}\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_spr_icon:new Node(),\r\n\t\tprops_skeleton:new Node(),\r\n\t\tprops_skeleton_win1: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tusersInfo: null,\r\n\t\tnewBetData:null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tgiveGift: (value: number, memberId: string, num: number) => {}\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif(key===\"newBetData\"){\r\n\t\t\tif (!value.cur) { return }\r\n\t\t\t// 下注筹码不存在，不处理\r\n\t\t\tif (!config.chipTypes.find(v => v.value === value.cur.betAmount)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.playFlyChipWinAnimation(value.cur);\r\n\t\t}\r\n\t\t\r\n\t\tif(key===\"usersInfo\"){\r\n\t\t\t// window.setTimeout(() => {\r\n\t\t\t\tif(mainGameViewModel.isUnMount || !value.cur){ return }\r\n\t\t\t\tthis.initUsers()\r\n\t\t\t\tvalue.cur.forEach((item,index)=>{\r\n\t\t\t\t\tthis.initBSUsers(item,item.index)\r\n\t\t\t\t})\r\n\t\t\t// },5000)\r\n\t\t   \r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n\t * 添加win动画效果\r\n\t * @param seatNum 榜上座位号\r\n\t */\r\n    public copyWinAnimation(seatNum:number){\r\n\t\t//    console.log(\"copyWinAnimation\");\r\n\t\tthis.propertyNode.props_skeleton.removeAllChildren()\r\n\t\tlet item = config.headLocations[seatNum]\r\n\t\tlet winAnimation = instantiate(this.propertyNode.props_skeleton_win1);\r\n\t\twinAnimation.active = true;\r\n\t\twinAnimation.setPosition(item.x,item.y);\r\n\r\n\t    this.propertyNode.props_skeleton.addChild(winAnimation);\r\n\t}\r\n\r\n\t/** 初始化榜上用户信息 */\r\n\tpublic initBSUsers(usersInfo:MemberInfoVo,number){\r\n\t\tif (!this.node) { return };\r\n\t\tlet num=number+1\r\n        const usersNode=this.node.children.find( item => item.name.startsWith(\"props_btn_users\"+num));\r\n\t\tconst userHead = this.node.children.find(item => item.name.startsWith(\"spr_user\" + num));\r\n\t\tuserHead.active = true;\r\n\t\tglobal.loadHeadSprite(usersInfo.icon,userHead.getComponent(Sprite));//加载头像\r\n\t\tgetNodeByNameDeep(\"Label_gold\",usersNode).getComponent(Label).string=usersInfo.gold.formatAmountWithLetter();\r\n\t\tgetNodeByNameDeep(\"Label_name\",usersNode).getComponent(Label).string=omitStr(usersInfo.memberName,12);\r\n\t}\r\n\t\r\n\t// public createBSUsers(usersInfo) {\r\n\t// \tif(mainGameViewModel.isUnMount){ return }\r\n\t// \tusersInfo.forEach((item,index)=>{\r\n\t// \t\tthis.initBSUsers(item,item.index)\r\n\t// \t})\r\n\t// }\r\n\t/**初始用户头像 */\r\n\tprivate initUsers() {\r\n\t\tfor (let i = 0; i < 6; i++){\r\n\t\t\tif (this.node) {\r\n\t\t\t   let num=i+1\r\n\t\t\t   const usersNode=this.node.children.find( item => item.name.startsWith(\"props_btn_users\"+num));\r\n\t\t\t\tconst userHead = this.node.children.find(item => item.name.startsWith(\"spr_user\" + num));\r\n\t\t\t\tuserHead.active = false;\r\n\t\t\t   // global.loadHeadSprite(usersInfo.icon,userHead.getComponent(Sprite));//加载头像\r\n\t\t\t   getNodeByNameDeep(\"Label_gold\",usersNode).getComponent(Label).string=\"\";\r\n\t\t\t   getNodeByNameDeep(\"Label_name\",usersNode).getComponent(Label).string=\"\";\r\n\t\t\t   bundleBanDarQiuQiu.load(`img/head1/spriteFrame`, SpriteFrame, (err, sp) => {\r\n\t\t\t\t   if (!err) {\r\n\t\t\t\t\t   userHead.getComponent(Sprite).spriteFrame = sp;\r\n\t\t\t\t   }\r\n\t\t\t   })\r\n\t\t   }\r\n\t\t   \r\n\t   }\r\n\t}\r\n\r\n\t/** 赢钱的动画 +1K */\r\n\tpublic playAddGold(betInfo, winGold:number){\r\n\r\n\t\tlet num = betInfo.index+1\r\n\t\tconst usersNode = this.node.children.find( u => u.name.startsWith(\"props_btn_users\"+num) )\r\n\t\tconst node = getNodeByNameDeep(\"Label_gold_up\", usersNode);\r\n\t\tnode.getComponent(Label).string=\"+\" + betInfo.gold.formatAmountWithLetter()\r\n\t\tif(winGold <= 0) return;\r\n\t\tconst startPosition = new Vec3(node.position.x, node.position.y);\r\n\t\tnode.active = true;\r\n\r\n\t\ttween(node).by(1, { position: new Vec3(0, 30) }).call(() => {\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tnode.active = false;\r\n\t\t\t\tnode.setPosition(startPosition);\r\n\t\t\t}, 0.5);\r\n\t\t}).start();\r\n    }\r\n\r\n\t/**飞金币的动画 */\r\n\tprivate playFlyChipWinAnimation(betInfo){\r\n\r\n\t\tif(betInfo.index > 6 || betInfo.memberId === gameCacheData.memberId){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet num = betInfo.index+1;\r\n\t\tconst usersNode = this.node.children.find( u => u.name.startsWith(\"props_btn_users\"+num) );\r\n\t\tconst users = this.node.children.find( u => u.name.startsWith(\"spr_user\"+num) );\r\n\t\tusersNode.getComponent(Animation).play();\r\n\t\tusers.getComponent(Animation).play();\r\n\t}\r\n\t\r\n\t\r\n\r\n\tprotected bindUI(): void {\r\n\t\tthis.initUsers()\r\n\t\tthis.propertyNode.props_skeleton_win1.active = false;\r\n\t\tthis.initHeadClick();\r\n    }\r\n\r\n\t\r\n\tprivate initHeadClick(){\r\n\t\tthis.node.children.filter(v=>v.name.startsWith(\"props_btn_users\")).forEach(v=>{\r\n\t\t\tconst userIndex = this.getHeadNodeIndex(v);\r\n\t\t\tv.on(Node.EventType.TOUCH_END, ()=>{\r\n\t\t\t\tconst userInfo = this.props.usersInfo.find(v=>v.index === userIndex - 1);\r\n\t\t\t\tuserInfo && userInfo.memberId !== gameCacheData.memberId && global.showGiftWindow(GameType.BANDAR_QIU_QIU, {\r\n\t\t\t\t\tmemberId: userInfo.memberId,\r\n\t\t\t\t\thead: userInfo.icon,\r\n\t\t\t\t\tgold: userInfo.gold,\r\n\t\t\t\t\tname: userInfo.memberName,\r\n\t\t\t\t}, (value: number, memberId: string) => {\r\n\t\t\t\t\tthis.events.giveGift(value, memberId, 0);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getHeadNodeIndex(userNode:Node){\r\n\t\treturn parseInt(userNode.name.replace(\"props_btn_users\", \"\"));\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}