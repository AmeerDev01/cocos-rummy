{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/Crash/game/Crash_BottomActionbarLayer.ts"],"names":["_decorator","EditBox","Label","Node","Toggle","Sprite","Button","Crash_ViewBase","Crash_DataManager","PlayerWagering","Crash_NetMsgDispatcher","global","AudioManager","SoundList","ProtocolCode","lang","addToastAction","ccclass","property","Crash_BottomActionbarLayer","data","Gold","multiple","userinfo","maxGold","timeAccumulator","isGameType1Executed","bettingSituation","crashStageVo","lastValidInput","bettingStatus","start","setBtn_disable","init_Label_Gold","_nodes","on","EventType","TOUCH_END","getInstance","playSound","buttonClick","openShop","CLICK","setGold","subtractMultiple","addMultiple","initMultiple","regCallBack","VIPLEVEL","vipShow","RES_PLAYER_WAGERING","sendChatRsp","event","console","log","gameType","hallDispatch","content","write","k","palyingModule","RechangeGlod","placeStr","myInfo","getUserInfo","tableId","getTableId","memberName","memberId","gold","odds","toFixed","setBettingCondition","setParams","send","CrashBottomFailed","subtract","bind","betting_label","node","callback","getComponent","goldCallback","initHead","bl","args","length","active","name","getChildByName","string","num","Number","formatAmountWithCommas","onDestroy","removeAllProtocolByObj","String","e","regex","test","sprList","getHeadSpriteFrame","headImgUrl","avatarIndex","spr","find","item","spriteFrame","val","target","_name","addGold","COINPARAMETERS","one","two","three","four","five","i","parseInt","subtract_Label_Gold","Math","ceil","flag","isChecked","interactable","switch_Bonus","update","deltaTime","getCrashStageVo"],"mappings":"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","sourcesContent":["import { _decorator, EditBox, Label, log, Node, Toggle, Sprite, Button } from 'cc';\r\nimport { Crash_ViewBase } from \"../BaseView/Crash_ViewBase\";\r\nimport { Crash_DataManager } from \"../manager/Crash_DataManager\";\r\nimport { PlayerWagering } from '../net/protocol/WsProtocol';\r\nimport Crash_NetMsgDispatcher from \"../net/Crash_NetMsgDispatcher\";\r\nimport { global } from '../../../hall';\r\nimport { AudioManager, SoundList } from \"../manager/AudioManager\";\r\nimport { ProtocolCode } from '../net/protocol/ProtocolDef';\r\nimport { lang } from '../../../hall';\r\nimport { addToastAction } from '../../../hall/store/actions/baseBoard';\r\nconst { ccclass, property } = _decorator;\r\n// 金币\r\nconst enum COINPARAMETERS {\r\n    one = 1000,\r\n    two = 5000,\r\n    three = 10000,\r\n    four = 300000,\r\n    five = 1000000,\r\n}\r\n@ccclass('CrashBottomActionbarLayer')\r\nexport class Crash_BottomActionbarLayer extends Crash_ViewBase {\r\n    @property(EditBox)\r\n    betting_label: EditBox = null\r\n    private data = {\r\n        Gold: 1000,\r\n        multiple: 1.01,\r\n    }\r\n    userinfo = null\r\n    maxGold = 0\r\n    timeAccumulator = 0\r\n    isGameType1Executed = true\r\n    bettingSituation = false\r\n    crashStageVo\r\n    lastValidInput = '1.01'\r\n    bettingStatus = true\r\n    start() {\r\n        this.setBtn_disable(true)\r\n        this.init_Label_Gold()\r\n        this._nodes['avatar_buy'].on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        //  点击max\r\n        this._nodes['pledge_max'].on(Button.EventType.CLICK, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            this.setGold(this.maxGold)\r\n        })\r\n        //  点击下划线重置金币\r\n        this._nodes['atur_uiang'].on(Button.EventType.CLICK, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            this.setGold(1000)\r\n        })\r\n        //  点击减注\r\n        this._nodes['betting_down'].on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            this.subtractMultiple()\r\n        })\r\n        //  点击加注\r\n        this._nodes['betting_up'].on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            this.addMultiple()\r\n        })\r\n        //  点击按钮重置倍数\r\n        this._nodes['btn_aturUiang'].on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            this.initMultiple()\r\n        })\r\n        // \r\n        this._nodes['props_btn_shop'].on(Node.EventType.TOUCH_END, () => {\r\n            AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n            global.openShop()\r\n        })\r\n        Crash_NetMsgDispatcher.getInstance().regCallBack(ProtocolCode.VIPLEVEL, this, this.vipShow);\r\n        Crash_NetMsgDispatcher.getInstance().regCallBack(ProtocolCode.RES_PLAYER_WAGERING, this, this.sendChatRsp);\r\n        //  点击玩家下注\r\n        this._nodes['Switch_Bonus'].on(Node.EventType.TOUCH_END, (event) => {\r\n            console.log(!this.bettingSituation, this.crashStageVo?.gameType == 1 , this.data.Gold > 0 , this.bettingStatus);\r\n            \r\n            if (!this.bettingSituation && this.crashStageVo?.gameType == 1 && this.data.Gold > 0 && this.bettingStatus) {\r\n                if(this.data.Gold>this.maxGold){\r\n                    global.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.RechangeGlod, {}, { placeStr: \"金币不足\" }) }))\r\n                }else{\r\n                    this.bettingSituation = true\r\n                    AudioManager.getInstance().playSound(SoundList.buttonClick);\r\n                    let myInfo = Crash_DataManager.getInstance().getUserInfo()\r\n                    // 发送\r\n                    let data = {\r\n                        tableId: Crash_DataManager.getInstance().getUserInfo().getTableId(),\r\n                        // 通过暴露拿到私有变量下的玩家名称\r\n                        memberName: myInfo.getUserInfo().memberName,\r\n                        // 玩家id\r\n                        memberId: myInfo.getUserInfo().memberId,\r\n                        // 下注金币\r\n                        gold: this.data.Gold,\r\n                        // 玩家下注倍数\r\n                        odds: this.data.multiple.toFixed(2),\r\n                    }\r\n                    Crash_DataManager.getInstance().setBettingCondition(true)\r\n                    new PlayerWagering().setParams(data).send(data);\r\n                }\r\n               \r\n            } else {\r\n                global.hallDispatch(addToastAction({ content: lang.write(k => k.palyingModule.CrashBottomFailed, {}, { placeStr: \"下注失败\" }) }))\r\n                this.bettingStatus = true\r\n            }\r\n        })\r\n        // 获取倍数\r\n        this._nodes['btn_one'].on(Node.EventType.TOUCH_END, this.subtract.bind(this))\r\n        this._nodes['btn_two'].on(Node.EventType.TOUCH_END, this.subtract.bind(this))\r\n        this._nodes['btn_three'].on(Node.EventType.TOUCH_END, this.subtract.bind(this))\r\n        this._nodes['btn_four'].on(Node.EventType.TOUCH_END, this.subtract.bind(this))\r\n        this._nodes['btn_five'].on(Node.EventType.TOUCH_END, this.subtract.bind(this))\r\n        this.betting_label.node.on('editing-did-ended', this.callback, this);\r\n        this._nodes['max_gold'].getComponent(EditBox).node.on('editing-did-ended', this.goldCallback, this);\r\n        this.initHead()\r\n    }\r\n    vipShow(bl, data, args) {\r\n        if (bl) {\r\n            let node: Node = this._nodes['props_layout_lock']\r\n            if (data.data.length > 0) {\r\n                node.active = true\r\n                if (data.data[0].name == \"vip\") {\r\n                    node.getChildByName('props_tips_vip').active = true\r\n                    node.getChildByName('props_tips_gold').active = false\r\n                    node.getChildByName('props_tips_vip').getChildByName('Label_lock_num').getComponent(Label).string = data.data[0].num\r\n                }\r\n                if (data.data[0].name == \"gold\") {\r\n                    node.getChildByName('props_tips_gold').active = true\r\n                    node.getChildByName('props_tips_vip').active = false\r\n                    node.getChildByName('props_tips_gold').getChildByName('Label_lock_num').getComponent(Label).string = Number(data.data[0].num).formatAmountWithCommas()\r\n                }\r\n            } else {\r\n                node.active = false\r\n            }\r\n        }\r\n    }\r\n    protected onDestroy() {\r\n        super.onDestroy();\r\n        Crash_NetMsgDispatcher.getInstance().removeAllProtocolByObj(this);\r\n    }\r\n    // 下注返回\r\n    sendChatRsp(bl, data, args) {\r\n        if (bl) {\r\n            this.setBtn_disable(true)\r\n            let node: Node = this._nodes['Switch_Bonus']\r\n            node.getChildByName('icon').active = true\r\n            node.getChildByName('label').active = true\r\n            node.getChildByName('label').getComponent(Label).string =this.data.Gold>=1000? this.data.Gold.formatAmountWithCommas():String(this.data.Gold)\r\n            this.userinfo.gold -= this.data.Gold\r\n            Crash_DataManager.getInstance().getUserInfo().setGold(this.userinfo.gold)\r\n            this.initHead()\r\n        }\r\n    }\r\n    goldCallback(e){\r\n        const regex = /^(\\d*[1-9]\\d00|[1-9]00)$/;\r\n        if(regex.test(e.string)){\r\n            console.log(this.maxGold);\r\n            if(Number(e.string) >= this.maxGold){\r\n                this.data.Gold=this.maxGold\r\n                e.string=this.data.Gold\r\n            }else{\r\n                this.data.Gold=e.string\r\n            }\r\n        }else{\r\n            e.string=this.data.Gold\r\n        }\r\n    }\r\n    callback(e) {\r\n        const regex = /^(\\d{1,3}(\\.\\d{1,2})?|999(\\.00)?)$/;\r\n        if (regex.test(e.string) && Number(e.string) >= 1.01) {\r\n            this.data.multiple = Number(e.string);\r\n            this.lastValidInput = e.string; // 更新最后一个有效输入\r\n            this.bettingStatus = true\r\n        } else {\r\n            if(Number(e.string)>999.99){\r\n                this.betting_label.string='999.99'\r\n            }else{\r\n                this.bettingStatus = false\r\n                this.betting_label.string = this.lastValidInput; // 重置为最后一个有效输入\r\n            }\r\n        }\r\n    }\r\n    /*渲染头像*/\r\n    initHead() {\r\n        this.userinfo = Crash_DataManager.getInstance().getUserInfo() && Crash_DataManager.getInstance().getUserInfo().getUserInfo();\r\n        if (!this.userinfo) return;\r\n        this._nodes['avatar_name'].getComponent(Label).string = this.userinfo.memberName\r\n        this._nodes['avatar_number'].getComponent(Label).string = this.userinfo.gold.formatAmountWithCommas()\r\n        this.maxGold = this.userinfo.gold\r\n        let sprList = Crash_DataManager.getInstance().getHeadSpriteFrame()\r\n        let headImgUrl = `head_circle_${this.userinfo.avatarIndex}`\r\n        let spr = sprList.find((item: any) => {\r\n            return item.name == headImgUrl\r\n        })\r\n        this._nodes['img_avatar'].getComponent(Sprite).spriteFrame = spr\r\n    }\r\n    // 点击获取相应倍数值\r\n    subtract(val) {\r\n        switch (val.target._name) {\r\n            case 'btn_one':\r\n                this.addGold(COINPARAMETERS.one)\r\n                break;\r\n            case 'btn_two':\r\n                this.addGold(COINPARAMETERS.two)\r\n                break;\r\n            case 'btn_three':\r\n                this.addGold(COINPARAMETERS.three)\r\n                break;\r\n            case 'btn_four':\r\n                this.addGold(COINPARAMETERS.four)\r\n                break;\r\n            case 'btn_five':\r\n                this.addGold(COINPARAMETERS.five)\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 重置金币\r\n    setGold(i: number) {\r\n        this.data.Gold = parseInt(String(i))\r\n        this.init_Label_Gold()\r\n    }\r\n    //  金币累加\r\n    addGold(i: number) {\r\n        if (this.data.Gold + i > this.maxGold) {\r\n            this.data.Gold = parseInt(String(this.maxGold))\r\n        } else {\r\n            this.data.Gold = parseInt(String(this.data.Gold + i))\r\n        }\r\n        this.init_Label_Gold()\r\n    }\r\n    // 获取倍数框组件\r\n    init_Label_Gold() {\r\n        this._nodes['max_gold'].getComponent(EditBox).string = this.data.Gold\r\n    }\r\n    // 渲染加减倍数框\r\n    subtract_Label_Gold() {\r\n        this.betting_label.string = this.data.multiple.toFixed(2)\r\n    }\r\n    // getEditBox(e) {\r\n    //     debugger\r\n    //     const decimalRegex = /^\\d+(\\.\\d{1,2})?$/;\r\n    //     if (decimalRegex.test(e)) {\r\n    //         if (Number(e) >= 999.99) {\r\n    //             this.data.multiple = 999.99\r\n    //             this.subtract_Label_Gold()\r\n    //         }\r\n    //         if (Number(e) <= 1.01) {\r\n    //             this.initMultiple()\r\n    //         }\r\n    //         this.data.multiple = Number(e)\r\n    //     }\r\n    //     else {\r\n    //         this.initMultiple()\r\n    //     }\r\n\r\n    // }\r\n    //减 倍速\r\n    subtractMultiple() {\r\n        if (this.data.multiple <= 1.01) {\r\n            this.initMultiple()\r\n        } else {\r\n            if (this.data.multiple > 5) {\r\n                this.data.multiple = Number((this.data.multiple - 1).toFixed(2));\r\n            }\r\n            else if (this.data.multiple > 2) {\r\n                this.data.multiple = Number((this.data.multiple - 0.5).toFixed(2));\r\n            }\r\n            else {\r\n                this.data.multiple = Number((this.data.multiple - 0.2).toFixed(2));\r\n            }\r\n            if(this.data.multiple < 1.01){\r\n                this.data.multiple=1.01\r\n            }\r\n        }\r\n        this.subtract_Label_Gold()\r\n    }\r\n    //加倍速\r\n    addMultiple() {\r\n        if (this.data.multiple >= 999.99) {\r\n            this.data.multiple = 999.99\r\n        } else {\r\n            if (Math.ceil(this.data.multiple * 1000) / 1000 < 2) {\r\n                this.data.multiple += 0.2\r\n            } else if (Math.ceil(this.data.multiple * 1000) / 1000 > 5) {\r\n                this.data.multiple += 1\r\n            }\r\n            else {\r\n                this.data.multiple += 0.5\r\n            }\r\n            if(this.data.multiple > 999.99){\r\n                this.data.multiple=999.99\r\n            }\r\n        }\r\n        this.subtract_Label_Gold()\r\n    }\r\n    initMultiple() {\r\n        this.data.multiple = 1.01\r\n        this.subtract_Label_Gold()\r\n        this.bettingStatus = true\r\n    }\r\n    setBtn_disable(flag) {\r\n        this._nodes['btn_one'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['btn_two'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['btn_three'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['btn_four'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['btn_five'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['betting_up'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['betting_down'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['btn_aturUiang'].getComponent(Toggle).isChecked = flag\r\n        this._nodes['atur_uiang'].getComponent(Button).interactable = !flag\r\n        this._nodes['pledge_max'].getComponent(Button).interactable = !flag\r\n        this._nodes['Switch_Bonus'].getComponent(Toggle).isChecked = flag\r\n        if (!flag) {\r\n            let switch_Bonus: Node = this._nodes['Switch_Bonus']\r\n            switch_Bonus.getChildByName('icon').active = false\r\n            switch_Bonus.getChildByName('label').active = false\r\n        }\r\n    }\r\n    update(deltaTime: number) {\r\n        this.crashStageVo = Crash_DataManager.getInstance().getCrashStageVo()\r\n        if (!this.crashStageVo) return;\r\n        if (this.crashStageVo.gameType !== 1) {\r\n            this.isGameType1Executed = true\r\n            this.bettingSituation = false\r\n            this.setBtn_disable(true)\r\n        } else if (this.crashStageVo.gameType === 1 && this.isGameType1Executed) {\r\n            this.isGameType1Executed = false\r\n            this.setBtn_disable(false)\r\n        }else if(this.crashStageVo.gameType !== 3){\r\n           \r\n        }\r\n        this.timeAccumulator += deltaTime;\r\n        if (this.timeAccumulator >= 1) {\r\n            this.timeAccumulator = 0;\r\n            this.initHead();\r\n        }\r\n    }\r\n}\r\n"]}