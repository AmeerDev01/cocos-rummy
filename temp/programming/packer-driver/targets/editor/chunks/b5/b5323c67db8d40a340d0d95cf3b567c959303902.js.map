{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/common/bridge.ts"],"names":["native","NATIVE","UseSetOption","getUUID","BridgeCode","EventChannel","EventType","WebEventType","sendNativeVibrate","milliseconds","Instance","option","vibration","bridge","sendToNative","VIBRATE","loginEvents","uid","loginAppsflyerEvents","loginAdjustEvents","callAndroid","LOGIN","facebookWebEveht","data","type","APPS_FLYER","name","value","eventParams","push","IN_APP_EVENTS","JSON","stringify","ADJUST","registerAppsflyerEvents","pwd","registerAdjustEvents","REGISTER","purchaseAppsflyerEvents","revenue","currency","first","toUpperCase","Number","purchaseAdjustEvents","FIRST_PURCHASE","PURCHASE","pullPurchaseEvents","pullPurchaseAppsflyerEvents","pullPurchaseAdjustEvents","FIRST_PULL_PURCHASE","PULL_PURCHASE","sendAppsflyerEvents","sendFacebookEvents","FACEBOOK","getDeviceUniqueId","UNIQUE_ID","getAppVersionName","APP_VERSION","getPackageName","reflection","callStaticMethod","getFirebaseToken","nativeDownloadApk","url","titleStr","contentStr","installApk","apkPath","getRedirectUrl","apkUrl","hideNativeSplash","eventToken","Android","adjustEvent","console","log","values","fbq"],"mappings":"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","sourcesContent":["import { native } from \"cc\";\r\nimport { NATIVE } from \"cc/env\";\r\nimport UseSetOption from \"../utils/UseSetOption\";\r\nimport { getUUID } from \"../utils/tool\";\r\n\r\nexport enum BridgeCode {\r\n    /**复制剪切板 */\r\n    COPY_CLIPBOARD = 'copyclipboard',\r\n    /**应用内事件（埋点） */\r\n    IN_APP_EVENTS = 'inAppEvents',\r\n    /**震动 */\r\n    VIBRATE = \"VIBRATE\",\r\n    /**获得设备唯一id */\r\n    UNIQUE_ID = \"UNIQUE_ID\",\r\n    /**APP的版本号码 */\r\n    APP_VERSION = \"APP_VERSION\",\r\n    /**下载apk返回 */\r\n    DOWNLOAD_APK = \"downloadApk\",\r\n}\r\n\r\nexport enum EventChannel {\r\n    APPS_FLYER = 'appsflyer',\r\n    FACEBOOK = 'facebook',\r\n    ADJUST = 'adjust',\r\n}\r\n\r\nexport enum EventType {\r\n    PRICE = \"af_price\",\r\n}\r\n\r\nexport enum WebEventType {\r\n    REGISTER = 1,\r\n    LOGIN = 2,\r\n    FIRST_PURCHASE = 3,\r\n    PURCHASE = 4,\r\n    FIRST_PULL_PURCHASE = 5,\r\n    PULL_PURCHASE = 6,\r\n}\r\n\r\nexport type EventData = {\r\n    /** appsflyer | facebook */\r\n    type: string,\r\n    name: string,\r\n    value: any,\r\n    eventParams?: EventData[]\r\n}\r\n\r\n/**\r\n * 发送震动\r\n * @param milliseconds 震动时长 单位/毫秒\r\n */\r\nexport const sendNativeVibrate = (milliseconds: number) => {\r\n    if (!UseSetOption.Instance().option.vibration) return\r\n    if (milliseconds > 0 && NATIVE) {\r\n        native.bridge.sendToNative(BridgeCode.VIBRATE, milliseconds + \"\");\r\n    }\r\n}\r\n\r\n/**发送登录埋点事件 */\r\nexport const loginEvents = (uid: string) => {\r\n    if (NATIVE) {\r\n        loginAppsflyerEvents(uid);\r\n        loginAdjustEvents(uid);\r\n    } else {\r\n        callAndroid(WebEventType.LOGIN, '');\r\n        facebookWebEveht(WebEventType.LOGIN, uid);\r\n    }\r\n}\r\n\r\nconst loginAppsflyerEvents = (uid: string) => {\r\n    const data: EventData = {\r\n        type: EventChannel.APPS_FLYER,\r\n        name: 'af_login',\r\n        value: '',\r\n        eventParams: [],\r\n    }\r\n\r\n    data.eventParams.push({\r\n        type: EventChannel.APPS_FLYER,\r\n        name: 'af_customer_user_id',\r\n        value: uid\r\n    })\r\n\r\n    native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n}\r\nconst loginAdjustEvents = (uid: string) => {\r\n    const data: EventData = {\r\n        type: EventChannel.ADJUST,\r\n        name: 'login',\r\n        value: 'qzo3bf', //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的\r\n        eventParams: [],\r\n    }\r\n    // data.eventParams.push({\r\n    //     name: 'productId',\r\n    //     value: uid,\r\n    //     type: '',\r\n    // })\r\n\r\n    native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n}\r\n\r\n/**\r\n * 注册\r\n * @param uid 账号id\r\n * @param pwd 密码\r\n */\r\nexport const registerAppsflyerEvents = (uid: string, pwd: string) => {\r\n    if (NATIVE) {\r\n        const data: EventData = {\r\n            type: EventChannel.APPS_FLYER,\r\n            // name: 'register',\r\n            name: 'af_complete_registration',\r\n            value: '',\r\n            eventParams: [],\r\n        }\r\n\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_param_1',\r\n            value: 'af_complete_registration'\r\n        })\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_param_2',\r\n            value: uid\r\n        })\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_param_3',\r\n            value: pwd\r\n        })\r\n\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n        // adjust注册事件\r\n        registerAdjustEvents(uid, pwd);\r\n    } else {\r\n        callAndroid(WebEventType.REGISTER, '');\r\n        facebookWebEveht(WebEventType.REGISTER, uid);\r\n    }\r\n}\r\n\r\nexport const registerAdjustEvents = (uid: string, pwd: string) => {\r\n    if (NATIVE) {\r\n        const data: EventData = {\r\n            type: EventChannel.ADJUST,\r\n            name: 'register',\r\n            value: 'sc7bef', //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的\r\n            eventParams: [],\r\n        }\r\n        // data.eventParams.push({\r\n        //     name: 'productId',\r\n        //     value: uid,\r\n        //     type: '',\r\n        // })\r\n        // data.eventParams.push({\r\n        //     name: 'pwd',\r\n        //     value: pwd,\r\n        //     type: '',\r\n        // })\r\n\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n    }\r\n}\r\n\r\n/**\r\n * 充值成功发送事件\r\n * @param revenue 充值金额\r\n * @param currency 货币类型\r\n * @param first 是否首次\r\n */\r\nexport const purchaseAppsflyerEvents = (revenue: string, currency: string, first: boolean) => {\r\n    currency && (currency = currency.toUpperCase());\r\n    if (NATIVE && Number(revenue) > 0) {\r\n        const data: EventData = {\r\n            type: EventChannel.APPS_FLYER,\r\n            // name: 'purchase',\r\n            name: first ? 'af_purchase' : 'af_purchase_success',\r\n            value: '',\r\n            eventParams: [],\r\n        }\r\n\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_param_1',\r\n            value: first ? 'af_purchase' : 'af_purchase_success'\r\n        })\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_revenue',\r\n            value: revenue\r\n        })\r\n        data.eventParams.push({\r\n            type: EventChannel.APPS_FLYER,\r\n            name: 'af_currency',\r\n            value: currency\r\n        })\r\n\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n        //adjust充值事件\r\n        purchaseAdjustEvents(revenue, currency, first);\r\n    } else {\r\n        callAndroid(first ? WebEventType.FIRST_PURCHASE : WebEventType.PURCHASE, '');\r\n        facebookWebEveht(first ? WebEventType.FIRST_PURCHASE : WebEventType.PURCHASE, revenue, currency);\r\n    }\r\n}\r\n\r\n/**充值成功发送事件 */\r\nexport const purchaseAdjustEvents = (revenue: string, currency: string, first: boolean) => {\r\n    if (NATIVE && Number(revenue) > 0) {\r\n        const data: EventData = {\r\n            type: EventChannel.ADJUST,\r\n            name: first ? 'first-purchase' : 'purchase',\r\n            value: first ? 'jv5em7' : 'am05m5',//adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的\r\n            eventParams: [],\r\n        }\r\n\r\n        data.eventParams.push({\r\n            name: 'revenue',\r\n            value: revenue,\r\n            type: currency,\r\n        })\r\n        data.eventParams.push({\r\n            name: 'orderId',\r\n            value: getUUID(),\r\n            type: '',\r\n        })\r\n\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n    }\r\n}\r\n\r\n/**拉取充值事件 */\r\nexport const pullPurchaseEvents = (revenue: string, currency: string, first: boolean) => {\r\n    if (NATIVE && Number(revenue) > 0) {\r\n        pullPurchaseAppsflyerEvents(revenue, currency, first);\r\n        pullPurchaseAdjustEvents(revenue, currency, first);\r\n    } else {\r\n        callAndroid(first ? WebEventType.FIRST_PULL_PURCHASE : WebEventType.PULL_PURCHASE, '');\r\n        facebookWebEveht(first ? WebEventType.FIRST_PULL_PURCHASE : WebEventType.PULL_PURCHASE, revenue, currency);\r\n    }\r\n}\r\n\r\n/**appsflyer拉取充值事件 */\r\nconst pullPurchaseAppsflyerEvents = (revenue: string, currency: string, first: boolean) => {\r\n    const data: EventData = {\r\n        type: EventChannel.APPS_FLYER,\r\n        // name: 'purchase',\r\n        name: first ? 'af_initiated_checkout' : 'af_initiated_checkout_success',\r\n        value: '',\r\n        eventParams: [],\r\n    }\r\n\r\n    data.eventParams.push({\r\n        type: EventChannel.APPS_FLYER,\r\n        name: 'af_param_1',\r\n        value: first ? 'af_initiated_checkout' : 'af_initiated_checkout_success'\r\n    })\r\n    data.eventParams.push({\r\n        type: EventChannel.APPS_FLYER,\r\n        name: 'af_revenue',\r\n        value: revenue\r\n    })\r\n    data.eventParams.push({\r\n        type: EventChannel.APPS_FLYER,\r\n        name: 'af_currency',\r\n        value: currency\r\n    })\r\n\r\n    native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n}\r\n\r\n/**\r\n * adjust 拉取充值事件\r\n * @param revenue \r\n * @param currency \r\n * @param first \r\n */\r\nconst pullPurchaseAdjustEvents = (revenue: string, currency: string, first: boolean) => {\r\n    if (NATIVE && Number(revenue) > 0) {\r\n        const data: EventData = {\r\n            type: EventChannel.ADJUST,\r\n            name: first ? 'first-pull-purchase' : 'pull-purchase',\r\n            value: first ? 't9am42' : '45qr0q',//adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的\r\n            eventParams: [],\r\n        }\r\n\r\n        data.eventParams.push({\r\n            name: 'revenue',\r\n            value: revenue,\r\n            type: currency,\r\n        })\r\n        data.eventParams.push({\r\n            name: 'orderId',\r\n            value: getUUID(),\r\n            type: '',\r\n        })\r\n\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n    }\r\n}\r\n\r\n/**\r\n * 发送应用内事件\r\n * @param eventType \r\n * @param value \r\n */\r\nexport const sendAppsflyerEvents = (name: string, value: any) => {\r\n    if (NATIVE) {\r\n        const data: EventData = {\r\n            type: EventChannel.APPS_FLYER,\r\n            name: name,\r\n            value: value,\r\n        }\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n    }\r\n}\r\n\r\nexport const sendFacebookEvents = (name: string, value: any) => {\r\n    if (NATIVE) {\r\n        const data: EventData = {\r\n            type: EventChannel.FACEBOOK,\r\n            name: name,\r\n            value: value,\r\n        }\r\n        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));\r\n    }\r\n}\r\n\r\n/**\r\n * 获得设备唯一id\r\n */\r\nexport const getDeviceUniqueId = () => {\r\n    if (NATIVE) {\r\n        native.bridge.sendToNative(BridgeCode.UNIQUE_ID, '');\r\n    }\r\n}\r\n\r\n/**\r\n * 获得设备唯一id\r\n */\r\nexport const getAppVersionName = () => {\r\n    if (NATIVE) {\r\n        native.bridge.sendToNative(BridgeCode.APP_VERSION, '');\r\n    }\r\n}\r\n\r\nexport const getPackageName = () => {\r\n    if (NATIVE) {\r\n        return native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'getPackageCode', '()Ljava/lang/String;')\r\n    }\r\n    return 'web';\r\n}\r\n\r\n/**获得firebase通知令牌 */\r\nexport const getFirebaseToken = () => {\r\n    if (NATIVE) {\r\n        return native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'getFirebaseToken', '()Ljava/lang/String;')\r\n    }\r\n    return '';\r\n}\r\n\r\nexport const nativeDownloadApk = (url, titleStr, contentStr) => {\r\n    if (NATIVE) {\r\n        native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'downloadApk',\r\n            '(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;', url, titleStr, contentStr)\r\n    }\r\n}\r\n\r\nexport const installApk = (apkPath: string) => {\r\n    if (NATIVE) {\r\n        native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'installApk',\r\n            '(Ljava/lang/String;)V', apkPath);\r\n    }\r\n}\r\n\r\nexport const getRedirectUrl = (apkUrl: string) => {\r\n    if (NATIVE) {\r\n        return native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'getRedirectUrl',\r\n            '(Ljava/lang/String;)Ljava/lang/String;', apkUrl);\r\n    }\r\n}\r\n\r\nexport const hideNativeSplash = () => {\r\n    if (NATIVE) {\r\n        native.reflection.callStaticMethod(\"com.cocos.game.AppActivity\", 'hideSplash',\r\n            '()V')\r\n    }\r\n}\r\n\r\nexport const callAndroid = (type, eventToken) => {\r\n    if (NATIVE) {\r\n        return;\r\n    }\r\n    if (typeof Android !== 'undefined' && Android !== null) {\r\n        Android.adjustEvent(type, eventToken);\r\n        // document.getElementById(\"ddd\").innerHTML = '执行成功，类型：' + type;\r\n        console.log('执行成功，类型：' + type);\r\n    } else {\r\n        // document.getElementById(\"ddd\").innerHTML = \"Android界面不可用\";\r\n        console.log('Android界面不可用');\r\n    }\r\n}\r\n\r\n/**\r\n * facebook Web事件发送\r\n * @param type \r\n * @param values \r\n * @returns \r\n */\r\nexport const facebookWebEveht = (type, ...values) => {\r\n    if (NATIVE) {\r\n        return;\r\n    }\r\n\r\n    if (typeof fbq !== 'undefined' && fbq !== null) {\r\n        if (type === WebEventType.REGISTER) {\r\n            fbq('track', 'CompleteRegistration');\r\n        } else if (type === WebEventType.LOGIN) {\r\n            fbq('track', 'Login');\r\n        } else if (type === WebEventType.FIRST_PURCHASE) {\r\n            fbq('track', 'Purchase', { currency: values[1], value: values[0] });\r\n        } else if (type === WebEventType.PURCHASE) {\r\n            fbq('track', 'Purchase_success', { currency: values[1], value: values[0] });\r\n        } else if (type === WebEventType.FIRST_PULL_PURCHASE) {\r\n            fbq('track', 'InitiateCheckout', { currency: values[1], value: values[0] });\r\n        } else if (type === WebEventType.PULL_PURCHASE) {\r\n            fbq('track', 'InitiateCheckout_success', { currency: values[1], value: values[0] });\r\n        }\r\n        // document.getElementById(\"ddd\").innerHTML = '执行成功，类型：' + type;\r\n        console.log('fbq 执行成功，类型：' + type);\r\n    } else {\r\n        // document.getElementById(\"ddd\").innerHTML = \"Android界面不可用\";\r\n        console.log('fbq facebook不可用');\r\n    }\r\n}"]}