{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/utils/tool.ts"],"names":["hasDoubleByteChar","str","regex","test","tween","Node","view","ToggleContainer","Vec3","assetManager","SpriteFrame","Texture2D","log","UITransform","Fingerprint2","circularDeepEqual","strictShallowEqual","createCopier","EffectType","bindClickEvent","node","effectType","SCALE","handler","on","EventType","TOUCH_START","to","position","getPosition","x","y","start","TOUCH_END","call","getRootPosition","totalX","totalY","parent","name","getUrlParams","reg","RegExp","r","window","location","search","substring","match","unescape","getNodeByNameDeep","nodeName","parentNode","l","children","length","i","res","setByScreenScale","target","resSize","getDesignResolutionSize","resRatio","width","height","curSize","getFrameSize","result","setScale","initToggle","thisNode","eventHandler","CompStr","handerStr","subContainer","getComponent","component","checkEvents","push","setCookie","value","expirationDays","expirationDate","Date","setDate","getDate","cookieValue","encodeURIComponent","toUTCString","document","cookie","getCookie","cookieStr","cookies","split","cookieName","decodeURIComponent","maskBankCardNumber","cardNumber","visibleDigits","isExposeLength","maskedChar","trimmedNumber","replace","firstVisiblePart","slice","lastVisiblePart","maskedPartLength","maskedPart","repeat","maskedCardNumber","getNodePositionInCanvas","t_x","t_y","loadRemoteImage","url","Promise","resolve","reject","loadRemote","err","data","spriteFrame","texture","image","getGoldShorten","gold","formatAmountWithLetter","formatNumber","formatAmountWithCommas","omitStr","singleByteLength","count","charAt","newValue","arrowDisplay","scrollView","left","right","diff","setEvent","scrollViewWidth","contentWidth","content","scrollDistance","active","Math","abs","generateUniqueId","reslove","options","excludes","touchSupport","getV18","getUUID","c","random","v","toString","copy","Object","prototype","copyShallow","array","object","deepCopy","obj","Array","isArray","map","newObj","key","hasOwnProperty","equalValue","target1","target2","isDeep","type1","type2","putChatShieldingUser","memberId","json","localStorage","getItem","values","JSON","parse","find","setItem","stringify","removeChatShieldingUser","filter","isChatShieldingUser"],"mappings":";;;;;AAoNA,WAASA,iBAAT,CAA2BC,GAA3B,EAAiD;AAC/C,UAAMC,KAAK,GAAG,iBAAd;AACA,WAAOA,KAAK,CAACC,IAAN,CAAWF,GAAX,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;AAvNQG,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAA2BC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,e,OAAAA,e;AAA+BC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Y,OAAAA,Y;AAA0BC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAeC,MAAAA,G,OAAAA,G;AAA8BC,MAAAA,W,OAAAA,W;;AACnKC,MAAAA,Y;;AAEEC,MAAAA,iB,iBAAAA,iB;AAAmBC,MAAAA,kB,iBAAAA,kB;;AACnBC,MAAAA,Y,iBAAAA,Y;;;;;;;;;4BAEGC,U,0BAAAA,U;AAAAA,QAAAA,U;eAAAA,U;;;gCAICC,c,GAAiB,CAACC,IAAD,EAAaC,UAAsB,GAAGH,UAAU,CAACI,KAAjD,EAAwDC,OAAxD,KAAiF;AAC7GH,QAAAA,IAAI,CAACI,EAAL,CAAQnB,IAAI,CAACoB,SAAL,CAAeC,WAAvB,EAAoC,MAAM;AACxCtB,UAAAA,KAAK,CAACgB,IAAD,CAAL,CAAYO,EAAZ,CAAe,GAAf,EAAoB;AAAEC,YAAAA,QAAQ,EAAE,IAAIpB,IAAJ,CAASY,IAAI,CAACS,WAAL,GAAmBC,CAA5B,EAA+BV,IAAI,CAACS,WAAL,GAAmBE,CAAnB,GAAuB,CAAtD;AAAZ,WAApB,EAA4FC,KAA5F;AACD,SAFD;AAGAZ,QAAAA,IAAI,CAACI,EAAL,CAAQnB,IAAI,CAACoB,SAAL,CAAeQ,SAAvB,EAAkC,MAAM;AACtC7B,UAAAA,KAAK,CAACgB,IAAD,CAAL,CAAYO,EAAZ,CAAe,GAAf,EAAoB;AAAEC,YAAAA,QAAQ,EAAE,IAAIpB,IAAJ,CAASY,IAAI,CAACS,WAAL,GAAmBC,CAA5B,EAA+BV,IAAI,CAACS,WAAL,GAAmBE,CAAnB,GAAuB,CAAtD;AAAZ,WAApB,EAA4FG,IAA5F,CAAiG,MAAM;AACrGX,YAAAA,OAAO,IAAIA,OAAO,EAAlB;AACD,WAFD,EAEGS,KAFH;AAGD,SAJD;AAKD,O;;iCAEYG,e,GAAkB,CAACf,IAAD,EAAagB,MAAb,EAA8BC,MAA9B,KAA6D;AAC1F,YAAIjB,IAAI,CAACkB,MAAL,CAAYC,IAAZ,KAAqB,QAAzB,EAAmC;AACjC,iBAAO,IAAI/B,IAAJ,CAAS4B,MAAT,EAAiBC,MAAjB,EAAyB,CAAzB,CAAP;AACD,SAFD,MAEO;AACL,gBAAMP,CAAC,GAAGV,IAAI,CAACQ,QAAL,CAAcE,CAAd,GAAkBV,IAAI,CAACkB,MAAL,CAAYV,QAAZ,CAAqBE,CAAjD;AACA,gBAAMC,CAAC,GAAGX,IAAI,CAACQ,QAAL,CAAcG,CAAd,GAAkBX,IAAI,CAACkB,MAAL,CAAYV,QAAZ,CAAqBG,CAAjD;AACA,iBAAOI,eAAe,CAACf,IAAI,CAACkB,MAAN,EAAcR,CAAd,EAAiBC,CAAjB,CAAtB;AACD;AACF,O;;8BAEYS,Y,GAAgBD,IAAD,IAAkB;AAC5C,YAAIE,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAAUH,IAAV,GAAiB,eAA5B,EAA6C,GAA7C,CAAV;AACA,YAAII,CAAC,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,SAAvB,CAAiC,CAAjC,EAAoCC,KAApC,CAA0CP,GAA1C,CAAR;;AACA,YAAIE,CAAC,IAAI,IAAT,EAAe;AACb,iBAAOM,QAAQ,CAACN,CAAC,CAAC,CAAD,CAAF,CAAf;AACD;;AACD,eAAO,IAAP;AACD,O;AAED;;;mCACaO,iB,GAAoB,CAACC,QAAD,EAAmBC,UAAnB,KAA0D;AACzF,YAAIA,UAAU,CAACb,IAAX,KAAoBY,QAAxB,EAAkC;AAChC,iBAAOC,UAAP;AACD,SAFD,MAEO;AACL,gBAAMC,CAAC,GAAGD,UAAU,CAACE,QAAX,CAAoBC,MAA9B;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,CAApB,EAAuBG,CAAC,EAAxB,EAA4B;AAC1B,gBAAIJ,UAAU,CAACE,QAAX,CAAoBE,CAApB,EAAuBjB,IAAvB,KAAgCY,QAApC,EAA8C;AAC5C,qBAAOC,UAAU,CAACE,QAAX,CAAoBE,CAApB,CAAP;AACD,aAFD,MAEO;AACL;AACA;AACA;AACA,oBAAMC,GAAG,GAAGP,iBAAiB,CAACC,QAAD,EAAWC,UAAU,CAACE,QAAX,CAAoBE,CAApB,CAAX,CAA7B;;AACA,kBAAIC,GAAJ,EAAS;AACP,uBAAOA,GAAP;AACD;AACF;AACF;AAEF;AACF,O;;kCAEYC,gB,GAAoBC,MAAD,IAAmB;AACjD;AACA,cAAMC,OAAO,GAAGtD,IAAI,CAACuD,uBAAL,EAAhB;AACA,cAAMC,QAAQ,GAAGF,OAAO,CAACG,KAAR,GAAgBH,OAAO,CAACI,MAAzC;AACA,cAAMC,OAAO,GAAG3D,IAAI,CAAC4D,YAAL,GAAoBH,KAApB,GAA4BzD,IAAI,CAAC4D,YAAL,GAAoBF,MAAhE;AACA,cAAMG,MAAM,GAAGL,QAAQ,GAAGG,OAA1B,CALiD,CAMjD;;AACAN,QAAAA,MAAM,IAAIA,MAAM,CAACS,QAAP,CAAgB,GAAhB,EAAqB,GAArB,CAAV;AACA,eAAOD,MAAP;AACD,O;;4BAEYE,U,GAAa,CAACV,MAAD,EAAeW,QAAf,EAA+BC,YAA/B,EAA2DC,OAA3D,EAA4EC,SAA5E,KAAkG;AAC1H,cAAMC,YAAY,GAAGf,MAAM,CAACgB,YAAP,CAAoBpE,eAApB,CAArB,CAD0H,CAE1H;;AACAgE,QAAAA,YAAY,CAACZ,MAAb,GAAsBW,QAAtB;AACAC,QAAAA,YAAY,CAACK,SAAb,GAAyBJ,OAAzB;AACAD,QAAAA,YAAY,CAAChD,OAAb,GAAuBkD,SAAvB;AACAC,QAAAA,YAAY,CAACG,WAAb,CAAyBC,IAAzB,CAA8BP,YAA9B;AACA,eAAOG,YAAP;AACD,O;;2BAEYK,S,GAAY,CAACxC,IAAD,EAAeyC,KAAf,EAA8BC,cAA9B,KAAyD;AAChF,cAAMC,cAAc,GAAG,IAAIC,IAAJ,EAAvB;AACAD,QAAAA,cAAc,CAACE,OAAf,CAAuBF,cAAc,CAACG,OAAf,KAA2BJ,cAAlD;AACA,cAAMK,WAAW,GAAGC,kBAAkB,CAACP,KAAD,CAAlB,GAA4B,YAA5B,GAA2CE,cAAc,CAACM,WAAf,EAA/D;AACAC,QAAAA,QAAQ,CAACC,MAAT,GAAkBnD,IAAI,GAAG,GAAP,GAAa+C,WAAb,GAA2B,UAA7C;AACD,O;;2BAEYK,S,GAAapD,IAAD,IAAiC;AACxD,cAAMqD,SAAS,GAAGH,QAAQ,CAACC,MAA3B;AACA,cAAMG,OAAO,GAAGD,SAAS,CAACE,KAAV,CAAgB,IAAhB,CAAhB;;AACA,aAAK,MAAMJ,MAAX,IAAqBG,OAArB,EAA8B;AAC5B,gBAAM,CAACE,UAAD,EAAaT,WAAb,IAA4BI,MAAM,CAACI,KAAP,CAAa,GAAb,CAAlC;;AACA,cAAIE,kBAAkB,CAACD,UAAD,CAAlB,KAAmCxD,IAAvC,EAA6C;AAC3C,mBAAOyD,kBAAkB,CAACV,WAAD,CAAzB;AACD;AACF;;AAED,eAAO,IAAP,CAVwD,CAU3C;AACd,O;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;oCACaW,kB,GAAqB,CAACC,UAAD,EAAqBC,aAAqB,GAAG,CAA7C,EAAgDC,cAAuB,GAAG,KAA1E,KAAoF;AACpH,YAAIF,UAAU,CAAC3C,MAAX,IAAqB4C,aAAa,GAAG,CAAzC,EAA4C;AAC1C,iBAAOD,UAAP;AACD;;AACD,cAAMG,UAAU,GAAG,GAAnB,CAJoH,CAKpH;;AACA,cAAMC,aAAa,GAAGJ,UAAU,CAACK,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,CAAtB,CANoH,CAQpH;;AACA,cAAMC,gBAAgB,GAAGF,aAAa,CAACG,KAAd,CAAoB,CAApB,EAAuBN,aAAvB,CAAzB;AACA,cAAMO,eAAe,GAAGJ,aAAa,CAACG,KAAd,CAAoB,CAACN,aAArB,CAAxB,CAVoH,CAYpH;;AACA,cAAMQ,gBAAgB,GAAGL,aAAa,CAAC/C,MAAd,GAAuB4C,aAAa,GAAG,CAAhE,CAboH,CAepH;;AACA,cAAMS,UAAU,GAAGP,UAAU,CAACQ,MAAX,CAAkBF,gBAAlB,CAAnB;AACA,cAAMG,gBAAgB,GAAI,GAAEN,gBAAiB,GAAEJ,cAAc,GAAGQ,UAAH,GAAgB,MAAO,GAAEF,eAAgB,EAAtG;AAEA,eAAOI,gBAAP;AACD,O;AAED;;;yCACaC,uB,GAAwE,CAAC3F,IAAD,EAAaU,CAAS,GAAG,CAAzB,EAA4BC,CAAS,GAAG,CAAxC,KAA8C;AACjI,cAAMiF,GAAG,GAAG5F,IAAI,CAACQ,QAAL,CAAcE,CAAd,GAAkBA,CAA9B;AACA,cAAMmF,GAAG,GAAG7F,IAAI,CAACQ,QAAL,CAAcG,CAAd,GAAkBA,CAA9B;;AACA,YAAIX,IAAI,CAACkB,MAAL,CAAYC,IAAZ,KAAqB,QAAzB,EAAmC;AACjC,iBAAOwE,uBAAuB,CAAC3F,IAAI,CAACkB,MAAN,EAAc0E,GAAd,EAAmBC,GAAnB,CAA9B;AACD,SAFD,MAEO;AACL,iBAAO,IAAIzG,IAAJ,CAASwG,GAAT,EAAcC,GAAd,EAAmB,CAAnB,CAAP;AACD;AACF,O;AAED;AACA;AACA;AACA;AACA;;;iCACaC,e,GAAmBC,GAAD,IAAiB;AAC9C,eAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC7G,UAAAA,YAAY,CAAC8G,UAAb,CAAoCJ,GAApC,EAAyC,CAACK,GAAD,EAAMC,IAAN,KAA2B;AAClE,gBAAID,GAAJ,EAAS;AACP5G,cAAAA,GAAG,CAAC,YAAD,EAAeuG,GAAf,CAAH;AACAG,cAAAA,MAAM,CAACE,GAAD,CAAN;AACD,aAHD,MAGO;AACL,oBAAME,WAAW,GAAG,IAAIhH,WAAJ,EAApB;AACA,oBAAMiH,OAAO,GAAG,IAAIhH,SAAJ,EAAhB;AACAgH,cAAAA,OAAO,CAACC,KAAR,GAAgBH,IAAhB;AACAC,cAAAA,WAAW,CAACC,OAAZ,GAAsBA,OAAtB;AACA,qBAAON,OAAO,CAACK,WAAD,CAAd;AACD;AACF,WAXD;AAYD,SAbM,CAAP;AAeD,O;AAED;AACA;AACA;AACA;AACA;;;gCACaG,c,GAAkBC,IAAD,IAA0B;AACtD,eAAOA,IAAI,CAACC,sBAAL,EAAP;AACD,O;AAED;;;8BACaC,Y,GAAgBF,IAAD,IAA0B;AACpD,YAAI,CAACA,IAAL,EAAW,OAAO,GAAP;AACX,eAAOA,IAAI,CAACG,sBAAL,EAAP;AACD,O;AAED;AACA;AACA;AACA;AACA;AACA;;;yBACaC,O,GAAU,CAAClD,KAAD,EAAgBzB,MAAhB,KAA2C;AAChE,YAAI4E,gBAAgB,GAAG,CAAvB;AACA,YAAIC,KAAK,GAAG,CAAZ;;AACA,aAAK,IAAI5E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,KAAK,CAACzB,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACrC,cAAIxD,iBAAiB,CAACgF,KAAK,CAACqD,MAAN,CAAa7E,CAAb,CAAD,CAArB,EAAwC;AACtC2E,YAAAA,gBAAgB,IAAI,CAApB;AACD,WAFD,MAEO;AACLA,YAAAA,gBAAgB;AACjB;AACF;;AACD,YAAIG,QAAQ,GAAG,EAAf;;AACA,aAAK,IAAI9E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwB,KAAK,CAACzB,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACrC8E,UAAAA,QAAQ,IAAItD,KAAK,CAACqD,MAAN,CAAa7E,CAAb,CAAZ;;AACA,cAAIxD,iBAAiB,CAACgF,KAAK,CAACqD,MAAN,CAAa7E,CAAb,CAAD,CAArB,EAAwC;AACtC4E,YAAAA,KAAK,IAAI,CAAT;AACD,WAFD,MAEO;AACLA,YAAAA,KAAK;AACN;;AACD,cAAIA,KAAK,IAAI7E,MAAb,EAAqB;AACnB;AACD;AACF;;AACD,eAAO4E,gBAAgB,GAAG5E,MAAnB,GAA4B+E,QAAQ,GAAG,KAAvC,GAA+CA,QAAtD;AACD,O;;8BAOYC,Y,GAAe,CAACC,UAAD,EAAyBC,IAAzB,EAAqCC,KAArC,EAAkDC,IAAlD,EAAgEC,QAAiB,GAAG,KAApF,KAA8F;AACxH,cAAMC,eAAe,GAAGL,UAAU,CAAC7D,YAAX,CAAwB9D,WAAxB,EAAqCkD,KAA7D;AACA,cAAM+E,YAAY,GAAGN,UAAU,CAACO,OAAX,CAAmBpE,YAAnB,CAAgC9D,WAAhC,EAA6CkD,KAAlE;AACA,cAAMiF,cAAc,GAAGR,UAAU,CAACO,OAAX,CAAmBnH,QAAnB,CAA4BE,CAAnD;AACA4G,QAAAA,KAAK,CAACO,MAAN,GAAe,KAAf;AACAR,QAAAA,IAAI,CAACQ,MAAL,GAAc,KAAd;;AACA,YAAID,cAAc,KAAK,CAAvB,EAA0B;AACxBP,UAAAA,IAAI,CAACQ,MAAL,GAAc,KAAd;AACAP,UAAAA,KAAK,CAACO,MAAN,GAAe,IAAf;AACD,SAHD,MAGO,IAAID,cAAc,GAAG,CAArB,EAAwB;AAC7BP,UAAAA,IAAI,CAACQ,MAAL,GAAc,IAAd;AACAP,UAAAA,KAAK,CAACO,MAAN,GAAe,IAAf;;AACA,cAAIC,IAAI,CAACC,GAAL,CAASL,YAAY,IAAID,eAAe,GAAGK,IAAI,CAACC,GAAL,CAASH,cAAT,CAAtB,CAArB,IAAwEL,IAA5E,EAAkF;AAChFF,YAAAA,IAAI,CAACQ,MAAL,GAAc,IAAd;AACAP,YAAAA,KAAK,CAACO,MAAN,GAAe,KAAf;AACD;AACF;;AACD,YAAIH,YAAY,GAAGD,eAAf,IAAkCH,KAAtC,EAA6C;AAC3CA,UAAAA,KAAK,CAACO,MAAN,GAAe,KAAf;AACD;AACF,O;;kCAEYG,gB,GAAmB,MAAM;AACpC,eAAO,IAAIhC,OAAJ,CAAY,CAACiC,OAAD,EAAU/B,MAAV,KAAqB;AACtC,gBAAMgC,OAAO,GAAG;AAAEC,YAAAA,QAAQ,EAAE;AAAEC,cAAAA,YAAY,EAAE;AAAhB;AAAZ,WAAhB;AACA;AAAA;AAAA,4CAAaC,MAAb,CAAoBH,OAApB,EAA8BnF,MAAD,IAAY;AACvCkF,YAAAA,OAAO,CAAE,OAAMlF,MAAO,EAAf,CAAP;AACD,WAFD,EAFsC,CAKtC;AACA;AACA;AACD,SARM,CAAP;AASD,O;;yBAEYuF,O,GAAU,MAAM;AAC3B,eAAO,uCAAuCnD,OAAvC,CAA+C,OAA/C,EAAwD,UAAUoD,CAAV,EAAa;AAC1E,gBAAMhH,CAAC,GAAGuG,IAAI,CAACU,MAAL,KAAgB,EAAhB,GAAqB,CAA/B;AACA,gBAAMC,CAAC,GAAGF,CAAC,KAAK,GAAN,GAAYhH,CAAZ,GAAiBA,CAAC,GAAG,GAAJ,GAAU,GAArC;AACA,iBAAOkH,CAAC,CAACC,QAAF,CAAW,EAAX,CAAP;AACD,SAJM,CAAP;AAKD,O;;sBAEYC,I,GAAQpG,MAAD,IAAiB;AACnC,YAAI,CAACA,MAAL,EAAa,OAAOA,MAAP;;AACb,YAAIqG,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAA0B5H,IAA1B,CAA+ByB,MAA/B,MAA2C,iBAA/C,EAAkE;AAChE,gBAAMuG,WAAW,GAAG;AAAA;AAAA,4CAAa;AAC/BC,YAAAA,KAAK,EAAGA,KAAD,IAAW,CAAC,GAAGA,KAAJ,CADa;AAE/BC,YAAAA,MAAM,EAAGA,MAAD,KAAa,EAAE,GAAGA;AAAL,aAAb;AAFuB,WAAb,CAApB;AAIA,iBAAOF,WAAW,CAACvG,MAAD,CAAlB,CALgE,CAMhE;AACD,SAPD,MAOO,IAAIqG,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAA0B5H,IAA1B,CAA+ByB,MAA/B,MAA2C,gBAA/C,EAAiE;AACtE,iBAAO0G,QAAQ,CAAC1G,MAAD,CAAf;AACD,SAFM,MAEA;AACL,iBAAOA,MAAP;AACD;AACF,O;;AAEK0G,MAAAA,Q,GAAYC,GAAD,IAAc;AAC7B,YAAIC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAJ,EAAwB;AACtB,iBAAOA,GAAG,CAACG,GAAJ,CAAQJ,QAAR,CAAP;AACD,SAFD,MAEO,IAAI,OAAOC,GAAP,KAAe,QAAf,IAA2BA,GAAG,KAAK,IAAvC,EAA6C;AAClD,gBAAMI,MAAM,GAAG,EAAf;;AACA,eAAK,MAAMC,GAAX,IAAkBL,GAAlB,EAAuB;AACrB,gBAAIA,GAAG,CAACM,cAAJ,CAAmBD,GAAnB,CAAJ,EAA6B;AAC3BD,cAAAA,MAAM,CAACC,GAAD,CAAN,GAAcN,QAAQ,CAACC,GAAG,CAACK,GAAD,CAAJ,CAAtB;AACD;AACF;;AACD,iBAAOD,MAAP;AACD,SARM,MAQA;AACL,iBAAOJ,GAAP;AACD;AACF,O;;4BAEYO,U,GAAa,CAACC,OAAD,EAAeC,OAAf,EAA6BC,MAAe,GAAG,KAA/C,KAAyD;AACjF,cAAMC,KAAK,GAAGjB,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAA0B5H,IAA1B,CAA+B4I,OAA/B,CAAd;AACA,cAAMI,KAAK,GAAGlB,MAAM,CAACC,SAAP,CAAiBH,QAAjB,CAA0B5H,IAA1B,CAA+B6I,OAA/B,CAAd;AACA,YAAIE,KAAK,KAAKC,KAAd,EAAqB,OAAO,KAAP;;AAErB,YAAID,KAAK,KAAK,iBAAd,EAAiC;AAC/B;AACA,iBAAOD,MAAM,GAAG;AAAA;AAAA,sDAAkBF,OAAlB,EAA2BC,OAA3B,CAAH,GAAyC;AAAA;AAAA,wDAAmBD,OAAnB,EAA4BC,OAA5B,CAAtD;AACD,SAHD,MAGO,IAAIE,KAAK,KAAK,gBAAd,EAAgC;AACrC,cAAIH,OAAO,CAACvH,MAAR,KAAmBwH,OAAO,CAACxH,MAA/B,EAAuC,OAAO,KAAP;AACvC,iBAAO;AAAA;AAAA,sDAAkBuH,OAAlB,EAA2BC,OAA3B,CAAP;AACD,SAHM,MAGA;AACL,iBAAOD,OAAO,KAAKC,OAAnB;AACD;AACF,O;AAED;;;sCACaI,oB,GAAwBC,QAAD,IAAsB;AACxD,cAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAb;AACA,YAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAb;;AACA,YAAI,CAACG,MAAL,EAAa;AACXA,UAAAA,MAAM,GAAG,EAAT;AACD;;AACD,cAAMxG,KAAK,GAAGwG,MAAM,CAACG,IAAP,CAAY9B,CAAC,IAAIA,CAAC,KAAKuB,QAAvB,CAAd;;AACA,YAAI,CAACpG,KAAL,EAAY;AACVwG,UAAAA,MAAM,CAAC1G,IAAP,CAAYsG,QAAZ;AACAE,UAAAA,YAAY,CAACM,OAAb,CAAqB,qBAArB,EAA4CH,IAAI,CAACI,SAAL,CAAeL,MAAf,CAA5C;AACD;AACF,O;AAED;;;yCACaM,uB,GAA2BV,QAAD,IAAsB;AAC3D,cAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAb;;AACA,YAAI,CAACF,IAAL,EAAW;AACT;AACD;;AACD,YAAIG,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAb;AACAG,QAAAA,MAAM,GAAGA,MAAM,CAACO,MAAP,CAAclC,CAAC,IAAIA,CAAC,KAAKuB,QAAzB,CAAT;AACAE,QAAAA,YAAY,CAACM,OAAb,CAAqB,qBAArB,EAA4CH,IAAI,CAACI,SAAL,CAAeL,MAAf,CAA5C;AACD,O;AAED;;;qCACaQ,mB,GAAuBZ,QAAD,IAAc;AAC/C,cAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAAb;;AACA,YAAI,CAACF,IAAL,EAAW;AACT,iBAAO,KAAP;AACD;;AACD,YAAIG,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAb;AACA,cAAMrG,KAAK,GAAGwG,MAAM,CAACG,IAAP,CAAY9B,CAAC,IAAIA,CAAC,KAAKuB,QAAvB,CAAd;AACA,eAAOpG,KAAK,GAAG,IAAH,GAAU,KAAtB;AACD,O","sourcesContent":["import { tween, Node, math, NodeEventType, view, ToggleContainer, EventHandler, Vec3, assetManager, ImageAsset, SpriteFrame, Texture2D, sp, log, sys, native, ScrollView, UITransform, instantiate } from \"cc\";\r\nimport Fingerprint2 from \"fingerprintjs2\"\r\nimport { BridgeCode, EventType } from \"../common/bridge\";\r\nimport { circularDeepEqual, strictShallowEqual } from \"./fastEqual\";\r\nimport { createCopier } from \"./fastCopy\";\r\n\r\nexport enum EffectType {\r\n  SCALE = \"scale\"\r\n}\r\n\r\nexport const bindClickEvent = (node: Node, effectType: EffectType = EffectType.SCALE, handler?: () => void) => {\r\n  node.on(Node.EventType.TOUCH_START, () => {\r\n    tween(node).to(0.1, { position: new Vec3(node.getPosition().x, node.getPosition().y - 5) }).start()\r\n  })\r\n  node.on(Node.EventType.TOUCH_END, () => {\r\n    tween(node).to(0.1, { position: new Vec3(node.getPosition().x, node.getPosition().y + 5) }).call(() => {\r\n      handler && handler()\r\n    }).start()\r\n  })\r\n}\r\n\r\nexport const getRootPosition = (node: Node, totalX?: number, totalY?: number): math.Vec3 => {\r\n  if (node.parent.name === 'Canvas') {\r\n    return new Vec3(totalX, totalY, 0)\r\n  } else {\r\n    const x = node.position.x + node.parent.position.x\r\n    const y = node.position.y + node.parent.position.y\r\n    return getRootPosition(node.parent, x, y)\r\n  }\r\n}\r\n\r\nexport const getUrlParams = (name: string) => {\r\n  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i')\r\n  var r = window.location.search.substring(1).match(reg)\r\n  if (r != null) {\r\n    return unescape(r[2])\r\n  }\r\n  return null\r\n}\r\n\r\n/**深度搜寻第一个符合名称的节点 */\r\nexport const getNodeByNameDeep = (nodeName: string, parentNode: Node): Node | undefined => {\r\n  if (parentNode.name === nodeName) {\r\n    return parentNode\r\n  } else {\r\n    const l = parentNode.children.length\r\n    for (let i = 0; i < l; i++) {\r\n      if (parentNode.children[i].name === nodeName) {\r\n        return parentNode.children[i]\r\n      } else {\r\n        // if (parentNode.children[i].children.length) {\r\n        //   result = getNodeByNameDeep(nodeName, parentNode.children[i])\r\n        // }\r\n        const res = getNodeByNameDeep(nodeName, parentNode.children[i])\r\n        if (res) {\r\n          return res;\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const setByScreenScale = (target?: Node) => {\r\n  //原配比\r\n  const resSize = view.getDesignResolutionSize()\r\n  const resRatio = resSize.width / resSize.height\r\n  const curSize = view.getFrameSize().width / view.getFrameSize().height\r\n  const result = resRatio / curSize\r\n  // target.setScale(result, result)\r\n  target && target.setScale(0.5, 0.5)\r\n  return result\r\n}\r\n\r\nexport const initToggle = (target: Node, thisNode: Node, eventHandler: EventHandler, CompStr: string, handerStr: string) => {\r\n  const subContainer = target.getComponent(ToggleContainer)\r\n  // const containerEventHandler = eventHandler;\r\n  eventHandler.target = thisNode;\r\n  eventHandler.component = CompStr;\r\n  eventHandler.handler = handerStr;\r\n  subContainer.checkEvents.push(eventHandler);\r\n  return subContainer\r\n}\r\n\r\nexport const setCookie = (name: string, value: string, expirationDays: number) => {\r\n  const expirationDate = new Date();\r\n  expirationDate.setDate(expirationDate.getDate() + expirationDays);\r\n  const cookieValue = encodeURIComponent(value) + '; expires=' + expirationDate.toUTCString();\r\n  document.cookie = name + '=' + cookieValue + '; path=/';\r\n}\r\n\r\nexport const getCookie = (name: string): string | null => {\r\n  const cookieStr = document.cookie;\r\n  const cookies = cookieStr.split('; ');\r\n  for (const cookie of cookies) {\r\n    const [cookieName, cookieValue] = cookie.split('=');\r\n    if (decodeURIComponent(cookieName) === name) {\r\n      return decodeURIComponent(cookieValue);\r\n    }\r\n  }\r\n\r\n  return null; // 如果找不到指定名称的cookie，返回null\r\n}\r\n/**\r\n * 对一串数字进行脱敏\r\n * @param cardNumber 输入的数字\r\n * @param visibleDigits 可见的数字位数，可以根据需要调整\r\n * @param isExposeLength 是否要暴露字符串长度，true：脱敏多少位，显示多少位*，false：默认显示4个*\r\n * @returns \r\n */\r\nexport const maskBankCardNumber = (cardNumber: string, visibleDigits: number = 4, isExposeLength: boolean = false) => {\r\n  if (cardNumber.length <= visibleDigits * 2) {\r\n    return cardNumber\r\n  }\r\n  const maskedChar = '*';\r\n  // 去除非数字字符\r\n  const trimmedNumber = cardNumber.replace(/\\D/g, '');\r\n\r\n  // 获取前几位和后几位\r\n  const firstVisiblePart = trimmedNumber.slice(0, visibleDigits);\r\n  const lastVisiblePart = trimmedNumber.slice(-visibleDigits);\r\n\r\n  // 获取需要隐藏的中间部分的长度\r\n  const maskedPartLength = trimmedNumber.length - visibleDigits * 2;\r\n\r\n  // 生成脱敏后的银行卡号\r\n  const maskedPart = maskedChar.repeat(maskedPartLength);\r\n  const maskedCardNumber = `${firstVisiblePart}${isExposeLength ? maskedPart : \"****\"}${lastVisiblePart}`;\r\n\r\n  return maskedCardNumber;\r\n}\r\n\r\n/**获取以canvas画布为基准的坐标 */\r\nexport const getNodePositionInCanvas: (node: Node, x?: number, y?: number) => Vec3 = (node: Node, x: number = 0, y: number = 0) => {\r\n  const t_x = node.position.x + x\r\n  const t_y = node.position.y + y\r\n  if (node.parent.name !== \"Canvas\") {\r\n    return getNodePositionInCanvas(node.parent, t_x, t_y)\r\n  } else {\r\n    return new Vec3(t_x, t_y, 1)\r\n  }\r\n}\r\n\r\n/**\r\n * 加载远程图片\r\n * @param url 图片远程地址\r\n * @returns \r\n */\r\nexport const loadRemoteImage = (url: string) => {\r\n  return new Promise((resolve, reject) => {\r\n    assetManager.loadRemote<ImageAsset>(url, (err, data: ImageAsset) => {\r\n      if (err) {\r\n        log(\"加载远程图片资源失败\", url);\r\n        reject(err);\r\n      } else {\r\n        const spriteFrame = new SpriteFrame();\r\n        const texture = new Texture2D();\r\n        texture.image = data;\r\n        spriteFrame.texture = texture;\r\n        return resolve(spriteFrame);\r\n      }\r\n    })\r\n  })\r\n\r\n}\r\n\r\n/**\r\n * 获得缩短的金币，展示用\r\n * @param gold \r\n * @returns \r\n */\r\nexport const getGoldShorten = (gold: number): string => {\r\n  return gold.formatAmountWithLetter();\r\n}\r\n\r\n/**格式化数字 */\r\nexport const formatNumber = (gold: number): string => {\r\n  if (!gold) return \"0\";\r\n  return gold.formatAmountWithCommas();\r\n}\r\n\r\n/**\r\n * 省略字符（双字节算2位）\r\n * @param value 要省略的字符串\r\n * @param length 超过多少位就加省略符号\r\n * @returns \r\n */\r\nexport const omitStr = (value: string, length: number): string => {\r\n  let singleByteLength = 0;\r\n  let count = 0;\r\n  for (let i = 0; i < value.length; i++) {\r\n    if (hasDoubleByteChar(value.charAt(i))) {\r\n      singleByteLength += 2;\r\n    } else {\r\n      singleByteLength++;\r\n    }\r\n  }\r\n  let newValue = \"\";\r\n  for (let i = 0; i < value.length; i++) {\r\n    newValue += value.charAt(i);\r\n    if (hasDoubleByteChar(value.charAt(i))) {\r\n      count += 2;\r\n    } else {\r\n      count++;\r\n    }\r\n    if (count >= length) {\r\n      break;\r\n    }\r\n  }\r\n  return singleByteLength > length ? newValue + \"···\" : newValue;\r\n}\r\n\r\nfunction hasDoubleByteChar(str: string): boolean {\r\n  const regex = /[\\u0080-\\uFFFF]/;\r\n  return regex.test(str);\r\n}\r\n\r\nexport const arrowDisplay = (scrollView: ScrollView, left: Node, right: Node, diff: number, setEvent: boolean = false) => {\r\n  const scrollViewWidth = scrollView.getComponent(UITransform).width\r\n  const contentWidth = scrollView.content.getComponent(UITransform).width\r\n  const scrollDistance = scrollView.content.position.x\r\n  right.active = false\r\n  left.active = false\r\n  if (scrollDistance === 0) {\r\n    left.active = false\r\n    right.active = true\r\n  } else if (scrollDistance < 0) {\r\n    left.active = true\r\n    right.active = true\r\n    if (Math.abs(contentWidth - (scrollViewWidth + Math.abs(scrollDistance))) < diff) {\r\n      left.active = true\r\n      right.active = false\r\n    }\r\n  }\r\n  if (contentWidth < scrollViewWidth && right) {\r\n    right.active = false\r\n  }\r\n}\r\n\r\nexport const generateUniqueId = () => {\r\n  return new Promise((reslove, reject) => {\r\n    const options = { excludes: { touchSupport: true } }\r\n    Fingerprint2.getV18(options, (result) => {\r\n      reslove(`web-${result}`)\r\n    })\r\n    // Fingerprint2.get(function (result) {\r\n    //   reslove(result)\r\n    // })\r\n  })\r\n}\r\n\r\nexport const getUUID = () => {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    const r = Math.random() * 16 | 0\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8)\r\n    return v.toString(16)\r\n  })\r\n}\r\n\r\nexport const copy = (target: any) => {\r\n  if (!target) return target\r\n  if (Object.prototype.toString.call(target) === '[object Object]') {\r\n    const copyShallow = createCopier({\r\n      array: (array) => [...array],\r\n      object: (object) => ({ ...object })\r\n    })\r\n    return copyShallow(target)\r\n    // return instantiate(target)\r\n  } else if (Object.prototype.toString.call(target) === '[object Array]') {\r\n    return deepCopy(target)\r\n  } else {\r\n    return target\r\n  }\r\n}\r\n\r\nconst deepCopy = (obj: any) => {\r\n  if (Array.isArray(obj)) {\r\n    return obj.map(deepCopy);\r\n  } else if (typeof obj === 'object' && obj !== null) {\r\n    const newObj = {};\r\n    for (const key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        newObj[key] = deepCopy(obj[key]);\r\n      }\r\n    }\r\n    return newObj;\r\n  } else {\r\n    return obj;\r\n  }\r\n}\r\n\r\nexport const equalValue = (target1: any, target2: any, isDeep: boolean = false) => {\r\n  const type1 = Object.prototype.toString.call(target1)\r\n  const type2 = Object.prototype.toString.call(target2)\r\n  if (type1 !== type2) return false\r\n\r\n  if (type1 === '[object Object]') {\r\n    // return fe.circularDeepEqual(target1, target2)\r\n    return isDeep ? circularDeepEqual(target1, target2) : strictShallowEqual(target1, target2)\r\n  } else if (type1 === '[object Array]') {\r\n    if (target1.length !== target2.length) return false\r\n    return circularDeepEqual(target1, target2)\r\n  } else {\r\n    return target1 === target2\r\n  }\r\n}\r\n\r\n/**添加聊天限制用户 */\r\nexport const putChatShieldingUser = (memberId: string) => {\r\n  const json = localStorage.getItem(\"chat_shielding_user\");\r\n  let values = JSON.parse(json) as any[];\r\n  if (!values) {\r\n    values = [];\r\n  }\r\n  const value = values.find(v => v === memberId);\r\n  if (!value) {\r\n    values.push(memberId);\r\n    localStorage.setItem(\"chat_shielding_user\", JSON.stringify(values));\r\n  }\r\n}\r\n\r\n/**删除聊天限制用户 */\r\nexport const removeChatShieldingUser = (memberId: string) => {\r\n  const json = localStorage.getItem(\"chat_shielding_user\");\r\n  if (!json) {\r\n    return;\r\n  }\r\n  let values = JSON.parse(json) as any[];\r\n  values = values.filter(v => v !== memberId);\r\n  localStorage.setItem(\"chat_shielding_user\", JSON.stringify(values));\r\n}\r\n\r\n/**判断是否为聊天限制用户 */\r\nexport const isChatShieldingUser = (memberId) => {\r\n  const json = localStorage.getItem(\"chat_shielding_user\");\r\n  if (!json) {\r\n    return false;\r\n  }\r\n  let values = JSON.parse(json) as any[];\r\n  const value = values.find(v => v === memberId);\r\n  return value ? true : false;\r\n}"]}