{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/domino/components/Domino_RoomChoose.ts"],"names":["_decorator","Label","Node","BaseComponent","global","playBtnClick","ccclass","property","Domino_RoomChoose","propertyNode","props_btn_return","props_btn_begin","props_btn_help","props_label_gold","props_btn_gold_add","props_btn_room_1","props_btn_room_2","props_btn_room_3","props_btn_room_4","props","roomMap","gold","events","beginHandler","clickRoomHandler","roomInfo","start","initState","bindEvent","on","EventType","TOUCH_END","closeSubGame","useProps","key","value","forEach","item","index","initRoomUI","string","formatAmountWithCommas","dataIndex","roomNode","getChildByName","getComponent","afee","maxNum","toString","range","lower","upper","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Label, Node, Vec3 } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { SKT_MAG_TYPE, sktInstance } from '../socketConnect';\r\nimport config from '../config';\r\nimport { playBtnClick } from '../index';\r\nimport { RoomInfo } from '../type';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\troomMap?: RoomInfo[],\r\n\tgold: number\r\n}\r\nexport interface IEvent {\r\n\t/**开始按钮快速进入 */\r\n\tbeginHandler: () => void\r\n\t/**选择房间进入 */\r\n\tclickRoomHandler: (roomInfo: RoomInfo) => void\r\n}\r\n\r\n@ccclass('Domino_RoomChoose')\r\nexport class Domino_RoomChoose extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() { }\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_btn_return: new Node(),\r\n\t\tprops_btn_begin: new Node(),\r\n\t\tprops_btn_help: new Node(),\r\n\t\tprops_label_gold: new Label(),\r\n\t\tprops_btn_gold_add: new Node(),\r\n\t\tprops_btn_room_1: new Node(),\r\n\t\tprops_btn_room_2: new Node(),\r\n\t\tprops_btn_room_3: new Node(),\r\n\t\tprops_btn_room_4: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\troomMap: [],\r\n\t\tgold: -1\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tbeginHandler: () => { },\r\n\t\tclickRoomHandler: (roomInfo: RoomInfo) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_btn_return.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tglobal.closeSubGame()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_begin.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tthis.events.beginHandler()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_help.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_gold_add.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_room_1.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tthis.events.clickRoomHandler(this.props.roomMap[0])\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_room_2.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tthis.events.clickRoomHandler(this.props.roomMap[1])\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_room_3.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tthis.events.clickRoomHandler(this.props.roomMap[2])\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_room_4.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tplayBtnClick();\r\n\t\t\tthis.events.clickRoomHandler(this.props.roomMap[3])\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (key === \"roomMap\") {\r\n\t\t\tthis.props.roomMap.forEach((item, index) => this.initRoomUI(index))\r\n\t\t} else if (key === 'gold') {\r\n\t\t\tthis.propertyNode.props_label_gold.string = this.props.gold.formatAmountWithCommas();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initRoomUI(dataIndex: number) {\r\n\t\tconst roomNode = this.propertyNode[`props_btn_room_${dataIndex + 1}`] as Node;\r\n\r\n\t\tconst roomInfo = this.props.roomMap[dataIndex];\r\n\t\troomNode.getChildByName(\"label_gold\").getComponent(Label).string = roomInfo.afee.formatAmountWithCommas()\r\n\t\troomNode.getChildByName(\"label_players\").getComponent(Label).string = roomInfo.maxNum.toString()\r\n\t\troomNode.getChildByName(\"label_gold\").getComponent(Label).string = roomInfo.afee.formatAmountWithCommas()\r\n\r\n\t\tconst range = `${roomInfo.lower.formatAmountWithCommas()}~${roomInfo.upper.formatAmountWithCommas()}`;\r\n\t\troomNode.getChildByName(\"label_range\").getComponent(Label).string = range;\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}