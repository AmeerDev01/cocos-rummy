{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/dragonV2/components/DragonV2_Header.ts"],"names":["_decorator","Label","Node","Animation","BaseComponent","global","BuyType","StepNumber","Dragonv2_Audio","mainViewModel","SoundPathDefine","ccclass","property","DragonV2_Header","init","propertyNode","props_Back_Home","props_Moeny_Top","props_Left_Bg","props_Right_Bg","props_Up_Settings","props_Moeny_Label","props_number2","props_btn_up_menu","props_btn_vip","props_menu_panel","props_spr_menu_bg","props_btn_info","props","gold","events","quitGame","isShowMenu","start","initState","bindEvent","on","EventType","TOUCH_END","playOneShot","btn_click","openPersonCenter","openRule","openShop","TAS","openVipMain","node","getChildByName","active","getComponent","stop","play","e","preventSwallow","scheduleOnce","TOUCH_START","TOUCH_MOVE","TOUCH_CANCEL","useProps","key","value","isValid","string","Number","cur","formatAmountWithCommas","formatAmountWithLetter","stepNumber","pre","num","toFixed","setFlyNode","parent","getHomeNode","getMoenyLabelNode","bindUI","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAKC,MAAAA,S,OAAAA,S;;AACxBC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,O,iBAAAA,O;;AACFC,MAAAA,U;;AACEC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,a,iBAAAA,a;;AAChBC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;iCAcjBa,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb;AAAA;AAAA,0CAC2E;AAAA;AAAA;AAAA,eAKlEC,IALkE,GAK3D,IAL2D;AAAA,eAMhEC,YANgE,GAMjD;AACxBC,YAAAA,eAAe,EAAE,IAAId,IAAJ,EADO;AAExBe,YAAAA,eAAe,EAAE,IAAIf,IAAJ,EAFO;AAGxBgB,YAAAA,aAAa,EAAE,IAAIhB,IAAJ,EAHS;AAIxBiB,YAAAA,cAAc,EAAE,IAAIjB,IAAJ,EAJQ;AAKxBkB,YAAAA,iBAAiB,EAAE,IAAIlB,IAAJ,EALK;AAMxBmB,YAAAA,iBAAiB,EAAE,IAAIpB,KAAJ,EANK;AAOxBqB,YAAAA,aAAa,EAAE,IAAIpB,IAAJ,EAPS;AAQxBqB,YAAAA,iBAAiB,EAAE,IAAIrB,IAAJ,EARK;AASxBsB,YAAAA,aAAa,EAAE,IAAItB,IAAJ,EATS;AAUxBuB,YAAAA,gBAAgB,EAAE,IAAIvB,IAAJ,EAVM;AAWxBwB,YAAAA,iBAAiB,EAAE,IAAIxB,IAAJ,EAXK;AAYxByB,YAAAA,cAAc,EAAE,IAAIzB,IAAJ;AAZQ,WANiD;AAAA,eAoBnE0B,KApBmE,GAoBnD;AACtBC,YAAAA,IAAI,EAAE;AADgB,WApBmD;AAAA,eAwBnEC,MAxBmE,GAwBlD;AACvBC,YAAAA,QAAQ,EAAE,MAAM,CAAG;AADI,WAxBkD;AAAA,eA+BlEC,UA/BkE,GA+BrD,KA/BqD;AAAA;;AAC1EC,QAAAA,KAAK,GAAG,CAEP;;AAyBSC,QAAAA,SAAS,GAAG;AACrB,iBAAO,EAAP;AACA;;AAESC,QAAAA,SAAS,GAAS;AAC3B,eAAKpB,YAAL,CAAkBC,eAAlB,CAAkCoB,EAAlC,CAAqClC,IAAI,CAACmC,SAAL,CAAeC,SAApD,EAA+D,MAAM;AACpE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA,iBAAKV,MAAL,CAAYC,QAAZ;AACA,WAHD;AAIA,eAAKhB,YAAL,CAAkBK,iBAAlB,CAAoCgB,EAApC,CAAuClC,IAAI,CAACmC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,kCAAOC,gBAAP,CAAwB,CAAxB;AACA,WAHD;AAIA,eAAK1B,YAAL,CAAkBY,cAAlB,CAAiCS,EAAjC,CAAoClC,IAAI,CAACmC,SAAL,CAAeC,SAAnD,EAA8D,MAAM;AACnE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,gDAAcE,QAAd;AACA,WAHD;AAIA,eAAK3B,YAAL,CAAkBI,cAAlB,CAAiCiB,EAAjC,CAAoClC,IAAI,CAACmC,SAAL,CAAeC,SAAnD,EAA8D,MAAM;AACnE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,kCAAOG,QAAP,CAAgB;AAAA;AAAA,oCAAQC,GAAxB;AACA,WAHD;AAIA,eAAK7B,YAAL,CAAkBE,eAAlB,CAAkCmB,EAAlC,CAAqClC,IAAI,CAACmC,SAAL,CAAeC,SAApD,EAA+D,MAAM;AACpE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,kCAAOG,QAAP;AACA,WAHD;AAIA,eAAK5B,YAAL,CAAkBS,aAAlB,CAAgCY,EAAhC,CAAmClC,IAAI,CAACmC,SAAL,CAAeC,SAAlD,EAA6D,MAAM;AAClE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,kCAAOK,WAAP;AACA,WAHD;AAIA,eAAKC,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCX,EAApC,CAAuClC,IAAI,CAACmC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;AACA;AAAA;AAAA,kCAAOG,QAAP;AACA,WAHD;AAIA,eAAK5B,YAAL,CAAkBQ,iBAAlB,CAAoCa,EAApC,CAAuClC,IAAI,CAACmC,SAAL,CAAeC,SAAtD,EAAiE,MAAM;AACtE;AAAA;AAAA,kDAAeC,WAAf,CAA2B;AAAA;AAAA,oDAAgBC,SAA3C;;AACA,gBAAI,CAAC,KAAKR,UAAV,EAAsB;AACrB,mBAAKA,UAAL,GAAkB,IAAlB;AACA,mBAAKjB,YAAL,CAAkBU,gBAAlB,CAAmCuB,MAAnC,GAA0C,CAAC,KAAKjC,YAAL,CAAkBU,gBAAlB,CAAmCuB,MAA9E;AACA,mBAAKjC,YAAL,CAAkBW,iBAAlB,CAAoCuB,YAApC,CAAiD9C,SAAjD,EAA4D+C,IAA5D;AACA,mBAAKnC,YAAL,CAAkBW,iBAAlB,CAAoCuB,YAApC,CAAiD9C,SAAjD,EAA4DgD,IAA5D;AACA;AACD,WARD;AASA,eAAKpC,YAAL,CAAkBU,gBAAlB,CAAmCW,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAeC,SAArD,EAAiEc,CAAD,IAAmB;AAClFA,YAAAA,CAAC,CAACC,cAAF,GAAmB,IAAnB;AACA,iBAAKtC,YAAL,CAAkBU,gBAAlB,CAAmCuB,MAAnC,GAA4C,KAA5C;AACA,iBAAKM,YAAL,CAAkB,MAAM;AACvB,mBAAKtB,UAAL,GAAkB,KAAlB;AACA,aAFD,EAEG,GAFH;AAGA,WAND;AAOA,eAAKjB,YAAL,CAAkBU,gBAAlB,CAAmCW,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAekB,WAArD,EAAmEH,CAAD,IAAmB;AACpFA,YAAAA,CAAC,CAACC,cAAF,GAAmB,IAAnB;AACA,WAFD;AAGA,eAAKtC,YAAL,CAAkBU,gBAAlB,CAAmCW,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAemB,UAArD,EAAkEJ,CAAD,IAAmB;AACnFA,YAAAA,CAAC,CAACC,cAAF,GAAmB,IAAnB;AACA,WAFD;AAGA,eAAKtC,YAAL,CAAkBU,gBAAlB,CAAmCW,EAAnC,CAAsClC,IAAI,CAACmC,SAAL,CAAeoB,YAArD,EAAoEL,CAAD,IAAmB;AACrFA,YAAAA,CAAC,CAACC,cAAF,GAAmB,IAAnB;AACA,WAFD;AAGA;;AAESK,QAAAA,QAAQ,CAACC,GAAD,EAAoBC,KAApB,EAAmD;AACpE,cAAI,KAAKd,IAAL,IAAa,KAAKA,IAAL,CAAUe,OAA3B,EAAoC;AACnC,gBAAIF,GAAG,KAAK,MAAZ,EAAoB;AACnB,kBAAI,KAAK7C,IAAT,EAAe;AACd,qBAAKC,YAAL,CAAkBM,iBAAlB,CAAoCyC,MAApC,GAA6CC,MAAM,CAACH,KAAK,CAACI,GAAP,CAAN,GAAoB,OAApB,GAA8BD,MAAM,CAACH,KAAK,CAACI,GAAP,CAAN,CAAkBC,sBAAlB,EAA9B,GAA2EF,MAAM,CAACH,KAAK,CAACI,GAAP,CAAN,CAAkBE,sBAAlB,EAAxH;AACA,qBAAKpD,IAAL,GAAY,KAAZ;AACA,eAHD,MAGO;AACN,sBAAMqD,UAAU,GAAG;AAAA;AAAA,8CAAeP,KAAK,CAACQ,GAArB,EAA0BR,KAAK,CAACI,GAAhC,EAAsCK,GAAD,IAAS;AAC/D,sBAAI,KAAKvB,IAAL,IAAa,KAAKA,IAAL,CAAUe,OAA3B,EAAoC;AACnC,yBAAK9C,YAAL,CAAkBM,iBAAlB,CAAoCyC,MAApC,GAA8C,CAACO,GAAG,CAACC,OAAJ,CAAY,CAAZ,CAAF,GAAoB,OAApB,GAA8BP,MAAM,CAACH,KAAK,CAACI,GAAP,CAAN,CAAkBC,sBAAlB,EAA9B,GAA2EF,MAAM,CAACH,KAAK,CAACI,GAAP,CAAN,CAAkBE,sBAAlB,EAAxH;AAAmK;AACnK;AACF,iBAJkB,CAAnB;AAKAC,gBAAAA,UAAU,CAACI,UAAX,CAAsB,KAAKxD,YAAL,CAAkBM,iBAAlB,CAAoCyB,IAApC,CAAyC0B,MAA/D,EAAuE,KAAKzD,YAAL,CAAkBM,iBAAlB,CAAoCyB,IAA3G,EAAiH,EAAjH;AACAqB,gBAAAA,UAAU,CAAClC,KAAX;AACA;AACD;AACD;AACD;;AAEMwC,QAAAA,WAAW,GAAG;AACpB,iBAAO,KAAK1D,YAAL,CAAkBC,eAAzB;AACA;;AAEM0D,QAAAA,iBAAiB,GAAG;AAC1B,iBAAO,KAAK3D,YAAL,CAAkBM,iBAAzB;AACA;;AAISsD,QAAAA,MAAM,GAAS,CACxB;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA1HyE,O","sourcesContent":["import { _decorator, Label, Node,Animation, EventTouch } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { Dragonv2_Audio, mainViewModel} from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tgold: number\r\n}\r\nexport interface IEvent {\r\n\tquitGame: () => void,\r\n}\r\n\r\n@ccclass('DragonV2_Header')\r\nexport class DragonV2_Header extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate init = true;\r\n\tprotected propertyNode = {\r\n\t\tprops_Back_Home: new Node(),\r\n\t\tprops_Moeny_Top: new Node(),\r\n\t\tprops_Left_Bg: new Node(),\r\n\t\tprops_Right_Bg: new Node(),\r\n\t\tprops_Up_Settings: new Node(),\r\n\t\tprops_Moeny_Label: new Label(),\r\n\t\tprops_number2: new Node(),\r\n\t\tprops_btn_up_menu: new Node(),\r\n\t\tprops_btn_vip: new Node(),\r\n\t\tprops_menu_panel: new Node(),\r\n\t\tprops_spr_menu_bg: new Node(),\r\n\t\tprops_btn_info: new Node(),\r\n\t}\r\n\tpublic props: IProps = {\r\n\t\tgold: 0\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tquitGame: () => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\tprivate isShowMenu = false;\r\n\tprotected bindEvent(): void {\r\n\t\tthis.propertyNode.props_Back_Home.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tthis.events.quitGame();\r\n\t\t})\r\n\t\tthis.propertyNode.props_Up_Settings.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openPersonCenter(2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_info.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tmainViewModel.openRule()\r\n\t\t})\r\n\t\tthis.propertyNode.props_Right_Bg.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop(BuyType.TAS)\r\n\t\t})\r\n\t\tthis.propertyNode.props_Moeny_Top.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_vip.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openVipMain()\r\n\t\t})\r\n\t\tthis.node.getChildByName('Up_Left').on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tglobal.openShop()\r\n\t\t})\r\n\t\tthis.propertyNode.props_btn_up_menu.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tDragonv2_Audio.playOneShot(SoundPathDefine.btn_click)\r\n\t\t\tif (!this.isShowMenu) {\r\n\t\t\t\tthis.isShowMenu = true;\r\n\t\t\t\tthis.propertyNode.props_menu_panel.active=!this.propertyNode.props_menu_panel.active\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).stop();\r\n\t\t\t\tthis.propertyNode.props_spr_menu_bg.getComponent(Animation).play();\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_END, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t\tthis.propertyNode.props_menu_panel.active = false;\r\n\t\t\tthis.scheduleOnce(() => {\r\n\t\t\t\tthis.isShowMenu = false;\r\n\t\t\t}, 0.2)\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_START, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_MOVE, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t\tthis.propertyNode.props_menu_panel.on(Node.EventType.TOUCH_CANCEL, (e: EventTouch) => {\r\n\t\t\te.preventSwallow = true;\r\n\t\t})\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps, value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === 'gold') {\r\n\t\t\t\tif (this.init) {\r\n\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = Number(value.cur) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();\r\n\t\t\t\t\tthis.init = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst stepNumber = new StepNumber(value.pre, value.cur, (num) => {\r\n\t\t\t\t\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\t\t\t\t\tthis.propertyNode.props_Moeny_Label.string = (+num.toFixed(0)) < 1000000 ? Number(value.cur).formatAmountWithCommas() : Number(value.cur).formatAmountWithLetter();;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstepNumber.setFlyNode(this.propertyNode.props_Moeny_Label.node.parent, this.propertyNode.props_Moeny_Label.node, 20)\r\n\t\t\t\t\tstepNumber.start()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getHomeNode() {\r\n\t\treturn this.propertyNode.props_Back_Home\r\n\t}\r\n\r\n\tpublic getMoenyLabelNode() {\r\n\t\treturn this.propertyNode.props_Moeny_Label\r\n\t}\r\n\r\n\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}