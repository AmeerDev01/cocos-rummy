{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/gxfcV2/components/GxfcV2_DialogWin.ts"],"names":["_decorator","Label","Node","sp","BaseComponent","StepNumber","AutoLauncherType","DialogType","GameType","isAuto","getNodeByNameDeep","config","StepNumberV2","GxfcV2_Audio","SoundPathDefine","ccclass","property","GxfcV2_DialogWin","stepNumberV2","propertyNode","props_freeEntry","props_freeSettlement","props_bigWin","props_jackpot","props_megaWin","props_superWin","props","dialogInfo","gameTypeInfo","lastGameType","NONE","currGameType","viewGameType","leftCount","autoLauncherInfo","events","onWindowCloseHandler","dialogType","start","initState","bindEvent","node","on","EventType","TOUCH_END","isFreeGameEntry","isFreeGameSettlement","destroy","getChildByName","FREE_GAME_ENTRY","FREE_GAME_SETTLEMENT","useProps","key","value","isValid","hideAll","active","showFreeEntry","BIG_WIN","showBigWin","JACKPOT","showJackpot","MEGA_WIN","showMegaWin","SUPER_WIN","showSuperWin","showFreeSettlement","labelNode","getComponent","string","params","detryCloseWindow","playOneShot","get_coin","numberLabel","startStepNumber","Skeleton","setCompleteListener","MAIN","autoLauncherType","totalCount","label","end","done","num","Number","toFixed","formatAmountWithCommas","set","normalRollOption","numberRollerTime","scheduleOnce","dialogWinShowTime","onDestroy","longStop","bindUI","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Label, Node, sp } from 'cc';\r\nimport { BaseComponent } from '../../../base/BaseComponent';\r\nimport { global } from '../../../hall';\r\nimport { BuyType } from '../../../hall/components/Hall_ShopPanel';\r\nimport StepNumber from '../../../utils/StepNumber';\r\nimport { AutoLauncherInfo, AutoLauncherType, DialogInfo, DialogType, GameType, GameTypeInfo, isAuto } from '../type';\r\nimport { getNodeByNameDeep } from '../../../utils/tool';\r\nimport { updateSubGameAnimationPlayInfo } from '../store/actions/game';\r\nimport config from '../config';\r\nimport StepNumberV2 from '../../../utils/StepNumberV2';\r\nimport { GxfcV2_Audio } from '../index';\r\nimport { SoundPathDefine } from '../sourceDefine/soundDefine';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IState {\r\n\r\n}\r\n\r\nexport interface IProps {\r\n\tdialogInfo?: DialogInfo,\r\n\tgameTypeInfo?: GameTypeInfo,\r\n\t/** 自动运行信息 */\r\n\tautoLauncherInfo?: AutoLauncherInfo\r\n}\r\nexport interface IEvent {\r\n\tonWindowCloseHandler: (dialogType: DialogType) => void\r\n}\r\n\r\n@ccclass('GxfcV2_DialogWin')\r\nexport class GxfcV2_DialogWin extends BaseComponent<IState, IProps, IEvent> {\r\n\tstart() {\r\n\r\n\t}\r\n\r\n\tprivate stepNumberV2: StepNumberV2 = new StepNumberV2(this);\r\n\r\n\tprotected propertyNode = {\r\n\t\tprops_freeEntry: new Node(),\r\n\t\tprops_freeSettlement: new Node(),\r\n\t\tprops_bigWin: new Node(),\r\n\t\tprops_jackpot: new Node(),\r\n\t\tprops_megaWin: new Node(),\r\n\t\tprops_superWin: new Node(),\r\n\t}\r\n\r\n\tpublic props: IProps = {\r\n\t\tdialogInfo: null,\r\n\t\tgameTypeInfo: {\r\n\t\t\tlastGameType: GameType.NONE,\r\n\t\t\tcurrGameType: GameType.NONE,\r\n\t\t\tviewGameType: GameType.NONE,\r\n\t\t\tleftCount: 0\r\n\t\t},\r\n\t\tautoLauncherInfo: null,\r\n\t}\r\n\r\n\tpublic events: IEvent = {\r\n\t\tonWindowCloseHandler: (dialogType: DialogType) => { }\r\n\t}\r\n\r\n\tprotected initState() {\r\n\t\treturn {}\r\n\t}\r\n\r\n\tprotected bindEvent(): void {\r\n\t\tthis.node.on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.isFreeGameEntry() ||  this.isFreeGameSettlement()) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.node.getChildByName(\"SpriteSplash\").on(Node.EventType.TOUCH_END, () => {\r\n\t\t\tif (this.isFreeGameEntry() ||  this.isFreeGameSettlement()) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate isFreeGameEntry() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY;\r\n\t}\r\n\r\n\tprivate isFreeGameSettlement() {\r\n\t\treturn this.props.dialogInfo && this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT;\r\n\t}\r\n\r\n\tprotected useProps(key: keyof IProps | '_setDone', value: { pre: any, cur: any }) {\r\n\t\tif (this.node && this.node.isValid) {\r\n\t\t\tif (key === '_setDone') {\r\n\t\t\t\tthis.hideAll();\r\n\t\t\t\tif (this.props.dialogInfo) {\r\n\t\t\t\t\tthis.node.active = true;\r\n\t\t\t\t\tif (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_ENTRY) {\r\n\t\t\t\t\t\tthis.showFreeEntry();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.BIG_WIN) {\r\n\t\t\t\t\t\tthis.showBigWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.JACKPOT) {\r\n\t\t\t\t\t\tthis.showJackpot();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.MEGA_WIN) {\r\n\t\t\t\t\t\tthis.showMegaWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.SUPER_WIN) {\r\n\t\t\t\t\t\tthis.showSuperWin();\r\n\t\t\t\t\t} else if (this.props.dialogInfo.dialogType === DialogType.FREE_GAME_SETTLEMENT) {\r\n\t\t\t\t\t\tthis.showFreeSettlement();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.node.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate hideAll() {\r\n\t\tfor (const key in this.propertyNode) {\r\n\t\t\tthis.propertyNode[key].active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showFreeEntry() {\r\n\t\tthis.propertyNode.props_freeEntry.active = true;\r\n\t\tconst labelNode = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeEntry)\r\n\t\tlabelNode.getComponent(Label).string = this.props.dialogInfo.params[0];\r\n\r\n\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\tif (isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showBigWin() {\r\n\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_bigWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_bigWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_bigWin.getChildByName(\"sk_bw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showJackpot() {\r\n\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_jackpot.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_jackpot)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate showMegaWin() {\r\n\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_megaWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_megaWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// this.detryCloseWindow();\r\n\t\t});\r\n\t\tthis.propertyNode.props_megaWin.getChildByName(\"sk_bw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showSuperWin() {\r\n\t\tGxfcV2_Audio.playOneShot(SoundPathDefine.get_coin);\r\n\t\tthis.propertyNode.props_superWin.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"number\", this.propertyNode.props_superWin)\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\tthis.detryCloseWindow();\r\n\t\t});\r\n\r\n\t\tthis.propertyNode.props_superWin.getChildByName(\"sk_bw\").getComponent(sp.Skeleton).setCompleteListener(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate showFreeSettlement() {\r\n\t\tthis.propertyNode.props_freeSettlement.active = true;\r\n\t\tconst numberLabel = getNodeByNameDeep(\"Label_Number\", this.propertyNode.props_freeSettlement)\r\n\t\t// new StepNumber(0, this.props.dialogInfo.params[0], (num) => {\r\n\t\t// \tnumberLabel.getComponent(Label).string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// }).start();\r\n\r\n\t\tthis.startStepNumber(numberLabel.getComponent(Label), 0, this.props.dialogInfo.params[0], () => {\r\n\t\t\t// 如果是自动模式，就等待关闭窗口\r\n\t\t\tif (this.node && this.node.isValid && isAuto(this.props.autoLauncherInfo, this.props.gameTypeInfo)) {\r\n\t\t\t\tthis.detryCloseWindow();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tprivate isAuto() {\r\n\t\t// 小游戏中都是自动\r\n\t\tif (this.props.gameTypeInfo.viewGameType !== GameType.MAIN && this.props.gameTypeInfo.viewGameType === this.props.gameTypeInfo.currGameType) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tconst autoLauncherInfo = this.props.autoLauncherInfo;\r\n\t\tif (autoLauncherInfo) {\r\n\t\t\tif (autoLauncherInfo.autoLauncherType !== AutoLauncherType.NONE) {\r\n\t\t\t\tif (autoLauncherInfo.totalCount === -99) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn autoLauncherInfo.leftCount > 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate startStepNumber(label: Label, start, end, done) {\r\n\t\tnew StepNumber(start, end, (num) => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t\t}\r\n\t\t}, () => this.node && this.node.isValid && done()).set(config.normalRollOption.numberRollerTime).start();\r\n\t\t// this.stepNumberV2.start(start, end, (num) => {\r\n\t\t// \tif (this.node && this.node.isValid) {\r\n\t\t// \t\tlabel.string = Number(num.toFixed(0)).formatAmountWithCommas();\r\n\t\t// \t}\r\n\t\t// }, () => this.node && this.node.isValid && done(), config.normalRollOption.numberRollerTime);\r\n\t}\r\n\r\n\tprivate detryCloseWindow() {\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tif (this.node && this.node.isValid) {\r\n\t\t\t\tthis.node.destroy();\r\n\t\t\t\tthis.events.onWindowCloseHandler(this.props.dialogInfo.dialogType);\r\n\t\t\t}\r\n\t\t}, config.normalRollOption.dialogWinShowTime)\r\n\t}\r\n\r\n\tprotected onDestroy(): void {\r\n\t\tGxfcV2_Audio.longStop();\r\n\t}\r\n\r\n\tprotected bindUI(): void {\r\n\t}\r\n\r\n\tupdate(deltaTime: number) {\r\n\r\n\t}\r\n}\r\n\r\n"]}