{"version":3,"sources":["file:///Users/geliang/web/dibai/hall/assets/script/subGame/phoenix/Slot/Component/phoenix_RulesPanel.ts"],"names":["_decorator","Node","tween","UIOpacity","UITransform","Vec3","phoenix_BaseComponent","AudioManager","SoundList","ccclass","property","phoenix_RulesPanel","showIndex","start","bindEvent","closeButton","on","EventType","TOUCH_END","hidePanel","con_x","showIndexMark","width","contentWrap","getComponent","TOUCH_START","e","getLocation","x","TOUCH_MOVE","t","children","position","length","forEach","child","index","to","y","getInstance","playSound","dragAndDropToTurnThePage","indexMark","item","i","active","bindUI","uiOpacity","node","opacity","mainPanel","setScale","scale","easing","call","destroy","update","deltaTime"],"mappings":"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","sourcesContent":["import {_decorator, color, Label, Node, tween, UIOpacity, UITransform, Vec3,} from 'cc';\r\nimport phoenix_BaseComponent from './phoenix_BaseComponent';\r\nimport {AudioManager, SoundList} from \"../Managr/AudioManager\";\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n@ccclass('phoenix_RulesPanel')\r\nexport class phoenix_RulesPanel extends phoenix_BaseComponent {\r\n    @property(Node)\r\n    closeButton: Node = null\r\n    @property(Node)\r\n    mainPanel: Node = null\r\n    @property(Node)\r\n    contentWrap: Node = null\r\n\r\n    @property(Node)\r\n    indexMark: Node = null\r\n    start() {\r\n\r\n    }\r\n\r\n    private showIndex: number = 0\r\n    protected bindEvent(): void {\r\n        this.closeButton.on(Node.EventType.TOUCH_END, () => {\r\n            this.hidePanel()\r\n        })\r\n        let con_x: number = 0\r\n        this.showIndexMark()\r\n        let width = this.contentWrap.getComponent(UITransform).width\r\n        this.contentWrap.on(Node.EventType.TOUCH_START, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n            con_x = e.getLocation().x\r\n        })\r\n        this.contentWrap.on(Node.EventType.TOUCH_MOVE, () => { })\r\n        this.contentWrap.on(Node.EventType.TOUCH_END, (e: { getLocation: () => { (): any; new(): any; x: number; }; }) => {\r\n            const t = e.getLocation().x - con_x\r\n            if (t < 0) {\r\n                //向左滑动\r\n                if (this.contentWrap.children[0].position.x <= -(this.contentWrap.children.length - 1) * width) {\r\n                    return\r\n                }\r\n                this.contentWrap.children.forEach((child, index) => {\r\n                    tween(child).to(0.1, { position: new Vec3(child.position.x - width, child.position.y) }).start()\r\n                })\r\n                this.showIndex++\r\n                AudioManager.getInstance().playSound(SoundList.dragAndDropToTurnThePage)\r\n            }\r\n            if (t > 0) {\r\n                //向右滑动\r\n                if (this.contentWrap.children[this.contentWrap.children.length - 1].position.x + 100 >= (this.contentWrap.children.length - 1) * width) {\r\n                    return\r\n                }\r\n                this.contentWrap.children.forEach((child, index) => {\r\n                    tween(child).to(0.1, { position: new Vec3(child.position.x + width, child.position.y) }).start()\r\n                })\r\n                this.showIndex--\r\n                AudioManager.getInstance().playSound(SoundList.dragAndDropToTurnThePage)\r\n            }\r\n            this.showIndexMark()\r\n        })\r\n    }\r\n\r\n    private showIndexMark() {\r\n        this.indexMark.children.forEach((item, i) => {\r\n            if (this.showIndex !== i) {\r\n                item.children[0].active = false\r\n            } else {\r\n                item.children[0].active = true\r\n            }\r\n        })\r\n    }\r\n\r\n    protected bindUI(): void {\r\n        const uiOpacity = this.node.getComponent(UIOpacity)\r\n        uiOpacity.opacity = 0;\r\n        this.mainPanel.setScale(0.8, 0.8)\r\n        tween(this.mainPanel).to(0.4, { scale: new Vec3(1, 1, 1) }, { easing: \"backOut\" }).start()\r\n        tween(uiOpacity).to(0.4, { opacity: 255 }).call(() => { }).start()\r\n    }\r\n\r\n    public hidePanel() {\r\n        const uiOpacity = this.node.getComponent(UIOpacity)\r\n        tween(this.node).to(0.2, { scale: new Vec3(0, 0, 0) }).start()\r\n        tween(uiOpacity).to(0.2, { opacity: 0 }).call(() => {\r\n            this.node.destroy()\r\n        }).start()\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n"]}